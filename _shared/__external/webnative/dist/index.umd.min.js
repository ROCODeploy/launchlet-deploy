!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).webnative={})}(this,(function(t){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,r)};function r(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}var n=function(){return(n=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function i(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]])}return r}function o(t,e,r,n){return new(r||(r=Promise))((function(i,o){function s(t){try{a(n.next(t))}catch(t){o(t)}}function u(t){try{a(n.throw(t))}catch(t){o(t)}}function a(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,u)}a((n=n.apply(t,e||[])).next())}))}function s(t,e){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}}function u(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function a(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;var n=Array(t),i=0;for(e=0;e<r;e++)for(var o=arguments[e],s=0,u=o.length;s<u;s++,i++)n[i]=o[s];return n}function c(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,r=t[Symbol.asyncIterator];return r?r.call(t):(t=u(t),e={},n("next"),n("throw"),n("return"),e[Symbol.asyncIterator]=function(){return this},e);function n(r){e[r]=t[r]&&function(e){return new Promise((function(n,i){(function(t,e,r,n){Promise.resolve(n).then((function(e){t({value:e,done:r})}),e)})(n,i,(e=t[r](e)).done,e.value)}))}}}var f="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function l(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function h(t){if(t.__esModule)return t;var e=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(t).forEach((function(r){var n=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(e,r,n.get?n:{enumerable:!0,get:function(){return t[r]}})})),e}function p(t){var e={exports:{}};return t(e,e.exports),e.exports}function d(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets option of @rollup/plugin-commonjs appropriately for this require call to behave properly.')}
/*!
        localForage -- Offline Storage, Improved
        Version 1.9.0
        https://localforage.github.io/localForage
        (c) 2013-2017 Mozilla, Apache License 2.0
    */var y=p((function(t,e){t.exports=function t(e,r,n){function i(s,u){if(!r[s]){if(!e[s]){if(!u&&d)return d(s);if(o)return o(s,!0);var a=new Error("Cannot find module '"+s+"'");throw a.code="MODULE_NOT_FOUND",a}var c=r[s]={exports:{}};e[s][0].call(c.exports,(function(t){var r=e[s][1][t];return i(r||t)}),c,c.exports,t,e,r,n)}return r[s].exports}for(var o=d,s=0;s<n.length;s++)i(n[s]);return i}({1:[function(t,e,r){(function(t){var r,n,i=t.MutationObserver||t.WebKitMutationObserver;if(i){var o=0,s=new i(f),u=t.document.createTextNode("");s.observe(u,{characterData:!0}),r=function(){u.data=o=++o%2}}else if(t.setImmediate||void 0===t.MessageChannel)r="document"in t&&"onreadystatechange"in t.document.createElement("script")?function(){var e=t.document.createElement("script");e.onreadystatechange=function(){f(),e.onreadystatechange=null,e.parentNode.removeChild(e),e=null},t.document.documentElement.appendChild(e)}:function(){setTimeout(f,0)};else{var a=new t.MessageChannel;a.port1.onmessage=f,r=function(){a.port2.postMessage(0)}}var c=[];function f(){var t,e;n=!0;for(var r=c.length;r;){for(e=c,c=[],t=-1;++t<r;)e[t]();r=c.length}n=!1}function l(t){1!==c.push(t)||n||r()}e.exports=l}).call(this,void 0!==f?f:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(t,e,r){var n=t(1);function i(){}var o={},s=["REJECTED"],u=["FULFILLED"],a=["PENDING"];function c(t){if("function"!=typeof t)throw new TypeError("resolver must be a function");this.state=a,this.queue=[],this.outcome=void 0,t!==i&&p(this,t)}function f(t,e,r){this.promise=t,"function"==typeof e&&(this.onFulfilled=e,this.callFulfilled=this.otherCallFulfilled),"function"==typeof r&&(this.onRejected=r,this.callRejected=this.otherCallRejected)}function l(t,e,r){n((function(){var n;try{n=e(r)}catch(e){return o.reject(t,e)}n===t?o.reject(t,new TypeError("Cannot resolve promise with itself")):o.resolve(t,n)}))}function h(t){var e=t&&t.then;if(t&&("object"==typeof t||"function"==typeof t)&&"function"==typeof e)return function(){e.apply(t,arguments)}}function p(t,e){var r=!1;function n(e){r||(r=!0,o.reject(t,e))}function i(e){r||(r=!0,o.resolve(t,e))}function s(){e(i,n)}var u=d(s);"error"===u.status&&n(u.value)}function d(t,e){var r={};try{r.value=t(e),r.status="success"}catch(t){r.status="error",r.value=t}return r}function y(t){return t instanceof this?t:o.resolve(new this(i),t)}function v(t){var e=new this(i);return o.reject(e,t)}function g(t){var e=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var r=t.length,n=!1;if(!r)return this.resolve([]);for(var s=new Array(r),u=0,a=-1,c=new this(i);++a<r;)f(t[a],a);return c;function f(t,i){function a(t){s[i]=t,++u!==r||n||(n=!0,o.resolve(c,s))}e.resolve(t).then(a,(function(t){n||(n=!0,o.reject(c,t))}))}}function m(t){var e=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var r=t.length,n=!1;if(!r)return this.resolve([]);for(var s=-1,u=new this(i);++s<r;)a(t[s]);return u;function a(t){e.resolve(t).then((function(t){n||(n=!0,o.resolve(u,t))}),(function(t){n||(n=!0,o.reject(u,t))}))}}e.exports=c,c.prototype.catch=function(t){return this.then(null,t)},c.prototype.then=function(t,e){if("function"!=typeof t&&this.state===u||"function"!=typeof e&&this.state===s)return this;var r=new this.constructor(i);return this.state!==a?l(r,this.state===u?t:e,this.outcome):this.queue.push(new f(r,t,e)),r},f.prototype.callFulfilled=function(t){o.resolve(this.promise,t)},f.prototype.otherCallFulfilled=function(t){l(this.promise,this.onFulfilled,t)},f.prototype.callRejected=function(t){o.reject(this.promise,t)},f.prototype.otherCallRejected=function(t){l(this.promise,this.onRejected,t)},o.resolve=function(t,e){var r=d(h,e);if("error"===r.status)return o.reject(t,r.value);var n=r.value;if(n)p(t,n);else{t.state=u,t.outcome=e;for(var i=-1,s=t.queue.length;++i<s;)t.queue[i].callFulfilled(e)}return t},o.reject=function(t,e){t.state=s,t.outcome=e;for(var r=-1,n=t.queue.length;++r<n;)t.queue[r].callRejected(e);return t},c.resolve=y,c.reject=v,c.all=g,c.race=m},{1:1}],3:[function(t,e,r){(function(e){"function"!=typeof e.Promise&&(e.Promise=t(2))}).call(this,void 0!==f?f:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{2:2}],4:[function(t,e,r){var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(){try{if("undefined"!=typeof indexedDB)return indexedDB;if("undefined"!=typeof webkitIndexedDB)return webkitIndexedDB;if("undefined"!=typeof mozIndexedDB)return mozIndexedDB;if("undefined"!=typeof OIndexedDB)return OIndexedDB;if("undefined"!=typeof msIndexedDB)return msIndexedDB}catch(t){return}}var s=o();function u(){try{if(!s||!s.open)return!1;var t="undefined"!=typeof openDatabase&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),e="function"==typeof fetch&&-1!==fetch.toString().indexOf("[native code");return(!t||e)&&"undefined"!=typeof indexedDB&&"undefined"!=typeof IDBKeyRange}catch(t){return!1}}function a(t,e){t=t||[],e=e||{};try{return new Blob(t,e)}catch(i){if("TypeError"!==i.name)throw i;for(var r=new("undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),n=0;n<t.length;n+=1)r.append(t[n]);return r.getBlob(e.type)}}"undefined"==typeof Promise&&t(3);var c=Promise;function f(t,e){e&&t.then((function(t){e(null,t)}),(function(t){e(t)}))}function l(t,e,r){"function"==typeof e&&t.then(e),"function"==typeof r&&t.catch(r)}function h(t){return"string"!=typeof t&&(console.warn(t+" used as a key, but it is not a string."),t=String(t)),t}function p(){if(arguments.length&&"function"==typeof arguments[arguments.length-1])return arguments[arguments.length-1]}var d="local-forage-detect-blob-support",y=void 0,v={},g=Object.prototype.toString,m="readonly",b="readwrite";function _(t){for(var e=t.length,r=new ArrayBuffer(e),n=new Uint8Array(r),i=0;i<e;i++)n[i]=t.charCodeAt(i);return r}function w(t){return new c((function(e){var r=t.transaction(d,b),n=a([""]);r.objectStore(d).put(n,"key"),r.onabort=function(t){t.preventDefault(),t.stopPropagation(),e(!1)},r.oncomplete=function(){var t=navigator.userAgent.match(/Chrome\/(\d+)/),r=navigator.userAgent.match(/Edge\//);e(r||!t||parseInt(t[1],10)>=43)}})).catch((function(){return!1}))}function k(t){return"boolean"==typeof y?c.resolve(y):w(t).then((function(t){return y=t}))}function E(t){var e=v[t.name],r={};r.promise=new c((function(t,e){r.resolve=t,r.reject=e})),e.deferredOperations.push(r),e.dbReady?e.dbReady=e.dbReady.then((function(){return r.promise})):e.dbReady=r.promise}function A(t){var e=v[t.name].deferredOperations.pop();if(e)return e.resolve(),e.promise}function S(t,e){var r=v[t.name].deferredOperations.pop();if(r)return r.reject(e),r.promise}function I(t,e){return new c((function(r,n){if(v[t.name]=v[t.name]||L(),t.db){if(!e)return r(t.db);E(t),t.db.close()}var i=[t.name];e&&i.push(t.version);var o=s.open.apply(s,i);e&&(o.onupgradeneeded=function(e){var r=o.result;try{r.createObjectStore(t.storeName),e.oldVersion<=1&&r.createObjectStore(d)}catch(r){if("ConstraintError"!==r.name)throw r;console.warn('The database "'+t.name+'" has been upgraded from version '+e.oldVersion+" to version "+e.newVersion+', but the storage "'+t.storeName+'" already exists.')}}),o.onerror=function(t){t.preventDefault(),n(o.error)},o.onsuccess=function(){r(o.result),A(t)}}))}function x(t){return I(t,!1)}function B(t){return I(t,!0)}function T(t,e){if(!t.db)return!0;var r=!t.db.objectStoreNames.contains(t.storeName),n=t.version<t.db.version,i=t.version>t.db.version;if(n&&(t.version!==e&&console.warn('The database "'+t.name+"\" can't be downgraded from version "+t.db.version+" to version "+t.version+"."),t.version=t.db.version),i||r){if(r){var o=t.db.version+1;o>t.version&&(t.version=o)}return!0}return!1}function O(t){return new c((function(e,r){var n=new FileReader;n.onerror=r,n.onloadend=function(r){var n=btoa(r.target.result||"");e({__local_forage_encoded_blob:!0,data:n,type:t.type})},n.readAsBinaryString(t)}))}function N(t){return a([_(atob(t.data))],{type:t.type})}function C(t){return t&&t.__local_forage_encoded_blob}function R(t){var e=this,r=e._initReady().then((function(){var t=v[e._dbInfo.name];if(t&&t.dbReady)return t.dbReady}));return l(r,t,t),r}function U(t){E(t);for(var e=v[t.name],r=e.forages,n=0;n<r.length;n++){var i=r[n];i._dbInfo.db&&(i._dbInfo.db.close(),i._dbInfo.db=null)}return t.db=null,x(t).then((function(e){return t.db=e,T(t)?B(t):e})).then((function(n){t.db=e.db=n;for(var i=0;i<r.length;i++)r[i]._dbInfo.db=n})).catch((function(e){throw S(t,e),e}))}function j(t,e,r,n){void 0===n&&(n=1);try{var i=t.db.transaction(t.storeName,e);r(null,i)}catch(i){if(n>0&&(!t.db||"InvalidStateError"===i.name||"NotFoundError"===i.name))return c.resolve().then((function(){if(!t.db||"NotFoundError"===i.name&&!t.db.objectStoreNames.contains(t.storeName)&&t.version<=t.db.version)return t.db&&(t.version=t.db.version+1),B(t)})).then((function(){return U(t).then((function(){j(t,e,r,n-1)}))})).catch(r);r(i)}}function L(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function P(t){var e=this,r={db:null};if(t)for(var n in t)r[n]=t[n];var i=v[r.name];i||(i=L(),v[r.name]=i),i.forages.push(e),e._initReady||(e._initReady=e.ready,e.ready=R);var o=[];function s(){return c.resolve()}for(var u=0;u<i.forages.length;u++){var a=i.forages[u];a!==e&&o.push(a._initReady().catch(s))}var f=i.forages.slice(0);return c.all(o).then((function(){return r.db=i.db,x(r)})).then((function(t){return r.db=t,T(r,e._defaultConfig.version)?B(r):t})).then((function(t){r.db=i.db=t,e._dbInfo=r;for(var n=0;n<f.length;n++){var o=f[n];o!==e&&(o._dbInfo.db=r.db,o._dbInfo.version=r.version)}}))}function D(t,e){var r=this;t=h(t);var n=new c((function(e,n){r.ready().then((function(){j(r._dbInfo,m,(function(i,o){if(i)return n(i);try{var s=o.objectStore(r._dbInfo.storeName).get(t);s.onsuccess=function(){var t=s.result;void 0===t&&(t=null),C(t)&&(t=N(t)),e(t)},s.onerror=function(){n(s.error)}}catch(t){n(t)}}))})).catch(n)}));return f(n,e),n}function M(t,e){var r=this,n=new c((function(e,n){r.ready().then((function(){j(r._dbInfo,m,(function(i,o){if(i)return n(i);try{var s=o.objectStore(r._dbInfo.storeName).openCursor(),u=1;s.onsuccess=function(){var r=s.result;if(r){var n=r.value;C(n)&&(n=N(n));var i=t(n,r.key,u++);void 0!==i?e(i):r.continue()}else e()},s.onerror=function(){n(s.error)}}catch(t){n(t)}}))})).catch(n)}));return f(n,e),n}function z(t,e,r){var n=this;t=h(t);var i=new c((function(r,i){var o;n.ready().then((function(){return o=n._dbInfo,"[object Blob]"===g.call(e)?k(o.db).then((function(t){return t?e:O(e)})):e})).then((function(e){j(n._dbInfo,b,(function(o,s){if(o)return i(o);try{var u=s.objectStore(n._dbInfo.storeName);null===e&&(e=void 0);var a=u.put(e,t);s.oncomplete=function(){void 0===e&&(e=null),r(e)},s.onabort=s.onerror=function(){var t=a.error?a.error:a.transaction.error;i(t)}}catch(t){i(t)}}))})).catch(i)}));return f(i,r),i}function F(t,e){var r=this;t=h(t);var n=new c((function(e,n){r.ready().then((function(){j(r._dbInfo,b,(function(i,o){if(i)return n(i);try{var s=o.objectStore(r._dbInfo.storeName).delete(t);o.oncomplete=function(){e()},o.onerror=function(){n(s.error)},o.onabort=function(){var t=s.error?s.error:s.transaction.error;n(t)}}catch(t){n(t)}}))})).catch(n)}));return f(n,e),n}function K(t){var e=this,r=new c((function(t,r){e.ready().then((function(){j(e._dbInfo,b,(function(n,i){if(n)return r(n);try{var o=i.objectStore(e._dbInfo.storeName).clear();i.oncomplete=function(){t()},i.onabort=i.onerror=function(){var t=o.error?o.error:o.transaction.error;r(t)}}catch(t){r(t)}}))})).catch(r)}));return f(r,t),r}function H(t){var e=this,r=new c((function(t,r){e.ready().then((function(){j(e._dbInfo,m,(function(n,i){if(n)return r(n);try{var o=i.objectStore(e._dbInfo.storeName).count();o.onsuccess=function(){t(o.result)},o.onerror=function(){r(o.error)}}catch(t){r(t)}}))})).catch(r)}));return f(r,t),r}function G(t,e){var r=this,n=new c((function(e,n){t<0?e(null):r.ready().then((function(){j(r._dbInfo,m,(function(i,o){if(i)return n(i);try{var s=o.objectStore(r._dbInfo.storeName),u=!1,a=s.openKeyCursor();a.onsuccess=function(){var r=a.result;r?0===t||u?e(r.key):(u=!0,r.advance(t)):e(null)},a.onerror=function(){n(a.error)}}catch(t){n(t)}}))})).catch(n)}));return f(n,e),n}function $(t){var e=this,r=new c((function(t,r){e.ready().then((function(){j(e._dbInfo,m,(function(n,i){if(n)return r(n);try{var o=i.objectStore(e._dbInfo.storeName).openKeyCursor(),s=[];o.onsuccess=function(){var e=o.result;e?(s.push(e.key),e.continue()):t(s)},o.onerror=function(){r(o.error)}}catch(t){r(t)}}))})).catch(r)}));return f(r,t),r}function W(t,e){e=p.apply(this,arguments);var r=this.config();(t="function"!=typeof t&&t||{}).name||(t.name=t.name||r.name,t.storeName=t.storeName||r.storeName);var n,i=this;if(t.name){var o=t.name===r.name&&i._dbInfo.db?c.resolve(i._dbInfo.db):x(t).then((function(e){var r=v[t.name],n=r.forages;r.db=e;for(var i=0;i<n.length;i++)n[i]._dbInfo.db=e;return e}));n=t.storeName?o.then((function(e){if(e.objectStoreNames.contains(t.storeName)){var r=e.version+1;E(t);var n=v[t.name],i=n.forages;e.close();for(var o=0;o<i.length;o++){var u=i[o];u._dbInfo.db=null,u._dbInfo.version=r}return new c((function(e,n){var i=s.open(t.name,r);i.onerror=function(t){i.result.close(),n(t)},i.onupgradeneeded=function(){i.result.deleteObjectStore(t.storeName)},i.onsuccess=function(){var t=i.result;t.close(),e(t)}})).then((function(t){n.db=t;for(var e=0;e<i.length;e++){var r=i[e];r._dbInfo.db=t,A(r._dbInfo)}})).catch((function(e){throw(S(t,e)||c.resolve()).catch((function(){})),e}))}})):o.then((function(e){E(t);var r=v[t.name],n=r.forages;e.close();for(var i=0;i<n.length;i++)n[i]._dbInfo.db=null;return new c((function(e,r){var n=s.deleteDatabase(t.name);n.onerror=n.onblocked=function(t){var e=n.result;e&&e.close(),r(t)},n.onsuccess=function(){var t=n.result;t&&t.close(),e(t)}})).then((function(t){r.db=t;for(var e=0;e<n.length;e++)A(n[e]._dbInfo)})).catch((function(e){throw(S(t,e)||c.resolve()).catch((function(){})),e}))}))}else n=c.reject("Invalid arguments");return f(n,e),n}var q={_driver:"asyncStorage",_initStorage:P,_support:u(),iterate:M,getItem:D,setItem:z,removeItem:F,clear:K,length:H,key:G,keys:$,dropInstance:W};function V(){return"function"==typeof openDatabase}var Y="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",J="~~local_forage_type~",Z=/^~~local_forage_type~([^~]+)~/,X="__lfsc__:",Q=X.length,tt="arbf",et="blob",rt="si08",nt="ui08",it="uic8",ot="si16",st="si32",ut="ur16",at="ui32",ct="fl32",ft="fl64",lt=Q+tt.length,ht=Object.prototype.toString;function pt(t){var e,r,n,i,o,s=.75*t.length,u=t.length,a=0;"="===t[t.length-1]&&(s--,"="===t[t.length-2]&&s--);var c=new ArrayBuffer(s),f=new Uint8Array(c);for(e=0;e<u;e+=4)r=Y.indexOf(t[e]),n=Y.indexOf(t[e+1]),i=Y.indexOf(t[e+2]),o=Y.indexOf(t[e+3]),f[a++]=r<<2|n>>4,f[a++]=(15&n)<<4|i>>2,f[a++]=(3&i)<<6|63&o;return c}function dt(t){var e,r=new Uint8Array(t),n="";for(e=0;e<r.length;e+=3)n+=Y[r[e]>>2],n+=Y[(3&r[e])<<4|r[e+1]>>4],n+=Y[(15&r[e+1])<<2|r[e+2]>>6],n+=Y[63&r[e+2]];return r.length%3==2?n=n.substring(0,n.length-1)+"=":r.length%3==1&&(n=n.substring(0,n.length-2)+"=="),n}function yt(t,e){var r="";if(t&&(r=ht.call(t)),t&&("[object ArrayBuffer]"===r||t.buffer&&"[object ArrayBuffer]"===ht.call(t.buffer))){var n,i=X;t instanceof ArrayBuffer?(n=t,i+=tt):(n=t.buffer,"[object Int8Array]"===r?i+=rt:"[object Uint8Array]"===r?i+=nt:"[object Uint8ClampedArray]"===r?i+=it:"[object Int16Array]"===r?i+=ot:"[object Uint16Array]"===r?i+=ut:"[object Int32Array]"===r?i+=st:"[object Uint32Array]"===r?i+=at:"[object Float32Array]"===r?i+=ct:"[object Float64Array]"===r?i+=ft:e(new Error("Failed to get type for BinaryArray"))),e(i+dt(n))}else if("[object Blob]"===r){var o=new FileReader;o.onload=function(){var r=J+t.type+"~"+dt(this.result);e(X+et+r)},o.readAsArrayBuffer(t)}else try{e(JSON.stringify(t))}catch(r){console.error("Couldn't convert value into a JSON string: ",t),e(null,r)}}function vt(t){if(t.substring(0,Q)!==X)return JSON.parse(t);var e,r=t.substring(lt),n=t.substring(Q,lt);if(n===et&&Z.test(r)){var i=r.match(Z);e=i[1],r=r.substring(i[0].length)}var o=pt(r);switch(n){case tt:return o;case et:return a([o],{type:e});case rt:return new Int8Array(o);case nt:return new Uint8Array(o);case it:return new Uint8ClampedArray(o);case ot:return new Int16Array(o);case ut:return new Uint16Array(o);case st:return new Int32Array(o);case at:return new Uint32Array(o);case ct:return new Float32Array(o);case ft:return new Float64Array(o);default:throw new Error("Unkown type: "+n)}}var gt={serialize:yt,deserialize:vt,stringToBuffer:pt,bufferToString:dt};function mt(t,e,r,n){t.executeSql("CREATE TABLE IF NOT EXISTS "+e.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],r,n)}function bt(t){var e=this,r={db:null};if(t)for(var n in t)r[n]="string"!=typeof t[n]?t[n].toString():t[n];var i=new c((function(t,n){try{r.db=openDatabase(r.name,String(r.version),r.description,r.size)}catch(t){return n(t)}r.db.transaction((function(i){mt(i,r,(function(){e._dbInfo=r,t()}),(function(t,e){n(e)}))}),n)}));return r.serializer=gt,i}function _t(t,e,r,n,i,o){t.executeSql(r,n,i,(function(t,s){s.code===s.SYNTAX_ERR?t.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[e.storeName],(function(t,u){u.rows.length?o(t,s):mt(t,e,(function(){t.executeSql(r,n,i,o)}),o)}),o):o(t,s)}),o)}function wt(t,e){var r=this;t=h(t);var n=new c((function(e,n){r.ready().then((function(){var i=r._dbInfo;i.db.transaction((function(r){_t(r,i,"SELECT * FROM "+i.storeName+" WHERE key = ? LIMIT 1",[t],(function(t,r){var n=r.rows.length?r.rows.item(0).value:null;n&&(n=i.serializer.deserialize(n)),e(n)}),(function(t,e){n(e)}))}))})).catch(n)}));return f(n,e),n}function kt(t,e){var r=this,n=new c((function(e,n){r.ready().then((function(){var i=r._dbInfo;i.db.transaction((function(r){_t(r,i,"SELECT * FROM "+i.storeName,[],(function(r,n){for(var o=n.rows,s=o.length,u=0;u<s;u++){var a=o.item(u),c=a.value;if(c&&(c=i.serializer.deserialize(c)),void 0!==(c=t(c,a.key,u+1)))return void e(c)}e()}),(function(t,e){n(e)}))}))})).catch(n)}));return f(n,e),n}function Et(t,e,r,n){var i=this;t=h(t);var o=new c((function(o,s){i.ready().then((function(){void 0===e&&(e=null);var u=e,a=i._dbInfo;a.serializer.serialize(e,(function(e,c){c?s(c):a.db.transaction((function(r){_t(r,a,"INSERT OR REPLACE INTO "+a.storeName+" (key, value) VALUES (?, ?)",[t,e],(function(){o(u)}),(function(t,e){s(e)}))}),(function(e){if(e.code===e.QUOTA_ERR){if(n>0)return void o(Et.apply(i,[t,u,r,n-1]));s(e)}}))}))})).catch(s)}));return f(o,r),o}function At(t,e,r){return Et.apply(this,[t,e,r,1])}function St(t,e){var r=this;t=h(t);var n=new c((function(e,n){r.ready().then((function(){var i=r._dbInfo;i.db.transaction((function(r){_t(r,i,"DELETE FROM "+i.storeName+" WHERE key = ?",[t],(function(){e()}),(function(t,e){n(e)}))}))})).catch(n)}));return f(n,e),n}function It(t){var e=this,r=new c((function(t,r){e.ready().then((function(){var n=e._dbInfo;n.db.transaction((function(e){_t(e,n,"DELETE FROM "+n.storeName,[],(function(){t()}),(function(t,e){r(e)}))}))})).catch(r)}));return f(r,t),r}function xt(t){var e=this,r=new c((function(t,r){e.ready().then((function(){var n=e._dbInfo;n.db.transaction((function(e){_t(e,n,"SELECT COUNT(key) as c FROM "+n.storeName,[],(function(e,r){var n=r.rows.item(0).c;t(n)}),(function(t,e){r(e)}))}))})).catch(r)}));return f(r,t),r}function Bt(t,e){var r=this,n=new c((function(e,n){r.ready().then((function(){var i=r._dbInfo;i.db.transaction((function(r){_t(r,i,"SELECT key FROM "+i.storeName+" WHERE id = ? LIMIT 1",[t+1],(function(t,r){var n=r.rows.length?r.rows.item(0).key:null;e(n)}),(function(t,e){n(e)}))}))})).catch(n)}));return f(n,e),n}function Tt(t){var e=this,r=new c((function(t,r){e.ready().then((function(){var n=e._dbInfo;n.db.transaction((function(e){_t(e,n,"SELECT key FROM "+n.storeName,[],(function(e,r){for(var n=[],i=0;i<r.rows.length;i++)n.push(r.rows.item(i).key);t(n)}),(function(t,e){r(e)}))}))})).catch(r)}));return f(r,t),r}function Ot(t){return new c((function(e,r){t.transaction((function(n){n.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],(function(r,n){for(var i=[],o=0;o<n.rows.length;o++)i.push(n.rows.item(o).name);e({db:t,storeNames:i})}),(function(t,e){r(e)}))}),(function(t){r(t)}))}))}function Nt(t,e){e=p.apply(this,arguments);var r=this.config();(t="function"!=typeof t&&t||{}).name||(t.name=t.name||r.name,t.storeName=t.storeName||r.storeName);var n,i=this;return f(n=t.name?new c((function(e){var n;n=t.name===r.name?i._dbInfo.db:openDatabase(t.name,"","",0),t.storeName?e({db:n,storeNames:[t.storeName]}):e(Ot(n))})).then((function(t){return new c((function(e,r){t.db.transaction((function(n){function i(t){return new c((function(e,r){n.executeSql("DROP TABLE IF EXISTS "+t,[],(function(){e()}),(function(t,e){r(e)}))}))}for(var o=[],s=0,u=t.storeNames.length;s<u;s++)o.push(i(t.storeNames[s]));c.all(o).then((function(){e()})).catch((function(t){r(t)}))}),(function(t){r(t)}))}))})):c.reject("Invalid arguments"),e),n}var Ct={_driver:"webSQLStorage",_initStorage:bt,_support:V(),iterate:kt,getItem:wt,setItem:At,removeItem:St,clear:It,length:xt,key:Bt,keys:Tt,dropInstance:Nt};function Rt(){try{return"undefined"!=typeof localStorage&&"setItem"in localStorage&&!!localStorage.setItem}catch(t){return!1}}function Ut(t,e){var r=t.name+"/";return t.storeName!==e.storeName&&(r+=t.storeName+"/"),r}function jt(){var t="_localforage_support_test";try{return localStorage.setItem(t,!0),localStorage.removeItem(t),!1}catch(t){return!0}}function Lt(){return!jt()||localStorage.length>0}function Pt(t){var e=this,r={};if(t)for(var n in t)r[n]=t[n];return r.keyPrefix=Ut(t,e._defaultConfig),Lt()?(e._dbInfo=r,r.serializer=gt,c.resolve()):c.reject()}function Dt(t){var e=this,r=e.ready().then((function(){for(var t=e._dbInfo.keyPrefix,r=localStorage.length-1;r>=0;r--){var n=localStorage.key(r);0===n.indexOf(t)&&localStorage.removeItem(n)}}));return f(r,t),r}function Mt(t,e){var r=this;t=h(t);var n=r.ready().then((function(){var e=r._dbInfo,n=localStorage.getItem(e.keyPrefix+t);return n&&(n=e.serializer.deserialize(n)),n}));return f(n,e),n}function zt(t,e){var r=this,n=r.ready().then((function(){for(var e=r._dbInfo,n=e.keyPrefix,i=n.length,o=localStorage.length,s=1,u=0;u<o;u++){var a=localStorage.key(u);if(0===a.indexOf(n)){var c=localStorage.getItem(a);if(c&&(c=e.serializer.deserialize(c)),void 0!==(c=t(c,a.substring(i),s++)))return c}}}));return f(n,e),n}function Ft(t,e){var r=this,n=r.ready().then((function(){var e,n=r._dbInfo;try{e=localStorage.key(t)}catch(t){e=null}return e&&(e=e.substring(n.keyPrefix.length)),e}));return f(n,e),n}function Kt(t){var e=this,r=e.ready().then((function(){for(var t=e._dbInfo,r=localStorage.length,n=[],i=0;i<r;i++){var o=localStorage.key(i);0===o.indexOf(t.keyPrefix)&&n.push(o.substring(t.keyPrefix.length))}return n}));return f(r,t),r}function Ht(t){var e=this.keys().then((function(t){return t.length}));return f(e,t),e}function Gt(t,e){var r=this;t=h(t);var n=r.ready().then((function(){var e=r._dbInfo;localStorage.removeItem(e.keyPrefix+t)}));return f(n,e),n}function $t(t,e,r){var n=this;t=h(t);var i=n.ready().then((function(){void 0===e&&(e=null);var r=e;return new c((function(i,o){var s=n._dbInfo;s.serializer.serialize(e,(function(e,n){if(n)o(n);else try{localStorage.setItem(s.keyPrefix+t,e),i(r)}catch(t){"QuotaExceededError"!==t.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==t.name||o(t),o(t)}}))}))}));return f(i,r),i}function Wt(t,e){if(e=p.apply(this,arguments),!(t="function"!=typeof t&&t||{}).name){var r=this.config();t.name=t.name||r.name,t.storeName=t.storeName||r.storeName}var n,i=this;return f(n=t.name?new c((function(e){t.storeName?e(Ut(t,i._defaultConfig)):e(t.name+"/")})).then((function(t){for(var e=localStorage.length-1;e>=0;e--){var r=localStorage.key(e);0===r.indexOf(t)&&localStorage.removeItem(r)}})):c.reject("Invalid arguments"),e),n}var qt={_driver:"localStorageWrapper",_initStorage:Pt,_support:Rt(),iterate:zt,getItem:Mt,setItem:$t,removeItem:Gt,clear:Dt,length:Ht,key:Ft,keys:Kt,dropInstance:Wt},Vt=function(t,e){return t===e||"number"==typeof t&&"number"==typeof e&&isNaN(t)&&isNaN(e)},Yt=function(t,e){for(var r=t.length,n=0;n<r;){if(Vt(t[n],e))return!0;n++}return!1},Jt=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},Zt={},Xt={},Qt={INDEXEDDB:q,WEBSQL:Ct,LOCALSTORAGE:qt},te=[Qt.INDEXEDDB._driver,Qt.WEBSQL._driver,Qt.LOCALSTORAGE._driver],ee=["dropInstance"],re=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(ee),ne={description:"",driver:te.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function ie(t,e){t[e]=function(){var r=arguments;return t.ready().then((function(){return t[e].apply(t,r)}))}}function oe(){for(var t=1;t<arguments.length;t++){var e=arguments[t];if(e)for(var r in e)e.hasOwnProperty(r)&&(Jt(e[r])?arguments[0][r]=e[r].slice():arguments[0][r]=e[r])}return arguments[0]}var se=new(function(){function t(e){for(var r in i(this,t),Qt)if(Qt.hasOwnProperty(r)){var n=Qt[r],o=n._driver;this[r]=o,Zt[o]||this.defineDriver(n)}this._defaultConfig=oe({},ne),this._config=oe({},this._defaultConfig,e),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch((function(){}))}return t.prototype.config=function(t){if("object"===(void 0===t?"undefined":n(t))){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var e in t){if("storeName"===e&&(t[e]=t[e].replace(/\W/g,"_")),"version"===e&&"number"!=typeof t[e])return new Error("Database version must be a number.");this._config[e]=t[e]}return!("driver"in t)||!t.driver||this.setDriver(this._config.driver)}return"string"==typeof t?this._config[t]:this._config},t.prototype.defineDriver=function(t,e,r){var n=new c((function(e,r){try{var n=t._driver,i=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!t._driver)return void r(i);for(var o=re.concat("_initStorage"),s=0,u=o.length;s<u;s++){var a=o[s];if((!Yt(ee,a)||t[a])&&"function"!=typeof t[a])return void r(i)}!function(){for(var e=function(t){return function(){var e=new Error("Method "+t+" is not implemented by the current driver"),r=c.reject(e);return f(r,arguments[arguments.length-1]),r}},r=0,n=ee.length;r<n;r++){var i=ee[r];t[i]||(t[i]=e(i))}}();var l=function(r){Zt[n]&&console.info("Redefining LocalForage driver: "+n),Zt[n]=t,Xt[n]=r,e()};"_support"in t?t._support&&"function"==typeof t._support?t._support().then(l,r):l(!!t._support):l(!0)}catch(t){r(t)}}));return l(n,e,r),n},t.prototype.driver=function(){return this._driver||null},t.prototype.getDriver=function(t,e,r){var n=Zt[t]?c.resolve(Zt[t]):c.reject(new Error("Driver not found."));return l(n,e,r),n},t.prototype.getSerializer=function(t){var e=c.resolve(gt);return l(e,t),e},t.prototype.ready=function(t){var e=this,r=e._driverSet.then((function(){return null===e._ready&&(e._ready=e._initDriver()),e._ready}));return l(r,t,t),r},t.prototype.setDriver=function(t,e,r){var n=this;Jt(t)||(t=[t]);var i=this._getSupportedDrivers(t);function o(){n._config.driver=n.driver()}function s(t){return n._extend(t),o(),n._ready=n._initStorage(n._config),n._ready}function u(t){return function(){var e=0;function r(){for(;e<t.length;){var i=t[e];return e++,n._dbInfo=null,n._ready=null,n.getDriver(i).then(s).catch(r)}o();var u=new Error("No available storage method found.");return n._driverSet=c.reject(u),n._driverSet}return r()}}var a=null!==this._driverSet?this._driverSet.catch((function(){return c.resolve()})):c.resolve();return this._driverSet=a.then((function(){var t=i[0];return n._dbInfo=null,n._ready=null,n.getDriver(t).then((function(t){n._driver=t._driver,o(),n._wrapLibraryMethodsWithReady(),n._initDriver=u(i)}))})).catch((function(){o();var t=new Error("No available storage method found.");return n._driverSet=c.reject(t),n._driverSet})),l(this._driverSet,e,r),this._driverSet},t.prototype.supports=function(t){return!!Xt[t]},t.prototype._extend=function(t){oe(this,t)},t.prototype._getSupportedDrivers=function(t){for(var e=[],r=0,n=t.length;r<n;r++){var i=t[r];this.supports(i)&&e.push(i)}return e},t.prototype._wrapLibraryMethodsWithReady=function(){for(var t=0,e=re.length;t<e;t++)ie(this,re[t])},t.prototype.createInstance=function(e){return new t(e)},t}());e.exports=se},{3:3}]},{},[4])(4)}));function v(t){return o(this,void 0,void 0,(function(){return s(this,(function(e){return[2,(r=[g(t),m(t)],new Promise((function(t,e){for(var n=0,i=r;n<i.length;n++)i[n].then(t,e)})))];var r}))}))}function g(t){return o(this,void 0,void 0,(function(){return s(this,(function(e){return[2,b("https://dns.google/resolve?name="+t+"&type=txt")]}))}))}function m(t){return b("https://cloudflare-dns.com/dns-query?name="+t+"&type=txt")}function b(t){return fetch(t,{headers:{accept:"application/dns-json"}}).then((function(t){return t.json()})).then((function(t){if(t.Answer){var e=t.Answer.map((function(t){return(t.data||"").replace(/^"+|"+$/g,"")}));return";"===e[0][3]?e.sort((function(t,e){return t.slice(0,4).localeCompare(e.slice(0,4))})).map((function(t){return t.slice(4)})).join(""):e.join("")}return null}))}function _(t){return o(this,void 0,void 0,(function(){var e;return s(this,(function(r){switch(r.label){case 0:return[4,v(t.startsWith("_dnslink.")?t:"_dnslink."+t)];case 1:return[2,(e=r.sent())&&!e.includes("/ipns/")?e.replace(/^dnslink=/,"").replace(/^\/ipfs\//,""):null]}}))}))}var w=Object.freeze({__proto__:null,lookupTxtRecord:v,googleLookup:g,cloudflareLookup:m,dnsOverHttps:b,lookupDnsLink:_}),k={debug:!1,endpoints:{api:"https://runfission.com",lobby:"https://auth.fission.codes",user:"fission.name"}},E={did:null,host:null,lastFetched:0};function A(){return o(this,void 0,void 0,(function(){var t,e,r;return s(this,(function(n){switch(n.label){case 0:return t=k.endpoints.api.replace(/^https?:\/\//,"").replace(/\/$/,""),e=Date.now(),E.host!==t||E.lastFetched+108e5<=e?(r=E,[4,v("_did."+t)]):[3,2];case 1:r.did=n.sent(),E.host=t,E.lastFetched=e,n.label=2;case 2:if(!E.did)throw new Error("Couldn't get the Fission API DID");return[2,E.did]}}))}))}for(var S=Object.freeze({__proto__:null,did:A}),I=function(t,e){var r=new Uint8Array(t),n=new Uint8Array(e);if(r.length!==n.length)return!1;for(var i=0;i<r.length;i++)if(r[i]!==n[i])return!1;return!0},x=Object.freeze({__proto__:null,equal:I}),B=function(t){var e=P(t),r=e[0],n=e[1];return 3*(r+n)/4-n},T=function(t){var e,r,n=P(t),i=n[0],o=n[1],s=new R(function(t,e,r){return 3*(e+r)/4-r}(0,i,o)),u=0,a=o>0?i-4:i;for(r=0;r<a;r+=4)e=C[t.charCodeAt(r)]<<18|C[t.charCodeAt(r+1)]<<12|C[t.charCodeAt(r+2)]<<6|C[t.charCodeAt(r+3)],s[u++]=e>>16&255,s[u++]=e>>8&255,s[u++]=255&e;2===o&&(e=C[t.charCodeAt(r)]<<2|C[t.charCodeAt(r+1)]>>4,s[u++]=255&e);1===o&&(e=C[t.charCodeAt(r)]<<10|C[t.charCodeAt(r+1)]<<4|C[t.charCodeAt(r+2)]>>2,s[u++]=e>>8&255,s[u++]=255&e);return s},O=function(t){for(var e,r=t.length,n=r%3,i=[],o=16383,s=0,u=r-n;s<u;s+=o)i.push(D(t,s,s+o>u?u:s+o));1===n?(e=t[r-1],i.push(N[e>>2]+N[e<<4&63]+"==")):2===n&&(e=(t[r-2]<<8)+t[r-1],i.push(N[e>>10]+N[e>>4&63]+N[e<<2&63]+"="));return i.join("")},N=[],C=[],R="undefined"!=typeof Uint8Array?Uint8Array:Array,U="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",j=0,L=U.length;j<L;++j)N[j]=U[j],C[U.charCodeAt(j)]=j;function P(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");return-1===r&&(r=e),[r,r===e?0:4-r%4]}function D(t,e,r){for(var n,i,o=[],s=e;s<r;s+=3)n=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(255&t[s+2]),o.push(N[(i=n)>>18&63]+N[i>>12&63]+N[i>>6&63]+N[63&i]);return o.join("")}C["-".charCodeAt(0)]=62,C["_".charCodeAt(0)]=63;var M={byteLength:B,toByteArray:T,fromByteArray:O},z=function(t,e,r,n,i){var o,s,u=8*i-n-1,a=(1<<u)-1,c=a>>1,f=-7,l=r?i-1:0,h=r?-1:1,p=t[e+l];for(l+=h,o=p&(1<<-f)-1,p>>=-f,f+=u;f>0;o=256*o+t[e+l],l+=h,f-=8);for(s=o&(1<<-f)-1,o>>=-f,f+=n;f>0;s=256*s+t[e+l],l+=h,f-=8);if(0===o)o=1-c;else{if(o===a)return s?NaN:1/0*(p?-1:1);s+=Math.pow(2,n),o-=c}return(p?-1:1)*s*Math.pow(2,o-n)},F=function(t,e,r,n,i,o){var s,u,a,c=8*o-i-1,f=(1<<c)-1,l=f>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:o-1,d=n?1:-1,y=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(u=isNaN(e)?1:0,s=f):(s=Math.floor(Math.log(e)/Math.LN2),e*(a=Math.pow(2,-s))<1&&(s--,a*=2),(e+=s+l>=1?h/a:h*Math.pow(2,1-l))*a>=2&&(s++,a/=2),s+l>=f?(u=0,s=f):s+l>=1?(u=(e*a-1)*Math.pow(2,i),s+=l):(u=e*Math.pow(2,l-1)*Math.pow(2,i),s=0));i>=8;t[r+p]=255&u,p+=d,u/=256,i-=8);for(s=s<<i|u,c+=i;c>0;t[r+p]=255&s,p+=d,s/=256,c-=8);t[r+p-d]|=128*y},K=p((function(t,e){const r="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=o,e.SlowBuffer=function(t){+t!=t&&(t=0);return o.alloc(+t)},e.INSPECT_MAX_BYTES=50;const n=2147483647;function i(t){if(t>n)throw new RangeError('The value "'+t+'" is invalid for option "size"');const e=new Uint8Array(t);return Object.setPrototypeOf(e,o.prototype),e}function o(t,e,r){if("number"==typeof t){if("string"==typeof e)throw new TypeError('The "string" argument must be of type string. Received type number');return a(t)}return s(t,e,r)}function s(t,e,r){if("string"==typeof t)return function(t,e){"string"==typeof e&&""!==e||(e="utf8");if(!o.isEncoding(e))throw new TypeError("Unknown encoding: "+e);const r=0|h(t,e);let n=i(r);const s=n.write(t,e);s!==r&&(n=n.slice(0,s));return n}(t,e);if(ArrayBuffer.isView(t))return function(t){if(Y(t,Uint8Array)){const e=new Uint8Array(t);return f(e.buffer,e.byteOffset,e.byteLength)}return c(t)}(t);if(null==t)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(Y(t,ArrayBuffer)||t&&Y(t.buffer,ArrayBuffer))return f(t,e,r);if("undefined"!=typeof SharedArrayBuffer&&(Y(t,SharedArrayBuffer)||t&&Y(t.buffer,SharedArrayBuffer)))return f(t,e,r);if("number"==typeof t)throw new TypeError('The "value" argument must not be of type number. Received type number');const n=t.valueOf&&t.valueOf();if(null!=n&&n!==t)return o.from(n,e,r);const s=function(t){if(o.isBuffer(t)){const e=0|l(t.length),r=i(e);return 0===r.length||t.copy(r,0,0,e),r}if(void 0!==t.length)return"number"!=typeof t.length||J(t.length)?i(0):c(t);if("Buffer"===t.type&&Array.isArray(t.data))return c(t.data)}(t);if(s)return s;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof t[Symbol.toPrimitive])return o.from(t[Symbol.toPrimitive]("string"),e,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}function u(t){if("number"!=typeof t)throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function a(t){return u(t),i(t<0?0:0|l(t))}function c(t){const e=t.length<0?0:0|l(t.length),r=i(e);for(let n=0;n<e;n+=1)r[n]=255&t[n];return r}function f(t,e,r){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(r||0))throw new RangeError('"length" is outside of buffer bounds');let n;return n=void 0===e&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,e):new Uint8Array(t,e,r),Object.setPrototypeOf(n,o.prototype),n}function l(t){if(t>=n)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+n.toString(16)+" bytes");return 0|t}function h(t,e){if(o.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||Y(t,ArrayBuffer))return t.byteLength;if("string"!=typeof t)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);const r=t.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;let i=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return W(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return q(t).length;default:if(i)return n?-1:W(t).length;e=(""+e).toLowerCase(),i=!0}}function p(t,e,r){let n=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return x(this,e,r);case"utf8":case"utf-8":return E(this,e,r);case"ascii":return S(this,e,r);case"latin1":case"binary":return I(this,e,r);case"base64":return k(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return B(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function d(t,e,r){const n=t[e];t[e]=t[r],t[r]=n}function y(t,e,r,n,i){if(0===t.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),J(r=+r)&&(r=i?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(i)return-1;r=t.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof e&&(e=o.from(e,n)),o.isBuffer(e))return 0===e.length?-1:v(t,e,r,n,i);if("number"==typeof e)return e&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):v(t,[e],r,n,i);throw new TypeError("val must be string, number or Buffer")}function v(t,e,r,n,i){let o,s=1,u=t.length,a=e.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;s=2,u/=2,a/=2,r/=2}function c(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}if(i){let n=-1;for(o=r;o<u;o++)if(c(t,o)===c(e,-1===n?0:o-n)){if(-1===n&&(n=o),o-n+1===a)return n*s}else-1!==n&&(o-=o-n),n=-1}else for(r+a>u&&(r=u-a),o=r;o>=0;o--){let r=!0;for(let n=0;n<a;n++)if(c(t,o+n)!==c(e,n)){r=!1;break}if(r)return o}return-1}function g(t,e,r,n){r=Number(r)||0;const i=t.length-r;n?(n=Number(n))>i&&(n=i):n=i;const o=e.length;let s;for(n>o/2&&(n=o/2),s=0;s<n;++s){const n=parseInt(e.substr(2*s,2),16);if(J(n))return s;t[r+s]=n}return s}function m(t,e,r,n){return V(W(e,t.length-r),t,r,n)}function b(t,e,r,n){return V(function(t){const e=[];for(let r=0;r<t.length;++r)e.push(255&t.charCodeAt(r));return e}(e),t,r,n)}function _(t,e,r,n){return V(q(e),t,r,n)}function w(t,e,r,n){return V(function(t,e){let r,n,i;const o=[];for(let s=0;s<t.length&&!((e-=2)<0);++s)r=t.charCodeAt(s),n=r>>8,i=r%256,o.push(i),o.push(n);return o}(e,t.length-r),t,r,n)}function k(t,e,r){return 0===e&&r===t.length?M.fromByteArray(t):M.fromByteArray(t.slice(e,r))}function E(t,e,r){r=Math.min(t.length,r);const n=[];let i=e;for(;i<r;){const e=t[i];let o=null,s=e>239?4:e>223?3:e>191?2:1;if(i+s<=r){let r,n,u,a;switch(s){case 1:e<128&&(o=e);break;case 2:r=t[i+1],128==(192&r)&&(a=(31&e)<<6|63&r,a>127&&(o=a));break;case 3:r=t[i+1],n=t[i+2],128==(192&r)&&128==(192&n)&&(a=(15&e)<<12|(63&r)<<6|63&n,a>2047&&(a<55296||a>57343)&&(o=a));break;case 4:r=t[i+1],n=t[i+2],u=t[i+3],128==(192&r)&&128==(192&n)&&128==(192&u)&&(a=(15&e)<<18|(63&r)<<12|(63&n)<<6|63&u,a>65535&&a<1114112&&(o=a))}}null===o?(o=65533,s=1):o>65535&&(o-=65536,n.push(o>>>10&1023|55296),o=56320|1023&o),n.push(o),i+=s}return function(t){const e=t.length;if(e<=A)return String.fromCharCode.apply(String,t);let r="",n=0;for(;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=A));return r}(n)}e.kMaxLength=n,o.TYPED_ARRAY_SUPPORT=function(){try{const t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),42===t.foo()}catch(t){return!1}}(),o.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(o.prototype,"parent",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.buffer}}),Object.defineProperty(o.prototype,"offset",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.byteOffset}}),o.poolSize=8192,o.from=function(t,e,r){return s(t,e,r)},Object.setPrototypeOf(o.prototype,Uint8Array.prototype),Object.setPrototypeOf(o,Uint8Array),o.alloc=function(t,e,r){return function(t,e,r){return u(t),t<=0?i(t):void 0!==e?"string"==typeof r?i(t).fill(e,r):i(t).fill(e):i(t)}(t,e,r)},o.allocUnsafe=function(t){return a(t)},o.allocUnsafeSlow=function(t){return a(t)},o.isBuffer=function(t){return null!=t&&!0===t._isBuffer&&t!==o.prototype},o.compare=function(t,e){if(Y(t,Uint8Array)&&(t=o.from(t,t.offset,t.byteLength)),Y(e,Uint8Array)&&(e=o.from(e,e.offset,e.byteLength)),!o.isBuffer(t)||!o.isBuffer(e))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;let r=t.length,n=e.length;for(let i=0,o=Math.min(r,n);i<o;++i)if(t[i]!==e[i]){r=t[i],n=e[i];break}return r<n?-1:n<r?1:0},o.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return o.alloc(0);let r;if(void 0===e)for(e=0,r=0;r<t.length;++r)e+=t[r].length;const n=o.allocUnsafe(e);let i=0;for(r=0;r<t.length;++r){let e=t[r];if(Y(e,Uint8Array))i+e.length>n.length?(o.isBuffer(e)||(e=o.from(e)),e.copy(n,i)):Uint8Array.prototype.set.call(n,e,i);else{if(!o.isBuffer(e))throw new TypeError('"list" argument must be an Array of Buffers');e.copy(n,i)}i+=e.length}return n},o.byteLength=h,o.prototype._isBuffer=!0,o.prototype.swap16=function(){const t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let e=0;e<t;e+=2)d(this,e,e+1);return this},o.prototype.swap32=function(){const t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let e=0;e<t;e+=4)d(this,e,e+3),d(this,e+1,e+2);return this},o.prototype.swap64=function(){const t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let e=0;e<t;e+=8)d(this,e,e+7),d(this,e+1,e+6),d(this,e+2,e+5),d(this,e+3,e+4);return this},o.prototype.toString=function(){const t=this.length;return 0===t?"":0===arguments.length?E(this,0,t):p.apply(this,arguments)},o.prototype.toLocaleString=o.prototype.toString,o.prototype.equals=function(t){if(!o.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===o.compare(this,t)},o.prototype.inspect=function(){let t="";const r=e.INSPECT_MAX_BYTES;return t=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(t+=" ... "),"<Buffer "+t+">"},r&&(o.prototype[r]=o.prototype.inspect),o.prototype.compare=function(t,e,r,n,i){if(Y(t,Uint8Array)&&(t=o.from(t,t.offset,t.byteLength)),!o.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(void 0===e&&(e=0),void 0===r&&(r=t?t.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),e<0||r>t.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&e>=r)return 0;if(n>=i)return-1;if(e>=r)return 1;if(this===t)return 0;let s=(i>>>=0)-(n>>>=0),u=(r>>>=0)-(e>>>=0);const a=Math.min(s,u),c=this.slice(n,i),f=t.slice(e,r);for(let t=0;t<a;++t)if(c[t]!==f[t]){s=c[t],u=f[t];break}return s<u?-1:u<s?1:0},o.prototype.includes=function(t,e,r){return-1!==this.indexOf(t,e,r)},o.prototype.indexOf=function(t,e,r){return y(this,t,e,r,!0)},o.prototype.lastIndexOf=function(t,e,r){return y(this,t,e,r,!1)},o.prototype.write=function(t,e,r,n){if(void 0===e)n="utf8",r=this.length,e=0;else if(void 0===r&&"string"==typeof e)n=e,r=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}const i=this.length-e;if((void 0===r||r>i)&&(r=i),t.length>0&&(r<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");let o=!1;for(;;)switch(n){case"hex":return g(this,t,e,r);case"utf8":case"utf-8":return m(this,t,e,r);case"ascii":case"latin1":case"binary":return b(this,t,e,r);case"base64":return _(this,t,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return w(this,t,e,r);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const A=4096;function S(t,e,r){let n="";r=Math.min(t.length,r);for(let i=e;i<r;++i)n+=String.fromCharCode(127&t[i]);return n}function I(t,e,r){let n="";r=Math.min(t.length,r);for(let i=e;i<r;++i)n+=String.fromCharCode(t[i]);return n}function x(t,e,r){const n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);let i="";for(let n=e;n<r;++n)i+=Z[t[n]];return i}function B(t,e,r){const n=t.slice(e,r);let i="";for(let t=0;t<n.length-1;t+=2)i+=String.fromCharCode(n[t]+256*n[t+1]);return i}function T(t,e,r){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}function O(t,e,r,n,i,s){if(!o.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<s)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}function N(t,e,r,n,i){K(e,n,i,t,r,7);let o=Number(e&BigInt(4294967295));t[r++]=o,o>>=8,t[r++]=o,o>>=8,t[r++]=o,o>>=8,t[r++]=o;let s=Number(e>>BigInt(32)&BigInt(4294967295));return t[r++]=s,s>>=8,t[r++]=s,s>>=8,t[r++]=s,s>>=8,t[r++]=s,r}function C(t,e,r,n,i){K(e,n,i,t,r,7);let o=Number(e&BigInt(4294967295));t[r+7]=o,o>>=8,t[r+6]=o,o>>=8,t[r+5]=o,o>>=8,t[r+4]=o;let s=Number(e>>BigInt(32)&BigInt(4294967295));return t[r+3]=s,s>>=8,t[r+2]=s,s>>=8,t[r+1]=s,s>>=8,t[r]=s,r+8}function R(t,e,r,n,i,o){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function U(t,e,r,n,i){return e=+e,r>>>=0,i||R(t,0,r,4),F(t,e,r,n,23,4),r+4}function j(t,e,r,n,i){return e=+e,r>>>=0,i||R(t,0,r,8),F(t,e,r,n,52,8),r+8}o.prototype.slice=function(t,e){const r=this.length;(t=~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),(e=void 0===e?r:~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t);const n=this.subarray(t,e);return Object.setPrototypeOf(n,o.prototype),n},o.prototype.readUintLE=o.prototype.readUIntLE=function(t,e,r){t>>>=0,e>>>=0,r||T(t,e,this.length);let n=this[t],i=1,o=0;for(;++o<e&&(i*=256);)n+=this[t+o]*i;return n},o.prototype.readUintBE=o.prototype.readUIntBE=function(t,e,r){t>>>=0,e>>>=0,r||T(t,e,this.length);let n=this[t+--e],i=1;for(;e>0&&(i*=256);)n+=this[t+--e]*i;return n},o.prototype.readUint8=o.prototype.readUInt8=function(t,e){return t>>>=0,e||T(t,1,this.length),this[t]},o.prototype.readUint16LE=o.prototype.readUInt16LE=function(t,e){return t>>>=0,e||T(t,2,this.length),this[t]|this[t+1]<<8},o.prototype.readUint16BE=o.prototype.readUInt16BE=function(t,e){return t>>>=0,e||T(t,2,this.length),this[t]<<8|this[t+1]},o.prototype.readUint32LE=o.prototype.readUInt32LE=function(t,e){return t>>>=0,e||T(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},o.prototype.readUint32BE=o.prototype.readUInt32BE=function(t,e){return t>>>=0,e||T(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},o.prototype.readBigUInt64LE=X((function(t){H(t>>>=0,"offset");const e=this[t],r=this[t+7];void 0!==e&&void 0!==r||G(t,this.length-8);const n=e+256*this[++t]+65536*this[++t]+this[++t]*2**24,i=this[++t]+256*this[++t]+65536*this[++t]+r*2**24;return BigInt(n)+(BigInt(i)<<BigInt(32))})),o.prototype.readBigUInt64BE=X((function(t){H(t>>>=0,"offset");const e=this[t],r=this[t+7];void 0!==e&&void 0!==r||G(t,this.length-8);const n=e*2**24+65536*this[++t]+256*this[++t]+this[++t],i=this[++t]*2**24+65536*this[++t]+256*this[++t]+r;return(BigInt(n)<<BigInt(32))+BigInt(i)})),o.prototype.readIntLE=function(t,e,r){t>>>=0,e>>>=0,r||T(t,e,this.length);let n=this[t],i=1,o=0;for(;++o<e&&(i*=256);)n+=this[t+o]*i;return i*=128,n>=i&&(n-=Math.pow(2,8*e)),n},o.prototype.readIntBE=function(t,e,r){t>>>=0,e>>>=0,r||T(t,e,this.length);let n=e,i=1,o=this[t+--n];for(;n>0&&(i*=256);)o+=this[t+--n]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*e)),o},o.prototype.readInt8=function(t,e){return t>>>=0,e||T(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},o.prototype.readInt16LE=function(t,e){t>>>=0,e||T(t,2,this.length);const r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},o.prototype.readInt16BE=function(t,e){t>>>=0,e||T(t,2,this.length);const r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},o.prototype.readInt32LE=function(t,e){return t>>>=0,e||T(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},o.prototype.readInt32BE=function(t,e){return t>>>=0,e||T(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},o.prototype.readBigInt64LE=X((function(t){H(t>>>=0,"offset");const e=this[t],r=this[t+7];void 0!==e&&void 0!==r||G(t,this.length-8);const n=this[t+4]+256*this[t+5]+65536*this[t+6]+(r<<24);return(BigInt(n)<<BigInt(32))+BigInt(e+256*this[++t]+65536*this[++t]+this[++t]*2**24)})),o.prototype.readBigInt64BE=X((function(t){H(t>>>=0,"offset");const e=this[t],r=this[t+7];void 0!==e&&void 0!==r||G(t,this.length-8);const n=(e<<24)+65536*this[++t]+256*this[++t]+this[++t];return(BigInt(n)<<BigInt(32))+BigInt(this[++t]*2**24+65536*this[++t]+256*this[++t]+r)})),o.prototype.readFloatLE=function(t,e){return t>>>=0,e||T(t,4,this.length),z(this,t,!0,23,4)},o.prototype.readFloatBE=function(t,e){return t>>>=0,e||T(t,4,this.length),z(this,t,!1,23,4)},o.prototype.readDoubleLE=function(t,e){return t>>>=0,e||T(t,8,this.length),z(this,t,!0,52,8)},o.prototype.readDoubleBE=function(t,e){return t>>>=0,e||T(t,8,this.length),z(this,t,!1,52,8)},o.prototype.writeUintLE=o.prototype.writeUIntLE=function(t,e,r,n){if(t=+t,e>>>=0,r>>>=0,!n){O(this,t,e,r,Math.pow(2,8*r)-1,0)}let i=1,o=0;for(this[e]=255&t;++o<r&&(i*=256);)this[e+o]=t/i&255;return e+r},o.prototype.writeUintBE=o.prototype.writeUIntBE=function(t,e,r,n){if(t=+t,e>>>=0,r>>>=0,!n){O(this,t,e,r,Math.pow(2,8*r)-1,0)}let i=r-1,o=1;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=t/o&255;return e+r},o.prototype.writeUint8=o.prototype.writeUInt8=function(t,e,r){return t=+t,e>>>=0,r||O(this,t,e,1,255,0),this[e]=255&t,e+1},o.prototype.writeUint16LE=o.prototype.writeUInt16LE=function(t,e,r){return t=+t,e>>>=0,r||O(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},o.prototype.writeUint16BE=o.prototype.writeUInt16BE=function(t,e,r){return t=+t,e>>>=0,r||O(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},o.prototype.writeUint32LE=o.prototype.writeUInt32LE=function(t,e,r){return t=+t,e>>>=0,r||O(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},o.prototype.writeUint32BE=o.prototype.writeUInt32BE=function(t,e,r){return t=+t,e>>>=0,r||O(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},o.prototype.writeBigUInt64LE=X((function(t,e=0){return N(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))})),o.prototype.writeBigUInt64BE=X((function(t,e=0){return C(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))})),o.prototype.writeIntLE=function(t,e,r,n){if(t=+t,e>>>=0,!n){const n=Math.pow(2,8*r-1);O(this,t,e,r,n-1,-n)}let i=0,o=1,s=0;for(this[e]=255&t;++i<r&&(o*=256);)t<0&&0===s&&0!==this[e+i-1]&&(s=1),this[e+i]=(t/o>>0)-s&255;return e+r},o.prototype.writeIntBE=function(t,e,r,n){if(t=+t,e>>>=0,!n){const n=Math.pow(2,8*r-1);O(this,t,e,r,n-1,-n)}let i=r-1,o=1,s=0;for(this[e+i]=255&t;--i>=0&&(o*=256);)t<0&&0===s&&0!==this[e+i+1]&&(s=1),this[e+i]=(t/o>>0)-s&255;return e+r},o.prototype.writeInt8=function(t,e,r){return t=+t,e>>>=0,r||O(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},o.prototype.writeInt16LE=function(t,e,r){return t=+t,e>>>=0,r||O(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},o.prototype.writeInt16BE=function(t,e,r){return t=+t,e>>>=0,r||O(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},o.prototype.writeInt32LE=function(t,e,r){return t=+t,e>>>=0,r||O(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},o.prototype.writeInt32BE=function(t,e,r){return t=+t,e>>>=0,r||O(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},o.prototype.writeBigInt64LE=X((function(t,e=0){return N(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),o.prototype.writeBigInt64BE=X((function(t,e=0){return C(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),o.prototype.writeFloatLE=function(t,e,r){return U(this,t,e,!0,r)},o.prototype.writeFloatBE=function(t,e,r){return U(this,t,e,!1,r)},o.prototype.writeDoubleLE=function(t,e,r){return j(this,t,e,!0,r)},o.prototype.writeDoubleBE=function(t,e,r){return j(this,t,e,!1,r)},o.prototype.copy=function(t,e,r,n){if(!o.isBuffer(t))throw new TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-r&&(n=t.length-e+r);const i=n-r;return this===t&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(e,r,n):Uint8Array.prototype.set.call(t,this.subarray(r,n),e),i},o.prototype.fill=function(t,e,r,n){if("string"==typeof t){if("string"==typeof e?(n=e,e=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!o.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(1===t.length){const e=t.charCodeAt(0);("utf8"===n&&e<128||"latin1"===n)&&(t=e)}}else"number"==typeof t?t&=255:"boolean"==typeof t&&(t=Number(t));if(e<0||this.length<e||this.length<r)throw new RangeError("Out of range index");if(r<=e)return this;let i;if(e>>>=0,r=void 0===r?this.length:r>>>0,t||(t=0),"number"==typeof t)for(i=e;i<r;++i)this[i]=t;else{const s=o.isBuffer(t)?t:o.from(t,n),u=s.length;if(0===u)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(i=0;i<r-e;++i)this[i+e]=s[i%u]}return this};const L={};function P(t,e,r){L[t]=class extends r{constructor(){super(),Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${t}]`,this.stack,delete this.name}get code(){return t}set code(t){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:t,writable:!0})}toString(){return`${this.name} [${t}]: ${this.message}`}}}function D(t){let e="",r=t.length;const n="-"===t[0]?1:0;for(;r>=n+4;r-=3)e=`_${t.slice(r-3,r)}${e}`;return`${t.slice(0,r)}${e}`}function K(t,e,r,n,i,o){if(t>r||t<e){const n="bigint"==typeof e?"n":"";let i;throw i=o>3?0===e||e===BigInt(0)?`>= 0${n} and < 2${n} ** ${8*(o+1)}${n}`:`>= -(2${n} ** ${8*(o+1)-1}${n}) and < 2 ** ${8*(o+1)-1}${n}`:`>= ${e}${n} and <= ${r}${n}`,new L.ERR_OUT_OF_RANGE("value",i,t)}!function(t,e,r){H(e,"offset"),void 0!==t[e]&&void 0!==t[e+r]||G(e,t.length-(r+1))}(n,i,o)}function H(t,e){if("number"!=typeof t)throw new L.ERR_INVALID_ARG_TYPE(e,"number",t)}function G(t,e,r){if(Math.floor(t)!==t)throw H(t,r),new L.ERR_OUT_OF_RANGE(r||"offset","an integer",t);if(e<0)throw new L.ERR_BUFFER_OUT_OF_BOUNDS;throw new L.ERR_OUT_OF_RANGE(r||"offset",`>= ${r?1:0} and <= ${e}`,t)}P("ERR_BUFFER_OUT_OF_BOUNDS",(function(t){return t?`${t} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"}),RangeError),P("ERR_INVALID_ARG_TYPE",(function(t,e){return`The "${t}" argument must be of type number. Received type ${typeof e}`}),TypeError),P("ERR_OUT_OF_RANGE",(function(t,e,r){let n=`The value of "${t}" is out of range.`,i=r;return Number.isInteger(r)&&Math.abs(r)>2**32?i=D(String(r)):"bigint"==typeof r&&(i=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(i=D(i)),i+="n"),n+=` It must be ${e}. Received ${i}`,n}),RangeError);const $=/[^+/0-9A-Za-z-_]/g;function W(t,e){let r;e=e||1/0;const n=t.length;let i=null;const o=[];for(let s=0;s<n;++s){if(r=t.charCodeAt(s),r>55295&&r<57344){if(!i){if(r>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(s+1===n){(e-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(e-=3)>-1&&o.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((e-=1)<0)break;o.push(r)}else if(r<2048){if((e-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function q(t){return M.toByteArray(function(t){if((t=(t=t.split("=")[0]).trim().replace($,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function V(t,e,r,n){let i;for(i=0;i<n&&!(i+r>=e.length||i>=t.length);++i)e[i+r]=t[i];return i}function Y(t,e){return t instanceof e||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===e.name}function J(t){return t!=t}const Z=function(){const t="0123456789abcdef",e=new Array(256);for(let r=0;r<16;++r){const n=16*r;for(let i=0;i<16;++i)e[n+i]=t[r]+t[i]}return e}();function X(t){return"undefined"==typeof BigInt?Q:t}function Q(){throw new Error("BigInt not supported")}}));
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */function H(t){return K.Buffer.from(t,"base64").toString("binary")}function G(t){return K.Buffer.from(t,"binary").toString("base64")}function $(t){return H(V(t))}function W(t){return q(G(t))}function q(t){return t.replace(/\//g,"_").replace(/\+/g,"-").replace(/=+$/,"")}function V(t){return t.replace(/_/g,"/").replace(/-/g,"+")}var Y=Object.freeze({__proto__:null,decode:H,encode:G,urlDecode:$,urlEncode:W,makeUrlSafe:q,makeUrlUnsafe:V}),J=function(t){return o(void 0,void 0,void 0,(function(){return s(this,(function(e){return[2,new Promise((function(e,r){var n=function(){return r(new Error("Failed to read file"))},i=new FileReader;i.addEventListener("load",(function(t){var r,i=(null===(r=null==t?void 0:t.target)||void 0===r?void 0:r.result)||null;null===i&&n(),e(K.Buffer.from(i))})),i.addEventListener("error",(function(){return i.abort()})),i.addEventListener("abort",n),i.readAsArrayBuffer(t)}))]}))}))},Z=Object.freeze({__proto__:null,toBuffer:J}),X="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{};function Q(){throw new Error("setTimeout has not been defined")}function tt(){throw new Error("clearTimeout has not been defined")}var et=Q,rt=tt;function nt(t){if(et===setTimeout)return setTimeout(t,0);if((et===Q||!et)&&setTimeout)return et=setTimeout,setTimeout(t,0);try{return et(t,0)}catch(e){try{return et.call(null,t,0)}catch(e){return et.call(this,t,0)}}}"function"==typeof X.setTimeout&&(et=setTimeout),"function"==typeof X.clearTimeout&&(rt=clearTimeout);var it,ot=[],st=!1,ut=-1;function at(){st&&it&&(st=!1,it.length?ot=it.concat(ot):ut=-1,ot.length&&ct())}function ct(){if(!st){var t=nt(at);st=!0;for(var e=ot.length;e;){for(it=ot,ot=[];++ut<e;)it&&it[ut].run();ut=-1,e=ot.length}it=null,st=!1,function(t){if(rt===clearTimeout)return clearTimeout(t);if((rt===tt||!rt)&&clearTimeout)return rt=clearTimeout,clearTimeout(t);try{rt(t)}catch(e){try{return rt.call(null,t)}catch(e){return rt.call(this,t)}}}(t)}}function ft(t,e){this.fun=t,this.array=e}ft.prototype.run=function(){this.fun.apply(null,this.array)};function lt(){}var ht=lt,pt=lt,dt=lt,yt=lt,vt=lt,gt=lt,mt=lt;var bt=X.performance||{},_t=bt.now||bt.mozNow||bt.msNow||bt.oNow||bt.webkitNow||function(){return(new Date).getTime()};var wt=new Date;var kt={nextTick:function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];ot.push(new ft(t,e)),1!==ot.length||st||nt(ct)},title:"browser",browser:!0,env:{},argv:[],version:"",versions:{},on:ht,addListener:pt,once:dt,off:yt,removeListener:vt,removeAllListeners:gt,emit:mt,binding:function(t){throw new Error("process.binding is not supported")},cwd:function(){return"/"},chdir:function(t){throw new Error("process.chdir is not supported")},umask:function(){return 0},hrtime:function(t){var e=.001*_t.call(bt),r=Math.floor(e),n=Math.floor(e%1*1e9);return t&&(r-=t[0],(n-=t[1])<0&&(r--,n+=1e9)),[r,n]},platform:"browser",release:{},config:{},uptime:function(){return(new Date-wt)/1e3}},Et=h(Object.freeze({__proto__:null,default:{}})),At=p((function(t,e){
/*! noble-ed25519 - MIT License (c) Paul Miller (paulmillr.com) */
Object.defineProperty(e,"__esModule",{value:!0}),e.utils=e.verify=e.sign=e.getPublicKey=e.SignResult=e.Signature=e.Point=e.ExtendedPoint=e.CURVE=void 0;const r={a:-1n,d:37095705934669439343138083508754565189542113879843219016388785533085940283555n,P:2n**255n-19n,n:2n**252n+27742317777372353535851937790883648493n,h:8n,Gx:15112221349535400772501151409588531511454012693041857206046113283949847762202n,Gy:46316835694926478169428394003475163141307993866256225615783033603165251855960n};e.CURVE=r;const n=32,i=(r.P+3n)/8n,o=E(2n,(r.P+1n)/4n,r.P),s=19681161376707505956807079304988542015446066515923890162744021073123829784752n,u=54469307008909316920995813868745141605393597292927456921205312896311721017578n,a=25063068953384623474111414158702152701244531502492656460079210482610430750235n;class c{constructor(t,e,r,n){this.x=t,this.y=e,this.z=r,this.t=n}static fromAffine(t){if(!(t instanceof l))throw new TypeError("ExtendedPoint#fromAffine: expected Point");return t.equals(l.ZERO)?c.ZERO:new c(t.x,t.y,1n,k(t.x*t.y))}static toAffineBatch(t){const e=function(t,e=r.P){const n=t.length,i=new Array(n);let o=1n;for(let r=0;r<n;r++)0n!==t[r]&&(i[r]=o,o=k(o*t[r],e));o=A(o,e);for(let r=n-1;r>=0;r--){if(0n===t[r])continue;let n=k(o*t[r],e);t[r]=k(o*i[r],e),o=n}return t}(t.map((t=>t.z)));return t.map(((t,r)=>t.toAffine(e[r])))}static normalizeZ(t){return this.toAffineBatch(t).map(this.fromAffine)}static fromRistrettoHash(t){const e=w(t.slice(0,n)),r=this.elligatorRistrettoFlavor(e),i=w(t.slice(n,64)),o=this.elligatorRistrettoFlavor(i);return r.add(o)}static elligatorRistrettoFlavor(t){const{d:e}=r,n=k(1n-e**2n),i=(e-1n)**2n,o=s*(t*t),u=k((o+1n)*n);let f=k(-1n);const l=k((f-e*o)*k(o+e));let{isNotZeroSquare:h,value:p}=x(u,l),d=k(p*t);d=g(d)?d:k(-d),p=h?p:d,f=h?f:o;const y=p*p,v=(p+p)*l,m=(f*(o-1n)*i-l)*a,b=1n-y,_=1n+y;return new c(k(v*_),k(b*m),k(m*_),k(v*b))}static fromRistrettoBytes(t){const e=w(t),i=function(t,e){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}(v(e,n),t),o=g(e);if(!i||o)throw new Error("Cannot convert bytes to Ristretto Point");const s=e*e,u=1n-s,a=1n+s,f=a*a,l=u*u*-r.d-f,{isNotZeroSquare:h,value:p}=S(k(l*f)),d=p*a,y=p*d*l;let m=k((e+e)*d);g(m)&&(m=k(-m));const b=k(u*y),_=k(m*b);if(!h||g(_)||0n===b)throw new Error("Cannot convert bytes to Ristretto Point");return new c(m,b,1n,_)}toRistrettoBytes(){let{x:t,y:e,z:r,t:i}=this;const o=(r+e)*(r-e),a=t*e,{value:c}=S(k(a**2n*o)),f=c*o,l=c*a,h=f*l*i;let p=l;if(g(i*h)){const r=k(t*s);t=k(e*s),e=r,p=k(f*u)}g(t*h)&&(e=k(-e));let d=k((r-e)*p);return g(d)&&(d=k(-d)),v(d,n)}equals(t){const e=t,[r,n,i,o]=[this.t,e.t,this.z,e.z];return k(r*o)===k(n*i)}negate(){return new c(k(-this.x),this.y,this.z,k(-this.t))}double(){const t=this.x,e=this.y,n=this.z,{a:i}=r,o=k(t**2n),s=k(e**2n),u=k(2n*n**2n),a=k(i*o),f=k((t+e)**2n-o-s),l=k(a+s),h=k(l-u),p=k(a-s),d=k(f*h),y=k(l*p),v=k(f*p),g=k(h*l);return new c(d,y,g,v)}add(t){const e=this.x,r=this.y,n=this.z,i=this.t,o=t.x,s=t.y,u=t.z,a=t.t,f=k((r-e)*(s+o)),l=k((r+e)*(s-o)),h=k(l-f);if(0n===h)return this.double();const p=k(2n*n*a),d=k(2n*i*u),y=k(d+p),v=k(l+f),g=k(d-p),m=k(y*h),b=k(v*g),_=k(y*g),w=k(h*v);return new c(m,b,w,_)}subtract(t){return this.add(t.negate())}multiplyUnsafe(t){if("number"!=typeof t&&"bigint"!=typeof t)throw new TypeError("Point#multiply: expected number or bigint");let e=k(BigInt(t),r.n);if(e<=0)throw new Error("Point#multiply: invalid scalar, expected positive integer");let n=c.ZERO,i=this;for(;e>0n;)1n&e&&(n=n.add(i)),i=i.double(),e>>=1n;return n}precomputeWindow(t){const e=256/t+1;let r=[],n=this,i=n;for(let o=0;o<e;o++){i=n,r.push(i);for(let e=1;e<2**(t-1);e++)i=i.add(n),r.push(i);n=i.double()}return r}wNAF(t,e){!e&&this.equals(c.BASE)&&(e=l.BASE);const r=e&&e._WINDOW_SIZE||1;if(256%r)throw new Error("Point#wNAF: Invalid precomputation window, must be power of 2");let n=e&&f.get(e);n||(n=this.precomputeWindow(r),e&&1!==r&&(n=c.normalizeZ(n),f.set(e,n)));let i=c.ZERO,o=c.ZERO;const s=256/r+1,u=2**(r-1),a=BigInt(2**r-1),h=2**r,p=BigInt(r);for(let e=0;e<s;e++){const r=e*u;let s=Number(t&a);if(t>>=p,s>u&&(s-=h,t+=1n),0===s)o=o.add(e%2?n[r].negate():n[r]);else{const t=n[r+Math.abs(s)-1];i=i.add(s<0?t.negate():t)}}return[i,o]}multiply(t,e){if("number"!=typeof t&&"bigint"!=typeof t)throw new TypeError("Point#multiply: expected number or bigint");const n=k(BigInt(t),r.n);if(n<=0)throw new Error("Point#multiply: invalid scalar, expected positive integer");return c.normalizeZ(this.wNAF(n,e))[0]}toAffine(t=A(this.z)){const e=k(this.x*t),r=k(this.y*t);return new l(e,r)}}e.ExtendedPoint=c,c.BASE=new c(r.Gx,r.Gy,1n,k(r.Gx*r.Gy)),c.ZERO=new c(0n,1n,1n,0n);const f=new WeakMap;class l{constructor(t,e){this.x=t,this.y=e}_setWindowSize(t){this._WINDOW_SIZE=t,f.delete(this)}static fromHex(t){const{d:e,P:n}=r,s=t instanceof Uint8Array?t:d(t),u=s.length-1,a=-129&s[u],c=0!=(128&s[u]),f=m(Uint8Array.from(Array.from(s.slice(0,u)).concat(a)));if(f>=n)throw new Error("Point#fromHex expects hex <= Fp");const h=f*f,p=k((h-1n)*A(e*h+1n));let y=E(p,i);0n!==k(y*y-p)&&(y=k(y*o));return c!==(1n===(1n&y))&&(y=k(-y)),new l(y,f)}toRawBytes(){const t=y(this.y),e=new Uint8Array(n);for(let r=t.length-2,i=0;i<n&&r>=0;r-=2,i++)e[i]=parseInt(t[r]+t[r+1],16);const r=1n&this.x?128:0;return e[31]|=r,e}toHex(){return p(this.toRawBytes())}toX25519(){return k((1n+this.y)*A(1n-this.y))}equals(t){return this.x===t.x&&this.y===t.y}negate(){return new l(k(-this.x),this.y)}add(t){return c.fromAffine(this).add(c.fromAffine(t)).toAffine()}subtract(t){return this.add(t.negate())}multiply(t){return c.fromAffine(this).multiply(t,this).toAffine()}}e.Point=l,l.BASE=new l(r.Gx,r.Gy),l.ZERO=new l(0n,1n);class h{constructor(t,e){this.r=t,this.s=e}static fromHex(t){t=O(t);const e=l.fromHex(t.slice(0,32)),n=m(t.slice(32));if(n>=r.n)throw new Error("Signature#fromHex expects s <= CURVE.n");return new h(e,n)}toRawBytes(){const t=d(y(this.s)).reverse(),e=new Uint8Array(n);e.set(t);const r=new Uint8Array(64);return r.set(this.r.toRawBytes()),r.set(e,32),r}toHex(){return p(this.toRawBytes())}}function p(t){let e="";for(let r=0;r<t.length;r++)e+=t[r].toString(16).padStart(2,"0");return e}function d(t){t=1&t.length?`0${t}`:t;const e=new Uint8Array(t.length/2);for(let r=0;r<e.length;r++){let n=2*r;e[r]=Number.parseInt(t.slice(n,n+2),16)}return e}function y(t){const e=t.toString(16);return 1&e.length?`0${e}`:e}function v(t,e=32){return d(y(t).padStart(2*e,"0")).reverse()}function g(t){const e=y(k(t)),r=Number.parseInt(e.slice(e.length-2,e.length),16);return Boolean(1&r)}function m(t){let e=0n;for(let r=0;r<t.length;r++)e+=BigInt(t[r])<<8n*BigInt(r);return e}function b(t,e=0){return BigInt(t[0+e])|BigInt(t[1+e])<<8n|BigInt(t[2+e])<<16n|BigInt(t[3+e])<<24n|BigInt(t[4+e])<<32n|BigInt(t[5+e])<<40n|BigInt(t[6+e])<<48n|BigInt(t[7+e])<<56n}e.Signature=h,e.SignResult=h;const _=(1n<<51n)-1n;function w(t){return k((b(t,0)&_)+((b(t,6)>>3n&_)<<51n)+((b(t,12)>>6n&_)<<102n)+((b(t,19)>>1n&_)<<153n)+((b(t,24)>>12n&_)<<204n))}function k(t,e=r.P){const n=t%e;return n>=0n?n:e+n}function E(t,e,n=r.P){let i=1n;for(;e>0n;)1n&e&&(i=k(i*t,n)),e>>=1n,t=k(t*t,n);return i}function A(t,e=r.P){if(0n===t||e<=0n)throw new Error("invert: expected positive integers");let[n,i]=function(t,e){let[r,n,i,o]=[0n,1n,1n,0n];for(;0n!==t;){let s=e/t,u=e%t,a=r-i*s,c=n-o*s;[e,t]=[t,u],[r,n]=[i,o],[i,o]=[a,c]}return[e,r,n]}(k(t,e),e);if(1n!==n)throw new Error("invert: does not exist");return k(i,e)}function S(t){return x(1n,t)}function I(t,e){const{P:n}=r;let i=t;for(;e-- >0n;)i*=i,i%=n;return i}function x(t,e){const n=k(e*e*e),i=k(n*n*e);let o=k(function(t){t=k(t);const{P:e}=r,n=t*t%e,i=t*(n**4n%e)%e,o=i*((n*i%e)**2n%e)%e,s=I(o,5n)*o%e,u=I(s,10n)*s%e,a=I(u,20n),c=I(a*u%e,10n)*s%e,f=I(c,50n)*c%e,l=I(f,100n),h=I(l*f%e,50n)*c%e,p=h*h%e;return p*p*t%e}(t*i)*t*n);const u=k(o*o*e),a=s,c=u===t,f=u===k(-t),l=u===k(k(-t)*a),h=k(s*o);o=f||l?h:o,g(o)&&(o=k(-o));return{isNotZeroSquare:c||f,value:k(o)}}async function B(...t){const n=function(...t){if(1===t.length)return t[0];const e=t.reduce(((t,e)=>t+e.length),0),r=new Uint8Array(e);for(let e=0,n=0;e<t.length;e++){const i=t[e];r.set(i,n),n+=i.length}return r}(...t);return k(m(await e.utils.sha512(n)),r.n)}function T(t){const e=t.slice(0,n);return e[0]&=248,e[31]&=127,e[31]|=64,m(e)}function O(t){return t instanceof Uint8Array?t:d(t)}function N(t){return t instanceof Uint8Array?t:d("string"==typeof t?t.padStart(64,"0"):BigInt(t).toString(16).padStart(64,"0"))}e.getPublicKey=async function(t){const r=await e.utils.sha512(N(t)),n=l.BASE.multiply(T(r));return"string"==typeof t?n.toHex():n.toRawBytes()},e.sign=async function(t,i){const o=await e.utils.sha512(N(i)),s=T(o),u=l.BASE.multiply(s),a=O(t),c=await B((f=o,f.slice(n)),a);var f;const p=l.BASE.multiply(c),d=k(c+await B(p.toRawBytes(),u.toRawBytes(),a)*s,r.n),y=new h(p,d);return"string"==typeof t?y.toHex():y.toRawBytes()},e.verify=async function(t,e,r){e=O(e),r instanceof l||(r=l.fromHex(r)),t instanceof h||(t=h.fromHex(t));const n=await B(t.r.toRawBytes(),r.toRawBytes(),e),i=c.fromAffine(r).multiplyUnsafe(n),o=c.BASE.multiply(t.s),s=c.fromAffine(t.r).add(i);return o.equals(s)},l.BASE._setWindowSize(8),e.utils={TORSION_SUBGROUP:["0100000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac037a","0000000000000000000000000000000000000000000000000000000000000080","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc05","ecffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff7f","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc85","0000000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac03fa"],randomPrivateKey:(t=32)=>{if("object"==typeof window&&"crypto"in window)return window.crypto.getRandomValues(new Uint8Array(t));if("object"==typeof kt&&"node"in kt.versions){const{randomBytes:e}=Et;return new Uint8Array(e(t).buffer)}throw new Error("The environment doesn't have randomBytes function")},sha512:async t=>{if("object"==typeof window&&"crypto"in window){const e=await window.crypto.subtle.digest("SHA-512",t.buffer);return new Uint8Array(e)}if("object"==typeof kt&&"node"in kt.versions){const{createHash:e}=Et,r=e("sha512");return r.update(t),Uint8Array.from(r.digest())}throw new Error("The environment doesn't have sha512 function")},precompute(t=8,e=l.BASE){const r=e.equals(l.BASE)?e:new l(e.x,e.y);return r._setWindowSize(t),r.multiply(1n),r}}})),St=p((function(t,e){var r,n,i,o,s,u,a,c;Object.defineProperty(e,"__esModule",{value:!0}),(r=e.CryptoSystem||(e.CryptoSystem={})).ECC="ecc",r.RSA="rsa",(n=e.EccCurve||(e.EccCurve={})).P_256="P-256",n.P_384="P-384",n.P_521="P-521",(i=e.RsaSize||(e.RsaSize={}))[i.B1024=1024]="B1024",i[i.B2048=2048]="B2048",i[i.B4096=4096]="B4096",(o=e.SymmAlg||(e.SymmAlg={})).AES_CTR="AES-CTR",o.AES_CBC="AES-CBC",(s=e.SymmKeyLength||(e.SymmKeyLength={}))[s.B128=128]="B128",s[s.B192=192]="B192",s[s.B256=256]="B256",(u=e.HashAlg||(e.HashAlg={})).SHA_1="SHA-1",u.SHA_256="SHA-256",u.SHA_384="SHA-384",u.SHA_512="SHA-512",(a=e.CharSize||(e.CharSize={}))[a.B8=8]="B8",a[a.B16=16]="B16",(c=e.KeyUse||(e.KeyUse={})).Read="read",c.Write="write"})),It=p((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.ECC_READ_ALG="ECDH",e.ECC_WRITE_ALG="ECDSA",e.RSA_READ_ALG="RSA-OAEP",e.RSA_WRITE_ALG="RSASSA-PKCS1-v1_5",e.SALT_LENGTH=128,e.DEFAULT_CRYPTOSYSTEM="ecc",e.DEFAULT_ECC_CURVE=St.EccCurve.P_256,e.DEFAULT_RSA_SIZE=St.RsaSize.B2048,e.DEFAULT_SYMM_ALG=St.SymmAlg.AES_CTR,e.DEFAULT_SYMM_LEN=St.SymmKeyLength.B256,e.DEFAULT_CTR_LEN=64,e.DEFAULT_HASH_ALG=St.HashAlg.SHA_256,e.DEFAULT_CHAR_SIZE=St.CharSize.B16,e.DEFAULT_STORE_NAME="keystore",e.DEFAULT_READ_KEY_NAME="read-key",e.DEFAULT_WRITE_KEY_NAME="write-key",e.default={ECC_READ_ALG:e.ECC_READ_ALG,ECC_WRITE_ALG:e.ECC_WRITE_ALG,RSA_READ_ALG:e.RSA_READ_ALG,RSA_WRITE_ALG:e.RSA_WRITE_ALG,SALT_LENGTH:e.SALT_LENGTH,DEFAULT_CRYPTOSYSTEM:e.DEFAULT_CRYPTOSYSTEM,DEFAULT_ECC_CURVE:e.DEFAULT_ECC_CURVE,DEFAULT_RSA_SIZE:e.DEFAULT_RSA_SIZE,DEFAULT_SYMM_ALG:e.DEFAULT_SYMM_ALG,DEFAULT_CTR_LEN:e.DEFAULT_CTR_LEN,DEFAULT_HASH_ALG:e.DEFAULT_HASH_ALG,DEFAULT_CHAR_SIZE:e.DEFAULT_CHAR_SIZE,DEFAULT_STORE_NAME:e.DEFAULT_STORE_NAME,DEFAULT_READ_KEY_NAME:e.DEFAULT_READ_KEY_NAME,DEFAULT_WRITE_KEY_NAME:e.DEFAULT_WRITE_KEY_NAME}})),xt=p((function(t,e){var r=f&&f.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function s(t){try{a(n.next(t))}catch(t){o(t)}}function u(t){try{a(n.throw(t))}catch(t){o(t)}}function a(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,u)}a((n=n.apply(t,e||[])).next())}))},n=f&&f.__generator||function(t,e){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}};function i(t,e){var r=8===e?new Uint8Array(t):new Uint16Array(t);return Array.from(r).map((function(t){return String.fromCharCode(t)})).join("")}function o(t){var e=i(t,8);return K.Buffer.from(e,"binary").toString("base64")}function s(t,e){for(var r=8===e?new Uint8Array(t.length):new Uint16Array(t.length),n=0,i=t.length;n<i;n++)r[n]=t.charCodeAt(n);return r.buffer}function u(t){return s(K.Buffer.from(t,"base64").toString("binary"),8)}function a(){return new Uint8Array([1,0,1])}function c(t){var e=new Uint8Array(t);return globalThis.crypto.getRandomValues(e),e.buffer}function l(t,e){var r=new Uint8Array(t),n=new Uint8Array(e),i=new Uint8Array(r.length+n.length);return i.set(r),i.set(n,r.length),i.buffer}function h(t){return r(this,void 0,void 0,(function(){return n(this,(function(e){return[2,new Promise((function(e){var r=new MessageChannel,n=r.port1;r.port2.onmessage=function(t){return e(t.data)},n.postMessage(t)}))]}))}))}Object.defineProperty(e,"__esModule",{value:!0}),e.arrBufToStr=i,e.arrBufToBase64=o,e.strToArrBuf=s,e.base64ToArrBuf=u,e.publicExponent=a,e.randomBuf=c,e.joinBufs=l,e.normalizeUtf8ToBuf=function(t){return e.normalizeToBuf(t,(function(t){return s(t,St.CharSize.B8)}))},e.normalizeUtf16ToBuf=function(t){return e.normalizeToBuf(t,(function(t){return s(t,St.CharSize.B16)}))},e.normalizeBase64ToBuf=function(t){return e.normalizeToBuf(t,u)},e.normalizeUnicodeToBuf=function(t,r){switch(r){case 8:return e.normalizeUtf8ToBuf(t);default:return e.normalizeUtf16ToBuf(t)}},e.normalizeToBuf=function(t,e){if("string"==typeof t)return e(t);if("object"==typeof t&&void 0!==t.byteLength)return new Uint8Array(t).buffer;throw new Error("Improper value. Must be a string, ArrayBuffer, Uint8Array")},e.structuralClone=h,e.default={arrBufToStr:i,arrBufToBase64:o,strToArrBuf:s,base64ToArrBuf:u,publicExponent:a,randomBuf:c,joinBufs:l,normalizeUtf8ToBuf:e.normalizeUtf8ToBuf,normalizeUtf16ToBuf:e.normalizeUtf16ToBuf,normalizeBase64ToBuf:e.normalizeBase64ToBuf,normalizeToBuf:e.normalizeToBuf,structuralClone:h}})),Bt=l(xt),Tt=p((function(t,e){function r(t){if(!t||null===t)throw e.KeyDoesNotExist;if(void 0===t.privateKey)throw e.NotKeyPair;return t}function n(t){if(!t||null===t)throw e.KeyDoesNotExist;if(void 0!==t.privateKey||void 0===t.algorithm)throw e.NotKey;return t}function i(t){s(t,[St.CryptoSystem.ECC,St.CryptoSystem.RSA],e.UnsupportedCrypto)}function o(t){s(t,[St.KeyUse.Read,St.KeyUse.Write],e.InvalidKeyUse)}function s(t,e,r){if(!e.some((function(e){return e===t})))throw r}Object.defineProperty(e,"__esModule",{value:!0}),e.KeyDoesNotExist=new Error("Key does not exist. Make sure you properly instantiated the keystore."),e.NotKeyPair=new Error("Retrieved a symmetric key when an asymmetric keypair was expected. Please use a different key name."),e.NotKey=new Error("Retrieved an asymmetric keypair when an symmetric key was expected. Please use a different key name."),e.ECCNotEnabled=new Error("ECC is not enabled for this browser. Please use RSA instead."),e.UnsupportedCrypto=new Error("Cryptosystem not supported. Please use ECC or RSA"),e.InvalidKeyUse=new Error("Invalid key use. Please use 'read' or 'write"),e.checkIsKeyPair=r,e.checkIsKey=n,e.checkValidCryptoSystem=i,e.checkValidKeyUse=o,e.default={KeyDoesNotExist:e.KeyDoesNotExist,NotKeyPair:e.NotKeyPair,NotKey:e.NotKey,ECCNotEnabled:e.ECCNotEnabled,UnsupportedCrypto:e.UnsupportedCrypto,InvalidKeyUse:e.InvalidKeyUse,checkIsKeyPair:r,checkIsKey:n,checkValidCryptoSystem:i,checkValidKeyUse:o}})),Ot=f&&f.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function s(t){try{a(n.next(t))}catch(t){o(t)}}function u(t){try{a(n.throw(t))}catch(t){o(t)}}function a(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,u)}a((n=n.apply(t,e||[])).next())}))},Nt=f&&f.__generator||function(t,e){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}};function Ct(t,e,r){return Ot(this,void 0,void 0,(function(){var n,i;return Nt(this,(function(o){return Tt.checkValidKeyUse(r),n=r===St.KeyUse.Read?It.RSA_READ_ALG:It.RSA_WRITE_ALG,i=r===St.KeyUse.Read?["encrypt","decrypt"]:["sign","verify"],[2,globalThis.crypto.subtle.generateKey({name:n,modulusLength:t,publicExponent:xt.default.publicExponent(),hash:{name:e}},!1,i)]}))}))}var Rt=Ct;function Ut(t,e,r){return Ot(this,void 0,void 0,(function(){var n,i,o;return Nt(this,(function(s){return Tt.checkValidKeyUse(r),n=r===St.KeyUse.Read?It.RSA_READ_ALG:It.RSA_WRITE_ALG,i=r===St.KeyUse.Read?["encrypt"]:["verify"],o=xt.default.base64ToArrBuf(function(t){return t.replace("-----BEGIN PUBLIC KEY-----\n","").replace("\n-----END PUBLIC KEY-----","")}(t)),[2,globalThis.crypto.subtle.importKey("spki",o,{name:n,hash:{name:e}},!0,i)]}))}))}var jt=Ut,Lt={makeKeypair:Ct,importPublicKey:Ut},Pt=Object.defineProperty({makeKeypair:Rt,importPublicKey:jt,default:Lt},"__esModule",{value:!0}),Dt=f&&f.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function s(t){try{a(n.next(t))}catch(t){o(t)}}function u(t){try{a(n.throw(t))}catch(t){o(t)}}function a(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,u)}a((n=n.apply(t,e||[])).next())}))},Mt=f&&f.__generator||function(t,e){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}};function zt(t,e,r){return void 0===r&&(r=It.DEFAULT_CHAR_SIZE),Dt(this,void 0,void 0,(function(){return Mt(this,(function(n){return[2,globalThis.crypto.subtle.sign({name:It.RSA_WRITE_ALG,saltLength:It.SALT_LENGTH},e,xt.normalizeUnicodeToBuf(t,r))]}))}))}var Ft=zt;function Kt(t,e,r,n,i){return void 0===n&&(n=It.DEFAULT_CHAR_SIZE),void 0===i&&(i=It.DEFAULT_HASH_ALG),Dt(this,void 0,void 0,(function(){var o,s,u,a;return Mt(this,(function(c){switch(c.label){case 0:return s=(o=globalThis.crypto.subtle).verify,u=[{name:It.RSA_WRITE_ALG,saltLength:It.SALT_LENGTH}],"string"!=typeof r?[3,2]:[4,Pt.default.importPublicKey(r,i,St.KeyUse.Write)];case 1:return a=c.sent(),[3,3];case 2:a=r,c.label=3;case 3:return[2,s.apply(o,u.concat([a,xt.normalizeBase64ToBuf(e),xt.normalizeUnicodeToBuf(t,n)]))]}}))}))}var Ht=Kt;function Gt(t,e,r,n){return void 0===r&&(r=It.DEFAULT_CHAR_SIZE),void 0===n&&(n=It.DEFAULT_HASH_ALG),Dt(this,void 0,void 0,(function(){var i,o,s,u;return Mt(this,(function(a){switch(a.label){case 0:return o=(i=globalThis.crypto.subtle).encrypt,s=[{name:It.RSA_READ_ALG}],"string"!=typeof e?[3,2]:[4,Pt.default.importPublicKey(e,n,St.KeyUse.Read)];case 1:return u=a.sent(),[3,3];case 2:u=e,a.label=3;case 3:return[2,o.apply(i,s.concat([u,xt.normalizeUnicodeToBuf(t,r)]))]}}))}))}var $t=Gt;function Wt(t,e){return Dt(this,void 0,void 0,(function(){var r;return Mt(this,(function(n){return r=xt.normalizeBase64ToBuf(t),[2,globalThis.crypto.subtle.decrypt({name:It.RSA_READ_ALG},e,r)]}))}))}var qt=Wt;function Vt(t){return Dt(this,void 0,void 0,(function(){var e;return Mt(this,(function(r){switch(r.label){case 0:return[4,globalThis.crypto.subtle.exportKey("spki",t.publicKey)];case 1:return e=r.sent(),[2,xt.default.arrBufToBase64(e)]}}))}))}var Yt=Vt,Jt={sign:zt,verify:Kt,encrypt:Gt,decrypt:Wt,getPublicKey:Vt},Zt=Object.defineProperty({sign:Ft,verify:Ht,encrypt:$t,decrypt:qt,getPublicKey:Yt,default:Jt},"__esModule",{value:!0}),Xt=f&&f.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function s(t){try{a(n.next(t))}catch(t){o(t)}}function u(t){try{a(n.throw(t))}catch(t){o(t)}}function a(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,u)}a((n=n.apply(t,e||[])).next())}))},Qt=f&&f.__generator||function(t,e){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}};function te(t){return y.default.createInstance({name:t})}var ee=te;function re(t,e,r){return void 0===r&&(r=y.default),Xt(this,void 0,void 0,(function(){var n;return Qt(this,(function(i){switch(i.label){case 0:return[4,he(t,r)];case 1:return i.sent()?[2]:[4,e()];case 2:return n=i.sent(),[4,ie(t,n,r)];case 3:return i.sent(),[2]}}))}))}var ne=re;function ie(t,e,r){return void 0===r&&(r=y.default),Xt(this,void 0,void 0,(function(){return Qt(this,(function(n){return[2,r.setItem(t,e)]}))}))}var oe=ie;function se(t,e){return void 0===e&&(e=y.default),Xt(this,void 0,void 0,(function(){return Qt(this,(function(r){return[2,fe(t,Tt.checkIsKeyPair,e)]}))}))}var ue=se;function ae(t,e){return void 0===e&&(e=y.default),Xt(this,void 0,void 0,(function(){return Qt(this,(function(r){return[2,fe(t,Tt.checkIsKey,e)]}))}))}var ce=ae;function fe(t,e,r){return void 0===r&&(r=y.default),Xt(this,void 0,void 0,(function(){var n;return Qt(this,(function(i){switch(i.label){case 0:return[4,r.getItem(t)];case 1:return[2,null===(n=i.sent())?null:e(n)]}}))}))}var le=fe;function he(t,e){return void 0===e&&(e=y.default),Xt(this,void 0,void 0,(function(){return Qt(this,(function(r){switch(r.label){case 0:return[4,e.getItem(t)];case 1:return[2,null!==r.sent()]}}))}))}var pe=he;function de(t,e){return void 0===e&&(e=y.default),Xt(this,void 0,void 0,(function(){return Qt(this,(function(r){return[2,e.removeItem(t)]}))}))}var ye=de;function ve(t){return Xt(this,void 0,void 0,(function(){return Qt(this,(function(e){return[2,t.dropInstance()]}))}))}var ge=ve;function me(t){return Xt(this,void 0,void 0,(function(){return Qt(this,(function(e){return t?[2,ve(t)]:[2,y.default.clear()]}))}))}var be=me,_e={createStore:te,createIfDoesNotExist:re,put:ie,getKeypair:se,getKey:ae,exists:he,rm:de,dropStore:ve,clear:me},we=Object.defineProperty({createStore:ee,createIfDoesNotExist:ne,put:oe,getKeypair:ue,getKey:ce,get:le,exists:pe,rm:ye,dropStore:ge,clear:be,default:_e},"__esModule",{value:!0}),ke=f&&f.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function s(t){try{a(n.next(t))}catch(t){o(t)}}function u(t){try{a(n.throw(t))}catch(t){o(t)}}function a(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,u)}a((n=n.apply(t,e||[])).next())}))},Ee=f&&f.__generator||function(t,e){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}};function Ae(t,e){return ke(this,void 0,void 0,(function(){var r,n;return Ee(this,(function(i){return Tt.checkValidKeyUse(e),r=e===St.KeyUse.Read?It.ECC_READ_ALG:It.ECC_WRITE_ALG,n=e===St.KeyUse.Read?["deriveKey","deriveBits"]:["sign","verify"],[2,globalThis.crypto.subtle.generateKey({name:r,namedCurve:t},!1,n)]}))}))}var Se=Ae;function Ie(t,e,r){return ke(this,void 0,void 0,(function(){var n,i,o;return Ee(this,(function(s){return Tt.checkValidKeyUse(r),n=r===St.KeyUse.Read?It.ECC_READ_ALG:It.ECC_WRITE_ALG,i=r===St.KeyUse.Read?[]:["verify"],o=xt.default.base64ToArrBuf(t),[2,globalThis.crypto.subtle.importKey("raw",o,{name:n,namedCurve:e},!0,i)]}))}))}var xe=Ie,Be={makeKeypair:Ae,importPublicKey:Ie},Te=Object.defineProperty({makeKeypair:Se,importPublicKey:xe,default:Be},"__esModule",{value:!0}),Oe=p((function(t,e){var r=f&&f.__assign||function(){return(r=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},n=f&&f.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function s(t){try{a(n.next(t))}catch(t){o(t)}}function u(t){try{a(n.throw(t))}catch(t){o(t)}}function a(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,u)}a((n=n.apply(t,e||[])).next())}))},i=f&&f.__generator||function(t,e){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}};function o(t,n){var i;return void 0===n&&(n=!0),i=t?r(r({},e.defaultConfig),t):e.defaultConfig,(null==t?void 0:t.type)||(i.type=n?St.CryptoSystem.ECC:St.CryptoSystem.RSA),i}function s(){return n(this,void 0,void 0,(function(){var t;return i(this,(function(e){switch(e.label){case 0:return[4,Te.default.makeKeypair(It.DEFAULT_ECC_CURVE,St.KeyUse.Read)];case 1:t=e.sent(),e.label=2;case 2:return e.trys.push([2,4,,5]),[4,xt.default.structuralClone(t)];case 3:return e.sent(),[3,5];case 4:return e.sent(),[2,!1];case 5:return[2,!0]}}))}))}function u(t,e){return void 0===e&&(e={}),r(r({},t),e)}function a(t){return{alg:t.symmAlg,length:t.symmLen}}Object.defineProperty(e,"__esModule",{value:!0}),e.defaultConfig={type:It.DEFAULT_CRYPTOSYSTEM,curve:It.DEFAULT_ECC_CURVE,rsaSize:It.DEFAULT_RSA_SIZE,symmAlg:It.DEFAULT_SYMM_ALG,symmLen:It.DEFAULT_SYMM_LEN,hashAlg:It.DEFAULT_HASH_ALG,charSize:It.DEFAULT_CHAR_SIZE,storeName:It.DEFAULT_STORE_NAME,readKeyName:It.DEFAULT_READ_KEY_NAME,writeKeyName:It.DEFAULT_WRITE_KEY_NAME},e.normalize=o,e.eccEnabled=s,e.merge=u,e.symmKeyOpts=a,e.default={defaultConfig:e.defaultConfig,normalize:o,eccEnabled:s,merge:u,symmKeyOpts:a}})),Ne=f&&f.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function s(t){try{a(n.next(t))}catch(t){o(t)}}function u(t){try{a(n.throw(t))}catch(t){o(t)}}function a(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,u)}a((n=n.apply(t,e||[])).next())}))},Ce=f&&f.__generator||function(t,e){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}};function Re(t){return Ne(this,void 0,void 0,(function(){return Ce(this,(function(e){return[2,globalThis.crypto.subtle.generateKey({name:(null==t?void 0:t.alg)||It.DEFAULT_SYMM_ALG,length:(null==t?void 0:t.length)||It.DEFAULT_SYMM_LEN},!0,["encrypt","decrypt"])]}))}))}var Ue=Re;function je(t,e){return Ne(this,void 0,void 0,(function(){var r;return Ce(this,(function(n){return r=xt.default.base64ToArrBuf(t),[2,globalThis.crypto.subtle.importKey("raw",r,{name:(null==e?void 0:e.alg)||It.DEFAULT_SYMM_ALG,length:(null==e?void 0:e.length)||It.DEFAULT_SYMM_LEN},!0,["encrypt","decrypt"])]}))}))}var Le=je,Pe={makeKey:Re,importKey:je},De=Object.defineProperty({makeKey:Ue,importKey:Le,default:Pe},"__esModule",{value:!0}),Me=f&&f.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function s(t){try{a(n.next(t))}catch(t){o(t)}}function u(t){try{a(n.throw(t))}catch(t){o(t)}}function a(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,u)}a((n=n.apply(t,e||[])).next())}))},ze=f&&f.__generator||function(t,e){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}};function Fe(t,e,r){return Me(this,void 0,void 0,(function(){var n,i,o,s,u,a;return ze(this,(function(c){switch(c.label){case 0:return n=xt.default.normalizeUtf16ToBuf(t),"string"!=typeof e?[3,2]:[4,De.default.importKey(e,r)];case 1:return o=c.sent(),[3,3];case 2:o=e,c.label=3;case 3:return i=o,s=(null==r?void 0:r.alg)||It.DEFAULT_SYMM_ALG,u=(null==r?void 0:r.iv)||xt.default.randomBuf(16),[4,globalThis.crypto.subtle.encrypt({name:s,iv:s===St.SymmAlg.AES_CTR?void 0:u,counter:s===St.SymmAlg.AES_CTR?new Uint8Array(u):void 0,length:s===St.SymmAlg.AES_CTR?It.DEFAULT_CTR_LEN:void 0},i,n)];case 4:return a=c.sent(),[2,xt.default.joinBufs(u,a)]}}))}))}var Ke=Fe;function He(t,e,r){return Me(this,void 0,void 0,(function(){var n,i,o,s,u,a;return ze(this,(function(c){switch(c.label){case 0:return n=xt.default.normalizeBase64ToBuf(t),"string"!=typeof e?[3,2]:[4,De.default.importKey(e,r)];case 1:return o=c.sent(),[3,3];case 2:o=e,c.label=3;case 3:return i=o,s=(null==r?void 0:r.alg)||It.DEFAULT_SYMM_ALG,u=n.slice(0,16),a=n.slice(16),[4,globalThis.crypto.subtle.decrypt({name:s,iv:s===St.SymmAlg.AES_CTR?void 0:u,counter:s===St.SymmAlg.AES_CTR?new Uint8Array(u):void 0,length:s===St.SymmAlg.AES_CTR?It.DEFAULT_CTR_LEN:void 0},i,a)];case 4:return[2,c.sent()]}}))}))}var Ge=He;function $e(t,e,r){return Me(this,void 0,void 0,(function(){var n;return ze(this,(function(i){switch(i.label){case 0:return[4,Fe(t,e,r)];case 1:return n=i.sent(),[2,xt.default.arrBufToBase64(n)]}}))}))}var We=$e;function qe(t,e,r){return Me(this,void 0,void 0,(function(){var n;return ze(this,(function(i){switch(i.label){case 0:return[4,He(t,e,r)];case 1:return n=i.sent(),[2,xt.default.arrBufToStr(n,16)]}}))}))}var Ve=qe;function Ye(t){return Me(this,void 0,void 0,(function(){var e;return ze(this,(function(r){switch(r.label){case 0:return[4,globalThis.crypto.subtle.exportKey("raw",t)];case 1:return e=r.sent(),[2,xt.default.arrBufToBase64(e)]}}))}))}var Je=Ye,Ze={encryptBytes:Fe,decryptBytes:He,encrypt:$e,decrypt:qe,exportKey:Ye},Xe=Object.defineProperty({encryptBytes:Ke,decryptBytes:Ge,encrypt:We,decrypt:Ve,exportKey:Je,default:Ze},"__esModule",{value:!0}),Qe=p((function(t,e){var r=f&&f.__assign||function(){return(r=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function n(t){for(var r in t)e.hasOwnProperty(r)||(e[r]=t[r])}Object.defineProperty(e,"__esModule",{value:!0}),n(De),n(Xe),e.default=r(r({},De.default),Xe.default)})),tr=l(Qe),er=f&&f.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function s(t){try{a(n.next(t))}catch(t){o(t)}}function u(t){try{a(n.throw(t))}catch(t){o(t)}}function a(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,u)}a((n=n.apply(t,e||[])).next())}))},rr=f&&f.__generator||function(t,e){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}},nr=function(){function t(t,e){this.cfg=t,this.store=e}return t.prototype.writeKey=function(){return er(this,void 0,void 0,(function(){var t;return rr(this,(function(e){switch(e.label){case 0:return[4,we.default.getKeypair(this.cfg.writeKeyName,this.store)];case 1:return t=e.sent(),[2,Tt.checkIsKeyPair(t)]}}))}))},t.prototype.readKey=function(){return er(this,void 0,void 0,(function(){var t;return rr(this,(function(e){switch(e.label){case 0:return[4,we.default.getKeypair(this.cfg.readKeyName,this.store)];case 1:return t=e.sent(),[2,Tt.checkIsKeyPair(t)]}}))}))},t.prototype.getSymmKey=function(t,e){return er(this,void 0,void 0,(function(){var r,n,i;return rr(this,(function(o){switch(o.label){case 0:return r=Oe.default.merge(this.cfg,e),[4,we.default.getKey(t,this.store)];case 1:return null!==(n=o.sent())?[2,n]:[4,Qe.default.makeKey(Oe.default.symmKeyOpts(r))];case 2:return i=o.sent(),[4,we.default.put(t,i,this.store)];case 3:return o.sent(),[2,i]}}))}))},t.prototype.keyExists=function(t){return er(this,void 0,void 0,(function(){return rr(this,(function(e){switch(e.label){case 0:return[4,we.default.getKey(t,this.store)];case 1:return[2,null!==e.sent()]}}))}))},t.prototype.deleteKey=function(t){return er(this,void 0,void 0,(function(){return rr(this,(function(e){return[2,we.default.rm(t,this.store)]}))}))},t.prototype.destroy=function(){return er(this,void 0,void 0,(function(){return rr(this,(function(t){return[2,we.default.dropStore(this.store)]}))}))},t.prototype.importSymmKey=function(t,e,r){return er(this,void 0,void 0,(function(){var n,i;return rr(this,(function(o){switch(o.label){case 0:return n=Oe.default.merge(this.cfg,r),[4,Qe.default.importKey(t,Oe.default.symmKeyOpts(n))];case 1:return i=o.sent(),[4,we.default.put(e,i,this.store)];case 2:return o.sent(),[2]}}))}))},t.prototype.exportSymmKey=function(t,e){return er(this,void 0,void 0,(function(){var r;return rr(this,(function(n){switch(n.label){case 0:return[4,this.getSymmKey(t,e)];case 1:return r=n.sent(),[2,Qe.default.exportKey(r)]}}))}))},t.prototype.encryptWithSymmKey=function(t,e,r){return er(this,void 0,void 0,(function(){var n,i,o;return rr(this,(function(s){switch(s.label){case 0:return n=Oe.default.merge(this.cfg,r),[4,this.getSymmKey(e,r)];case 1:return i=s.sent(),[4,Qe.default.encryptBytes(xt.default.strToArrBuf(t,n.charSize),i,Oe.default.symmKeyOpts(n))];case 2:return o=s.sent(),[2,xt.default.arrBufToBase64(o)]}}))}))},t.prototype.decryptWithSymmKey=function(t,e,r){return er(this,void 0,void 0,(function(){var n,i,o;return rr(this,(function(s){switch(s.label){case 0:return n=Oe.default.merge(this.cfg,r),[4,this.getSymmKey(e,r)];case 1:return i=s.sent(),[4,Qe.default.decryptBytes(xt.default.base64ToArrBuf(t),i,Oe.default.symmKeyOpts(n))];case 2:return o=s.sent(),[2,xt.default.arrBufToStr(o,n.charSize)]}}))}))},t}(),ir=Object.defineProperty({default:nr},"__esModule",{value:!0}),or=f&&f.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),sr=f&&f.__assign||function(){return(sr=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},ur=f&&f.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function s(t){try{a(n.next(t))}catch(t){o(t)}}function u(t){try{a(n.throw(t))}catch(t){o(t)}}function a(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,u)}a((n=n.apply(t,e||[])).next())}))},ar=f&&f.__generator||function(t,e){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}},cr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return or(e,t),e.init=function(t){return ur(this,void 0,void 0,(function(){var r,n,i,o,s,u,a;return ar(this,(function(c){switch(c.label){case 0:return r=Oe.default.normalize(sr(sr({},t||{}),{type:St.CryptoSystem.RSA})),n=r.rsaSize,i=r.hashAlg,o=r.storeName,s=r.readKeyName,u=r.writeKeyName,a=we.default.createStore(o),[4,we.default.createIfDoesNotExist(s,(function(){return Pt.default.makeKeypair(n,i,St.KeyUse.Read)}),a)];case 1:return c.sent(),[4,we.default.createIfDoesNotExist(u,(function(){return Pt.default.makeKeypair(n,i,St.KeyUse.Write)}),a)];case 2:return c.sent(),[2,new e(r,a)]}}))}))},e.prototype.sign=function(t,e){return ur(this,void 0,void 0,(function(){var r,n,i,o;return ar(this,(function(s){switch(s.label){case 0:return r=Oe.default.merge(this.cfg,e),[4,this.writeKey()];case 1:return n=s.sent(),o=(i=xt.default).arrBufToBase64,[4,Zt.default.sign(t,n.privateKey,r.charSize)];case 2:return[2,o.apply(i,[s.sent()])]}}))}))},e.prototype.verify=function(t,e,r,n){return ur(this,void 0,void 0,(function(){var i;return ar(this,(function(o){return i=Oe.default.merge(this.cfg,n),[2,Zt.default.verify(t,e,r,i.charSize,i.hashAlg)]}))}))},e.prototype.encrypt=function(t,e,r){return ur(this,void 0,void 0,(function(){var n,i,o;return ar(this,(function(s){switch(s.label){case 0:return n=Oe.default.merge(this.cfg,r),o=(i=xt.default).arrBufToBase64,[4,Zt.default.encrypt(t,e,n.charSize,n.hashAlg)];case 1:return[2,o.apply(i,[s.sent()])]}}))}))},e.prototype.decrypt=function(t,e,r){return ur(this,void 0,void 0,(function(){var e,n,i,o;return ar(this,(function(s){switch(s.label){case 0:return[4,this.readKey()];case 1:return e=s.sent(),n=Oe.default.merge(this.cfg,r),o=(i=xt.default).arrBufToStr,[4,Zt.default.decrypt(t,e.privateKey)];case 2:return[2,o.apply(i,[s.sent(),n.charSize])]}}))}))},e.prototype.publicReadKey=function(){return ur(this,void 0,void 0,(function(){var t;return ar(this,(function(e){switch(e.label){case 0:return[4,this.readKey()];case 1:return t=e.sent(),[2,Zt.default.getPublicKey(t)]}}))}))},e.prototype.publicWriteKey=function(){return ur(this,void 0,void 0,(function(){var t;return ar(this,(function(e){switch(e.label){case 0:return[4,this.writeKey()];case 1:return t=e.sent(),[2,Zt.default.getPublicKey(t)]}}))}))},e}(ir.default),fr=cr,lr=cr,hr=Object.defineProperty({RSAKeyStore:fr,default:lr},"__esModule",{value:!0}),pr=l(p((function(t,e){var r=f&&f.__assign||function(){return(r=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function n(t){for(var r in t)e.hasOwnProperty(r)||(e[r]=t[r])}Object.defineProperty(e,"__esModule",{value:!0}),n(Pt),n(Zt),n(hr),e.default=r(r(r({},Pt.default),Zt.default),hr.default)}))),dr="undefined"!=typeof window&&void 0!==window.document,yr=function(t){if(!dr)throw new Error("Must be in browser to use method. Provide a node-compatible implementation for "+t)},vr=p((function(t,e){t.exports=function(){
/*! *****************************************************************************
        Copyright (c) Microsoft Corporation. All rights reserved.
        Licensed under the Apache License, Version 2.0 (the "License"); you may not use
        this file except in compliance with the License. You may obtain a copy of the
        License at http://www.apache.org/licenses/LICENSE-2.0

        THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
        KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
        WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
        MERCHANTABLITY OR NON-INFRINGEMENT.

        See the Apache Version 2.0 License for specific language governing permissions
        and limitations under the License.
        ***************************************************************************** */
var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};function e(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}var r=function(){return(r=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function n(t,e,r,n){return new(r||(r=Promise))((function(i,o){function s(t){try{a(n.next(t))}catch(t){o(t)}}function u(t){try{a(n.throw(t))}catch(t){o(t)}}function a(t){t.done?i(t.value):new r((function(e){e(t.value)})).then(s,u)}a((n=n.apply(t,e||[])).next())}))}function i(t,e){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(t){return function(e){return a([t,e])}}function a(o){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}}!function(t){function e(){var e=this||self;e.globalThis=e,delete t.prototype._T_}"object"!=typeof globalThis&&(this?e():(t.defineProperty(t.prototype,"_T_",{configurable:!0,get:e}),_T_))}(Object);var o="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==f?f:"undefined"!=typeof self?self:{};function s(){throw new Error("Dynamic requires are not currently supported by rollup-plugin-commonjs")}function u(t,e){return t(e={exports:{}},e.exports),e.exports}var a,c,l,h,p,d,y,v,g=u((function(t,e){
/*!
            localForage -- Offline Storage, Improved
            Version 1.7.3
            https://localforage.github.io/localForage
            (c) 2013-2017 Mozilla, Apache License 2.0
        */
var r;r=function(){return function t(e,r,n){function i(u,a){if(!r[u]){if(!e[u]){var c="function"==typeof s&&s;if(!a&&c)return c(u,!0);if(o)return o(u,!0);var f=new Error("Cannot find module '"+u+"'");throw f.code="MODULE_NOT_FOUND",f}var l=r[u]={exports:{}};e[u][0].call(l.exports,(function(t){var r=e[u][1][t];return i(r||t)}),l,l.exports,t,e,r,n)}return r[u].exports}for(var o="function"==typeof s&&s,u=0;u<n.length;u++)i(n[u]);return i}({1:[function(t,e,r){(function(t){var r,n,i=t.MutationObserver||t.WebKitMutationObserver;if(i){var o=0,s=new i(f),u=t.document.createTextNode("");s.observe(u,{characterData:!0}),r=function(){u.data=o=++o%2}}else if(t.setImmediate||void 0===t.MessageChannel)r="document"in t&&"onreadystatechange"in t.document.createElement("script")?function(){var e=t.document.createElement("script");e.onreadystatechange=function(){f(),e.onreadystatechange=null,e.parentNode.removeChild(e),e=null},t.document.documentElement.appendChild(e)}:function(){setTimeout(f,0)};else{var a=new t.MessageChannel;a.port1.onmessage=f,r=function(){a.port2.postMessage(0)}}var c=[];function f(){var t,e;n=!0;for(var r=c.length;r;){for(e=c,c=[],t=-1;++t<r;)e[t]();r=c.length}n=!1}function l(t){1!==c.push(t)||n||r()}e.exports=l}).call(this,void 0!==o?o:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(t,e,r){var n=t(1);function i(){}var o={},s=["REJECTED"],u=["FULFILLED"],a=["PENDING"];function c(t){if("function"!=typeof t)throw new TypeError("resolver must be a function");this.state=a,this.queue=[],this.outcome=void 0,t!==i&&p(this,t)}function f(t,e,r){this.promise=t,"function"==typeof e&&(this.onFulfilled=e,this.callFulfilled=this.otherCallFulfilled),"function"==typeof r&&(this.onRejected=r,this.callRejected=this.otherCallRejected)}function l(t,e,r){n((function(){var n;try{n=e(r)}catch(e){return o.reject(t,e)}n===t?o.reject(t,new TypeError("Cannot resolve promise with itself")):o.resolve(t,n)}))}function h(t){var e=t&&t.then;if(t&&("object"==typeof t||"function"==typeof t)&&"function"==typeof e)return function(){e.apply(t,arguments)}}function p(t,e){var r=!1;function n(e){r||(r=!0,o.reject(t,e))}function i(e){r||(r=!0,o.resolve(t,e))}function s(){e(i,n)}var u=d(s);"error"===u.status&&n(u.value)}function d(t,e){var r={};try{r.value=t(e),r.status="success"}catch(t){r.status="error",r.value=t}return r}function y(t){return t instanceof this?t:o.resolve(new this(i),t)}function v(t){var e=new this(i);return o.reject(e,t)}function g(t){var e=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var r=t.length,n=!1;if(!r)return this.resolve([]);for(var s=new Array(r),u=0,a=-1,c=new this(i);++a<r;)f(t[a],a);return c;function f(t,i){function a(t){s[i]=t,++u!==r||n||(n=!0,o.resolve(c,s))}e.resolve(t).then(a,(function(t){n||(n=!0,o.reject(c,t))}))}}function m(t){var e=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var r=t.length,n=!1;if(!r)return this.resolve([]);for(var s=-1,u=new this(i);++s<r;)a(t[s]);return u;function a(t){e.resolve(t).then((function(t){n||(n=!0,o.resolve(u,t))}),(function(t){n||(n=!0,o.reject(u,t))}))}}e.exports=c,c.prototype.catch=function(t){return this.then(null,t)},c.prototype.then=function(t,e){if("function"!=typeof t&&this.state===u||"function"!=typeof e&&this.state===s)return this;var r=new this.constructor(i);return this.state!==a?l(r,this.state===u?t:e,this.outcome):this.queue.push(new f(r,t,e)),r},f.prototype.callFulfilled=function(t){o.resolve(this.promise,t)},f.prototype.otherCallFulfilled=function(t){l(this.promise,this.onFulfilled,t)},f.prototype.callRejected=function(t){o.reject(this.promise,t)},f.prototype.otherCallRejected=function(t){l(this.promise,this.onRejected,t)},o.resolve=function(t,e){var r=d(h,e);if("error"===r.status)return o.reject(t,r.value);var n=r.value;if(n)p(t,n);else{t.state=u,t.outcome=e;for(var i=-1,s=t.queue.length;++i<s;)t.queue[i].callFulfilled(e)}return t},o.reject=function(t,e){t.state=s,t.outcome=e;for(var r=-1,n=t.queue.length;++r<n;)t.queue[r].callRejected(e);return t},c.resolve=y,c.reject=v,c.all=g,c.race=m},{1:1}],3:[function(t,e,r){(function(e){"function"!=typeof e.Promise&&(e.Promise=t(2))}).call(this,void 0!==o?o:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{2:2}],4:[function(t,e,r){var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(){try{if("undefined"!=typeof indexedDB)return indexedDB;if("undefined"!=typeof webkitIndexedDB)return webkitIndexedDB;if("undefined"!=typeof mozIndexedDB)return mozIndexedDB;if("undefined"!=typeof OIndexedDB)return OIndexedDB;if("undefined"!=typeof msIndexedDB)return msIndexedDB}catch(t){return}}var s=o();function u(){try{if(!s)return!1;var t="undefined"!=typeof openDatabase&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),e="function"==typeof fetch&&-1!==fetch.toString().indexOf("[native code");return(!t||e)&&"undefined"!=typeof indexedDB&&"undefined"!=typeof IDBKeyRange}catch(t){return!1}}function a(t,e){t=t||[],e=e||{};try{return new Blob(t,e)}catch(i){if("TypeError"!==i.name)throw i;for(var r=new("undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),n=0;n<t.length;n+=1)r.append(t[n]);return r.getBlob(e.type)}}"undefined"==typeof Promise&&t(3);var c=Promise;function f(t,e){e&&t.then((function(t){e(null,t)}),(function(t){e(t)}))}function l(t,e,r){"function"==typeof e&&t.then(e),"function"==typeof r&&t.catch(r)}function h(t){return"string"!=typeof t&&(console.warn(t+" used as a key, but it is not a string."),t=String(t)),t}function p(){if(arguments.length&&"function"==typeof arguments[arguments.length-1])return arguments[arguments.length-1]}var d="local-forage-detect-blob-support",y=void 0,v={},g=Object.prototype.toString,m="readonly",b="readwrite";function _(t){for(var e=t.length,r=new ArrayBuffer(e),n=new Uint8Array(r),i=0;i<e;i++)n[i]=t.charCodeAt(i);return r}function w(t){return new c((function(e){var r=t.transaction(d,b),n=a([""]);r.objectStore(d).put(n,"key"),r.onabort=function(t){t.preventDefault(),t.stopPropagation(),e(!1)},r.oncomplete=function(){var t=navigator.userAgent.match(/Chrome\/(\d+)/),r=navigator.userAgent.match(/Edge\//);e(r||!t||parseInt(t[1],10)>=43)}})).catch((function(){return!1}))}function k(t){return"boolean"==typeof y?c.resolve(y):w(t).then((function(t){return y=t}))}function E(t){var e=v[t.name],r={};r.promise=new c((function(t,e){r.resolve=t,r.reject=e})),e.deferredOperations.push(r),e.dbReady?e.dbReady=e.dbReady.then((function(){return r.promise})):e.dbReady=r.promise}function A(t){var e=v[t.name].deferredOperations.pop();if(e)return e.resolve(),e.promise}function S(t,e){var r=v[t.name].deferredOperations.pop();if(r)return r.reject(e),r.promise}function I(t,e){return new c((function(r,n){if(v[t.name]=v[t.name]||L(),t.db){if(!e)return r(t.db);E(t),t.db.close()}var i=[t.name];e&&i.push(t.version);var o=s.open.apply(s,i);e&&(o.onupgradeneeded=function(e){var r=o.result;try{r.createObjectStore(t.storeName),e.oldVersion<=1&&r.createObjectStore(d)}catch(r){if("ConstraintError"!==r.name)throw r;console.warn('The database "'+t.name+'" has been upgraded from version '+e.oldVersion+" to version "+e.newVersion+', but the storage "'+t.storeName+'" already exists.')}}),o.onerror=function(t){t.preventDefault(),n(o.error)},o.onsuccess=function(){r(o.result),A(t)}}))}function x(t){return I(t,!1)}function B(t){return I(t,!0)}function T(t,e){if(!t.db)return!0;var r=!t.db.objectStoreNames.contains(t.storeName),n=t.version<t.db.version,i=t.version>t.db.version;if(n&&(t.version!==e&&console.warn('The database "'+t.name+"\" can't be downgraded from version "+t.db.version+" to version "+t.version+"."),t.version=t.db.version),i||r){if(r){var o=t.db.version+1;o>t.version&&(t.version=o)}return!0}return!1}function O(t){return new c((function(e,r){var n=new FileReader;n.onerror=r,n.onloadend=function(r){var n=btoa(r.target.result||"");e({__local_forage_encoded_blob:!0,data:n,type:t.type})},n.readAsBinaryString(t)}))}function N(t){return a([_(atob(t.data))],{type:t.type})}function C(t){return t&&t.__local_forage_encoded_blob}function R(t){var e=this,r=e._initReady().then((function(){var t=v[e._dbInfo.name];if(t&&t.dbReady)return t.dbReady}));return l(r,t,t),r}function U(t){E(t);for(var e=v[t.name],r=e.forages,n=0;n<r.length;n++){var i=r[n];i._dbInfo.db&&(i._dbInfo.db.close(),i._dbInfo.db=null)}return t.db=null,x(t).then((function(e){return t.db=e,T(t)?B(t):e})).then((function(n){t.db=e.db=n;for(var i=0;i<r.length;i++)r[i]._dbInfo.db=n})).catch((function(e){throw S(t,e),e}))}function j(t,e,r,n){void 0===n&&(n=1);try{var i=t.db.transaction(t.storeName,e);r(null,i)}catch(i){if(n>0&&(!t.db||"InvalidStateError"===i.name||"NotFoundError"===i.name))return c.resolve().then((function(){if(!t.db||"NotFoundError"===i.name&&!t.db.objectStoreNames.contains(t.storeName)&&t.version<=t.db.version)return t.db&&(t.version=t.db.version+1),B(t)})).then((function(){return U(t).then((function(){j(t,e,r,n-1)}))})).catch(r);r(i)}}function L(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function P(t){var e=this,r={db:null};if(t)for(var n in t)r[n]=t[n];var i=v[r.name];i||(i=L(),v[r.name]=i),i.forages.push(e),e._initReady||(e._initReady=e.ready,e.ready=R);var o=[];function s(){return c.resolve()}for(var u=0;u<i.forages.length;u++){var a=i.forages[u];a!==e&&o.push(a._initReady().catch(s))}var f=i.forages.slice(0);return c.all(o).then((function(){return r.db=i.db,x(r)})).then((function(t){return r.db=t,T(r,e._defaultConfig.version)?B(r):t})).then((function(t){r.db=i.db=t,e._dbInfo=r;for(var n=0;n<f.length;n++){var o=f[n];o!==e&&(o._dbInfo.db=r.db,o._dbInfo.version=r.version)}}))}function D(t,e){var r=this;t=h(t);var n=new c((function(e,n){r.ready().then((function(){j(r._dbInfo,m,(function(i,o){if(i)return n(i);try{var s=o.objectStore(r._dbInfo.storeName).get(t);s.onsuccess=function(){var t=s.result;void 0===t&&(t=null),C(t)&&(t=N(t)),e(t)},s.onerror=function(){n(s.error)}}catch(t){n(t)}}))})).catch(n)}));return f(n,e),n}function M(t,e){var r=this,n=new c((function(e,n){r.ready().then((function(){j(r._dbInfo,m,(function(i,o){if(i)return n(i);try{var s=o.objectStore(r._dbInfo.storeName).openCursor(),u=1;s.onsuccess=function(){var r=s.result;if(r){var n=r.value;C(n)&&(n=N(n));var i=t(n,r.key,u++);void 0!==i?e(i):r.continue()}else e()},s.onerror=function(){n(s.error)}}catch(t){n(t)}}))})).catch(n)}));return f(n,e),n}function z(t,e,r){var n=this;t=h(t);var i=new c((function(r,i){var o;n.ready().then((function(){return o=n._dbInfo,"[object Blob]"===g.call(e)?k(o.db).then((function(t){return t?e:O(e)})):e})).then((function(e){j(n._dbInfo,b,(function(o,s){if(o)return i(o);try{var u=s.objectStore(n._dbInfo.storeName);null===e&&(e=void 0);var a=u.put(e,t);s.oncomplete=function(){void 0===e&&(e=null),r(e)},s.onabort=s.onerror=function(){var t=a.error?a.error:a.transaction.error;i(t)}}catch(t){i(t)}}))})).catch(i)}));return f(i,r),i}function F(t,e){var r=this;t=h(t);var n=new c((function(e,n){r.ready().then((function(){j(r._dbInfo,b,(function(i,o){if(i)return n(i);try{var s=o.objectStore(r._dbInfo.storeName).delete(t);o.oncomplete=function(){e()},o.onerror=function(){n(s.error)},o.onabort=function(){var t=s.error?s.error:s.transaction.error;n(t)}}catch(t){n(t)}}))})).catch(n)}));return f(n,e),n}function K(t){var e=this,r=new c((function(t,r){e.ready().then((function(){j(e._dbInfo,b,(function(n,i){if(n)return r(n);try{var o=i.objectStore(e._dbInfo.storeName).clear();i.oncomplete=function(){t()},i.onabort=i.onerror=function(){var t=o.error?o.error:o.transaction.error;r(t)}}catch(t){r(t)}}))})).catch(r)}));return f(r,t),r}function H(t){var e=this,r=new c((function(t,r){e.ready().then((function(){j(e._dbInfo,m,(function(n,i){if(n)return r(n);try{var o=i.objectStore(e._dbInfo.storeName).count();o.onsuccess=function(){t(o.result)},o.onerror=function(){r(o.error)}}catch(t){r(t)}}))})).catch(r)}));return f(r,t),r}function G(t,e){var r=this,n=new c((function(e,n){t<0?e(null):r.ready().then((function(){j(r._dbInfo,m,(function(i,o){if(i)return n(i);try{var s=o.objectStore(r._dbInfo.storeName),u=!1,a=s.openCursor();a.onsuccess=function(){var r=a.result;r?0===t||u?e(r.key):(u=!0,r.advance(t)):e(null)},a.onerror=function(){n(a.error)}}catch(t){n(t)}}))})).catch(n)}));return f(n,e),n}function $(t){var e=this,r=new c((function(t,r){e.ready().then((function(){j(e._dbInfo,m,(function(n,i){if(n)return r(n);try{var o=i.objectStore(e._dbInfo.storeName).openCursor(),s=[];o.onsuccess=function(){var e=o.result;e?(s.push(e.key),e.continue()):t(s)},o.onerror=function(){r(o.error)}}catch(t){r(t)}}))})).catch(r)}));return f(r,t),r}function W(t,e){e=p.apply(this,arguments);var r=this.config();(t="function"!=typeof t&&t||{}).name||(t.name=t.name||r.name,t.storeName=t.storeName||r.storeName);var n,i=this;if(t.name){var o=t.name===r.name&&i._dbInfo.db?c.resolve(i._dbInfo.db):x(t).then((function(e){var r=v[t.name],n=r.forages;r.db=e;for(var i=0;i<n.length;i++)n[i]._dbInfo.db=e;return e}));n=t.storeName?o.then((function(e){if(e.objectStoreNames.contains(t.storeName)){var r=e.version+1;E(t);var n=v[t.name],i=n.forages;e.close();for(var o=0;o<i.length;o++){var u=i[o];u._dbInfo.db=null,u._dbInfo.version=r}return new c((function(e,n){var i=s.open(t.name,r);i.onerror=function(t){i.result.close(),n(t)},i.onupgradeneeded=function(){i.result.deleteObjectStore(t.storeName)},i.onsuccess=function(){var t=i.result;t.close(),e(t)}})).then((function(t){n.db=t;for(var e=0;e<i.length;e++){var r=i[e];r._dbInfo.db=t,A(r._dbInfo)}})).catch((function(e){throw(S(t,e)||c.resolve()).catch((function(){})),e}))}})):o.then((function(e){E(t);var r=v[t.name],n=r.forages;e.close();for(var i=0;i<n.length;i++)n[i]._dbInfo.db=null;return new c((function(e,r){var n=s.deleteDatabase(t.name);n.onerror=n.onblocked=function(t){var e=n.result;e&&e.close(),r(t)},n.onsuccess=function(){var t=n.result;t&&t.close(),e(t)}})).then((function(t){r.db=t;for(var e=0;e<n.length;e++)A(n[e]._dbInfo)})).catch((function(e){throw(S(t,e)||c.resolve()).catch((function(){})),e}))}))}else n=c.reject("Invalid arguments");return f(n,e),n}var q={_driver:"asyncStorage",_initStorage:P,_support:u(),iterate:M,getItem:D,setItem:z,removeItem:F,clear:K,length:H,key:G,keys:$,dropInstance:W};function V(){return"function"==typeof openDatabase}var Y="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",J="~~local_forage_type~",Z=/^~~local_forage_type~([^~]+)~/,X="__lfsc__:",Q=X.length,tt="arbf",et="blob",rt="si08",nt="ui08",it="uic8",ot="si16",st="si32",ut="ur16",at="ui32",ct="fl32",ft="fl64",lt=Q+tt.length,ht=Object.prototype.toString;function pt(t){var e,r,n,i,o,s=.75*t.length,u=t.length,a=0;"="===t[t.length-1]&&(s--,"="===t[t.length-2]&&s--);var c=new ArrayBuffer(s),f=new Uint8Array(c);for(e=0;e<u;e+=4)r=Y.indexOf(t[e]),n=Y.indexOf(t[e+1]),i=Y.indexOf(t[e+2]),o=Y.indexOf(t[e+3]),f[a++]=r<<2|n>>4,f[a++]=(15&n)<<4|i>>2,f[a++]=(3&i)<<6|63&o;return c}function dt(t){var e,r=new Uint8Array(t),n="";for(e=0;e<r.length;e+=3)n+=Y[r[e]>>2],n+=Y[(3&r[e])<<4|r[e+1]>>4],n+=Y[(15&r[e+1])<<2|r[e+2]>>6],n+=Y[63&r[e+2]];return r.length%3==2?n=n.substring(0,n.length-1)+"=":r.length%3==1&&(n=n.substring(0,n.length-2)+"=="),n}function yt(t,e){var r="";if(t&&(r=ht.call(t)),t&&("[object ArrayBuffer]"===r||t.buffer&&"[object ArrayBuffer]"===ht.call(t.buffer))){var n,i=X;t instanceof ArrayBuffer?(n=t,i+=tt):(n=t.buffer,"[object Int8Array]"===r?i+=rt:"[object Uint8Array]"===r?i+=nt:"[object Uint8ClampedArray]"===r?i+=it:"[object Int16Array]"===r?i+=ot:"[object Uint16Array]"===r?i+=ut:"[object Int32Array]"===r?i+=st:"[object Uint32Array]"===r?i+=at:"[object Float32Array]"===r?i+=ct:"[object Float64Array]"===r?i+=ft:e(new Error("Failed to get type for BinaryArray"))),e(i+dt(n))}else if("[object Blob]"===r){var o=new FileReader;o.onload=function(){var r=J+t.type+"~"+dt(this.result);e(X+et+r)},o.readAsArrayBuffer(t)}else try{e(JSON.stringify(t))}catch(r){console.error("Couldn't convert value into a JSON string: ",t),e(null,r)}}function vt(t){if(t.substring(0,Q)!==X)return JSON.parse(t);var e,r=t.substring(lt),n=t.substring(Q,lt);if(n===et&&Z.test(r)){var i=r.match(Z);e=i[1],r=r.substring(i[0].length)}var o=pt(r);switch(n){case tt:return o;case et:return a([o],{type:e});case rt:return new Int8Array(o);case nt:return new Uint8Array(o);case it:return new Uint8ClampedArray(o);case ot:return new Int16Array(o);case ut:return new Uint16Array(o);case st:return new Int32Array(o);case at:return new Uint32Array(o);case ct:return new Float32Array(o);case ft:return new Float64Array(o);default:throw new Error("Unkown type: "+n)}}var gt={serialize:yt,deserialize:vt,stringToBuffer:pt,bufferToString:dt};function mt(t,e,r,n){t.executeSql("CREATE TABLE IF NOT EXISTS "+e.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],r,n)}function bt(t){var e=this,r={db:null};if(t)for(var n in t)r[n]="string"!=typeof t[n]?t[n].toString():t[n];var i=new c((function(t,n){try{r.db=openDatabase(r.name,String(r.version),r.description,r.size)}catch(t){return n(t)}r.db.transaction((function(i){mt(i,r,(function(){e._dbInfo=r,t()}),(function(t,e){n(e)}))}),n)}));return r.serializer=gt,i}function _t(t,e,r,n,i,o){t.executeSql(r,n,i,(function(t,s){s.code===s.SYNTAX_ERR?t.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[e.storeName],(function(t,u){u.rows.length?o(t,s):mt(t,e,(function(){t.executeSql(r,n,i,o)}),o)}),o):o(t,s)}),o)}function wt(t,e){var r=this;t=h(t);var n=new c((function(e,n){r.ready().then((function(){var i=r._dbInfo;i.db.transaction((function(r){_t(r,i,"SELECT * FROM "+i.storeName+" WHERE key = ? LIMIT 1",[t],(function(t,r){var n=r.rows.length?r.rows.item(0).value:null;n&&(n=i.serializer.deserialize(n)),e(n)}),(function(t,e){n(e)}))}))})).catch(n)}));return f(n,e),n}function kt(t,e){var r=this,n=new c((function(e,n){r.ready().then((function(){var i=r._dbInfo;i.db.transaction((function(r){_t(r,i,"SELECT * FROM "+i.storeName,[],(function(r,n){for(var o=n.rows,s=o.length,u=0;u<s;u++){var a=o.item(u),c=a.value;if(c&&(c=i.serializer.deserialize(c)),void 0!==(c=t(c,a.key,u+1)))return void e(c)}e()}),(function(t,e){n(e)}))}))})).catch(n)}));return f(n,e),n}function Et(t,e,r,n){var i=this;t=h(t);var o=new c((function(o,s){i.ready().then((function(){void 0===e&&(e=null);var u=e,a=i._dbInfo;a.serializer.serialize(e,(function(e,c){c?s(c):a.db.transaction((function(r){_t(r,a,"INSERT OR REPLACE INTO "+a.storeName+" (key, value) VALUES (?, ?)",[t,e],(function(){o(u)}),(function(t,e){s(e)}))}),(function(e){if(e.code===e.QUOTA_ERR){if(n>0)return void o(Et.apply(i,[t,u,r,n-1]));s(e)}}))}))})).catch(s)}));return f(o,r),o}function At(t,e,r){return Et.apply(this,[t,e,r,1])}function St(t,e){var r=this;t=h(t);var n=new c((function(e,n){r.ready().then((function(){var i=r._dbInfo;i.db.transaction((function(r){_t(r,i,"DELETE FROM "+i.storeName+" WHERE key = ?",[t],(function(){e()}),(function(t,e){n(e)}))}))})).catch(n)}));return f(n,e),n}function It(t){var e=this,r=new c((function(t,r){e.ready().then((function(){var n=e._dbInfo;n.db.transaction((function(e){_t(e,n,"DELETE FROM "+n.storeName,[],(function(){t()}),(function(t,e){r(e)}))}))})).catch(r)}));return f(r,t),r}function xt(t){var e=this,r=new c((function(t,r){e.ready().then((function(){var n=e._dbInfo;n.db.transaction((function(e){_t(e,n,"SELECT COUNT(key) as c FROM "+n.storeName,[],(function(e,r){var n=r.rows.item(0).c;t(n)}),(function(t,e){r(e)}))}))})).catch(r)}));return f(r,t),r}function Bt(t,e){var r=this,n=new c((function(e,n){r.ready().then((function(){var i=r._dbInfo;i.db.transaction((function(r){_t(r,i,"SELECT key FROM "+i.storeName+" WHERE id = ? LIMIT 1",[t+1],(function(t,r){var n=r.rows.length?r.rows.item(0).key:null;e(n)}),(function(t,e){n(e)}))}))})).catch(n)}));return f(n,e),n}function Tt(t){var e=this,r=new c((function(t,r){e.ready().then((function(){var n=e._dbInfo;n.db.transaction((function(e){_t(e,n,"SELECT key FROM "+n.storeName,[],(function(e,r){for(var n=[],i=0;i<r.rows.length;i++)n.push(r.rows.item(i).key);t(n)}),(function(t,e){r(e)}))}))})).catch(r)}));return f(r,t),r}function Ot(t){return new c((function(e,r){t.transaction((function(n){n.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],(function(r,n){for(var i=[],o=0;o<n.rows.length;o++)i.push(n.rows.item(o).name);e({db:t,storeNames:i})}),(function(t,e){r(e)}))}),(function(t){r(t)}))}))}function Nt(t,e){e=p.apply(this,arguments);var r=this.config();(t="function"!=typeof t&&t||{}).name||(t.name=t.name||r.name,t.storeName=t.storeName||r.storeName);var n,i=this;return f(n=t.name?new c((function(e){var n;n=t.name===r.name?i._dbInfo.db:openDatabase(t.name,"","",0),t.storeName?e({db:n,storeNames:[t.storeName]}):e(Ot(n))})).then((function(t){return new c((function(e,r){t.db.transaction((function(n){function i(t){return new c((function(e,r){n.executeSql("DROP TABLE IF EXISTS "+t,[],(function(){e()}),(function(t,e){r(e)}))}))}for(var o=[],s=0,u=t.storeNames.length;s<u;s++)o.push(i(t.storeNames[s]));c.all(o).then((function(){e()})).catch((function(t){r(t)}))}),(function(t){r(t)}))}))})):c.reject("Invalid arguments"),e),n}var Ct={_driver:"webSQLStorage",_initStorage:bt,_support:V(),iterate:kt,getItem:wt,setItem:At,removeItem:St,clear:It,length:xt,key:Bt,keys:Tt,dropInstance:Nt};function Rt(){try{return"undefined"!=typeof localStorage&&"setItem"in localStorage&&!!localStorage.setItem}catch(t){return!1}}function Ut(t,e){var r=t.name+"/";return t.storeName!==e.storeName&&(r+=t.storeName+"/"),r}function jt(){var t="_localforage_support_test";try{return localStorage.setItem(t,!0),localStorage.removeItem(t),!1}catch(t){return!0}}function Lt(){return!jt()||localStorage.length>0}function Pt(t){var e=this,r={};if(t)for(var n in t)r[n]=t[n];return r.keyPrefix=Ut(t,e._defaultConfig),Lt()?(e._dbInfo=r,r.serializer=gt,c.resolve()):c.reject()}function Dt(t){var e=this,r=e.ready().then((function(){for(var t=e._dbInfo.keyPrefix,r=localStorage.length-1;r>=0;r--){var n=localStorage.key(r);0===n.indexOf(t)&&localStorage.removeItem(n)}}));return f(r,t),r}function Mt(t,e){var r=this;t=h(t);var n=r.ready().then((function(){var e=r._dbInfo,n=localStorage.getItem(e.keyPrefix+t);return n&&(n=e.serializer.deserialize(n)),n}));return f(n,e),n}function zt(t,e){var r=this,n=r.ready().then((function(){for(var e=r._dbInfo,n=e.keyPrefix,i=n.length,o=localStorage.length,s=1,u=0;u<o;u++){var a=localStorage.key(u);if(0===a.indexOf(n)){var c=localStorage.getItem(a);if(c&&(c=e.serializer.deserialize(c)),void 0!==(c=t(c,a.substring(i),s++)))return c}}}));return f(n,e),n}function Ft(t,e){var r=this,n=r.ready().then((function(){var e,n=r._dbInfo;try{e=localStorage.key(t)}catch(t){e=null}return e&&(e=e.substring(n.keyPrefix.length)),e}));return f(n,e),n}function Kt(t){var e=this,r=e.ready().then((function(){for(var t=e._dbInfo,r=localStorage.length,n=[],i=0;i<r;i++){var o=localStorage.key(i);0===o.indexOf(t.keyPrefix)&&n.push(o.substring(t.keyPrefix.length))}return n}));return f(r,t),r}function Ht(t){var e=this.keys().then((function(t){return t.length}));return f(e,t),e}function Gt(t,e){var r=this;t=h(t);var n=r.ready().then((function(){var e=r._dbInfo;localStorage.removeItem(e.keyPrefix+t)}));return f(n,e),n}function $t(t,e,r){var n=this;t=h(t);var i=n.ready().then((function(){void 0===e&&(e=null);var r=e;return new c((function(i,o){var s=n._dbInfo;s.serializer.serialize(e,(function(e,n){if(n)o(n);else try{localStorage.setItem(s.keyPrefix+t,e),i(r)}catch(t){"QuotaExceededError"!==t.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==t.name||o(t),o(t)}}))}))}));return f(i,r),i}function Wt(t,e){if(e=p.apply(this,arguments),!(t="function"!=typeof t&&t||{}).name){var r=this.config();t.name=t.name||r.name,t.storeName=t.storeName||r.storeName}var n,i=this;return f(n=t.name?new c((function(e){t.storeName?e(Ut(t,i._defaultConfig)):e(t.name+"/")})).then((function(t){for(var e=localStorage.length-1;e>=0;e--){var r=localStorage.key(e);0===r.indexOf(t)&&localStorage.removeItem(r)}})):c.reject("Invalid arguments"),e),n}var qt={_driver:"localStorageWrapper",_initStorage:Pt,_support:Rt(),iterate:zt,getItem:Mt,setItem:$t,removeItem:Gt,clear:Dt,length:Ht,key:Ft,keys:Kt,dropInstance:Wt},Vt=function(t,e){return t===e||"number"==typeof t&&"number"==typeof e&&isNaN(t)&&isNaN(e)},Yt=function(t,e){for(var r=t.length,n=0;n<r;){if(Vt(t[n],e))return!0;n++}return!1},Jt=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},Zt={},Xt={},Qt={INDEXEDDB:q,WEBSQL:Ct,LOCALSTORAGE:qt},te=[Qt.INDEXEDDB._driver,Qt.WEBSQL._driver,Qt.LOCALSTORAGE._driver],ee=["dropInstance"],re=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(ee),ne={description:"",driver:te.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function ie(t,e){t[e]=function(){var r=arguments;return t.ready().then((function(){return t[e].apply(t,r)}))}}function oe(){for(var t=1;t<arguments.length;t++){var e=arguments[t];if(e)for(var r in e)e.hasOwnProperty(r)&&(Jt(e[r])?arguments[0][r]=e[r].slice():arguments[0][r]=e[r])}return arguments[0]}var se=new(function(){function t(e){for(var r in i(this,t),Qt)if(Qt.hasOwnProperty(r)){var n=Qt[r],o=n._driver;this[r]=o,Zt[o]||this.defineDriver(n)}this._defaultConfig=oe({},ne),this._config=oe({},this._defaultConfig,e),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch((function(){}))}return t.prototype.config=function(t){if("object"===(void 0===t?"undefined":n(t))){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var e in t){if("storeName"===e&&(t[e]=t[e].replace(/\W/g,"_")),"version"===e&&"number"!=typeof t[e])return new Error("Database version must be a number.");this._config[e]=t[e]}return!("driver"in t)||!t.driver||this.setDriver(this._config.driver)}return"string"==typeof t?this._config[t]:this._config},t.prototype.defineDriver=function(t,e,r){var n=new c((function(e,r){try{var n=t._driver,i=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!t._driver)return void r(i);for(var o=re.concat("_initStorage"),s=0,u=o.length;s<u;s++){var a=o[s];if((!Yt(ee,a)||t[a])&&"function"!=typeof t[a])return void r(i)}!function(){for(var e=function(t){return function(){var e=new Error("Method "+t+" is not implemented by the current driver"),r=c.reject(e);return f(r,arguments[arguments.length-1]),r}},r=0,n=ee.length;r<n;r++){var i=ee[r];t[i]||(t[i]=e(i))}}();var l=function(r){Zt[n]&&console.info("Redefining LocalForage driver: "+n),Zt[n]=t,Xt[n]=r,e()};"_support"in t?t._support&&"function"==typeof t._support?t._support().then(l,r):l(!!t._support):l(!0)}catch(t){r(t)}}));return l(n,e,r),n},t.prototype.driver=function(){return this._driver||null},t.prototype.getDriver=function(t,e,r){var n=Zt[t]?c.resolve(Zt[t]):c.reject(new Error("Driver not found."));return l(n,e,r),n},t.prototype.getSerializer=function(t){var e=c.resolve(gt);return l(e,t),e},t.prototype.ready=function(t){var e=this,r=e._driverSet.then((function(){return null===e._ready&&(e._ready=e._initDriver()),e._ready}));return l(r,t,t),r},t.prototype.setDriver=function(t,e,r){var n=this;Jt(t)||(t=[t]);var i=this._getSupportedDrivers(t);function o(){n._config.driver=n.driver()}function s(t){return n._extend(t),o(),n._ready=n._initStorage(n._config),n._ready}function u(t){return function(){var e=0;function r(){for(;e<t.length;){var i=t[e];return e++,n._dbInfo=null,n._ready=null,n.getDriver(i).then(s).catch(r)}o();var u=new Error("No available storage method found.");return n._driverSet=c.reject(u),n._driverSet}return r()}}var a=null!==this._driverSet?this._driverSet.catch((function(){return c.resolve()})):c.resolve();return this._driverSet=a.then((function(){var t=i[0];return n._dbInfo=null,n._ready=null,n.getDriver(t).then((function(t){n._driver=t._driver,o(),n._wrapLibraryMethodsWithReady(),n._initDriver=u(i)}))})).catch((function(){o();var t=new Error("No available storage method found.");return n._driverSet=c.reject(t),n._driverSet})),l(this._driverSet,e,r),this._driverSet},t.prototype.supports=function(t){return!!Xt[t]},t.prototype._extend=function(t){oe(this,t)},t.prototype._getSupportedDrivers=function(t){for(var e=[],r=0,n=t.length;r<n;r++){var i=t[r];this.supports(i)&&e.push(i)}return e},t.prototype._wrapLibraryMethodsWithReady=function(){for(var t=0,e=re.length;t<e;t++)ie(this,re[t])},t.prototype.createInstance=function(e){return new t(e)},t}());e.exports=se},{3:3}]},{},[4])(4)},t.exports=r()}));(function(t){t.ECC="ecc",t.RSA="rsa"})(a||(a={})),function(t){t.P_256="P-256",t.P_384="P-384",t.P_521="P-521"}(c||(c={})),function(t){t[t.B1024=1024]="B1024",t[t.B2048=2048]="B2048",t[t.B4096=4096]="B4096"}(l||(l={})),function(t){t.AES_CTR="AES-CTR",t.AES_CBC="AES-CBC"}(h||(h={})),function(t){t[t.B128=128]="B128",t[t.B192=192]="B192",t[t.B256=256]="B256"}(p||(p={})),function(t){t.SHA_1="SHA-1",t.SHA_256="SHA-256",t.SHA_384="SHA-384",t.SHA_512="SHA-512"}(d||(d={})),function(t){t[t.B8=8]="B8",t[t.B16=16]="B16"}(y||(y={})),function(t){t.Read="read",t.Write="write"}(v||(v={}));var m=Object.freeze({__proto__:null,get CryptoSystem(){return a},get EccCurve(){return c},get RsaSize(){return l},get SymmAlg(){return h},get SymmKeyLength(){return p},get HashAlg(){return d},get CharSize(){return y},get KeyUse(){return v}}),b=new Error("Key does not exist. Make sure you properly instantiated the keystore."),_=new Error("Retrieved a symmetric key when an asymmetric keypair was expected. Please use a different key name."),w=new Error("Retrieved an asymmetric keypair when an symmetric key was expected. Please use a different key name."),k=new Error("ECC is not enabled for this browser. Please use RSA instead."),E=new Error("Cryptosystem not supported. Please use ECC or RSA"),A=new Error("Invalid key use. Please use 'read' or 'write");function S(t){if(!t||null===t)throw b;if(void 0===t.privateKey)throw _;return t}function I(t){if(!t||null===t)throw b;if(void 0!==t.privateKey||void 0===t.algorithm)throw w;return t}function x(t){T(t,[a.ECC,a.RSA],E)}function B(t){T(t,[v.Read,v.Write],A)}function T(t,e,r){if(!e.some((function(e){return e===t})))throw r}function O(t){return g.createInstance({name:t})}function N(t,e,r){return void 0===r&&(r=g),n(this,void 0,void 0,(function(){var n;return i(this,(function(i){switch(i.label){case 0:return[4,L(t,r)];case 1:return i.sent()?[2]:[4,e()];case 2:return n=i.sent(),[4,C(t,n,r)];case 3:return i.sent(),[2]}}))}))}function C(t,e,r){return void 0===r&&(r=g),n(this,void 0,void 0,(function(){return i(this,(function(n){return[2,r.setItem(t,e)]}))}))}function R(t,e){return void 0===e&&(e=g),n(this,void 0,void 0,(function(){return i(this,(function(r){return[2,j(t,S,e)]}))}))}function U(t,e){return void 0===e&&(e=g),n(this,void 0,void 0,(function(){return i(this,(function(r){return[2,j(t,I,e)]}))}))}function j(t,e,r){return void 0===r&&(r=g),n(this,void 0,void 0,(function(){var n;return i(this,(function(i){switch(i.label){case 0:return[4,r.getItem(t)];case 1:return[2,null===(n=i.sent())?null:e(n)]}}))}))}function L(t,e){return void 0===e&&(e=g),n(this,void 0,void 0,(function(){return i(this,(function(r){switch(r.label){case 0:return[4,e.getItem(t)];case 1:return[2,null!==r.sent()]}}))}))}function P(t,e){return void 0===e&&(e=g),n(this,void 0,void 0,(function(){return i(this,(function(r){return[2,e.removeItem(t)]}))}))}function D(t){return n(this,void 0,void 0,(function(){return i(this,(function(e){return[2,t.dropInstance()]}))}))}function M(t){return n(this,void 0,void 0,(function(){return i(this,(function(e){return t?[2,D(t)]:[2,g.clear()]}))}))}for(var z={createStore:O,createIfDoesNotExist:N,put:C,getKeypair:R,getKey:U,exists:L,rm:P,dropStore:D,clear:M},F=Object.freeze({__proto__:null,createStore:O,createIfDoesNotExist:N,put:C,getKeypair:R,getKey:U,get:j,exists:L,rm:P,dropStore:D,clear:M,default:z}),K=X,H=tt,G=nt,$=[],W=[],q="undefined"!=typeof Uint8Array?Uint8Array:Array,V="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Y=0,J=V.length;Y<J;++Y)$[Y]=V[Y],W[V.charCodeAt(Y)]=Y;function Z(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");return-1===r&&(r=e),[r,r===e?0:4-r%4]}function X(t){var e=Z(t),r=e[0],n=e[1];return 3*(r+n)/4-n}function Q(t,e,r){return 3*(e+r)/4-r}function tt(t){var e,r,n=Z(t),i=n[0],o=n[1],s=new q(Q(t,i,o)),u=0,a=o>0?i-4:i;for(r=0;r<a;r+=4)e=W[t.charCodeAt(r)]<<18|W[t.charCodeAt(r+1)]<<12|W[t.charCodeAt(r+2)]<<6|W[t.charCodeAt(r+3)],s[u++]=e>>16&255,s[u++]=e>>8&255,s[u++]=255&e;return 2===o&&(e=W[t.charCodeAt(r)]<<2|W[t.charCodeAt(r+1)]>>4,s[u++]=255&e),1===o&&(e=W[t.charCodeAt(r)]<<10|W[t.charCodeAt(r+1)]<<4|W[t.charCodeAt(r+2)]>>2,s[u++]=e>>8&255,s[u++]=255&e),s}function et(t){return $[t>>18&63]+$[t>>12&63]+$[t>>6&63]+$[63&t]}function rt(t,e,r){for(var n,i=[],o=e;o<r;o+=3)n=(t[o]<<16&16711680)+(t[o+1]<<8&65280)+(255&t[o+2]),i.push(et(n));return i.join("")}function nt(t){for(var e,r=t.length,n=r%3,i=[],o=16383,s=0,u=r-n;s<u;s+=o)i.push(rt(t,s,s+o>u?u:s+o));return 1===n?(e=t[r-1],i.push($[e>>2]+$[e<<4&63]+"==")):2===n&&(e=(t[r-2]<<8)+t[r-1],i.push($[e>>10]+$[e>>4&63]+$[e<<2&63]+"=")),i.join("")}W["-".charCodeAt(0)]=62,W["_".charCodeAt(0)]=63;var it={byteLength:K,toByteArray:H,fromByteArray:G},ot={read:function(t,e,r,n,i){var o,s,u=8*i-n-1,a=(1<<u)-1,c=a>>1,f=-7,l=r?i-1:0,h=r?-1:1,p=t[e+l];for(l+=h,o=p&(1<<-f)-1,p>>=-f,f+=u;f>0;o=256*o+t[e+l],l+=h,f-=8);for(s=o&(1<<-f)-1,o>>=-f,f+=n;f>0;s=256*s+t[e+l],l+=h,f-=8);if(0===o)o=1-c;else{if(o===a)return s?NaN:1/0*(p?-1:1);s+=Math.pow(2,n),o-=c}return(p?-1:1)*s*Math.pow(2,o-n)},write:function(t,e,r,n,i,o){var s,u,a,c=8*o-i-1,f=(1<<c)-1,l=f>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:o-1,d=n?1:-1,y=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(u=isNaN(e)?1:0,s=f):(s=Math.floor(Math.log(e)/Math.LN2),e*(a=Math.pow(2,-s))<1&&(s--,a*=2),(e+=s+l>=1?h/a:h*Math.pow(2,1-l))*a>=2&&(s++,a/=2),s+l>=f?(u=0,s=f):s+l>=1?(u=(e*a-1)*Math.pow(2,i),s+=l):(u=e*Math.pow(2,l-1)*Math.pow(2,i),s=0));i>=8;t[r+p]=255&u,p+=d,u/=256,i-=8);for(s=s<<i|u,c+=i;c>0;t[r+p]=255&s,p+=d,s/=256,c-=8);t[r+p-d]|=128*y}},st=u((function(t,e){const r="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=s,e.SlowBuffer=g,e.INSPECT_MAX_BYTES=50;const n=2147483647;function i(){try{const t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),42===t.foo()}catch(t){return!1}}function o(t){if(t>n)throw new RangeError('The value "'+t+'" is invalid for option "size"');const e=new Uint8Array(t);return Object.setPrototypeOf(e,s.prototype),e}function s(t,e,r){if("number"==typeof t){if("string"==typeof e)throw new TypeError('The "string" argument must be of type string. Received type number');return f(t)}return u(t,e,r)}function u(t,e,r){if("string"==typeof t)return l(t,e);if(ArrayBuffer.isView(t))return p(t);if(null==t)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(nt(t,ArrayBuffer)||t&&nt(t.buffer,ArrayBuffer))return d(t,e,r);if("undefined"!=typeof SharedArrayBuffer&&(nt(t,SharedArrayBuffer)||t&&nt(t.buffer,SharedArrayBuffer)))return d(t,e,r);if("number"==typeof t)throw new TypeError('The "value" argument must not be of type number. Received type number');const n=t.valueOf&&t.valueOf();if(null!=n&&n!==t)return s.from(n,e,r);const i=y(t);if(i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof t[Symbol.toPrimitive])return s.from(t[Symbol.toPrimitive]("string"),e,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}function a(t){if("number"!=typeof t)throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function c(t,e,r){return a(t),t<=0?o(t):void 0!==e?"string"==typeof r?o(t).fill(e,r):o(t).fill(e):o(t)}function f(t){return a(t),o(t<0?0:0|v(t))}function l(t,e){if("string"==typeof e&&""!==e||(e="utf8"),!s.isEncoding(e))throw new TypeError("Unknown encoding: "+e);const r=0|m(t,e);let n=o(r);const i=n.write(t,e);return i!==r&&(n=n.slice(0,i)),n}function h(t){const e=t.length<0?0:0|v(t.length),r=o(e);for(let n=0;n<e;n+=1)r[n]=255&t[n];return r}function p(t){if(nt(t,Uint8Array)){const e=new Uint8Array(t);return d(e.buffer,e.byteOffset,e.byteLength)}return h(t)}function d(t,e,r){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(r||0))throw new RangeError('"length" is outside of buffer bounds');let n;return n=void 0===e&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,e):new Uint8Array(t,e,r),Object.setPrototypeOf(n,s.prototype),n}function y(t){if(s.isBuffer(t)){const e=0|v(t.length),r=o(e);return 0===r.length||t.copy(r,0,0,e),r}return void 0!==t.length?"number"!=typeof t.length||st(t.length)?o(0):h(t):"Buffer"===t.type&&Array.isArray(t.data)?h(t.data):void 0}function v(t){if(t>=n)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+n.toString(16)+" bytes");return 0|t}function g(t){return+t!=t&&(t=0),s.alloc(+t)}function m(t,e){if(s.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||nt(t,ArrayBuffer))return t.byteLength;if("string"!=typeof t)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);const r=t.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;let i=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return X(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return et(t).length;default:if(i)return n?-1:X(t).length;e=(""+e).toLowerCase(),i=!0}}function b(t,e,r){let n=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return U(this,e,r);case"utf8":case"utf-8":return T(this,e,r);case"ascii":return C(this,e,r);case"latin1":case"binary":return R(this,e,r);case"base64":return B(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return j(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function _(t,e,r){const n=t[e];t[e]=t[r],t[r]=n}function w(t,e,r,n,i){if(0===t.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),st(r=+r)&&(r=i?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(i)return-1;r=t.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof e&&(e=s.from(e,n)),s.isBuffer(e))return 0===e.length?-1:k(t,e,r,n,i);if("number"==typeof e)return e&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):k(t,[e],r,n,i);throw new TypeError("val must be string, number or Buffer")}function k(t,e,r,n,i){let o,s=1,u=t.length,a=e.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;s=2,u/=2,a/=2,r/=2}function c(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}if(i){let n=-1;for(o=r;o<u;o++)if(c(t,o)===c(e,-1===n?0:o-n)){if(-1===n&&(n=o),o-n+1===a)return n*s}else-1!==n&&(o-=o-n),n=-1}else for(r+a>u&&(r=u-a),o=r;o>=0;o--){let r=!0;for(let n=0;n<a;n++)if(c(t,o+n)!==c(e,n)){r=!1;break}if(r)return o}return-1}function E(t,e,r,n){r=Number(r)||0;const i=t.length-r;n?(n=Number(n))>i&&(n=i):n=i;const o=e.length;let s;for(n>o/2&&(n=o/2),s=0;s<n;++s){const n=parseInt(e.substr(2*s,2),16);if(st(n))return s;t[r+s]=n}return s}function A(t,e,r,n){return rt(X(e,t.length-r),t,r,n)}function S(t,e,r,n){return rt(Q(e),t,r,n)}function I(t,e,r,n){return rt(et(e),t,r,n)}function x(t,e,r,n){return rt(tt(e,t.length-r),t,r,n)}function B(t,e,r){return 0===e&&r===t.length?it.fromByteArray(t):it.fromByteArray(t.slice(e,r))}function T(t,e,r){r=Math.min(t.length,r);const n=[];let i=e;for(;i<r;){const e=t[i];let o=null,s=e>239?4:e>223?3:e>191?2:1;if(i+s<=r){let r,n,u,a;switch(s){case 1:e<128&&(o=e);break;case 2:r=t[i+1],128==(192&r)&&(a=(31&e)<<6|63&r,a>127&&(o=a));break;case 3:r=t[i+1],n=t[i+2],128==(192&r)&&128==(192&n)&&(a=(15&e)<<12|(63&r)<<6|63&n,a>2047&&(a<55296||a>57343)&&(o=a));break;case 4:r=t[i+1],n=t[i+2],u=t[i+3],128==(192&r)&&128==(192&n)&&128==(192&u)&&(a=(15&e)<<18|(63&r)<<12|(63&n)<<6|63&u,a>65535&&a<1114112&&(o=a))}}null===o?(o=65533,s=1):o>65535&&(o-=65536,n.push(o>>>10&1023|55296),o=56320|1023&o),n.push(o),i+=s}return N(n)}e.kMaxLength=n,s.TYPED_ARRAY_SUPPORT=i(),s.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(s.prototype,"parent",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.buffer}}),Object.defineProperty(s.prototype,"offset",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.byteOffset}}),s.poolSize=8192,s.from=function(t,e,r){return u(t,e,r)},Object.setPrototypeOf(s.prototype,Uint8Array.prototype),Object.setPrototypeOf(s,Uint8Array),s.alloc=function(t,e,r){return c(t,e,r)},s.allocUnsafe=function(t){return f(t)},s.allocUnsafeSlow=function(t){return f(t)},s.isBuffer=function(t){return null!=t&&!0===t._isBuffer&&t!==s.prototype},s.compare=function(t,e){if(nt(t,Uint8Array)&&(t=s.from(t,t.offset,t.byteLength)),nt(e,Uint8Array)&&(e=s.from(e,e.offset,e.byteLength)),!s.isBuffer(t)||!s.isBuffer(e))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;let r=t.length,n=e.length;for(let i=0,o=Math.min(r,n);i<o;++i)if(t[i]!==e[i]){r=t[i],n=e[i];break}return r<n?-1:n<r?1:0},s.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return s.alloc(0);let r;if(void 0===e)for(e=0,r=0;r<t.length;++r)e+=t[r].length;const n=s.allocUnsafe(e);let i=0;for(r=0;r<t.length;++r){let e=t[r];if(nt(e,Uint8Array))i+e.length>n.length?(s.isBuffer(e)||(e=s.from(e)),e.copy(n,i)):Uint8Array.prototype.set.call(n,e,i);else{if(!s.isBuffer(e))throw new TypeError('"list" argument must be an Array of Buffers');e.copy(n,i)}i+=e.length}return n},s.byteLength=m,s.prototype._isBuffer=!0,s.prototype.swap16=function(){const t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let e=0;e<t;e+=2)_(this,e,e+1);return this},s.prototype.swap32=function(){const t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let e=0;e<t;e+=4)_(this,e,e+3),_(this,e+1,e+2);return this},s.prototype.swap64=function(){const t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let e=0;e<t;e+=8)_(this,e,e+7),_(this,e+1,e+6),_(this,e+2,e+5),_(this,e+3,e+4);return this},s.prototype.toString=function(){const t=this.length;return 0===t?"":0===arguments.length?T(this,0,t):b.apply(this,arguments)},s.prototype.toLocaleString=s.prototype.toString,s.prototype.equals=function(t){if(!s.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===s.compare(this,t)},s.prototype.inspect=function(){let t="";const r=e.INSPECT_MAX_BYTES;return t=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(t+=" ... "),"<Buffer "+t+">"},r&&(s.prototype[r]=s.prototype.inspect),s.prototype.compare=function(t,e,r,n,i){if(nt(t,Uint8Array)&&(t=s.from(t,t.offset,t.byteLength)),!s.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(void 0===e&&(e=0),void 0===r&&(r=t?t.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),e<0||r>t.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&e>=r)return 0;if(n>=i)return-1;if(e>=r)return 1;if(this===t)return 0;let o=(i>>>=0)-(n>>>=0),u=(r>>>=0)-(e>>>=0);const a=Math.min(o,u),c=this.slice(n,i),f=t.slice(e,r);for(let t=0;t<a;++t)if(c[t]!==f[t]){o=c[t],u=f[t];break}return o<u?-1:u<o?1:0},s.prototype.includes=function(t,e,r){return-1!==this.indexOf(t,e,r)},s.prototype.indexOf=function(t,e,r){return w(this,t,e,r,!0)},s.prototype.lastIndexOf=function(t,e,r){return w(this,t,e,r,!1)},s.prototype.write=function(t,e,r,n){if(void 0===e)n="utf8",r=this.length,e=0;else if(void 0===r&&"string"==typeof e)n=e,r=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}const i=this.length-e;if((void 0===r||r>i)&&(r=i),t.length>0&&(r<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");let o=!1;for(;;)switch(n){case"hex":return E(this,t,e,r);case"utf8":case"utf-8":return A(this,t,e,r);case"ascii":case"latin1":case"binary":return S(this,t,e,r);case"base64":return I(this,t,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return x(this,t,e,r);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const O=4096;function N(t){const e=t.length;if(e<=O)return String.fromCharCode.apply(String,t);let r="",n=0;for(;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=O));return r}function C(t,e,r){let n="";r=Math.min(t.length,r);for(let i=e;i<r;++i)n+=String.fromCharCode(127&t[i]);return n}function R(t,e,r){let n="";r=Math.min(t.length,r);for(let i=e;i<r;++i)n+=String.fromCharCode(t[i]);return n}function U(t,e,r){const n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);let i="";for(let n=e;n<r;++n)i+=ut[t[n]];return i}function j(t,e,r){const n=t.slice(e,r);let i="";for(let t=0;t<n.length-1;t+=2)i+=String.fromCharCode(n[t]+256*n[t+1]);return i}function L(t,e,r){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}function P(t,e,r,n,i,o){if(!s.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}function D(t,e,r,n,i){q(e,n,i,t,r,7);let o=Number(e&BigInt(4294967295));t[r++]=o,o>>=8,t[r++]=o,o>>=8,t[r++]=o,o>>=8,t[r++]=o;let s=Number(e>>BigInt(32)&BigInt(4294967295));return t[r++]=s,s>>=8,t[r++]=s,s>>=8,t[r++]=s,s>>=8,t[r++]=s,r}function M(t,e,r,n,i){q(e,n,i,t,r,7);let o=Number(e&BigInt(4294967295));t[r+7]=o,o>>=8,t[r+6]=o,o>>=8,t[r+5]=o,o>>=8,t[r+4]=o;let s=Number(e>>BigInt(32)&BigInt(4294967295));return t[r+3]=s,s>>=8,t[r+2]=s,s>>=8,t[r+1]=s,s>>=8,t[r]=s,r+8}function z(t,e,r,n,i,o){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function F(t,e,r,n,i){return e=+e,r>>>=0,i||z(t,e,r,4),ot.write(t,e,r,n,23,4),r+4}function K(t,e,r,n,i){return e=+e,r>>>=0,i||z(t,e,r,8),ot.write(t,e,r,n,52,8),r+8}s.prototype.slice=function(t,e){const r=this.length;(t=~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),(e=void 0===e?r:~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t);const n=this.subarray(t,e);return Object.setPrototypeOf(n,s.prototype),n},s.prototype.readUintLE=s.prototype.readUIntLE=function(t,e,r){t>>>=0,e>>>=0,r||L(t,e,this.length);let n=this[t],i=1,o=0;for(;++o<e&&(i*=256);)n+=this[t+o]*i;return n},s.prototype.readUintBE=s.prototype.readUIntBE=function(t,e,r){t>>>=0,e>>>=0,r||L(t,e,this.length);let n=this[t+--e],i=1;for(;e>0&&(i*=256);)n+=this[t+--e]*i;return n},s.prototype.readUint8=s.prototype.readUInt8=function(t,e){return t>>>=0,e||L(t,1,this.length),this[t]},s.prototype.readUint16LE=s.prototype.readUInt16LE=function(t,e){return t>>>=0,e||L(t,2,this.length),this[t]|this[t+1]<<8},s.prototype.readUint16BE=s.prototype.readUInt16BE=function(t,e){return t>>>=0,e||L(t,2,this.length),this[t]<<8|this[t+1]},s.prototype.readUint32LE=s.prototype.readUInt32LE=function(t,e){return t>>>=0,e||L(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},s.prototype.readUint32BE=s.prototype.readUInt32BE=function(t,e){return t>>>=0,e||L(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},s.prototype.readBigUInt64LE=at((function(t){V(t>>>=0,"offset");const e=this[t],r=this[t+7];void 0!==e&&void 0!==r||Y(t,this.length-8);const n=e+256*this[++t]+65536*this[++t]+this[++t]*2**24,i=this[++t]+256*this[++t]+65536*this[++t]+r*2**24;return BigInt(n)+(BigInt(i)<<BigInt(32))})),s.prototype.readBigUInt64BE=at((function(t){V(t>>>=0,"offset");const e=this[t],r=this[t+7];void 0!==e&&void 0!==r||Y(t,this.length-8);const n=e*2**24+65536*this[++t]+256*this[++t]+this[++t],i=this[++t]*2**24+65536*this[++t]+256*this[++t]+r;return(BigInt(n)<<BigInt(32))+BigInt(i)})),s.prototype.readIntLE=function(t,e,r){t>>>=0,e>>>=0,r||L(t,e,this.length);let n=this[t],i=1,o=0;for(;++o<e&&(i*=256);)n+=this[t+o]*i;return i*=128,n>=i&&(n-=Math.pow(2,8*e)),n},s.prototype.readIntBE=function(t,e,r){t>>>=0,e>>>=0,r||L(t,e,this.length);let n=e,i=1,o=this[t+--n];for(;n>0&&(i*=256);)o+=this[t+--n]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*e)),o},s.prototype.readInt8=function(t,e){return t>>>=0,e||L(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},s.prototype.readInt16LE=function(t,e){t>>>=0,e||L(t,2,this.length);const r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},s.prototype.readInt16BE=function(t,e){t>>>=0,e||L(t,2,this.length);const r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},s.prototype.readInt32LE=function(t,e){return t>>>=0,e||L(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},s.prototype.readInt32BE=function(t,e){return t>>>=0,e||L(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},s.prototype.readBigInt64LE=at((function(t){V(t>>>=0,"offset");const e=this[t],r=this[t+7];void 0!==e&&void 0!==r||Y(t,this.length-8);const n=this[t+4]+256*this[t+5]+65536*this[t+6]+(r<<24);return(BigInt(n)<<BigInt(32))+BigInt(e+256*this[++t]+65536*this[++t]+this[++t]*2**24)})),s.prototype.readBigInt64BE=at((function(t){V(t>>>=0,"offset");const e=this[t],r=this[t+7];void 0!==e&&void 0!==r||Y(t,this.length-8);const n=(e<<24)+65536*this[++t]+256*this[++t]+this[++t];return(BigInt(n)<<BigInt(32))+BigInt(this[++t]*2**24+65536*this[++t]+256*this[++t]+r)})),s.prototype.readFloatLE=function(t,e){return t>>>=0,e||L(t,4,this.length),ot.read(this,t,!0,23,4)},s.prototype.readFloatBE=function(t,e){return t>>>=0,e||L(t,4,this.length),ot.read(this,t,!1,23,4)},s.prototype.readDoubleLE=function(t,e){return t>>>=0,e||L(t,8,this.length),ot.read(this,t,!0,52,8)},s.prototype.readDoubleBE=function(t,e){return t>>>=0,e||L(t,8,this.length),ot.read(this,t,!1,52,8)},s.prototype.writeUintLE=s.prototype.writeUIntLE=function(t,e,r,n){t=+t,e>>>=0,r>>>=0,n||P(this,t,e,r,Math.pow(2,8*r)-1,0);let i=1,o=0;for(this[e]=255&t;++o<r&&(i*=256);)this[e+o]=t/i&255;return e+r},s.prototype.writeUintBE=s.prototype.writeUIntBE=function(t,e,r,n){t=+t,e>>>=0,r>>>=0,n||P(this,t,e,r,Math.pow(2,8*r)-1,0);let i=r-1,o=1;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=t/o&255;return e+r},s.prototype.writeUint8=s.prototype.writeUInt8=function(t,e,r){return t=+t,e>>>=0,r||P(this,t,e,1,255,0),this[e]=255&t,e+1},s.prototype.writeUint16LE=s.prototype.writeUInt16LE=function(t,e,r){return t=+t,e>>>=0,r||P(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},s.prototype.writeUint16BE=s.prototype.writeUInt16BE=function(t,e,r){return t=+t,e>>>=0,r||P(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},s.prototype.writeUint32LE=s.prototype.writeUInt32LE=function(t,e,r){return t=+t,e>>>=0,r||P(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},s.prototype.writeUint32BE=s.prototype.writeUInt32BE=function(t,e,r){return t=+t,e>>>=0,r||P(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},s.prototype.writeBigUInt64LE=at((function(t,e=0){return D(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))})),s.prototype.writeBigUInt64BE=at((function(t,e=0){return M(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))})),s.prototype.writeIntLE=function(t,e,r,n){if(t=+t,e>>>=0,!n){const n=Math.pow(2,8*r-1);P(this,t,e,r,n-1,-n)}let i=0,o=1,s=0;for(this[e]=255&t;++i<r&&(o*=256);)t<0&&0===s&&0!==this[e+i-1]&&(s=1),this[e+i]=(t/o>>0)-s&255;return e+r},s.prototype.writeIntBE=function(t,e,r,n){if(t=+t,e>>>=0,!n){const n=Math.pow(2,8*r-1);P(this,t,e,r,n-1,-n)}let i=r-1,o=1,s=0;for(this[e+i]=255&t;--i>=0&&(o*=256);)t<0&&0===s&&0!==this[e+i+1]&&(s=1),this[e+i]=(t/o>>0)-s&255;return e+r},s.prototype.writeInt8=function(t,e,r){return t=+t,e>>>=0,r||P(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},s.prototype.writeInt16LE=function(t,e,r){return t=+t,e>>>=0,r||P(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},s.prototype.writeInt16BE=function(t,e,r){return t=+t,e>>>=0,r||P(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},s.prototype.writeInt32LE=function(t,e,r){return t=+t,e>>>=0,r||P(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},s.prototype.writeInt32BE=function(t,e,r){return t=+t,e>>>=0,r||P(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},s.prototype.writeBigInt64LE=at((function(t,e=0){return D(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),s.prototype.writeBigInt64BE=at((function(t,e=0){return M(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),s.prototype.writeFloatLE=function(t,e,r){return F(this,t,e,!0,r)},s.prototype.writeFloatBE=function(t,e,r){return F(this,t,e,!1,r)},s.prototype.writeDoubleLE=function(t,e,r){return K(this,t,e,!0,r)},s.prototype.writeDoubleBE=function(t,e,r){return K(this,t,e,!1,r)},s.prototype.copy=function(t,e,r,n){if(!s.isBuffer(t))throw new TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-r&&(n=t.length-e+r);const i=n-r;return this===t&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(e,r,n):Uint8Array.prototype.set.call(t,this.subarray(r,n),e),i},s.prototype.fill=function(t,e,r,n){if("string"==typeof t){if("string"==typeof e?(n=e,e=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!s.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(1===t.length){const e=t.charCodeAt(0);("utf8"===n&&e<128||"latin1"===n)&&(t=e)}}else"number"==typeof t?t&=255:"boolean"==typeof t&&(t=Number(t));if(e<0||this.length<e||this.length<r)throw new RangeError("Out of range index");if(r<=e)return this;let i;if(e>>>=0,r=void 0===r?this.length:r>>>0,t||(t=0),"number"==typeof t)for(i=e;i<r;++i)this[i]=t;else{const o=s.isBuffer(t)?t:s.from(t,n),u=o.length;if(0===u)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(i=0;i<r-e;++i)this[i+e]=o[i%u]}return this};const H={};function G(t,e,r){H[t]=class extends r{constructor(){super(),Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${t}]`,this.stack,delete this.name}get code(){return t}set code(t){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:t,writable:!0})}toString(){return`${this.name} [${t}]: ${this.message}`}}}function $(t){let e="",r=t.length;const n="-"===t[0]?1:0;for(;r>=n+4;r-=3)e=`_${t.slice(r-3,r)}${e}`;return`${t.slice(0,r)}${e}`}function W(t,e,r){V(e,"offset"),void 0!==t[e]&&void 0!==t[e+r]||Y(e,t.length-(r+1))}function q(t,e,r,n,i,o){if(t>r||t<e){const n="bigint"==typeof e?"n":"";let i;throw i=o>3?0===e||e===BigInt(0)?`>= 0${n} and < 2${n} ** ${8*(o+1)}${n}`:`>= -(2${n} ** ${8*(o+1)-1}${n}) and < 2 ** ${8*(o+1)-1}${n}`:`>= ${e}${n} and <= ${r}${n}`,new H.ERR_OUT_OF_RANGE("value",i,t)}W(n,i,o)}function V(t,e){if("number"!=typeof t)throw new H.ERR_INVALID_ARG_TYPE(e,"number",t)}function Y(t,e,r){if(Math.floor(t)!==t)throw V(t,r),new H.ERR_OUT_OF_RANGE(r||"offset","an integer",t);if(e<0)throw new H.ERR_BUFFER_OUT_OF_BOUNDS;throw new H.ERR_OUT_OF_RANGE(r||"offset",`>= ${r?1:0} and <= ${e}`,t)}G("ERR_BUFFER_OUT_OF_BOUNDS",(function(t){return t?`${t} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"}),RangeError),G("ERR_INVALID_ARG_TYPE",(function(t,e){return`The "${t}" argument must be of type number. Received type ${typeof e}`}),TypeError),G("ERR_OUT_OF_RANGE",(function(t,e,r){let n=`The value of "${t}" is out of range.`,i=r;return Number.isInteger(r)&&Math.abs(r)>2**32?i=$(String(r)):"bigint"==typeof r&&(i=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(i=$(i)),i+="n"),n+=` It must be ${e}. Received ${i}`,n}),RangeError);const J=/[^+/0-9A-Za-z-_]/g;function Z(t){if((t=(t=t.split("=")[0]).trim().replace(J,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}function X(t,e){let r;e=e||1/0;const n=t.length;let i=null;const o=[];for(let s=0;s<n;++s){if(r=t.charCodeAt(s),r>55295&&r<57344){if(!i){if(r>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(s+1===n){(e-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(e-=3)>-1&&o.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((e-=1)<0)break;o.push(r)}else if(r<2048){if((e-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function Q(t){const e=[];for(let r=0;r<t.length;++r)e.push(255&t.charCodeAt(r));return e}function tt(t,e){let r,n,i;const o=[];for(let s=0;s<t.length&&!((e-=2)<0);++s)r=t.charCodeAt(s),n=r>>8,i=r%256,o.push(i),o.push(n);return o}function et(t){return it.toByteArray(Z(t))}function rt(t,e,r,n){let i;for(i=0;i<n&&!(i+r>=e.length||i>=t.length);++i)e[i+r]=t[i];return i}function nt(t,e){return t instanceof e||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===e.name}function st(t){return t!=t}const ut=function(){const t="0123456789abcdef",e=new Array(256);for(let r=0;r<16;++r){const n=16*r;for(let i=0;i<16;++i)e[n+i]=t[r]+t[i]}return e}();function at(t){return"undefined"==typeof BigInt?ct:t}function ct(){throw new Error("BigInt not supported")}})),ut=st.Buffer;
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */function at(t,e){var r=8===e?new Uint8Array(t):new Uint16Array(t);return Array.from(r).map((function(t){return String.fromCharCode(t)})).join("")}function ct(t){var e=at(t,8);return ut.from(e,"binary").toString("base64")}function ft(t,e){for(var r=8===e?new Uint8Array(t.length):new Uint16Array(t.length),n=0,i=t.length;n<i;n++)r[n]=t.charCodeAt(n);return r.buffer}function lt(t){return ft(ut.from(t,"base64").toString("binary"),8)}function ht(){return new Uint8Array([1,0,1])}function pt(t){var e=new Uint8Array(t);return globalThis.crypto.getRandomValues(e),e.buffer}function dt(t,e){var r=new Uint8Array(t),n=new Uint8Array(e),i=new Uint8Array(r.length+n.length);return i.set(r),i.set(n,r.length),i.buffer}st.SlowBuffer,st.INSPECT_MAX_BYTES,st.kMaxLength;var yt=function(t){return bt(t,(function(t){return ft(t,y.B8)}))},vt=function(t){return bt(t,(function(t){return ft(t,y.B16)}))},gt=function(t){return bt(t,lt)},mt=function(t,e){switch(e){case 8:return yt(t);default:return vt(t)}},bt=function(t,e){if("string"==typeof t)return e(t);if("object"==typeof t&&void 0!==t.byteLength)return new Uint8Array(t).buffer;throw new Error("Improper value. Must be a string, ArrayBuffer, Uint8Array")};function _t(t){return n(this,void 0,void 0,(function(){return i(this,(function(e){return[2,new Promise((function(e){var r=new MessageChannel,n=r.port1;r.port2.onmessage=function(t){return e(t.data)},n.postMessage(t)}))]}))}))}var wt={arrBufToStr:at,arrBufToBase64:ct,strToArrBuf:ft,base64ToArrBuf:lt,publicExponent:ht,randomBuf:pt,joinBufs:dt,normalizeUtf8ToBuf:yt,normalizeUtf16ToBuf:vt,normalizeBase64ToBuf:gt,normalizeToBuf:bt,structuralClone:_t},kt=Object.freeze({__proto__:null,arrBufToStr:at,arrBufToBase64:ct,strToArrBuf:ft,base64ToArrBuf:lt,publicExponent:ht,randomBuf:pt,joinBufs:dt,normalizeUtf8ToBuf:yt,normalizeUtf16ToBuf:vt,normalizeBase64ToBuf:gt,normalizeUnicodeToBuf:mt,normalizeToBuf:bt,structuralClone:_t,default:wt}),Et="ECDH",At="ECDSA",St="RSA-OAEP",It="RSASSA-PKCS1-v1_5",xt=128,Bt="ecc",Tt=c.P_256,Ot=l.B2048,Nt=h.AES_CTR,Ct=p.B256,Rt=64,Ut=d.SHA_256,jt=y.B16,Lt="keystore",Pt="read-key",Dt="write-key",Mt={ECC_READ_ALG:Et,ECC_WRITE_ALG:At,RSA_READ_ALG:St,RSA_WRITE_ALG:It,SALT_LENGTH:xt,DEFAULT_CRYPTOSYSTEM:Bt,DEFAULT_ECC_CURVE:Tt,DEFAULT_RSA_SIZE:Ot,DEFAULT_SYMM_ALG:Nt,DEFAULT_CTR_LEN:Rt,DEFAULT_HASH_ALG:Ut,DEFAULT_CHAR_SIZE:jt,DEFAULT_STORE_NAME:Lt,DEFAULT_READ_KEY_NAME:Pt,DEFAULT_WRITE_KEY_NAME:Dt},zt=Object.freeze({__proto__:null,ECC_READ_ALG:Et,ECC_WRITE_ALG:At,RSA_READ_ALG:St,RSA_WRITE_ALG:It,SALT_LENGTH:xt,DEFAULT_CRYPTOSYSTEM:Bt,DEFAULT_ECC_CURVE:Tt,DEFAULT_RSA_SIZE:Ot,DEFAULT_SYMM_ALG:Nt,DEFAULT_SYMM_LEN:Ct,DEFAULT_CTR_LEN:Rt,DEFAULT_HASH_ALG:Ut,DEFAULT_CHAR_SIZE:jt,DEFAULT_STORE_NAME:Lt,DEFAULT_READ_KEY_NAME:Pt,DEFAULT_WRITE_KEY_NAME:Dt,default:Mt});function Ft(t,e){return n(this,void 0,void 0,(function(){var r,n;return i(this,(function(i){return B(e),r=e===v.Read?Et:At,n=e===v.Read?["deriveKey","deriveBits"]:["sign","verify"],[2,globalThis.crypto.subtle.generateKey({name:r,namedCurve:t},!1,n)]}))}))}function Kt(t,e,r){return n(this,void 0,void 0,(function(){var n,o,s;return i(this,(function(i){return B(r),n=r===v.Read?Et:At,o=r===v.Read?[]:["verify"],s=wt.base64ToArrBuf(t),[2,globalThis.crypto.subtle.importKey("raw",s,{name:n,namedCurve:e},!0,o)]}))}))}var Ht={makeKeypair:Ft,importPublicKey:Kt};function Gt(t){return n(this,void 0,void 0,(function(){return i(this,(function(e){return[2,globalThis.crypto.subtle.generateKey({name:(null==t?void 0:t.alg)||Nt,length:(null==t?void 0:t.length)||Ct},!0,["encrypt","decrypt"])]}))}))}function $t(t,e){return n(this,void 0,void 0,(function(){var r;return i(this,(function(n){return r=wt.base64ToArrBuf(t),[2,globalThis.crypto.subtle.importKey("raw",r,{name:(null==e?void 0:e.alg)||Nt,length:(null==e?void 0:e.length)||Ct},!0,["encrypt","decrypt"])]}))}))}var Wt={makeKey:Gt,importKey:$t};function qt(t,e,r){return n(this,void 0,void 0,(function(){var n,o,s,u,a,c;return i(this,(function(i){switch(i.label){case 0:return n=wt.normalizeUtf16ToBuf(t),"string"!=typeof e?[3,2]:[4,Wt.importKey(e,r)];case 1:return s=i.sent(),[3,3];case 2:s=e,i.label=3;case 3:return o=s,u=(null==r?void 0:r.alg)||Nt,a=(null==r?void 0:r.iv)||wt.randomBuf(16),[4,globalThis.crypto.subtle.encrypt({name:u,iv:u===h.AES_CTR?void 0:a,counter:u===h.AES_CTR?new Uint8Array(a):void 0,length:u===h.AES_CTR?Rt:void 0},o,n)];case 4:return c=i.sent(),[2,wt.joinBufs(a,c)]}}))}))}function Vt(t,e,r){return n(this,void 0,void 0,(function(){var n,o,s,u,a,c;return i(this,(function(i){switch(i.label){case 0:return n=wt.normalizeBase64ToBuf(t),"string"!=typeof e?[3,2]:[4,Wt.importKey(e,r)];case 1:return s=i.sent(),[3,3];case 2:s=e,i.label=3;case 3:return o=s,u=(null==r?void 0:r.alg)||Nt,a=n.slice(0,16),c=n.slice(16),[4,globalThis.crypto.subtle.decrypt({name:u,iv:u===h.AES_CTR?void 0:a,counter:u===h.AES_CTR?new Uint8Array(a):void 0,length:u===h.AES_CTR?Rt:void 0},o,c)];case 4:return[2,i.sent()]}}))}))}function Yt(t,e,r){return n(this,void 0,void 0,(function(){var n;return i(this,(function(i){switch(i.label){case 0:return[4,qt(t,e,r)];case 1:return n=i.sent(),[2,wt.arrBufToBase64(n)]}}))}))}function Jt(t,e,r){return n(this,void 0,void 0,(function(){var n;return i(this,(function(i){switch(i.label){case 0:return[4,Vt(t,e,r)];case 1:return n=i.sent(),[2,wt.arrBufToStr(n,16)]}}))}))}function Zt(t){return n(this,void 0,void 0,(function(){var e;return i(this,(function(r){switch(r.label){case 0:return[4,globalThis.crypto.subtle.exportKey("raw",t)];case 1:return e=r.sent(),[2,wt.arrBufToBase64(e)]}}))}))}var Xt={encryptBytes:qt,decryptBytes:Vt,encrypt:Yt,decrypt:Jt,exportKey:Zt},Qt=r(r({},Wt),Xt);function te(t,e,r,o){return void 0===r&&(r=jt),void 0===o&&(o=Ut),n(this,void 0,void 0,(function(){return i(this,(function(n){return[2,globalThis.crypto.subtle.sign({name:At,hash:{name:o}},e,mt(t,r))]}))}))}function ee(t,e,r,o,s,u){return void 0===o&&(o=jt),void 0===s&&(s=Tt),void 0===u&&(u=Ut),n(this,void 0,void 0,(function(){var n,a,c,f;return i(this,(function(i){switch(i.label){case 0:return a=(n=globalThis.crypto.subtle).verify,c=[{name:At,hash:{name:u}}],"string"!=typeof r?[3,2]:[4,Ht.importPublicKey(r,s,v.Write)];case 1:return f=i.sent(),[3,3];case 2:f=r,i.label=3;case 3:return[2,a.apply(n,c.concat([f,gt(e),mt(t,o)]))]}}))}))}function re(t,e,r,o,s,u){return void 0===o&&(o=jt),void 0===s&&(s=Tt),n(this,void 0,void 0,(function(){var n,a;return i(this,(function(i){switch(i.label){case 0:return"string"!=typeof r?[3,2]:[4,Ht.importPublicKey(r,s,v.Read)];case 1:return n=i.sent(),[3,3];case 2:n=r,i.label=3;case 3:return[4,oe(e,n,u)];case 4:return a=i.sent(),[2,Qt.encryptBytes(mt(t,o),a,u)]}}))}))}function ne(t,e,r,o,s){return void 0===o&&(o=Tt),n(this,void 0,void 0,(function(){var n,u;return i(this,(function(i){switch(i.label){case 0:return"string"!=typeof r?[3,2]:[4,Ht.importPublicKey(r,o,v.Read)];case 1:return n=i.sent(),[3,3];case 2:n=r,i.label=3;case 3:return[4,oe(e,n,s)];case 4:return u=i.sent(),[2,Qt.decryptBytes(gt(t),u,s)]}}))}))}function ie(t){return n(this,void 0,void 0,(function(){var e;return i(this,(function(r){switch(r.label){case 0:return[4,globalThis.crypto.subtle.exportKey("raw",t.publicKey)];case 1:return e=r.sent(),[2,wt.arrBufToBase64(e)]}}))}))}function oe(t,e,r){return n(this,void 0,void 0,(function(){return i(this,(function(n){return[2,globalThis.crypto.subtle.deriveKey({name:Et,public:e},t,{name:(null==r?void 0:r.alg)||Nt,length:(null==r?void 0:r.length)||Ct},!1,["encrypt","decrypt"])]}))}))}var se={sign:te,verify:ee,encrypt:re,decrypt:ne,getPublicKey:ie,getSharedKey:oe},ue={type:Bt,curve:Tt,rsaSize:Ot,symmAlg:Nt,symmLen:Ct,hashAlg:Ut,charSize:jt,storeName:Lt,readKeyName:Pt,writeKeyName:Dt};function ae(t,e){var n;return void 0===e&&(e=!0),n=t?r(r({},ue),t):ue,(null==t?void 0:t.type)||(n.type=e?a.ECC:a.RSA),n}function ce(){return n(this,void 0,void 0,(function(){var t;return i(this,(function(e){switch(e.label){case 0:return[4,Ht.makeKeypair(Tt,v.Read)];case 1:t=e.sent(),e.label=2;case 2:return e.trys.push([2,4,,5]),[4,wt.structuralClone(t)];case 3:return e.sent(),[3,5];case 4:return e.sent(),[2,!1];case 5:return[2,!0]}}))}))}function fe(t,e){return void 0===e&&(e={}),r(r({},t),e)}function le(t){return{alg:t.symmAlg,length:t.symmLen}}var he={defaultConfig:ue,normalize:ae,eccEnabled:ce,merge:fe,symmKeyOpts:le},pe=Object.freeze({__proto__:null,defaultConfig:ue,normalize:ae,eccEnabled:ce,merge:fe,symmKeyOpts:le,default:he}),de=function(){function t(t,e){this.cfg=t,this.store=e}return t.prototype.writeKey=function(){return n(this,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return[4,z.getKeypair(this.cfg.writeKeyName,this.store)];case 1:return[2,S(t.sent())]}}))}))},t.prototype.readKey=function(){return n(this,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return[4,z.getKeypair(this.cfg.readKeyName,this.store)];case 1:return[2,S(t.sent())]}}))}))},t.prototype.getSymmKey=function(t,e){return n(this,void 0,void 0,(function(){var r,n,o;return i(this,(function(i){switch(i.label){case 0:return r=he.merge(this.cfg,e),[4,z.getKey(t,this.store)];case 1:return null!==(n=i.sent())?[2,n]:[4,Qt.makeKey(he.symmKeyOpts(r))];case 2:return o=i.sent(),[4,z.put(t,o,this.store)];case 3:return i.sent(),[2,o]}}))}))},t.prototype.keyExists=function(t){return n(this,void 0,void 0,(function(){return i(this,(function(e){switch(e.label){case 0:return[4,z.getKey(t,this.store)];case 1:return[2,null!==e.sent()]}}))}))},t.prototype.deleteKey=function(t){return n(this,void 0,void 0,(function(){return i(this,(function(e){return[2,z.rm(t,this.store)]}))}))},t.prototype.destroy=function(){return n(this,void 0,void 0,(function(){return i(this,(function(t){return[2,z.dropStore(this.store)]}))}))},t.prototype.importSymmKey=function(t,e,r){return n(this,void 0,void 0,(function(){var n,o;return i(this,(function(i){switch(i.label){case 0:return n=he.merge(this.cfg,r),[4,Qt.importKey(t,he.symmKeyOpts(n))];case 1:return o=i.sent(),[4,z.put(e,o,this.store)];case 2:return i.sent(),[2]}}))}))},t.prototype.exportSymmKey=function(t,e){return n(this,void 0,void 0,(function(){var r;return i(this,(function(n){switch(n.label){case 0:return[4,this.getSymmKey(t,e)];case 1:return r=n.sent(),[2,Qt.exportKey(r)]}}))}))},t.prototype.encryptWithSymmKey=function(t,e,r){return n(this,void 0,void 0,(function(){var n,o,s;return i(this,(function(i){switch(i.label){case 0:return n=he.merge(this.cfg,r),[4,this.getSymmKey(e,r)];case 1:return o=i.sent(),[4,Qt.encryptBytes(wt.strToArrBuf(t,n.charSize),o,he.symmKeyOpts(n))];case 2:return s=i.sent(),[2,wt.arrBufToBase64(s)]}}))}))},t.prototype.decryptWithSymmKey=function(t,e,r){return n(this,void 0,void 0,(function(){var n,o,s;return i(this,(function(i){switch(i.label){case 0:return n=he.merge(this.cfg,r),[4,this.getSymmKey(e,r)];case 1:return o=i.sent(),[4,Qt.decryptBytes(wt.base64ToArrBuf(t),o,he.symmKeyOpts(n))];case 2:return s=i.sent(),[2,wt.arrBufToStr(s,n.charSize)]}}))}))},t}(),ye=function(t){function o(){return null!==t&&t.apply(this,arguments)||this}return e(o,t),o.init=function(t){return n(this,void 0,void 0,(function(){var e,n,s,u,c,f;return i(this,(function(i){switch(i.label){case 0:return e=he.normalize(r(r({},t||{}),{type:a.ECC})),n=e.curve,s=e.storeName,u=e.readKeyName,c=e.writeKeyName,f=z.createStore(s),[4,z.createIfDoesNotExist(u,(function(){return Ht.makeKeypair(n,v.Read)}),f)];case 1:return i.sent(),[4,z.createIfDoesNotExist(c,(function(){return Ht.makeKeypair(n,v.Write)}),f)];case 2:return i.sent(),[2,new o(e,f)]}}))}))},o.prototype.sign=function(t,e){return n(this,void 0,void 0,(function(){var r,n,o,s;return i(this,(function(i){switch(i.label){case 0:return r=he.merge(this.cfg,e),[4,this.writeKey()];case 1:return n=i.sent(),s=(o=wt).arrBufToBase64,[4,se.sign(t,n.privateKey,r.charSize,r.hashAlg)];case 2:return[2,s.apply(o,[i.sent()])]}}))}))},o.prototype.verify=function(t,e,r,o){return n(this,void 0,void 0,(function(){var n;return i(this,(function(i){return n=he.merge(this.cfg,o),[2,se.verify(t,e,r,n.charSize,n.curve,n.hashAlg)]}))}))},o.prototype.encrypt=function(t,e,r){return n(this,void 0,void 0,(function(){var n,o,s,u;return i(this,(function(i){switch(i.label){case 0:return n=he.merge(this.cfg,r),[4,this.readKey()];case 1:return o=i.sent(),u=(s=wt).arrBufToBase64,[4,se.encrypt(t,o.privateKey,e,n.charSize,n.curve)];case 2:return[2,u.apply(s,[i.sent()])]}}))}))},o.prototype.decrypt=function(t,e,r){return n(this,void 0,void 0,(function(){var n,o,s,u;return i(this,(function(i){switch(i.label){case 0:return n=he.merge(this.cfg,r),[4,this.readKey()];case 1:return o=i.sent(),u=(s=wt).arrBufToStr,[4,se.decrypt(t,o.privateKey,e,n.curve)];case 2:return[2,u.apply(s,[i.sent(),n.charSize])]}}))}))},o.prototype.publicReadKey=function(){return n(this,void 0,void 0,(function(){var t;return i(this,(function(e){switch(e.label){case 0:return[4,this.readKey()];case 1:return t=e.sent(),[2,se.getPublicKey(t)]}}))}))},o.prototype.publicWriteKey=function(){return n(this,void 0,void 0,(function(){var t;return i(this,(function(e){switch(e.label){case 0:return[4,this.writeKey()];case 1:return t=e.sent(),[2,se.getPublicKey(t)]}}))}))},o}(de);function ve(t,e,r){return n(this,void 0,void 0,(function(){var n,o;return i(this,(function(i){return B(r),n=r===v.Read?St:It,o=r===v.Read?["encrypt","decrypt"]:["sign","verify"],[2,globalThis.crypto.subtle.generateKey({name:n,modulusLength:t,publicExponent:wt.publicExponent(),hash:{name:e}},!1,o)]}))}))}function ge(t){return t.replace("-----BEGIN PUBLIC KEY-----\n","").replace("\n-----END PUBLIC KEY-----","")}function me(t,e,r){return n(this,void 0,void 0,(function(){var n,o,s;return i(this,(function(i){return B(r),n=r===v.Read?St:It,o=r===v.Read?["encrypt"]:["verify"],s=wt.base64ToArrBuf(ge(t)),[2,globalThis.crypto.subtle.importKey("spki",s,{name:n,hash:{name:e}},!0,o)]}))}))}var be={makeKeypair:ve,importPublicKey:me};function _e(t,e,r){return void 0===r&&(r=jt),n(this,void 0,void 0,(function(){return i(this,(function(n){return[2,globalThis.crypto.subtle.sign({name:It,saltLength:xt},e,mt(t,r))]}))}))}function we(t,e,r,o,s){return void 0===o&&(o=jt),void 0===s&&(s=Ut),n(this,void 0,void 0,(function(){var n,u,a,c;return i(this,(function(i){switch(i.label){case 0:return u=(n=globalThis.crypto.subtle).verify,a=[{name:It,saltLength:xt}],"string"!=typeof r?[3,2]:[4,be.importPublicKey(r,s,v.Write)];case 1:return c=i.sent(),[3,3];case 2:c=r,i.label=3;case 3:return[2,u.apply(n,a.concat([c,gt(e),mt(t,o)]))]}}))}))}function ke(t,e,r,o){return void 0===r&&(r=jt),void 0===o&&(o=Ut),n(this,void 0,void 0,(function(){var n,s,u,a;return i(this,(function(i){switch(i.label){case 0:return s=(n=globalThis.crypto.subtle).encrypt,u=[{name:St}],"string"!=typeof e?[3,2]:[4,be.importPublicKey(e,o,v.Read)];case 1:return a=i.sent(),[3,3];case 2:a=e,i.label=3;case 3:return[2,s.apply(n,u.concat([a,mt(t,r)]))]}}))}))}function Ee(t,e){return n(this,void 0,void 0,(function(){var r;return i(this,(function(n){return r=gt(t),[2,globalThis.crypto.subtle.decrypt({name:St},e,r)]}))}))}function Ae(t){return n(this,void 0,void 0,(function(){var e;return i(this,(function(r){switch(r.label){case 0:return[4,globalThis.crypto.subtle.exportKey("spki",t.publicKey)];case 1:return e=r.sent(),[2,wt.arrBufToBase64(e)]}}))}))}var Se={sign:_e,verify:we,encrypt:ke,decrypt:Ee,getPublicKey:Ae},Ie=function(t){function o(){return null!==t&&t.apply(this,arguments)||this}return e(o,t),o.init=function(t){return n(this,void 0,void 0,(function(){var e,n,s,u,c,f,l;return i(this,(function(i){switch(i.label){case 0:return e=he.normalize(r(r({},t||{}),{type:a.RSA})),n=e.rsaSize,s=e.hashAlg,u=e.storeName,c=e.readKeyName,f=e.writeKeyName,l=z.createStore(u),[4,z.createIfDoesNotExist(c,(function(){return be.makeKeypair(n,s,v.Read)}),l)];case 1:return i.sent(),[4,z.createIfDoesNotExist(f,(function(){return be.makeKeypair(n,s,v.Write)}),l)];case 2:return i.sent(),[2,new o(e,l)]}}))}))},o.prototype.sign=function(t,e){return n(this,void 0,void 0,(function(){var r,n,o,s;return i(this,(function(i){switch(i.label){case 0:return r=he.merge(this.cfg,e),[4,this.writeKey()];case 1:return n=i.sent(),s=(o=wt).arrBufToBase64,[4,Se.sign(t,n.privateKey,r.charSize)];case 2:return[2,s.apply(o,[i.sent()])]}}))}))},o.prototype.verify=function(t,e,r,o){return n(this,void 0,void 0,(function(){var n;return i(this,(function(i){return n=he.merge(this.cfg,o),[2,Se.verify(t,e,r,n.charSize,n.hashAlg)]}))}))},o.prototype.encrypt=function(t,e,r){return n(this,void 0,void 0,(function(){var n,o,s;return i(this,(function(i){switch(i.label){case 0:return n=he.merge(this.cfg,r),s=(o=wt).arrBufToBase64,[4,Se.encrypt(t,e,n.charSize,n.hashAlg)];case 1:return[2,s.apply(o,[i.sent()])]}}))}))},o.prototype.decrypt=function(t,e,r){return n(this,void 0,void 0,(function(){var e,n,o,s;return i(this,(function(i){switch(i.label){case 0:return[4,this.readKey()];case 1:return e=i.sent(),n=he.merge(this.cfg,r),s=(o=wt).arrBufToStr,[4,Se.decrypt(t,e.privateKey)];case 2:return[2,s.apply(o,[i.sent(),n.charSize])]}}))}))},o.prototype.publicReadKey=function(){return n(this,void 0,void 0,(function(){var t;return i(this,(function(e){switch(e.label){case 0:return[4,this.readKey()];case 1:return t=e.sent(),[2,Se.getPublicKey(t)]}}))}))},o.prototype.publicWriteKey=function(){return n(this,void 0,void 0,(function(){var t;return i(this,(function(e){switch(e.label){case 0:return[4,this.writeKey()];case 1:return t=e.sent(),[2,Se.getPublicKey(t)]}}))}))},o}(de);function xe(t){return n(this,void 0,void 0,(function(){var e,r;return i(this,(function(n){switch(n.label){case 0:return[4,he.eccEnabled()];case 1:if(!(e=n.sent())&&"ecc"===(null==t?void 0:t.type))throw k;return x((r=he.normalize(t,e)).type),"ecc"===r.type?[2,ye.init(r)]:[2,Ie.init(r)]}}))}))}function Be(){return n(this,void 0,void 0,(function(){return i(this,(function(t){return[2,z.clear()]}))}))}var Te=r(r(r({},Ht),se),ye),Oe=Object.freeze({__proto__:null,default:Te,makeKeypair:Ft,importPublicKey:Kt,sign:te,verify:ee,encrypt:re,decrypt:ne,getPublicKey:ie,getSharedKey:oe,ECCKeyStore:ye}),Ne=r(r(r({},be),Se),Ie),Ce=Object.freeze({__proto__:null,default:Ne,makeKeypair:ve,importPublicKey:me,sign:_e,verify:we,encrypt:ke,decrypt:Ee,getPublicKey:Ae,RSAKeyStore:Ie});return r(r(r(r(r({init:xe,clear:Be},m),zt),pe),kt),{ecc:Oe,rsa:Ce,idb:F})}()})),gr={type:St.CryptoSystem.RSA},mr=null,br=function(){return o(void 0,void 0,void 0,(function(){return s(this,(function(t){switch(t.label){case 0:return mr?[4,mr.destroy()]:[3,2];case 1:t.sent(),mr=null,t.label=2;case 2:return[2]}}))}))},_r=function(){return o(void 0,void 0,void 0,(function(){return s(this,(function(t){switch(t.label){case 0:return mr?[2,mr]:[4,vr.init(gr)];case 1:return[2,mr=t.sent()]}}))}))},wr=Object.freeze({__proto__:null,clear:br,create:function(){return o(void 0,void 0,void 0,(function(){return s(this,(function(t){switch(t.label){case 0:return[4,vr.init(gr)];case 1:return[2,t.sent()]}}))}))},set:function(t){return o(void 0,void 0,void 0,(function(){return s(this,(function(e){return mr=t,[2]}))}))},get:_r}),kr={hash:{sha256:function(t){return o(void 0,void 0,void 0,(function(){var e,r;return s(this,(function(n){switch(n.label){case 0:return yr("hash.sha256"),e=t.buffer,[4,crypto.subtle.digest("SHA-256",e)];case 1:return r=n.sent(),[2,new Uint8Array(r)]}}))}))}},aes:{encrypt:function(t,e){return o(void 0,void 0,void 0,(function(){var r,n;return s(this,(function(i){switch(i.label){case 0:return yr("aes.encrypt"),[4,tr.importKey(e,{length:St.SymmKeyLength.B256})];case 1:return r=i.sent(),[4,tr.encryptBytes(t.buffer,r)];case 2:return n=i.sent(),[2,new Uint8Array(n)]}}))}))},decrypt:function(t,e){return o(void 0,void 0,void 0,(function(){var r,n;return s(this,(function(i){switch(i.label){case 0:return yr("aes.decrypt"),[4,tr.importKey(e,{length:St.SymmKeyLength.B256})];case 1:return r=i.sent(),[4,tr.decryptBytes(t.buffer,r)];case 2:return n=i.sent(),[2,new Uint8Array(n)]}}))}))},genKeyStr:function(){return o(void 0,void 0,void 0,(function(){var t;return s(this,(function(e){switch(e.label){case 0:return yr("aes.genKeyStr"),[4,tr.makeKey({length:St.SymmKeyLength.B256})];case 1:return t=e.sent(),[2,tr.exportKey(t)]}}))}))},decryptGCM:function(t,e,r){return o(void 0,void 0,void 0,(function(){var n,i,o;return s(this,(function(s){switch(s.label){case 0:return yr("aes.decryptGCM"),n=Bt.base64ToArrBuf(r),[4,window.crypto.subtle.importKey("raw",Bt.base64ToArrBuf(e),"AES-GCM",!1,["encrypt","decrypt"])];case 1:return i=s.sent(),[4,window.crypto.subtle.decrypt({name:"AES-GCM",iv:n},i,Bt.base64ToArrBuf(t))];case 2:return o=s.sent(),[2,Bt.arrBufToStr(o,St.CharSize.B8)]}}))}))}},rsa:{verify:function(t,e,r){yr("rsa.verify");var n=Bt.arrBufToBase64(r.buffer);return pr.verify(t,e,n)}},ed25519:{verify:function(t,e,r){return At.verify(e,t,r)}},keystore:{publicReadKey:function(){return o(void 0,void 0,void 0,(function(){return s(this,(function(t){switch(t.label){case 0:return yr("keystore.publicReadKey"),[4,_r()];case 1:return[2,t.sent().publicReadKey()]}}))}))},publicWriteKey:function(){return o(void 0,void 0,void 0,(function(){return s(this,(function(t){switch(t.label){case 0:return yr("keystore.publicWriteKey"),[4,_r()];case 1:return[2,t.sent().publicWriteKey()]}}))}))},decrypt:function(t){return o(void 0,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return yr("keystore.decrypt"),[4,_r()];case 1:return[2,e.sent().decrypt(t)]}}))}))},sign:function(t,e){return o(void 0,void 0,void 0,(function(){return s(this,(function(r){switch(r.label){case 0:return yr("keystore.sign"),[4,_r()];case 1:return[2,r.sent().sign(t,{charSize:e})]}}))}))},importSymmKey:function(t,e){return o(void 0,void 0,void 0,(function(){return s(this,(function(r){switch(r.label){case 0:return yr("keystore.importSymmKey"),[4,_r()];case 1:return[2,r.sent().importSymmKey(t,e)]}}))}))},exportSymmKey:function(t){return o(void 0,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return yr("keystore.exportSymmKey"),[4,_r()];case 1:return[2,e.sent().exportSymmKey(t)]}}))}))},keyExists:function(t){return o(void 0,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return yr("keystore.keyExists"),[4,_r()];case 1:return[2,e.sent().keyExists(t)]}}))}))},getAlg:function(){return o(void 0,void 0,void 0,(function(){return s(this,(function(t){switch(t.label){case 0:return yr("keystore.getAlg"),[4,_r()];case 1:return[2,t.sent().cfg.type]}}))}))},clear:function(){return o(void 0,void 0,void 0,(function(){return s(this,(function(t){return yr("keystore.clear"),[2,br()]}))}))}},storage:{getItem:function(t){return yr("storage.getItem"),y.getItem(t)},setItem:function(t,e){return yr("storage.setItem"),y.setItem(t,e)},removeItem:function(t){return yr("storage.removeItem"),y.removeItem(t)},clear:function(){return yr("storage.clear"),y.clear()}}},Er=function(t,e){return n(n({},t),e||{})},Ar=function(t){return kr.storage.getItem(t)},Sr=function(t,e){return kr.storage.setItem(t,e)},Ir=function(t){return kr.storage.removeItem(t)},xr=function(t){return void 0!==t},Br=function(t){return null!==t},Tr=Br,Or=function(t){return xr(t)&&Br(t)},Nr=function(t){return"boolean"==typeof t},Cr=function(t){return"number"==typeof t},Rr=function(t){return"string"==typeof t},Ur=function(t){return null!==t&&"object"==typeof t},jr=function(t){var e;return"undefined"!=typeof Blob&&(t instanceof Blob||Ur(t)&&"Blob"===(null===(e=null==t?void 0:t.constructor)||void 0===e?void 0:e.name))},Lr=function(t,e){var r=t,n=e;return r[n],i(r,["symbol"==typeof n?n:n+""])},Pr=function(t,e){var r={};return Object.entries(t).forEach((function(t){var n=t[0],i=t[1];r[n]=e(i,n)})),r},Dr="0.24.1",Mr="webnative.auth_ucans",zr="webnative.auth_username";function Fr(){return o(this,void 0,void 0,(function(){return s(this,(function(t){return[2,Ar(zr).then((function(t){return t||null}))]}))}))}var Kr,Hr,Gr=Object.freeze({__proto__:null,api:S,arrbufs:x,base64:Y,blob:Z,UCANS_STORAGE_KEY:Mr,USERNAME_STORAGE_KEY:zr,authenticatedUsername:Fr,isDefined:xr,notNull:Br,isJust:Tr,isValue:Or,isBool:Nr,isNum:Cr,isString:Rr,isObject:Ur,isBlob:jr,removeKeyFromObj:Lr,updateOrRemoveKeyFromObj:function(t,e,r){var i;return null===r?Lr(t,e):n(n({},t),((i={})[e]=r,i))},mapObj:Pr,mapObjAsync:function(t,e){return o(void 0,void 0,void 0,(function(){var r;return s(this,(function(n){switch(n.label){case 0:return r={},[4,Promise.all(Object.entries(t).map((function(t){var n=t[0],i=t[1];return o(void 0,void 0,void 0,(function(){var t,o;return s(this,(function(s){switch(s.label){case 0:return t=r,o=n,[4,e(i,n)];case 1:return t[o]=s.sent(),[2]}}))}))})))];case 1:return n.sent(),[2,r]}}))}))},arrContains:function(t,e){return t.indexOf(e)>-1},asyncWaterfall:function(t,e){return o(void 0,void 0,void 0,(function(){var r,n;return s(this,(function(i){switch(i.label){case 0:r=t,n=0,i.label=1;case 1:return n<e.length?[4,e[n](r)]:[3,4];case 2:r=i.sent(),i.label=3;case 3:return n++,[3,1];case 4:return[2,r]}}))}))},VERSION:Dr,isBrowser:dr,assertBrowser:yr}),$r=function(t){return Array.prototype.map.call(t,(function(t){return("00"+t.toString(16)).slice(-2)})).join("")},Wr=function(t){return o(void 0,void 0,void 0,(function(){var e,r,n;return s(this,(function(i){switch(i.label){case 0:return e=xt.strToArrBuf(t,8),r=new Uint8Array(e),[4,kr.hash.sha256(r)];case 1:return n=i.sent(),[2,$r(n)]}}))}))},qr={sha256:function(t){return kr.hash.sha256(t)},sha256Str:Wr},Vr={encrypt:function(t,e){return kr.aes.encrypt(t,e)},decrypt:function(t,e){return kr.aes.decrypt(t,e)},genKeyStr:function(){return kr.aes.genKeyStr()},decryptGCM:function(t,e,r){return kr.aes.decryptGCM(t,e,r)}},Yr={verify:function(t,e,r){return kr.rsa.verify(t,e,r)}},Jr={verify:function(t,e,r){return kr.ed25519.verify(t,e,r)}},Zr={publicReadKey:function(){return kr.keystore.publicReadKey()},publicWriteKey:function(){return kr.keystore.publicWriteKey()},decrypt:function(t){return kr.keystore.decrypt(t)},sign:function(t,e){return kr.keystore.sign(t,e)},importSymmKey:function(t,e){return kr.keystore.importSymmKey(t,e)},exportSymmKey:function(t){return kr.keystore.exportSymmKey(t)},keyExists:function(t){return kr.keystore.keyExists(t)},getAlg:function(){return kr.keystore.getAlg()},clear:function(){return kr.keystore.clear()}},Xr=Object.freeze({__proto__:null,sha256Str:Wr,hash:qr,aes:Vr,rsa:Yr,ed25519:Jr,keystore:Zr});function Qr(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(t.some((function(t){return t.includes("/")})))throw new Error("Forward slashes `/` are not allowed");return{directory:t}}function tn(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(t.some((function(t){return t.includes("/")})))throw new Error("Forward slashes `/` are not allowed");return{file:t}}function en(){return{directory:[]}}function rn(t){var e=t.replace(/^\/+/,"").split("/");return t.endsWith("/")?{directory:e.slice(0,-1)}:""===t?{directory:[]}:{file:e}}function nn(t,e){var r=(void 0===e?{absolute:!1}:e).absolute?"/":"",n=yn(t).join("/");return un(t)?r+n+(n.length?"/":""):r+n}function on(t,e){return pn((function(e){return yn(t).concat(e)}),e)}function sn(t,e){return yn(e)[0]===t}function un(t){return!!t.directory}function an(t){return!!t.file}function cn(t){return 0===t.directory.length}function fn(t,e){return yn(t)[0]===yn(e)[0]}function ln(t,e){return!(!un(t)||!un(e))||!(!an(t)||!an(e))}function hn(t){return un(t)?Hr.Directory:Hr.File}function pn(t,e){return un(e)?{directory:t(e.directory)}:an(e)?{file:t(e.file)}:e}function dn(t){return un(t)&&cn(t)?null:Qr.apply(void 0,yn(t).slice(0,-1))}function yn(t){return un(t)?t.directory:an(t)?t.file:[]}function vn(t){return"[ "+t.join(", ")+" ]"}!function(t){t.Public="public",t.Pretty="p",t.Private="private",t.PrivateLog="privateLog",t.Version="version"}(Kr||(Kr={})),function(t){t.Directory="directory",t.File="file"}(Hr||(Hr={}));var gn=Object.freeze({__proto__:null,get Branch(){return Kr},get Kind(){return Hr},directory:Qr,file:tn,root:en,fromPosix:rn,toPosix:nn,combine:on,isBranch:sn,isDirectory:un,isFile:an,isRootDirectory:cn,isSameBranch:fn,isSameKind:ln,kind:hn,map:pn,parent:dn,removeBranch:function(t){return pn((function(e){return un(t)||e.length>1?e.slice(1):e}),t)},unwrap:yn,log:vn});function mn(t){var e=t.path;return o(this,void 0,void 0,(function(){return s(this,(function(t){switch(t.label){case 0:return[4,qr.sha256Str(_n(e))];case 1:return[2,"wnfs__bareNameFilter__"+t.sent()]}}))}))}function bn(t){var e=t.path;return o(this,void 0,void 0,(function(){return s(this,(function(t){switch(t.label){case 0:return[4,qr.sha256Str(_n(e))];case 1:return[2,"wnfs__readKey__"+t.sent()]}}))}))}function _n(t){return"/"+yn(t).join("/")}var wn=t=>{if(t instanceof Error)return t;{const{name:e,message:r,stack:n,code:i}=t;return Object.assign(kn(e,r),{name:e,stack:n,code:i})}};const kn=(t,e)=>{switch(t){case"RangeError":return new RangeError(e);case"ReferenceError":return ReferenceError(e);case"SyntaxError":return new SyntaxError(e);case"TypeError":return new TypeError(e);case"URIError":return new URIError(e);default:return new Error(e)}};var En={encodeError:t=>{const{name:e,message:r,stack:n,code:i,detail:o}=t;return{name:e,message:r,stack:n,code:i,detail:o}},decodeError:wn};var An={ensureUniqueBuffers:t=>new Set(t)},Sn={TimeoutError:class extends Error{get name(){return this.constructor.name}},AbortError:class extends Error{get name(){return this.constructor.name}},DisconnectError:class extends Error{get name(){return this.constructor.name}}};const{decodeError:In}=En,{ensureUniqueBuffers:xn}=An,{DisconnectError:Bn,TimeoutError:Tn,AbortError:On}=Sn;var Nn=class t{constructor(t){this.port=null,this.id=Math.random().toString(32).slice(2),this.nextID=0,this.queries=Object.create(null),t&&this.connect(t)}execute(e){const r=`${this.id}@${this.nextID++}`;return this.queries[r]=e,e.timeout>0&&e.timeout<1/0&&(e.timerID=setTimeout(t.timeout,e.timeout,this,r)),e.signal&&e.signal.addEventListener("abort",(()=>this.abort(r)),{once:!0}),this.port&&t.postQuery(this.port,r,e),e.result}connect(e){if(this.port)throw new Error("Transport is already open");this.port=e,this.port.addEventListener("message",this),this.port.start();for(const[r,n]of Object.entries(this.queries))t.postQuery(e,r,n)}disconnect(){const t=new Bn;for(const[e,r]of Object.entries(this.queries))r.fail(t),this.abort(e);this.port&&(this.port.removeEventListener("message",this),this.port.close())}static timeout(t,e){const{queries:r}=t,n=r[e];n&&(delete r[e],n.fail(new Tn("request timed out")),t.port&&t.port.postMessage({type:"abort",id:e}))}abort(t){const{queries:e}=this,r=e[t];r&&(delete e[t],r.fail(new On),this.port&&this.port.postMessage({type:"abort",id:t}),null!=r.timerID&&clearTimeout(r.timerID))}static postQuery(t,e,r){t.postMessage({type:"query",namespace:r.namespace,method:r.method,id:e,input:r.toJSON()},xn(r.transfer()||[]))}handleEvent(t){const{id:e,result:r}=t.data,n=this.queries[e];n&&(delete this.queries[e],r.ok?n.succeed(r.value):n.fail(In(r.error)),null!=n.timerID&&clearTimeout(n.timerID))}},Cn=class{constructor(t,e,r){this.result=new Promise(((n,i)=>{this.succeed=n,this.fail=i,this.signal=r.signal,this.input=r,this.namespace=t,this.method=e,this.timeout=null==r.timeout?1/0:r.timeout,this.timerID=null}))}toJSON(){return this.input}transfer(){return this.input.transfer}},Rn=class{constructor(t,e,r){this.remote=new class{constructor(t,e,r){this.transport=r;const n=this;for(const r of e)n[r]=e=>this.transport.execute(new Cn(t,r.toString(),e))}}(t,e,r)}};var Un=function(t){if(t.length>=255)throw new TypeError("Alphabet too long");for(var e=new Uint8Array(256),r=0;r<e.length;r++)e[r]=255;for(var n=0;n<t.length;n++){var i=t.charAt(n),o=i.charCodeAt(0);if(255!==e[o])throw new TypeError(i+" is ambiguous");e[o]=n}var s=t.length,u=t.charAt(0),a=Math.log(s)/Math.log(256),c=Math.log(256)/Math.log(s);function f(t){if("string"!=typeof t)throw new TypeError("Expected String");if(0===t.length)return new Uint8Array;var r=0;if(" "!==t[r]){for(var n=0,i=0;t[r]===u;)n++,r++;for(var o=(t.length-r)*a+1>>>0,c=new Uint8Array(o);t[r];){var f=e[t.charCodeAt(r)];if(255===f)return;for(var l=0,h=o-1;(0!==f||l<i)&&-1!==h;h--,l++)f+=s*c[h]>>>0,c[h]=f%256>>>0,f=f/256>>>0;if(0!==f)throw new Error("Non-zero carry");i=l,r++}if(" "!==t[r]){for(var p=o-i;p!==o&&0===c[p];)p++;for(var d=new Uint8Array(n+(o-p)),y=n;p!==o;)d[y++]=c[p++];return d}}}return{encode:function(e){if(e instanceof Uint8Array||(ArrayBuffer.isView(e)?e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength):Array.isArray(e)&&(e=Uint8Array.from(e))),!(e instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===e.length)return"";for(var r=0,n=0,i=0,o=e.length;i!==o&&0===e[i];)i++,r++;for(var a=(o-i)*c+1>>>0,f=new Uint8Array(a);i!==o;){for(var l=e[i],h=0,p=a-1;(0!==l||h<n)&&-1!==p;p--,h++)l+=256*f[p]>>>0,f[p]=l%s>>>0,l=l/s>>>0;if(0!==l)throw new Error("Non-zero carry");n=h,i++}for(var d=a-n;d!==a&&0===f[d];)d++;for(var y=u.repeat(r);d<a;++d)y+=t.charAt(f[d]);return y},decodeUnsafe:f,decode:function(t){var e=f(t);if(e)return e;throw new Error("Non-base"+s+" character")}}},jn="function"==typeof Object.create?function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:function(t,e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t},Ln=/%[sdj%]/g;function Pn(t){if(!Qn(t)){for(var e=[],r=0;r<arguments.length;r++)e.push(Kn(arguments[r]));return e.join(" ")}r=1;for(var n=arguments,i=n.length,o=String(t).replace(Ln,(function(t){if("%%"===t)return"%";if(r>=i)return t;switch(t){case"%s":return String(n[r++]);case"%d":return Number(n[r++]);case"%j":try{return JSON.stringify(n[r++])}catch(t){return"[Circular]"}default:return t}})),s=n[r];r<i;s=n[++r])Jn(s)||!ni(s)?o+=" "+s:o+=" "+Kn(s);return o}function Dn(t,e){if(ei(X.process))return function(){return Dn(t,e).apply(this,arguments)};var r=!1;return function(){return r||(console.error(e),r=!0),t.apply(this,arguments)}}var Mn,zn={};function Fn(t){if(ei(Mn)&&(Mn=""),t=t.toUpperCase(),!zn[t])if(new RegExp("\\b"+t+"\\b","i").test(Mn)){zn[t]=function(){var e=Pn.apply(null,arguments);console.error("%s %d: %s",t,0,e)}}else zn[t]=function(){};return zn[t]}function Kn(t,e){var r={seen:[],stylize:Gn};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),Yn(e)?r.showHidden=e:e&&di(r,e),ei(r.showHidden)&&(r.showHidden=!1),ei(r.depth)&&(r.depth=2),ei(r.colors)&&(r.colors=!1),ei(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=Hn),$n(r,t,r.depth)}function Hn(t,e){var r=Kn.styles[e];return r?"["+Kn.colors[r][0]+"m"+t+"["+Kn.colors[r][1]+"m":t}function Gn(t,e){return t}function $n(t,e,r){if(t.customInspect&&e&&si(e.inspect)&&e.inspect!==Kn&&(!e.constructor||e.constructor.prototype!==e)){var n=e.inspect(r,t);return Qn(n)||(n=$n(t,n,r)),n}var i=function(t,e){if(ei(e))return t.stylize("undefined","undefined");if(Qn(e)){var r="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(r,"string")}if(Xn(e))return t.stylize(""+e,"number");if(Yn(e))return t.stylize(""+e,"boolean");if(Jn(e))return t.stylize("null","null")}(t,e);if(i)return i;var o=Object.keys(e),s=function(t){var e={};return t.forEach((function(t,r){e[t]=!0})),e}(o);if(t.showHidden&&(o=Object.getOwnPropertyNames(e)),oi(e)&&(o.indexOf("message")>=0||o.indexOf("description")>=0))return Wn(e);if(0===o.length){if(si(e)){var u=e.name?": "+e.name:"";return t.stylize("[Function"+u+"]","special")}if(ri(e))return t.stylize(RegExp.prototype.toString.call(e),"regexp");if(ii(e))return t.stylize(Date.prototype.toString.call(e),"date");if(oi(e))return Wn(e)}var a,c="",f=!1,l=["{","}"];(Vn(e)&&(f=!0,l=["[","]"]),si(e))&&(c=" [Function"+(e.name?": "+e.name:"")+"]");return ri(e)&&(c=" "+RegExp.prototype.toString.call(e)),ii(e)&&(c=" "+Date.prototype.toUTCString.call(e)),oi(e)&&(c=" "+Wn(e)),0!==o.length||f&&0!=e.length?r<0?ri(e)?t.stylize(RegExp.prototype.toString.call(e),"regexp"):t.stylize("[Object]","special"):(t.seen.push(e),a=f?function(t,e,r,n,i){for(var o=[],s=0,u=e.length;s<u;++s)yi(e,String(s))?o.push(qn(t,e,r,n,String(s),!0)):o.push("");return i.forEach((function(i){i.match(/^\d+$/)||o.push(qn(t,e,r,n,i,!0))})),o}(t,e,r,s,o):o.map((function(n){return qn(t,e,r,s,n,f)})),t.seen.pop(),function(t,e,r){if(t.reduce((function(t,e){return e.indexOf("\n"),t+e.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60)return r[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+r[1];return r[0]+e+" "+t.join(", ")+" "+r[1]}(a,c,l)):l[0]+c+l[1]}function Wn(t){return"["+Error.prototype.toString.call(t)+"]"}function qn(t,e,r,n,i,o){var s,u,a;if((a=Object.getOwnPropertyDescriptor(e,i)||{value:e[i]}).get?u=a.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):a.set&&(u=t.stylize("[Setter]","special")),yi(n,i)||(s="["+i+"]"),u||(t.seen.indexOf(a.value)<0?(u=Jn(r)?$n(t,a.value,null):$n(t,a.value,r-1)).indexOf("\n")>-1&&(u=o?u.split("\n").map((function(t){return"  "+t})).join("\n").substr(2):"\n"+u.split("\n").map((function(t){return"   "+t})).join("\n")):u=t.stylize("[Circular]","special")),ei(s)){if(o&&i.match(/^\d+$/))return u;(s=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=t.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=t.stylize(s,"string"))}return s+": "+u}function Vn(t){return Array.isArray(t)}function Yn(t){return"boolean"==typeof t}function Jn(t){return null===t}function Zn(t){return null==t}function Xn(t){return"number"==typeof t}function Qn(t){return"string"==typeof t}function ti(t){return"symbol"==typeof t}function ei(t){return void 0===t}function ri(t){return ni(t)&&"[object RegExp]"===ci(t)}function ni(t){return"object"==typeof t&&null!==t}function ii(t){return ni(t)&&"[object Date]"===ci(t)}function oi(t){return ni(t)&&("[object Error]"===ci(t)||t instanceof Error)}function si(t){return"function"==typeof t}function ui(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t}function ai(t){return K.Buffer.isBuffer(t)}function ci(t){return Object.prototype.toString.call(t)}function fi(t){return t<10?"0"+t.toString(10):t.toString(10)}Kn.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},Kn.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};var li=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function hi(){var t=new Date,e=[fi(t.getHours()),fi(t.getMinutes()),fi(t.getSeconds())].join(":");return[t.getDate(),li[t.getMonth()],e].join(" ")}function pi(){console.log("%s - %s",hi(),Pn.apply(null,arguments))}function di(t,e){if(!e||!ni(e))return t;for(var r=Object.keys(e),n=r.length;n--;)t[r[n]]=e[r[n]];return t}function yi(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var vi={inherits:jn,_extend:di,log:pi,isBuffer:ai,isPrimitive:ui,isFunction:si,isError:oi,isDate:ii,isObject:ni,isRegExp:ri,isUndefined:ei,isSymbol:ti,isString:Qn,isNumber:Xn,isNullOrUndefined:Zn,isNull:Jn,isBoolean:Yn,isArray:Vn,inspect:Kn,deprecate:Dn,format:Pn,debuglog:Fn},gi=h(Object.freeze({__proto__:null,format:Pn,deprecate:Dn,debuglog:Fn,inspect:Kn,isArray:Vn,isBoolean:Yn,isNull:Jn,isNullOrUndefined:Zn,isNumber:Xn,isString:Qn,isSymbol:ti,isUndefined:ei,isRegExp:ri,isObject:ni,isDate:ii,isError:oi,isFunction:si,isPrimitive:ui,isBuffer:ai,log:pi,inherits:jn,_extend:di,default:vi})),mi={TextEncoder:"undefined"!=typeof TextEncoder?TextEncoder:gi.TextEncoder,TextDecoder:"undefined"!=typeof TextDecoder?TextDecoder:gi.TextDecoder};const{TextEncoder:bi,TextDecoder:_i}=mi,wi=new _i,ki=new bi;var Ei={decodeText:t=>wi.decode(t),encodeText:t=>ki.encode(t),concat:function(t,e){const r=new Uint8Array(e);let n=0;for(const e of t)r.set(e,n),n+=e.length;return r}};const{encodeText:Ai}=Ei;var Si=class{constructor(t,e,r,n){this.name=t,this.code=e,this.codeBuf=Ai(this.code),this.alphabet=n,this.codec=r(n)}encode(t){return this.codec.encode(t)}decode(t){for(const e of t)if(this.alphabet&&this.alphabet.indexOf(e)<0)throw new Error(`invalid character '${e}' in '${t}'`);return this.codec.decode(t)}};var Ii={rfc4648:t=>e=>({encode:r=>((t,e,r)=>{const n="="===e[e.length-1],i=(1<<r)-1;let o="",s=0,u=0;for(let n=0;n<t.length;++n)for(u=u<<8|t[n],s+=8;s>r;)s-=r,o+=e[i&u>>s];if(s&&(o+=e[i&u<<r-s]),n)for(;o.length*r&7;)o+="=";return o})(r,e,t),decode:r=>((t,e,r)=>{const n={};for(let t=0;t<e.length;++t)n[e[t]]=t;let i=t.length;for(;"="===t[i-1];)--i;const o=new Uint8Array(i*r/8|0);let s=0,u=0,a=0;for(let e=0;e<i;++e){const i=n[t[e]];if(void 0===i)throw new SyntaxError("Invalid character "+t[e]);u=u<<r|i,s+=r,s>=8&&(s-=8,o[a++]=255&u>>s)}if(s>=r||255&u<<8-s)throw new SyntaxError("Unexpected end of data");return o})(r,e,t)})};const{rfc4648:xi}=Ii,{decodeText:Bi,encodeText:Ti}=Ei,Oi=[["identity","\0",()=>({encode:Bi,decode:Ti}),""],["base2","0",xi(1),"01"],["base8","7",xi(3),"01234567"],["base10","9",Un,"0123456789"],["base16","f",xi(4),"0123456789abcdef"],["base16upper","F",xi(4),"0123456789ABCDEF"],["base32hex","v",xi(5),"0123456789abcdefghijklmnopqrstuv"],["base32hexupper","V",xi(5),"0123456789ABCDEFGHIJKLMNOPQRSTUV"],["base32hexpad","t",xi(5),"0123456789abcdefghijklmnopqrstuv="],["base32hexpadupper","T",xi(5),"0123456789ABCDEFGHIJKLMNOPQRSTUV="],["base32","b",xi(5),"abcdefghijklmnopqrstuvwxyz234567"],["base32upper","B",xi(5),"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"],["base32pad","c",xi(5),"abcdefghijklmnopqrstuvwxyz234567="],["base32padupper","C",xi(5),"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567="],["base32z","h",xi(5),"ybndrfg8ejkmcpqxot1uwisza345h769"],["base36","k",Un,"0123456789abcdefghijklmnopqrstuvwxyz"],["base36upper","K",Un,"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"],["base58btc","z",Un,"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"],["base58flickr","Z",Un,"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"],["base64","m",xi(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"],["base64pad","M",xi(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="],["base64url","u",xi(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"],["base64urlpad","U",xi(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_="]],Ni=Oi.reduce(((t,e)=>(t[e[0]]=new Si(e[0],e[1],e[2],e[3]),t)),{}),Ci=Oi.reduce(((t,e)=>(t[e[1]]=Ni[e[0]],t)),{});var Ri={names:Ni,codes:Ci},Ui=p((function(t,e){const{encodeText:r,decodeText:n,concat:i}=Ei;function o(t){if(Ri.names[t])return Ri.names[t];if(Ri.codes[t])return Ri.codes[t];throw new Error(`Unsupported encoding: ${t}`)}(e=t.exports=function(t,e){if(!e)throw new Error("requires an encoded Uint8Array");const{name:r,codeBuf:s}=o(t);return function(t,e){o(t).decode(n(e))}(r,e),i([s,e],s.length+e.length)}).encode=function(t,e){const n=o(t),s=r(n.encode(e));return i([n.codeBuf,s],n.codeBuf.length+s.length)},e.decode=function(t){t instanceof Uint8Array&&(t=n(t));const e=t[0];return["f","F","v","V","t","T","b","B","c","C","h","k","K"].includes(e)&&(t=t.toLowerCase()),o(t[0]).decode(t.substring(1))},e.isEncoded=function(t){if(t instanceof Uint8Array&&(t=n(t)),"[object String]"!==Object.prototype.toString.call(t))return!1;try{return o(t[0]).name}catch(t){return!1}},e.encoding=o,e.encodingFromData=function(t){return t instanceof Uint8Array&&(t=n(t)),o(t[0])},e.names=Object.freeze(Ri.names),e.codes=Object.freeze(Ri.codes)})),ji=function t(e,r,n){if(Number.MAX_SAFE_INTEGER&&e>Number.MAX_SAFE_INTEGER)throw t.bytes=0,new RangeError("Could not encode varint");r=r||[];var i=n=n||0;for(;e>=Li;)r[n++]=255&e|128,e/=128;for(;-128&e;)r[n++]=255&e|128,e>>>=7;return r[n]=0|e,t.bytes=n-i+1,r},Li=Math.pow(2,31);var Pi=function t(e,r){var n,i=0,o=0,s=r=r||0,u=e.length;do{if(s>=u||o>49)throw t.bytes=0,new RangeError("Could not decode varint");n=e[s++],i+=o<28?(127&n)<<o:(127&n)*Math.pow(2,o),o+=7}while(n>=128);return t.bytes=s-r,i};var Di=Math.pow(2,7),Mi=Math.pow(2,14),zi=Math.pow(2,21),Fi=Math.pow(2,28),Ki=Math.pow(2,35),Hi=Math.pow(2,42),Gi=Math.pow(2,49),$i=Math.pow(2,56),Wi=Math.pow(2,63),qi={encode:ji,decode:Pi,encodingLength:function(t){return t<Di?1:t<Mi?2:t<zi?3:t<Fi?4:t<Ki?5:t<Hi?6:t<Gi?7:t<$i?8:t<Wi?9:10}};var Vi={names:Object.freeze({identity:0,sha1:17,"sha2-256":18,"sha2-512":19,"sha3-512":20,"sha3-384":21,"sha3-256":22,"sha3-224":23,"shake-128":24,"shake-256":25,"keccak-224":26,"keccak-256":27,"keccak-384":28,"keccak-512":29,blake3:30,"murmur3-128":34,"murmur3-32":35,"dbl-sha2-256":86,md4:212,md5:213,bmt:214,"sha2-256-trunc254-padded":4114,"ripemd-128":4178,"ripemd-160":4179,"ripemd-256":4180,"ripemd-320":4181,x11:4352,kangarootwelve:7425,"sm3-256":21325,"blake2b-8":45569,"blake2b-16":45570,"blake2b-24":45571,"blake2b-32":45572,"blake2b-40":45573,"blake2b-48":45574,"blake2b-56":45575,"blake2b-64":45576,"blake2b-72":45577,"blake2b-80":45578,"blake2b-88":45579,"blake2b-96":45580,"blake2b-104":45581,"blake2b-112":45582,"blake2b-120":45583,"blake2b-128":45584,"blake2b-136":45585,"blake2b-144":45586,"blake2b-152":45587,"blake2b-160":45588,"blake2b-168":45589,"blake2b-176":45590,"blake2b-184":45591,"blake2b-192":45592,"blake2b-200":45593,"blake2b-208":45594,"blake2b-216":45595,"blake2b-224":45596,"blake2b-232":45597,"blake2b-240":45598,"blake2b-248":45599,"blake2b-256":45600,"blake2b-264":45601,"blake2b-272":45602,"blake2b-280":45603,"blake2b-288":45604,"blake2b-296":45605,"blake2b-304":45606,"blake2b-312":45607,"blake2b-320":45608,"blake2b-328":45609,"blake2b-336":45610,"blake2b-344":45611,"blake2b-352":45612,"blake2b-360":45613,"blake2b-368":45614,"blake2b-376":45615,"blake2b-384":45616,"blake2b-392":45617,"blake2b-400":45618,"blake2b-408":45619,"blake2b-416":45620,"blake2b-424":45621,"blake2b-432":45622,"blake2b-440":45623,"blake2b-448":45624,"blake2b-456":45625,"blake2b-464":45626,"blake2b-472":45627,"blake2b-480":45628,"blake2b-488":45629,"blake2b-496":45630,"blake2b-504":45631,"blake2b-512":45632,"blake2s-8":45633,"blake2s-16":45634,"blake2s-24":45635,"blake2s-32":45636,"blake2s-40":45637,"blake2s-48":45638,"blake2s-56":45639,"blake2s-64":45640,"blake2s-72":45641,"blake2s-80":45642,"blake2s-88":45643,"blake2s-96":45644,"blake2s-104":45645,"blake2s-112":45646,"blake2s-120":45647,"blake2s-128":45648,"blake2s-136":45649,"blake2s-144":45650,"blake2s-152":45651,"blake2s-160":45652,"blake2s-168":45653,"blake2s-176":45654,"blake2s-184":45655,"blake2s-192":45656,"blake2s-200":45657,"blake2s-208":45658,"blake2s-216":45659,"blake2s-224":45660,"blake2s-232":45661,"blake2s-240":45662,"blake2s-248":45663,"blake2s-256":45664,"skein256-8":45825,"skein256-16":45826,"skein256-24":45827,"skein256-32":45828,"skein256-40":45829,"skein256-48":45830,"skein256-56":45831,"skein256-64":45832,"skein256-72":45833,"skein256-80":45834,"skein256-88":45835,"skein256-96":45836,"skein256-104":45837,"skein256-112":45838,"skein256-120":45839,"skein256-128":45840,"skein256-136":45841,"skein256-144":45842,"skein256-152":45843,"skein256-160":45844,"skein256-168":45845,"skein256-176":45846,"skein256-184":45847,"skein256-192":45848,"skein256-200":45849,"skein256-208":45850,"skein256-216":45851,"skein256-224":45852,"skein256-232":45853,"skein256-240":45854,"skein256-248":45855,"skein256-256":45856,"skein512-8":45857,"skein512-16":45858,"skein512-24":45859,"skein512-32":45860,"skein512-40":45861,"skein512-48":45862,"skein512-56":45863,"skein512-64":45864,"skein512-72":45865,"skein512-80":45866,"skein512-88":45867,"skein512-96":45868,"skein512-104":45869,"skein512-112":45870,"skein512-120":45871,"skein512-128":45872,"skein512-136":45873,"skein512-144":45874,"skein512-152":45875,"skein512-160":45876,"skein512-168":45877,"skein512-176":45878,"skein512-184":45879,"skein512-192":45880,"skein512-200":45881,"skein512-208":45882,"skein512-216":45883,"skein512-224":45884,"skein512-232":45885,"skein512-240":45886,"skein512-248":45887,"skein512-256":45888,"skein512-264":45889,"skein512-272":45890,"skein512-280":45891,"skein512-288":45892,"skein512-296":45893,"skein512-304":45894,"skein512-312":45895,"skein512-320":45896,"skein512-328":45897,"skein512-336":45898,"skein512-344":45899,"skein512-352":45900,"skein512-360":45901,"skein512-368":45902,"skein512-376":45903,"skein512-384":45904,"skein512-392":45905,"skein512-400":45906,"skein512-408":45907,"skein512-416":45908,"skein512-424":45909,"skein512-432":45910,"skein512-440":45911,"skein512-448":45912,"skein512-456":45913,"skein512-464":45914,"skein512-472":45915,"skein512-480":45916,"skein512-488":45917,"skein512-496":45918,"skein512-504":45919,"skein512-512":45920,"skein1024-8":45921,"skein1024-16":45922,"skein1024-24":45923,"skein1024-32":45924,"skein1024-40":45925,"skein1024-48":45926,"skein1024-56":45927,"skein1024-64":45928,"skein1024-72":45929,"skein1024-80":45930,"skein1024-88":45931,"skein1024-96":45932,"skein1024-104":45933,"skein1024-112":45934,"skein1024-120":45935,"skein1024-128":45936,"skein1024-136":45937,"skein1024-144":45938,"skein1024-152":45939,"skein1024-160":45940,"skein1024-168":45941,"skein1024-176":45942,"skein1024-184":45943,"skein1024-192":45944,"skein1024-200":45945,"skein1024-208":45946,"skein1024-216":45947,"skein1024-224":45948,"skein1024-232":45949,"skein1024-240":45950,"skein1024-248":45951,"skein1024-256":45952,"skein1024-264":45953,"skein1024-272":45954,"skein1024-280":45955,"skein1024-288":45956,"skein1024-296":45957,"skein1024-304":45958,"skein1024-312":45959,"skein1024-320":45960,"skein1024-328":45961,"skein1024-336":45962,"skein1024-344":45963,"skein1024-352":45964,"skein1024-360":45965,"skein1024-368":45966,"skein1024-376":45967,"skein1024-384":45968,"skein1024-392":45969,"skein1024-400":45970,"skein1024-408":45971,"skein1024-416":45972,"skein1024-424":45973,"skein1024-432":45974,"skein1024-440":45975,"skein1024-448":45976,"skein1024-456":45977,"skein1024-464":45978,"skein1024-472":45979,"skein1024-480":45980,"skein1024-488":45981,"skein1024-496":45982,"skein1024-504":45983,"skein1024-512":45984,"skein1024-520":45985,"skein1024-528":45986,"skein1024-536":45987,"skein1024-544":45988,"skein1024-552":45989,"skein1024-560":45990,"skein1024-568":45991,"skein1024-576":45992,"skein1024-584":45993,"skein1024-592":45994,"skein1024-600":45995,"skein1024-608":45996,"skein1024-616":45997,"skein1024-624":45998,"skein1024-632":45999,"skein1024-640":46e3,"skein1024-648":46001,"skein1024-656":46002,"skein1024-664":46003,"skein1024-672":46004,"skein1024-680":46005,"skein1024-688":46006,"skein1024-696":46007,"skein1024-704":46008,"skein1024-712":46009,"skein1024-720":46010,"skein1024-728":46011,"skein1024-736":46012,"skein1024-744":46013,"skein1024-752":46014,"skein1024-760":46015,"skein1024-768":46016,"skein1024-776":46017,"skein1024-784":46018,"skein1024-792":46019,"skein1024-800":46020,"skein1024-808":46021,"skein1024-816":46022,"skein1024-824":46023,"skein1024-832":46024,"skein1024-840":46025,"skein1024-848":46026,"skein1024-856":46027,"skein1024-864":46028,"skein1024-872":46029,"skein1024-880":46030,"skein1024-888":46031,"skein1024-896":46032,"skein1024-904":46033,"skein1024-912":46034,"skein1024-920":46035,"skein1024-928":46036,"skein1024-936":46037,"skein1024-944":46038,"skein1024-952":46039,"skein1024-960":46040,"skein1024-968":46041,"skein1024-976":46042,"skein1024-984":46043,"skein1024-992":46044,"skein1024-1000":46045,"skein1024-1008":46046,"skein1024-1016":46047,"skein1024-1024":46048,"poseidon-bls12_381-a2-fc1":46081,"poseidon-bls12_381-a2-fc1-sc":46082})};const{encoding:Yi}=Ui,{TextDecoder:Ji}=mi,Zi=new Ji("utf8");var Xi=function(t,e="utf8"){return"utf8"===e||"utf-8"===e?Zi.decode(t):"ascii"===e?function(t){let e="";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e}(t):Yi(e).encode(t)};const{encoding:Qi}=Ui,{TextEncoder:to}=mi,eo=new to;var ro=function(t,e="utf8"){return"utf8"===e||"utf-8"===e?eo.encode(t):"ascii"===e?function(t){const e=new Uint8Array(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}(t):Qi(e).decode(t)};var no=function(t,e){e||(e=t.reduce(((t,e)=>t+e.length),0));const r=new Uint8Array(e);let n=0;for(const e of t)r.set(e,n),n+=e.length;return r};const{names:io}=Vi,oo={};for(const t in io){const e=t;oo[io[e]]=e}function so(t){if(!(t instanceof Uint8Array))throw new Error("multihash must be a Uint8Array");if(t.length<2)throw new Error("multihash too short. must be > 2 bytes.");const e=qi.decode(t);if(!co(e))throw new Error(`multihash unknown function code: 0x${e.toString(16)}`);t=t.slice(qi.decode.bytes);const r=qi.decode(t);if(r<0)throw new Error(`multihash invalid length: ${r}`);if((t=t.slice(qi.decode.bytes)).length!==r)throw new Error(`multihash length inconsistent: 0x${Xi(t,"base16")}`);return{code:e,name:oo[e],length:r,digest:t}}function uo(t){let e=t;if("string"==typeof t){if(void 0===io[t])throw new Error(`Unrecognized hash function named: ${t}`);e=io[t]}if("number"!=typeof e)throw new Error(`Hash function code should be a number. Got: ${e}`);if(void 0===oo[e]&&!ao(e))throw new Error(`Unrecognized function code: ${e}`);return e}function ao(t){return t>0&&t<16}function co(t){return!!ao(t)||!!oo[t]}function fo(t){so(t)}var lo={names:io,codes:Object.freeze(oo),toHexString:function(t){if(!(t instanceof Uint8Array))throw new Error("must be passed a Uint8Array");return Xi(t,"base16")},fromHexString:function(t){return ro(t,"base16")},toB58String:function(t){if(!(t instanceof Uint8Array))throw new Error("must be passed a Uint8Array");return Xi(Ui.encode("base58btc",t)).slice(1)},fromB58String:function(t){const e=t instanceof Uint8Array?Xi(t):t;return Ui.decode("z"+e)},decode:so,encode:function(t,e,r){if(!t||void 0===e)throw new Error("multihash encode requires at least two args: digest, code");const n=uo(e);if(!(t instanceof Uint8Array))throw new Error("digest should be a Uint8Array");if(null==r&&(r=t.length),r&&t.length!==r)throw new Error("digest length should be equal to specified length.");const i=qi.encode(n),o=qi.encode(r);return no([i,o,t],i.length+o.length+t.length)},coerceCode:uo,isAppCode:ao,validate:fo,prefix:function(t){return fo(t),t.subarray(0,2)},isValidCode:co},ho=function t(e,r,n){if(Number.MAX_SAFE_INTEGER&&e>Number.MAX_SAFE_INTEGER)throw t.bytes=0,new RangeError("Could not encode varint");r=r||[];var i=n=n||0;for(;e>=po;)r[n++]=255&e|128,e/=128;for(;-128&e;)r[n++]=255&e|128,e>>>=7;return r[n]=0|e,t.bytes=n-i+1,r},po=Math.pow(2,31);var yo=function t(e,r){var n,i=0,o=0,s=r=r||0,u=e.length;do{if(s>=u||o>49)throw t.bytes=0,new RangeError("Could not decode varint");n=e[s++],i+=o<28?(127&n)<<o:(127&n)*Math.pow(2,o),o+=7}while(n>=128);return t.bytes=s-r,i};var vo=Math.pow(2,7),go=Math.pow(2,14),mo=Math.pow(2,21),bo=Math.pow(2,28),_o=Math.pow(2,35),wo=Math.pow(2,42),ko=Math.pow(2,49),Eo=Math.pow(2,56),Ao=Math.pow(2,63),So={encode:ho,decode:yo,encodingLength:function(t){return t<vo?1:t<go?2:t<mo?3:t<bo?4:t<_o?5:t<wo?6:t<ko?7:t<Eo?8:t<Ao?9:10}};var Io={baseTable:Object.freeze({identity:0,cidv1:1,cidv2:2,cidv3:3,ip4:4,tcp:6,sha1:17,"sha2-256":18,"sha2-512":19,"sha3-512":20,"sha3-384":21,"sha3-256":22,"sha3-224":23,"shake-128":24,"shake-256":25,"keccak-224":26,"keccak-256":27,"keccak-384":28,"keccak-512":29,blake3:30,dccp:33,"murmur3-128":34,"murmur3-32":35,ip6:41,ip6zone:42,path:47,multicodec:48,multihash:49,multiaddr:50,multibase:51,dns:53,dns4:54,dns6:55,dnsaddr:56,protobuf:80,cbor:81,raw:85,"dbl-sha2-256":86,rlp:96,bencode:99,"dag-pb":112,"dag-cbor":113,"libp2p-key":114,"git-raw":120,"torrent-info":123,"torrent-file":124,"leofcoin-block":129,"leofcoin-tx":130,"leofcoin-pr":131,sctp:132,"dag-jose":133,"dag-cose":134,"eth-block":144,"eth-block-list":145,"eth-tx-trie":146,"eth-tx":147,"eth-tx-receipt-trie":148,"eth-tx-receipt":149,"eth-state-trie":150,"eth-account-snapshot":151,"eth-storage-trie":152,"bitcoin-block":176,"bitcoin-tx":177,"bitcoin-witness-commitment":178,"zcash-block":192,"zcash-tx":193,docid:206,"stellar-block":208,"stellar-tx":209,md4:212,md5:213,bmt:214,"decred-block":224,"decred-tx":225,"ipld-ns":226,"ipfs-ns":227,"swarm-ns":228,"ipns-ns":229,zeronet:230,"secp256k1-pub":231,"bls12_381-g1-pub":234,"bls12_381-g2-pub":235,"x25519-pub":236,"ed25519-pub":237,"bls12_381-g1g2-pub":238,"dash-block":240,"dash-tx":241,"swarm-manifest":250,"swarm-feed":251,udp:273,"p2p-webrtc-star":275,"p2p-webrtc-direct":276,"p2p-stardust":277,"p2p-circuit":290,"dag-json":297,udt:301,utp:302,unix:400,p2p:421,ipfs:421,https:443,onion:444,onion3:445,garlic64:446,garlic32:447,tls:448,quic:460,ws:477,wss:478,"p2p-websocket-star":479,http:480,json:512,messagepack:513,"libp2p-peer-record":769,"sha2-256-trunc254-padded":4114,"ripemd-128":4178,"ripemd-160":4179,"ripemd-256":4180,"ripemd-320":4181,x11:4352,"p256-pub":4608,"p384-pub":4609,"p521-pub":4610,"ed448-pub":4611,"x448-pub":4612,"ed25519-priv":4864,kangarootwelve:7425,"sm3-256":21325,"blake2b-8":45569,"blake2b-16":45570,"blake2b-24":45571,"blake2b-32":45572,"blake2b-40":45573,"blake2b-48":45574,"blake2b-56":45575,"blake2b-64":45576,"blake2b-72":45577,"blake2b-80":45578,"blake2b-88":45579,"blake2b-96":45580,"blake2b-104":45581,"blake2b-112":45582,"blake2b-120":45583,"blake2b-128":45584,"blake2b-136":45585,"blake2b-144":45586,"blake2b-152":45587,"blake2b-160":45588,"blake2b-168":45589,"blake2b-176":45590,"blake2b-184":45591,"blake2b-192":45592,"blake2b-200":45593,"blake2b-208":45594,"blake2b-216":45595,"blake2b-224":45596,"blake2b-232":45597,"blake2b-240":45598,"blake2b-248":45599,"blake2b-256":45600,"blake2b-264":45601,"blake2b-272":45602,"blake2b-280":45603,"blake2b-288":45604,"blake2b-296":45605,"blake2b-304":45606,"blake2b-312":45607,"blake2b-320":45608,"blake2b-328":45609,"blake2b-336":45610,"blake2b-344":45611,"blake2b-352":45612,"blake2b-360":45613,"blake2b-368":45614,"blake2b-376":45615,"blake2b-384":45616,"blake2b-392":45617,"blake2b-400":45618,"blake2b-408":45619,"blake2b-416":45620,"blake2b-424":45621,"blake2b-432":45622,"blake2b-440":45623,"blake2b-448":45624,"blake2b-456":45625,"blake2b-464":45626,"blake2b-472":45627,"blake2b-480":45628,"blake2b-488":45629,"blake2b-496":45630,"blake2b-504":45631,"blake2b-512":45632,"blake2s-8":45633,"blake2s-16":45634,"blake2s-24":45635,"blake2s-32":45636,"blake2s-40":45637,"blake2s-48":45638,"blake2s-56":45639,"blake2s-64":45640,"blake2s-72":45641,"blake2s-80":45642,"blake2s-88":45643,"blake2s-96":45644,"blake2s-104":45645,"blake2s-112":45646,"blake2s-120":45647,"blake2s-128":45648,"blake2s-136":45649,"blake2s-144":45650,"blake2s-152":45651,"blake2s-160":45652,"blake2s-168":45653,"blake2s-176":45654,"blake2s-184":45655,"blake2s-192":45656,"blake2s-200":45657,"blake2s-208":45658,"blake2s-216":45659,"blake2s-224":45660,"blake2s-232":45661,"blake2s-240":45662,"blake2s-248":45663,"blake2s-256":45664,"skein256-8":45825,"skein256-16":45826,"skein256-24":45827,"skein256-32":45828,"skein256-40":45829,"skein256-48":45830,"skein256-56":45831,"skein256-64":45832,"skein256-72":45833,"skein256-80":45834,"skein256-88":45835,"skein256-96":45836,"skein256-104":45837,"skein256-112":45838,"skein256-120":45839,"skein256-128":45840,"skein256-136":45841,"skein256-144":45842,"skein256-152":45843,"skein256-160":45844,"skein256-168":45845,"skein256-176":45846,"skein256-184":45847,"skein256-192":45848,"skein256-200":45849,"skein256-208":45850,"skein256-216":45851,"skein256-224":45852,"skein256-232":45853,"skein256-240":45854,"skein256-248":45855,"skein256-256":45856,"skein512-8":45857,"skein512-16":45858,"skein512-24":45859,"skein512-32":45860,"skein512-40":45861,"skein512-48":45862,"skein512-56":45863,"skein512-64":45864,"skein512-72":45865,"skein512-80":45866,"skein512-88":45867,"skein512-96":45868,"skein512-104":45869,"skein512-112":45870,"skein512-120":45871,"skein512-128":45872,"skein512-136":45873,"skein512-144":45874,"skein512-152":45875,"skein512-160":45876,"skein512-168":45877,"skein512-176":45878,"skein512-184":45879,"skein512-192":45880,"skein512-200":45881,"skein512-208":45882,"skein512-216":45883,"skein512-224":45884,"skein512-232":45885,"skein512-240":45886,"skein512-248":45887,"skein512-256":45888,"skein512-264":45889,"skein512-272":45890,"skein512-280":45891,"skein512-288":45892,"skein512-296":45893,"skein512-304":45894,"skein512-312":45895,"skein512-320":45896,"skein512-328":45897,"skein512-336":45898,"skein512-344":45899,"skein512-352":45900,"skein512-360":45901,"skein512-368":45902,"skein512-376":45903,"skein512-384":45904,"skein512-392":45905,"skein512-400":45906,"skein512-408":45907,"skein512-416":45908,"skein512-424":45909,"skein512-432":45910,"skein512-440":45911,"skein512-448":45912,"skein512-456":45913,"skein512-464":45914,"skein512-472":45915,"skein512-480":45916,"skein512-488":45917,"skein512-496":45918,"skein512-504":45919,"skein512-512":45920,"skein1024-8":45921,"skein1024-16":45922,"skein1024-24":45923,"skein1024-32":45924,"skein1024-40":45925,"skein1024-48":45926,"skein1024-56":45927,"skein1024-64":45928,"skein1024-72":45929,"skein1024-80":45930,"skein1024-88":45931,"skein1024-96":45932,"skein1024-104":45933,"skein1024-112":45934,"skein1024-120":45935,"skein1024-128":45936,"skein1024-136":45937,"skein1024-144":45938,"skein1024-152":45939,"skein1024-160":45940,"skein1024-168":45941,"skein1024-176":45942,"skein1024-184":45943,"skein1024-192":45944,"skein1024-200":45945,"skein1024-208":45946,"skein1024-216":45947,"skein1024-224":45948,"skein1024-232":45949,"skein1024-240":45950,"skein1024-248":45951,"skein1024-256":45952,"skein1024-264":45953,"skein1024-272":45954,"skein1024-280":45955,"skein1024-288":45956,"skein1024-296":45957,"skein1024-304":45958,"skein1024-312":45959,"skein1024-320":45960,"skein1024-328":45961,"skein1024-336":45962,"skein1024-344":45963,"skein1024-352":45964,"skein1024-360":45965,"skein1024-368":45966,"skein1024-376":45967,"skein1024-384":45968,"skein1024-392":45969,"skein1024-400":45970,"skein1024-408":45971,"skein1024-416":45972,"skein1024-424":45973,"skein1024-432":45974,"skein1024-440":45975,"skein1024-448":45976,"skein1024-456":45977,"skein1024-464":45978,"skein1024-472":45979,"skein1024-480":45980,"skein1024-488":45981,"skein1024-496":45982,"skein1024-504":45983,"skein1024-512":45984,"skein1024-520":45985,"skein1024-528":45986,"skein1024-536":45987,"skein1024-544":45988,"skein1024-552":45989,"skein1024-560":45990,"skein1024-568":45991,"skein1024-576":45992,"skein1024-584":45993,"skein1024-592":45994,"skein1024-600":45995,"skein1024-608":45996,"skein1024-616":45997,"skein1024-624":45998,"skein1024-632":45999,"skein1024-640":46e3,"skein1024-648":46001,"skein1024-656":46002,"skein1024-664":46003,"skein1024-672":46004,"skein1024-680":46005,"skein1024-688":46006,"skein1024-696":46007,"skein1024-704":46008,"skein1024-712":46009,"skein1024-720":46010,"skein1024-728":46011,"skein1024-736":46012,"skein1024-744":46013,"skein1024-752":46014,"skein1024-760":46015,"skein1024-768":46016,"skein1024-776":46017,"skein1024-784":46018,"skein1024-792":46019,"skein1024-800":46020,"skein1024-808":46021,"skein1024-816":46022,"skein1024-824":46023,"skein1024-832":46024,"skein1024-840":46025,"skein1024-848":46026,"skein1024-856":46027,"skein1024-864":46028,"skein1024-872":46029,"skein1024-880":46030,"skein1024-888":46031,"skein1024-896":46032,"skein1024-904":46033,"skein1024-912":46034,"skein1024-920":46035,"skein1024-928":46036,"skein1024-936":46037,"skein1024-944":46038,"skein1024-952":46039,"skein1024-960":46040,"skein1024-968":46041,"skein1024-976":46042,"skein1024-984":46043,"skein1024-992":46044,"skein1024-1000":46045,"skein1024-1008":46046,"skein1024-1016":46047,"skein1024-1024":46048,"poseidon-bls12_381-a2-fc1":46081,"poseidon-bls12_381-a2-fc1-sc":46082,"zeroxcert-imprint-256":52753,"fil-commitment-unsealed":61697,"fil-commitment-sealed":61698,"holochain-adr-v0":8417572,"holochain-adr-v1":8483108,"holochain-key-v0":9728292,"holochain-key-v1":9793828,"holochain-sig-v0":10645796,"holochain-sig-v1":10711332,"skynet-ns":11639056})};const{baseTable:xo}=Io,Bo=new Map;for(const t in xo){const e=xo[t];Bo.set(e,t)}var To=Object.freeze(Bo);const{names:Oo}=Ri,{TextDecoder:No}=mi,Co=new No("utf8");var Ro=function(t,e="utf8"){if("utf8"===e||"utf-8"===e)return Co.decode(t);if("ascii"===e)return function(t){let e="";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e}(t);const r=Oo[e];if(!r)throw new Error("Unknown base");return r.encode(t)};const{names:Uo}=Ri,{TextEncoder:jo}=mi,Lo=new jo;var Po=function(t,e="utf8"){if("utf8"===e||"utf-8"===e)return Lo.encode(t);if("ascii"===e)return function(t){const e=new Uint8Array(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}(t);const r=Uo[e];if(!r)throw new Error("Unknown base");return r.decode(t)},Do={numberToUint8Array:function(t){let e=t.toString(16);e.length%2==1&&(e="0"+e);return Po(e,"base16")},uint8ArrayToNumber:Mo,varintUint8ArrayEncode:function(t){return Uint8Array.from(So.encode(Mo(t)))},varintEncode:function(t){return Uint8Array.from(So.encode(t))}};function Mo(t){return parseInt(Ro(t,"base16"),16)}const{baseTable:zo}=Io,Fo=Do.varintEncode,Ko={};for(const t in zo){const e=zo[t];Ko[t]=Fo(e)}var Ho=Object.freeze(Ko);var Go=function(t,e){e||(e=t.reduce(((t,e)=>t+e.length),0));const r=new Uint8Array(e);let n=0;for(const e of t)r.set(e,n),n+=e.length;return r};const{baseTable:$o}=Io,Wo={};for(const[t,e]of Object.entries($o)){Wo[t.toUpperCase().replace(/-/g,"_")]=e}var qo=Object.freeze(Wo);const{baseTable:Vo}=Io,Yo={};for(const[t,e]of Object.entries(Vo))void 0===Yo[e]&&(Yo[e]=t);var Jo={addPrefix:function(t,e){let r;if(t instanceof Uint8Array)r=Do.varintUint8ArrayEncode(t);else{if(!Ho[t])throw new Error("multicodec not recognized");r=Ho[t]}return Go([r,e],r.length+e.length)},rmPrefix:function(t){return So.decode(t),t.slice(So.decode.bytes)},getCodec:function(t){const e=So.decode(t),r=To.get(e);if(void 0===r)throw new Error(`Code ${e} not found`);return r},getName:function(t){return To.get(t)},getNumber:function(t){const e=Ho[t];if(void 0===e)throw new Error("Codec `"+t+"` not found");return So.decode(e)},getCode:function(t){return So.decode(t)},getCodeVarint:function(t){const e=Ho[t];if(void 0===e)throw new Error("Codec `"+t+"` not found");return e},getVarint:function(t){return So.encode(t)},print:Object.freeze(Yo),...qo};var Zo={checkCIDComponents:function(t){if(null==t)return"null values are not valid CIDs";if(0!==t.version&&1!==t.version)return"Invalid version, must be a number equal to 1 or 0";if("string"!=typeof t.codec)return"codec must be string";if(0===t.version){if("dag-pb"!==t.codec)return"codec must be 'dag-pb' for CIDv0";if("base58btc"!==t.multibaseName)return"multibaseName must be 'base58btc' for CIDv0"}if(!(t.multihash instanceof Uint8Array))return"multihash must be a Uint8Array";try{lo.validate(t.multihash)}catch(t){let e=t.message;return e||(e="Multihash validation failed"),e}}};var Xo=function(t,e){e||(e=t.reduce(((t,e)=>t+e.length),0));const r=new Uint8Array(e);let n=0;for(const e of t)r.set(e,n),n+=e.length;return r};const{encoding:Qo}=Ui,{TextDecoder:ts}=mi,es=new ts("utf8");var rs=function(t,e="utf8"){return"utf8"===e||"utf-8"===e?es.decode(t):"ascii"===e?function(t){let e="";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e}(t):Qo(e).encode(t)};var ns=function(t,e){if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let r=0;r<t.byteLength;r++)if(t[r]!==e[r])return!1;return!0};const{baseTable:is}=Io,os=Object.keys(is).reduce(((t,e)=>(t[is[e]]=e,t)),{}),ss=Symbol.for("@ipld/js-cid/CID");class us{constructor(t,e,r,n){if(this.version,this.codec,this.multihash,Object.defineProperty(this,ss,{value:!0}),us.isCID(t)){const e=t;return this.version=e.version,this.codec=e.codec,this.multihash=e.multihash,void(this.multibaseName=e.multibaseName||(0===e.version?"base58btc":"base32"))}if("string"==typeof t){const e=Ui.isEncoded(t);if(e){const r=Ui.decode(t);this.version=parseInt(r[0].toString(),16),this.codec=Jo.getCodec(r.slice(1)),this.multihash=Jo.rmPrefix(r.slice(1)),this.multibaseName=e}else this.version=0,this.codec="dag-pb",this.multihash=lo.fromB58String(t),this.multibaseName="base58btc";return us.validateCID(this),void Object.defineProperty(this,"string",{value:t})}if(t instanceof Uint8Array){const e=parseInt(t[0].toString(),16);if(1===e){const r=t;this.version=e,this.codec=Jo.getCodec(r.slice(1)),this.multihash=Jo.rmPrefix(r.slice(1)),this.multibaseName="base32"}else this.version=0,this.codec="dag-pb",this.multihash=t,this.multibaseName="base58btc";us.validateCID(this)}else this.version=t,"number"==typeof e&&(e=os[e]),this.codec=e,this.multihash=r,this.multibaseName=n||(0===t?"base58btc":"base32"),us.validateCID(this)}get bytes(){let t=this._bytes;if(!t){if(0===this.version)t=this.multihash;else{if(1!==this.version)throw new Error("unsupported version");{const e=Jo.getCodeVarint(this.codec);t=Xo([[1],e,this.multihash],1+e.byteLength+this.multihash.byteLength)}}Object.defineProperty(this,"_bytes",{value:t})}return t}get prefix(){const t=Jo.getCodeVarint(this.codec),e=lo.prefix(this.multihash);return Xo([[this.version],t,e],1+t.byteLength+e.byteLength)}get code(){return is[this.codec]}toV0(){if("dag-pb"!==this.codec)throw new Error("Cannot convert a non dag-pb CID to CIDv0");const{name:t,length:e}=lo.decode(this.multihash);if("sha2-256"!==t)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");if(32!==e)throw new Error("Cannot convert non 32 byte multihash CID to CIDv0");return new us(0,this.codec,this.multihash)}toV1(){return new us(1,this.codec,this.multihash)}toBaseEncodedString(t=this.multibaseName){if(this.string&&0!==this.string.length&&t===this.multibaseName)return this.string;let e;if(0===this.version){if("base58btc"!==t)throw new Error("not supported with CIDv0, to support different bases, please migrate the instance do CIDv1, you can do that through cid.toV1()");e=lo.toB58String(this.multihash)}else{if(1!==this.version)throw new Error("unsupported version");e=rs(Ui.encode(t,this.bytes))}return t===this.multibaseName&&Object.defineProperty(this,"string",{value:e}),e}[Symbol.for("nodejs.util.inspect.custom")](){return"CID("+this.toString()+")"}toString(t){return this.toBaseEncodedString(t)}toJSON(){return{codec:this.codec,version:this.version,hash:this.multihash}}equals(t){return this.codec===t.codec&&this.version===t.version&&ns(this.multihash,t.multihash)}static validateCID(t){const e=Zo.checkCIDComponents(t);if(e)throw new Error(e)}static isCID(t){return t instanceof us||Boolean(t&&t[ss])}}us.codecs=is;var as=us;var cs={encodeCID:(t,e)=>(e&&e.push(t.multihash.buffer),t),decodeCID:t=>{const e=t;return Object.setPrototypeOf(e.multihash,Uint8Array.prototype),Object.setPrototypeOf(e,as.prototype),Object.defineProperty(e,Symbol.for("@ipld/js-cid/CID"),{value:!0}),e},CID:as},fs={name:"ipld-block",version:"0.11.0",description:"JavaScript Implementation of IPLD Block",leadMaintainer:"Volker Mische <volker.mische@gmail.com>",main:"src/index.js",scripts:{lint:"aegir lint",check:"tsc --noEmit --noErrorTruncation",build:"npm run build:js && npm run build:types","build:js":"aegir build","build:types":"tsc --emitDeclarationOnly --declarationDir dist",test:"aegir test","test:node":"aegir test --target node","test:browser":"aegir test --target browser",release:"aegir release --docs","release-minor":"aegir release --type minor --docs","release-major":"aegir release --type major --docs",coverage:"aegir coverage","coverage-publish":"aegir coverage --provider coveralls",docs:"aegir docs",prepare:"npm run build:types"},"pre-push":["lint","test"],repository:{type:"git",url:"git+https://github.com/ipld/js-ipld-block.git"},keywords:["IPLD"],license:"MIT",bugs:{url:"https://github.com/ipld/js-ipld-block/issues"},homepage:"https://github.com/ipld/js-ipld-block#readme",devDependencies:{aegir:"^27.0.0",uint8arrays:"^1.0.0",typescript:"^4.0.3"},dependencies:{cids:"^1.0.0"},engines:{node:">=6.0.0",npm:">=3.0.0"},typesVersions:{"*":{"*":["dist/*"]}},contributors:["David Dias <daviddias.p@gmail.com>","Volker Mische <volker.mische@gmail.com>","Friedel Ziegelmayer <dignifiedquire@gmail.com>","Irakli Gozalishvili <contact@gozala.io>","achingbrain <alex@achingbrain.net>","  <victorbjelkholm@gmail.com>","Alan Shaw <alan.shaw@protocol.ai>","Charlie <the_charlie_daly@hotmail.co.uk>","Diogo Silva <fsdiogo@gmail.com>","Hugo Dias <hugomrdias@gmail.com>","Mikeal Rogers <mikeal.rogers@gmail.com>","Richard Littauer <richard.littauer@gmail.com>","Richard Schneider <makaretu@gmail.com>","Xmader <xmader@outlook.com>"]};const{version:ls}=fs,hs=Symbol.for("@ipld/js-ipld-block/block"),ps={writable:!1,configurable:!1,enumerable:!0};class ds{constructor(t,e){if(!(t&&t instanceof Uint8Array))throw new Error("first argument  must be a Uint8Array");if(!e||!as.isCID(e))throw new Error("second argument must be a CID");this.data=t,this.cid=e,Object.defineProperties(this,{data:ps,cid:ps})}get _data(){return gs(),this.data}get _cid(){return vs(),this.cid}get[Symbol.toStringTag](){return"Block"}get[hs](){return!0}static isBlock(t){return Boolean(t&&t[hs])}}const ys=(t,e)=>{let r=!1;return()=>{if(!t.test(ls))throw new Error(e);r||(r=!0,console.warn(e))}},vs=ys(/^0\.10|^0\.11/,"block._cid is deprecated and will be removed in 0.12 release. Please use block.cid instead"),gs=ys(/^0\.10|^0.11/,"block._data is deprecated and will be removed in 0.12 release. Please use block.data instead");var ms=ds;const{encodeCID:bs,decodeCID:_s}=cs;var ws={encodeBlock:({cid:t,data:e},r)=>(r&&r.push(e.buffer),{cid:bs(t,r),data:e}),decodeBlock:({cid:t,data:e})=>new ms(e,_s(t)),Block:ms};const{encodeCID:ks,decodeCID:Es}=cs,{decodeError:As}=En,{encodeBlock:Ss,decodeBlock:Is}=ws;const xs=t=>{const e=Es(t.cid);return t.error?{cid:e,error:As(t.error)}:{cid:e}};var Bs=class extends Rn{constructor(t){super("block",["put","get","rm","stat"],t)}async get(t,e={}){const{transfer:r}=e,{block:n}=await this.remote.get({...e,cid:ks(t,r)});return Is(n)}async put(t,e={}){const{transfer:r}=e;delete e.progress;const n=await this.remote.put({...e,cid:null==e.cid?void 0:ks(e.cid,r),block:t instanceof Uint8Array?t:Ss(t,r)});return Is(n.block)}async*rm(t,e={}){const{transfer:r}=e,n=await this.remote.rm({...e,cids:Array.isArray(t)?t.map((t=>ks(t,r))):[ks(t,r)]});yield*n.map(xs)}async stat(t,e={}){const{transfer:r}=e,n=await this.remote.stat({...e,cid:ks(t,r)});return{...n,cid:Es(n.cid)}}};const{encodeCID:Ts,decodeCID:Os,CID:Ns}=cs;var Cs=(t,e)=>{const r=[];return Rs(t,r,e),{dagNode:t,cids:r}};const Rs=(t,e,r)=>{if(null!=t&&"object"==typeof t)if(Ns.isCID(t))e.push(t),Ts(t,r);else if(t instanceof ArrayBuffer)r&&r.push(t);else if(ArrayBuffer.isView(t))r&&r.push(t.buffer);else if(Array.isArray(t))for(const n of t)Rs(n,e,r);else for(const n of Object.values(t))Rs(n,e,r)};var Us={decodeNode:({dagNode:t,cids:e})=>{for(const t of e)Os(t);return t},encodeNode:Cs};const{encodeCID:js,decodeCID:Ls}=cs,{encodeNode:Ps,decodeNode:Ds}=Us;const Ms=(t,e)=>"string"==typeof t?t:js(t,e);var zs=class extends Rn{constructor(t){super("dag",["put","get","resolve","tree"],t)}async put(t,e={}){const{cid:r}=e,n=await this.remote.put({...e,cid:null!=r?js(r):void 0,dagNode:Ps(t,e.transfer)});return Ls(n)}async get(t,e={}){const{value:r,remainderPath:n}=await this.remote.get({...e,cid:js(t,e.transfer)});return{value:Ds(r),remainderPath:n}}async resolve(t,e={}){const{cid:r,remainderPath:n}=await this.remote.resolve({...e,cid:Ms(t,e.transfer)});return{cid:Ls(r),remainderPath:n}}async*tree(t,e={}){const r=await this.remote.tree({...e,cid:js(t,e.transfer)});yield*r}};const{encodeError:Fs,decodeError:Ks}=En,{ensureUniqueBuffers:Hs}=An;var Gs=(t,e,r)=>{const{port1:n,port2:i}=new MessageChannel,o=$s(t);return n.onmessage=async({data:{method:t}})=>{switch(t){case"next":try{const{done:t,value:r}=await o.next();if(t)n.postMessage({type:"next",done:!0}),n.close();else{const t=[],i=e(r,t);n.postMessage({type:"next",done:!1,value:i},Hs(t))}}catch(t){n.postMessage({type:"throw",error:Fs(t)}),n.close()}break;case"return":n.close(),o.return&&o.return()}},n.start(),r.push(i),{type:"RemoteIterable",port:i}};const $s=t=>{if(null!=t){if("function"==typeof t[Symbol.asyncIterator])return t[Symbol.asyncIterator]();if("function"==typeof t[Symbol.iterator])return t[Symbol.iterator]()}throw TypeError("Value must be async or sync iterable")};var Ws={decodeIterable:async function*({port:t},e){let r=t=>{};const n=()=>(t.postMessage({method:"next"}),new Promise((t=>r=t)));t.onmessage=t=>r(t.data);let i=!1;try{for(;!i;){const{done:t,value:r,error:o}=await n();if(i=t,null!=o)throw Ks(o);null!=r&&(yield e(r))}}finally{i||t.postMessage({method:"return"}),t.close()}},encodeIterable:Gs,encodeCallback:(t,e)=>{const{port1:r,port2:n}=new MessageChannel;return r.onmessage=({data:e})=>t.apply(null,e),e.push(n),{type:"RemoteCallback",port:n}},decodeCallback:({port:t})=>(e,r=[])=>{t.postMessage(e,new Set(r))}};var qs=async function*(t,e={}){const r=t.getReader();try{for(;;){const t=await r.read();if(t.done)return;yield t.value}}finally{!0!==e.preventCancel&&r.cancel(),r.releaseLock()}};const{encodeCID:Vs,decodeCID:Ys,CID:Js}=cs,{decodeIterable:Zs,encodeIterable:Xs,encodeCallback:Qs}=Ws;const tu=({path:t,cid:e,mode:r,mtime:n,size:i})=>({path:t,cid:Ys(e),mode:r,mtime:n,size:i}),eu=({depth:t,name:e,path:r,size:n,cid:i,type:o,mode:s,mtime:u})=>({cid:Ys(i),type:o,name:e,path:r,mode:s,mtime:u,size:n,depth:t}),ru=t=>t,nu=(t,e)=>{if(t instanceof Blob)return t;if("string"==typeof t)return t;if(t instanceof ArrayBuffer)return t;if(ArrayBuffer.isView(t))return t;{const r=cu(t);if(r)return Xs(r,su,e);const n=fu(t);if(n)return Xs(n,ou,e);const i=lu(t);if(i)return Xs(qs(i),ou,e);const o=hu(t);if(o)return uu(o,e);throw TypeError("Unexpected input: "+typeof t)}},iu=(t,e)=>{const r=cu(t);if(r)return Xs(r,su,e);const n=fu(t);if(n)return Xs(n,ou,e);const i=lu(t);if(i)return Xs(qs(i),ou,e);throw TypeError("Unexpected input: "+typeof t)},ou=(t,e)=>{if(t instanceof ArrayBuffer)return t;if(ArrayBuffer.isView(t))return t;if(t instanceof Blob)return{path:"",content:t};if("string"==typeof t)return{path:"",content:t};{const r=hu(t);if(r)return uu(r,e);throw TypeError("Unexpected input: "+typeof t)}},su=(t,e)=>{if("number"==typeof t)throw TypeError("Iterable of numbers is not supported");if(t instanceof ArrayBuffer)return t;if(ArrayBuffer.isView(t))return t;if(t instanceof Blob)return{path:"",content:t};if("string"==typeof t)return{path:"",content:t};{const r=hu(t);if(r)return uu(r,e);throw TypeError("Unexpected input: "+typeof t)}},uu=({path:t,mode:e,mtime:r,content:n},i)=>({path:t,mode:e,mtime:r,content:n?au(n,i):void 0}),au=(t,e)=>{if(null==t)return"";if(t instanceof ArrayBuffer||ArrayBuffer.isView(t))return t;if(t instanceof Blob)return t;if("string"==typeof t)return t;{const r=cu(t);if(r)return Xs(r,su,e);const n=fu(t);if(n)return Xs(n,ou,e);const i=lu(t);if(i)return Xs(qs(i),ou,e);throw TypeError("Unexpected input: "+typeof t)}},cu=t=>{const e=t;return e&&"function"==typeof e[Symbol.iterator]?e:null},fu=t=>{const e=t;return e&&"function"==typeof e[Symbol.asyncIterator]?e:null},lu=t=>t&&"function"==typeof t.getReader?t:null,hu=t=>"object"==typeof t&&(t.path||t.content)?t:null;var pu=class extends Rn{constructor(t){super("core",["add","addAll","cat","ls"],t)}async*addAll(t,e={}){const{timeout:r,signal:n}=e,i=[...e.transfer||[]],o=e.progress?Qs(e.progress,i):void 0,s=await this.remote.addAll({...e,input:iu(t,i),progress:o,transfer:i,timeout:r,signal:n});yield*Zs(s.data,tu)}async add(t,e={}){const{timeout:r,signal:n}=e,i=[...e.transfer||[]],o=e.progress?Qs(e.progress,i):void 0,s=await this.remote.add({...e,input:nu(t,i),progress:o,transfer:i,timeout:r,signal:n});return tu(s.data)}async*cat(t,e={}){const r=Js.isCID(t)?Vs(t):t,n=await this.remote.cat({...e,path:r});yield*Zs(n.data,ru)}async*ls(t,e={}){const r=Js.isCID(t)?Vs(t):t,n=await this.remote.ls({...e,path:r});yield*Zs(n.data,eu)}};const{decodeCID:du,CID:yu}=cs;var vu=class extends Rn{constructor(t){super("files",["stat"],t)}async stat(t,e={}){const{size:r,hash:n,withLocal:i,timeout:o,signal:s}=e,{stat:u}=await this.remote.stat({path:gu(t),size:r,hash:n,withLocal:i,timeout:o,signal:s});return mu(u)}};const gu=t=>yu.isCID(t)?`/ipfs/${t.toString()}`:t,mu=t=>({...t,cid:du(t.cid)}),{decodeCID:bu,CID:_u}=cs;var wu=class extends Rn{constructor(t){super("pin",["add"],t)}async add(t,e={}){const{recursive:r,timeout:n,signal:i}=e,{cid:o}=await this.remote.add({path:ku(t),recursive:r,timeout:n,signal:i});return bu(o)}};const ku=t=>_u.isCID(t)?`/ipfs/${t.toString()}`:`${t}`;class Eu extends pu{constructor(t){super(t),this.transport=t,this.block=new Bs(this.transport),this.dag=new zs(this.transport),this.files=new vu(this.transport),this.pin=new wu(this.transport)}static attach(t,e){t.transport.connect(e)}static detached(){return new Eu(new Nn(void 0))}static from(t){return new Eu(new Nn(t))}}var Au=Eu,Su=null,Iu=function(){return o(void 0,void 0,void 0,(function(){var t;return s(this,(function(e){switch(e.label){case 0:return Su?[3,2]:[4,xu()];case 1:t=e.sent(),Su=Au.from(t),e.label=2;case 2:return[2,Su]}}))}))};function xu(){return new Promise((function(t,e){var r=document.createElement("iframe");r.id="webnative-ipfs",r.style.width="0",r.style.height="0",r.style.border="none",r.style.display="none",document.body.appendChild(r),r.onload=function(){var n=new MessageChannel;n.port1.onmessage=function(e){var r=e.ports;return t(r[0])},r.contentWindow?r.contentWindow.postMessage("connect","*",[n.port2]):e(new Error("Don't have access to iframe.contentWindow"))},r.src=k.endpoints.lobby+"/ipfs.html"}))}var Bu=function(t,{className:e,symbolName:r}){const n=Symbol.for(r),i={[e]:class extends t{constructor(...t){super(...t),Object.defineProperty(this,n,{value:!0})}get[Symbol.toStringTag](){return e}}}[e];return i[`is${e}`]=t=>!(!t||!t[n]),i},Tu=function(t,{className:e,symbolName:r,withoutNew:n}){const i=Symbol.for(r),o={[e]:function(...e){if(n&&!(this instanceof o))return new o(...e);const r=t.call(this,...e)||this;return r&&!r[i]&&Object.defineProperty(r,i,{value:!0}),r}}[e];return o.prototype=Object.create(t.prototype),o.prototype.constructor=o,Object.defineProperty(o.prototype,Symbol.toStringTag,{get:()=>e}),o[`is${e}`]=t=>!(!t||!t[i]),o};Bu.proto=Tu;var Ou=p((function(t,e){
//! stable.js 0.1.8, https://github.com/Two-Screen/stable
//!  2018 Angry Bytes and contributors. MIT licensed.
t.exports=function(){var t=function(t,r){return e(t.slice(),r)};function e(t,e){"function"!=typeof e&&(e=function(t,e){return String(t).localeCompare(e)});var n=t.length;if(n<=1)return t;for(var i=new Array(n),o=1;o<n;o*=2){r(t,e,o,i);var s=t;t=i,i=s}return t}t.inplace=function(t,n){var i=e(t,n);return i!==t&&r(i,null,t.length,t),t};var r=function(t,e,r,n){var i,o,s,u,a,c=t.length,f=0,l=2*r;for(i=0;i<c;i+=l)for(s=(o=i+r)+r,o>c&&(o=c),s>c&&(s=c),u=i,a=o;;)if(u<o&&a<s)e(t[u],t[a])<=0?n[f++]=t[u++]:n[f++]=t[a++];else if(u<o)n[f++]=t[u++];else{if(!(a<s))break;n[f++]=t[a++]}};return t}()}));var Nu=function(t,e){for(let r=0;r<t.byteLength;r++){if(t[r]<e[r])return-1;if(t[r]>e[r])return 1}return t.byteLength>e.byteLength?1:t.byteLength<e.byteLength?-1:0};const Cu=(t,e)=>{const r=t.nameAsBuffer,n=e.nameAsBuffer;return Nu(r,n)};var Ru=t=>{Ou.inplace(t,Cu)},Uu=p((function(t,e){t.exports=Bu(class{constructor(t,e,r){if(!r)throw new Error("A link requires a cid to point to");Object.defineProperties(this,{Name:{value:t||"",writable:!1,enumerable:!0},Tsize:{value:e,writable:!1,enumerable:!0},Hash:{value:new as(r),writable:!1,enumerable:!0},_nameBuf:{value:null,writable:!0,enumerable:!1}})}toString(){return`DAGLink <${this.Hash.toBaseEncodedString()} - name: "${this.Name}", size: ${this.Tsize}>`}toJSON(){return this._json||(this._json=Object.freeze({name:this.Name,size:this.Tsize,cid:this.Hash.toBaseEncodedString()})),Object.assign({},this._json)}get nameAsBuffer(){return null!==this._nameBuf||(this._nameBuf=Po(this.Name)),this._nameBuf}},{className:"DAGLink",symbolName:"@ipld/js-ipld-dag-pb/daglink"})})),ju=["int32","int64","uint32","uint64","sint32","sint64","bool","fixed64","sfixed64","double","fixed32","sfixed32","float"],Lu=function(t){var e=t.shift();if("{"!==e)return e;e={};for(var r="";t.length;)switch(t[0]){case"}":return t.shift(),e;case":":t.shift(),e[r]=Lu(t);break;default:r=t.shift()}},Pu=function(t){for(var e={};t.length;)switch(t[0]){case"[":case",":t.shift();var r=t.shift();"("===r&&(r=t.shift(),t.shift());var n=[];if("."===t[0][0]&&(n=t[0].substr(1).split("."),t.shift()),"="!==t[0])throw new Error("Unexpected token in field options: "+t[0]);if(t.shift(),"]"===t[0])throw new Error("Unexpected ] in field option");var i=[r].concat(n),o=i.pop();i.reduce((function(t,e,r){return null==t[e]&&(t[e]={}),t[e]}),e)[o]=Lu(t);break;case"]":return t.shift(),e;default:throw new Error("Unexpected token in field options: "+t[0])}throw new Error("No closing tag for field options")},Du=function(t){for(var e={name:null,type:null,tag:-1,map:null,oneof:null,required:!1,repeated:!1,options:{}};t.length;)switch(t[0]){case"=":t.shift(),e.tag=Number(t.shift());break;case"map":if(e.type="map",e.map={from:null,to:null},t.shift(),"<"!==t[0])throw new Error("Unexpected token in map type: "+t[0]);if(t.shift(),e.map.from=t.shift(),","!==t[0])throw new Error("Unexpected token in map type: "+t[0]);if(t.shift(),e.map.to=t.shift(),">"!==t[0])throw new Error("Unexpected token in map type: "+t[0]);t.shift(),e.name=t.shift();break;case"repeated":case"required":case"optional":var r=t.shift();e.required="required"===r,e.repeated="repeated"===r,e.type=t.shift(),e.name=t.shift();break;case"[":e.options=Pu(t);break;case";":if(null===e.name)throw new Error("Missing field name");if(null===e.type)throw new Error("Missing type in message field: "+e.name);if(-1===e.tag)throw new Error("Missing tag number in message field: "+e.name);return t.shift(),e;default:throw new Error("Unexpected token in message field: "+t[0])}throw new Error("No ; found for message field")},Mu=function(t){for(var e={enums:[],options:{},messages:[],fields:[],extends:[],extensions:null};t.length;)switch(t[0]){case"map":case"repeated":case"optional":case"required":e.fields.push(Du(t));break;case"enum":e.enums.push(Wu(t));break;case"message":e.messages.push(Ku(t));break;case"extensions":e.extensions=Fu(t);break;case"oneof":t.shift();var r=t.shift();if("{"!==t[0])throw new Error("Unexpected token in oneof: "+t[0]);for(t.shift();"}"!==t[0];){t.unshift("optional");var n=Du(t);n.oneof=r,e.fields.push(n)}t.shift();break;case"extend":e.extends.push(zu(t));break;case";":t.shift();break;case"reserved":for(t.shift();";"!==t[0];)t.shift();break;case"option":var i=qu(t);if(void 0!==e.options[i.name])throw new Error("Duplicate option "+i.name);e.options[i.name]=i.value;break;default:t.unshift("optional"),e.fields.push(Du(t))}return e},zu=function(t){return{name:t[1],message:Ku(t)}},Fu=function(t){t.shift();var e=Number(t.shift());if(isNaN(e))throw new Error("Invalid from in extensions definition");if("to"!==t.shift())throw new Error("Expected keyword 'to' in extensions definition");var r=t.shift();if("max"===r&&(r=536870911),r=Number(r),isNaN(r))throw new Error("Invalid to in extensions definition");if(";"!==t.shift())throw new Error("Missing ; in extensions definition");return{from:e,to:r}},Ku=function(t){t.shift();var e=1,r=[],n={name:t.shift(),options:{},enums:[],extends:[],messages:[],fields:[]};if("{"!==t[0])throw new Error("Expected { but found "+t[0]);for(t.shift();t.length;){if("{"===t[0]?e++:"}"===t[0]&&e--,!e)return t.shift(),r=Mu(r),n.enums=r.enums,n.messages=r.messages,n.fields=r.fields,n.extends=r.extends,n.extensions=r.extensions,n.options=r.options,n;r.push(t.shift())}if(e)throw new Error("No closing tag for message")},Hu=function(t){t.shift();var e=t.shift();if(";"!==t[0])throw new Error("Expected ; but found "+t[0]);return t.shift(),e},Gu=function(t){if(t.shift(),"="!==t[0])throw new Error("Expected = but found "+t[0]);t.shift();var e=t.shift();switch(e){case'"proto2"':e=2;break;case'"proto3"':e=3;break;default:throw new Error("Expected protobuf syntax version but found "+e)}if(";"!==t[0])throw new Error("Expected ; but found "+t[0]);return t.shift(),e},$u=function(t){if(t.length<4)throw new Error("Invalid enum value: "+t.slice(0,3).join(" "));if("="!==t[1])throw new Error("Expected = but found "+t[1]);if(";"!==t[3]&&"["!==t[3])throw new Error("Expected ; or [ but found "+t[1]);var e=t.shift();t.shift();var r={value:null,options:{}};return r.value=Number(t.shift()),"["===t[0]&&(r.options=Pu(t)),t.shift(),{name:e,val:r}},Wu=function(t){t.shift();var e={},r={name:t.shift(),values:{},options:{}};if("{"!==t[0])throw new Error("Expected { but found "+t[0]);for(t.shift();t.length;){if("}"===t[0])return t.shift(),";"===t[0]&&t.shift(),r;if("option"!==t[0]){var n=$u(t);r.values[n.name]=n.val}else e=qu(t),r.options[e.name]=e.value}throw new Error("No closing tag for enum")},qu=function(t){for(var e=null,r=null,n=function(t){return"true"===t||"false"!==t&&t.replace(/^"+|"+$/gm,"")};t.length;){if(";"===t[0])return t.shift(),{name:e,value:r};switch(t[0]){case"option":t.shift();var i="("===t[0];if(i&&t.shift(),e=t.shift(),i){if(")"!==t[0])throw new Error("Expected ) but found "+t[0]);t.shift()}"."===t[0][0]&&(e+=t.shift());break;case"=":if(t.shift(),null===e)throw new Error("Expected key for option with value: "+t[0]);if(r=n(t.shift()),"optimize_for"===e&&!/^(SPEED|CODE_SIZE|LITE_RUNTIME)$/.test(r))throw new Error("Unexpected value for option optimize_for: "+r);"{"===r&&(r=Vu(t));break;default:throw new Error("Unexpected token in option: "+t[0])}}},Vu=function(t){for(var e=function(t){return"true"===t||"false"!==t&&t.replace(/^"+|"+$/gm,"")},r={};t.length;){if("}"===t[0])return t.shift(),r;var n="("===t[0];n&&t.shift();var i=t.shift();if(n){if(")"!==t[0])throw new Error("Expected ) but found "+t[0]);t.shift()}var o=null;switch(t[0]){case":":if(void 0!==r[i])throw new Error("Duplicate option map key "+i);t.shift(),"{"===(o=e(t.shift()))&&(o=Vu(t)),r[i]=o,";"===t[0]&&t.shift();break;case"{":if(t.shift(),o=Vu(t),void 0===r[i]&&(r[i]=[]),!Array.isArray(r[i]))throw new Error("Duplicate option map key "+i);r[i].push(o);break;default:throw new Error("Unexpected token in option map: "+t[0])}}throw new Error("No closing tag for option map")},Yu=function(t){t.shift();var e=t.shift().replace(/^"+|"+$/gm,"");if(";"!==t[0])throw new Error("Unexpected token: "+t[0]+'. Expected ";"');return t.shift(),e},Ju=function(t){t.shift();var e={name:t.shift(),methods:[],options:{}};if("{"!==t[0])throw new Error("Expected { but found "+t[0]);for(t.shift();t.length;){if("}"===t[0])return t.shift(),";"===t[0]&&t.shift(),e;switch(t[0]){case"option":var r=qu(t);if(void 0!==e.options[r.name])throw new Error("Duplicate option "+r.name);e.options[r.name]=r.value;break;case"rpc":e.methods.push(Zu(t));break;default:throw new Error("Unexpected token in service: "+t[0])}}throw new Error("No closing tag for service")},Zu=function(t){t.shift();var e={name:t.shift(),input_type:null,output_type:null,client_streaming:!1,server_streaming:!1,options:{}};if("("!==t[0])throw new Error("Expected ( but found "+t[0]);if(t.shift(),"stream"===t[0]&&(t.shift(),e.client_streaming=!0),e.input_type=t.shift(),")"!==t[0])throw new Error("Expected ) but found "+t[0]);if(t.shift(),"returns"!==t[0])throw new Error("Expected returns but found "+t[0]);if(t.shift(),"("!==t[0])throw new Error("Expected ( but found "+t[0]);if(t.shift(),"stream"===t[0]&&(t.shift(),e.server_streaming=!0),e.output_type=t.shift(),")"!==t[0])throw new Error("Expected ) but found "+t[0]);if(t.shift(),";"===t[0])return t.shift(),e;if("{"!==t[0])throw new Error("Expected { but found "+t[0]);for(t.shift();t.length;){if("}"===t[0])return t.shift(),";"===t[0]&&t.shift(),e;if("option"!==t[0])throw new Error("Unexpected token in rpc options: "+t[0]);var r=qu(t);if(void 0!==e.options[r.name])throw new Error("Duplicate option "+r.name);e.options[r.name]=r.value}throw new Error("No closing tag for rpc")},Xu=function(t){for(var e,r,n,i,o,s=(e=t.toString(),i=function(t){return t.trim()},o=[],e.replace(/"(\\"|[^"\n])*?"|'(\\'|[^'\n])*?'/gm,(n=o,function(t){var e="$"+n.length+"$";return n.push(t),e})).replace(/([;,{}()=:[\]<>]|\/\*|\*\/)/g," $1 ").split(/\n/).map(i).filter(Boolean).map((function(t){var e=t.indexOf("//");return e>-1?t.slice(0,e):t})).map(i).filter(Boolean).join("\n").split(/\s+|\n+/gm).filter((r=!1,function(t){return"/*"===t?(r=!0,!1):"*/"===t?(r=!1,!1):!r})).map(function(t){var e=/^\$(\d+)\$$/;return function(r){var n=r.match(e);return n?t[+n[1]]:r}}(o))),u=0;u<s.length;u++){var a;if(/^("|')([^'"]*)$/.test(s[u]))for(a=1===s[u].length?u+1:u;a<s.length;a++)if(/^[^'"\\]*(?:\\.[^'"\\]*)*("|')$/.test(s[a])){s=s.slice(0,u).concat(s.slice(u,a+1).join("")).concat(s.slice(a+1));break}}for(var c={syntax:3,package:null,imports:[],enums:[],messages:[],options:{},extends:[]},f=!0;s.length;){switch(s[0]){case"package":c.package=Hu(s);break;case"syntax":if(!f)throw new Error("Protobuf syntax version should be first thing in file");c.syntax=Gu(s);break;case"message":c.messages.push(Ku(s));break;case"enum":c.enums.push(Wu(s));break;case"option":var l=qu(s);if(c.options[l.name])throw new Error("Duplicate option "+l.name);c.options[l.name]=l.value;break;case"import":c.imports.push(Yu(s));break;case"extend":c.extends.push(zu(s));break;case"service":c.services||(c.services=[]),c.services.push(Ju(s));break;default:throw new Error("Unexpected token: "+s[0])}f=!1}return c.extends.forEach((function(t){c.messages.forEach((function(e){e.name===t.name&&t.message.fields.forEach((function(t){if(!e.extensions||t.tag<e.extensions.from||t.tag>e.extensions.to)throw new Error(e.name+" does not declare "+t.tag+" as an extension number");e.fields.push(t)}))}))})),c.messages.forEach((function(t){t.fields.forEach((function(e){var r,n,i,o;if(e.options&&"true"===e.options.packed&&-1===ju.indexOf(e.type)){if(-1===e.type.indexOf(".")){if(t.enums&&t.enums.some((function(t){return t.name===e.type})))return}else{if((r=e.type.split(".")).length>2)throw new Error("what is this?");if(n=r[0],i=r[1],c.messages.some((function(t){if(t.name===n)return o=t,t})),o&&o.enums&&o.enums.some((function(t){return t.name===i})))return}throw new Error("Fields of type "+e.type+' cannot be declared [packed=true]. Only repeated fields of primitive numeric types (types which use the varint, 32-bit, or 64-bit wire types) can be declared "packed". See https://developers.google.com/protocol-buffers/docs/encoding#optional')}}))})),c},Qu=function(t,e){var r=t.repeated?"repeated":t.required?"required":"optional";"map"===t.type&&(r="map<"+t.map.from+","+t.map.to+">"),t.oneof&&(r="");var n=Object.keys(t.options||{}).map((function(e){return e+" = "+t.options[e]})).join(",");return n&&(n=" ["+n+"]"),e.push((r?r+" ":"")+("map"===t.map?"":t.type+" ")+t.name+" = "+t.tag+n+";"),e},ta=function(t,e){e.push("message "+t.name+" {"),t.options||(t.options={}),na(t.options,e),t.enums||(t.enums=[]),t.enums.forEach((function(t){e.push(ea(t,[]))})),t.messages||(t.messages=[]),t.messages.forEach((function(t){e.push(ta(t,[]))}));var r={};return t.fields||(t.fields=[]),t.fields.forEach((function(t){t.oneof?(r[t.oneof]||(r[t.oneof]=[]),r[t.oneof].push(Qu(t,[]))):e.push(Qu(t,[]))})),Object.keys(r).forEach((function(t){r[t].unshift("oneof "+t+" {"),r[t].push("}"),e.push(r[t])})),e.push("}",""),e},ea=function(t,e){e.push("enum "+t.name+" {"),t.options||(t.options={});var r=na(t.options,[]);return r.length>1&&e.push(r.slice(0,-1)),Object.keys(t.values).map((function(r){var n=ra(t.values[r]);e.push([r+" = "+n+";"])})),e.push("}",""),e},ra=function(t,e){var r=Object.keys(t.options||{}).map((function(e){return e+" = "+t.options[e]})).join(",");return r&&(r=" ["+r+"]"),t.value+r},na=function(t,e){var r=Object.keys(t);return r.forEach((function(r){var n=t[r];~r.indexOf(".")&&(r="("+r+")");var i=typeof n;"object"===i?(n=ia(n,[])).length&&e.push("option "+r+" = {",n,"};"):("string"===i&&"optimize_for"!==r&&(n='"'+n+'"'),e.push("option "+r+" = "+n+";"))})),r.length>0&&e.push(""),e},ia=function(t,e){return Object.keys(t).forEach((function(r){var n=t[r],i=typeof n;"object"===i?Array.isArray(n)?n.forEach((function(t){(t=ia(t,[])).length&&e.push(r+" {",t,"}")})):(n=ia(n,[])).length&&e.push(r+" {",n,"}"):("string"===i&&(n='"'+n+'"'),e.push(r+": "+n))})),e},oa=function(t,e){var r="rpc "+t.name+"(";t.client_streaming&&(r+="stream "),r+=t.input_type+") returns (",t.server_streaming&&(r+="stream "),r+=t.output_type+")",t.options||(t.options={});var n=na(t.options,[]);return n.length>1?e.push(r+" {",n.slice(0,-1),"}"):e.push(r+";"),e},sa=function(t){return function(e){return Array.isArray(e)?e.map(sa(t+"  ")).join("\n"):t+e}},ua=Xu,aa=Xu,ca=function(t){var e=[];return e.push('syntax = "proto'+t.syntax+'";',""),t.package&&e.push("package "+t.package+";",""),t.options||(t.options={}),na(t.options,e),t.enums||(t.enums=[]),t.enums.forEach((function(t){ea(t,e)})),t.messages||(t.messages=[]),t.messages.forEach((function(t){ta(t,e)})),t.services&&t.services.forEach((function(t){!function(t,e){e.push("service "+t.name+" {"),t.options||(t.options={}),na(t.options,e),t.methods||(t.methods=[]),t.methods.forEach((function(t){e.push(oa(t,[]))})),e.push("}","")}(t,e)})),e.map(sa("")).join("\n")};ua.parse=aa,ua.stringify=ca;var fa=function(t,e,r,n){return e.bytes=r.bytes=0,{type:t,encode:e,decode:r,encodingLength:n}},la=function t(e,r,n){r=r||[];var i=n=n||0;for(;e>=ha;)r[n++]=255&e|128,e/=128;for(;-128&e;)r[n++]=255&e|128,e>>>=7;return r[n]=0|e,t.bytes=n-i+1,r},ha=Math.pow(2,31);var pa=function t(e,r){var n,i=0,o=0,s=r=r||0,u=e.length;do{if(s>=u)throw t.bytes=0,new RangeError("Could not decode varint");n=e[s++],i+=o<28?(127&n)<<o:(127&n)*Math.pow(2,o),o+=7}while(n>=128);return t.bytes=s-r,i};var da=Math.pow(2,7),ya=Math.pow(2,14),va=Math.pow(2,21),ga=Math.pow(2,28),ma=Math.pow(2,35),ba=Math.pow(2,42),_a=Math.pow(2,49),wa=Math.pow(2,56),ka=Math.pow(2,63),Ea={encode:la,decode:pa,encodingLength:function(t){return t<da?1:t<ya?2:t<va?3:t<ga?4:t<ma?5:t<ba?6:t<_a?7:t<wa?8:t<ka?9:10}};function Aa(t){return t.byteLength}var Sa=fa(2,(function t(e,r,n,i){const o=i,s=Aa(e);Ea.encode(s,r,i),i+=Ea.encode.bytes,r.set(e,i),t.bytes=(i+=s)-o}),(function t(e,r,n){const i=n,o=Ea.decode(e,n);n+=Ea.decode.bytes;const s=e.slice(n,n+o);return n+=s.length,t.bytes=n-i,s}),(function(t){const e=Aa(t);return Ea.encodingLength(e)+e}));var Ia=fa(2,(function t(e,r,n,i){const o=i,s=Po(e).byteLength;Ea.encode(s,r,i,"utf-8"),i+=Ea.encode.bytes;const u=Po(e);r.set(u,i),i+=u.length,t.bytes=i-o}),(function t(e,r,n){const i=n,o=Ea.decode(e,n);n+=Ea.decode.bytes;const s=Ro(e.subarray(n,n+o));return t.bytes=(n+=o)-i,s}),(function(t){const e=Po(t).byteLength;return Ea.encodingLength(e)+e}));var xa=fa(0,(function t(e,r,n,i){r[i]=e?1:0,t.bytes=1}),(function t(e,r,n){const i=e[n]>0;return t.bytes=1,i}),(function(){return 1}));var Ba=fa(0,(function t(e,r,n,i){Ea.encode(e<0?e+4294967296:e,r,i),t.bytes=Ea.encode.bytes}),(function t(e,r,n){const i=Ea.decode(e,n);return t.bytes=Ea.decode.bytes,i>2147483647?i-4294967296:i}),(function(t){return Ea.encodingLength(t<0?t+4294967296:t)}));var Ta=fa(0,(function t(e,r,n,i){if(e<0){const n=i+9;for(Ea.encode(-1*e,r,i),r[i+=Ea.encode.bytes-1]=128|r[i];i<n-1;)r[++i]=255;r[n]=1,t.bytes=10}else Ea.encode(e,r,i),t.bytes=Ea.encode.bytes}),(function t(e,r,n){let i=Ea.decode(e,n);if(i>=Math.pow(2,63)){let r=9;for(;255===e[n+r-1];)r--;r=r||9;const o=e.subarray(n,n+r);o[r-1]=127&o[r-1],i=-1*Ea.decode(o,0),t.bytes=10}else t.bytes=Ea.decode.bytes;return i}),(function(t){return t<0?10:Ea.encodingLength(t)})),Oa={encode:function t(e,r,n){e=e>=0?2*e:-2*e-1;var i=Ea.encode(e,r,n);return t.bytes=Ea.encode.bytes,i},decode:function t(e,r){var n=Ea.decode(e,r);return t.bytes=Ea.decode.bytes,1&n?(n+1)/-2:n/2},encodingLength:function(t){return Ea.encodingLength(t>=0?2*t:-2*t-1)}};var Na=fa(0,(function t(e,r,n,i){Oa.encode(e,r,i),t.bytes=Oa.encode.bytes}),(function t(e,r,n){const i=Oa.decode(e,n);return t.bytes=Oa.decode.bytes,i}),Oa.encodingLength);var Ca=fa(0,(function t(e,r,n,i){Ea.encode(e,r,i),t.bytes=Ea.encode.bytes}),(function t(e,r,n){const i=Ea.decode(e,n);return t.bytes=Ea.decode.bytes,i}),Ea.encodingLength);var Ra=fa(1,(function t(e,r,n,i){for(const t of e)r[i]=t,i++;t.bytes=8}),(function t(e,r,n){const i=e.slice(n,n+8);return t.bytes=8,i}),(function(){return 8}));var Ua=fa(1,(function t(e,r,n,i){n.setFloat64(i,e,!0),t.bytes=8}),(function t(e,r,n){const i=r.getFloat64(n,!0);return t.bytes=8,i}),(function(){return 8}));var ja=fa(5,(function t(e,r,n,i){n.setUint32(i,e,!0),t.bytes=4}),(function t(e,r,n){const i=r.getUint32(n,!0);return t.bytes=4,i}),(function(t){return 4}));var La=fa(5,(function t(e,r,n,i){n.setInt32(i,e,!0),t.bytes=4}),(function t(e,r,n){const i=r.getInt32(n,!0);return t.bytes=4,i}),(function(t){return 4}));var Pa=fa(5,(function t(e,r,n,i){n.setFloat32(i,e,!0),t.bytes=4}),(function t(e,r,n){const i=r.getFloat32(n,!0);return t.bytes=4,i}),(function(){return 4})),Da=p((function(t,e){e.make=fa,e.bytes=Sa,e.string=Ia,e.bool=xa,e.int32=Ba,e.int64=Ta,e.sint32=e.sint64=Na,e.uint32=e.uint64=e.enum=e.varint=Ca,e.fixed64=e.sfixed64=Ra,e.double=Ua,e.fixed32=ja,e.sfixed32=La,e.float=Pa})),Ma=function(t){return null!=t&&("number"!=typeof t||!isNaN(t))};const za=Ma;function Fa(t){return`${t.substring(0,1).toUpperCase()}${t.substring(1)}`}function Ka(t,e,r,n){if(Object.prototype.hasOwnProperty.call(t,e))return;const i=Fa(e);Object.defineProperties(t,{[e]:{enumerable:!0,configurable:!0,set:t=>{r=t},get:()=>void 0===r?n:r},[`has${i}`]:{configurable:!0,value:()=>void 0!==r},[`set${i}`]:{configurable:!0,value:t=>{r=t}},[`get${i}`]:{configurable:!0,value:()=>r},[`clear${i}`]:{configurable:!0,value:()=>{r=void 0,t[e]=void 0}}})}var Ha=function(t,e,r,n){switch(t){case 0:return Ea.decode(e,n),n+Ea.decode.bytes;case 1:return n+8;case 2:var i=Ea.decode(e,n);return n+Ea.decode.bytes+i;case 3:case 4:throw new Error("Groups are not supported");case 5:return n+4;default:throw new Error("Unknown wire type: "+t)}},Ga=function(t){if(t.map)return{};if(t.repeated)return[];switch(t.type){case"string":return"";case"bool":return!1;case"float":case"double":case"sfixed32":case"fixed32":case"varint":case"enum":case"uint64":case"uint32":case"int64":case"int32":case"sint64":case"sint32":return 0;default:return null}},$a=function(t,e){if(void 0===e)return e;switch(t.type){case"bool":return"true"===e;case"float":case"double":case"sfixed32":case"fixed32":case"varint":case"enum":case"uint64":case"uint32":case"int64":case"int32":case"sint64":case"sint32":return parseInt(e,10);default:return e}},Wa=function(t,e,r){const n=[],i={},o=[],s=[];for(var u=0;u<r.length;u++){const r=t.fields[u];i[r.tag]=u;const a=r.options&&r.options.default,c=e(r.type,t.id,!1);s[u]=[a,c&&c.values],t.fields[u].packed=r.repeated&&r.options&&r.options.packed&&"false"!==r.options.packed,r.required&&n.push(r.name),r.oneof&&o.push(r.name)}function a(t,e,r,n,i,s,u){const a=e.name;if(e.oneof){const t=Object.keys(r);for(var c=0;c<t.length;c++)if(o.indexOf(t[c])>-1){const e=Fa(t[c]);delete r[`has${e}`],delete r[`get${e}`],delete r[`set${e}`],delete r[`clear${e}`],delete r[t[c]]}}let f;if(t.message){const o=Ea.decode(n,s);s+=Ea.decode.bytes;const u=t.decode(n,i,s,s+o);e.map?(f=r[a]||{},f[u.key]=u.value):e.repeated?(f=r[a]||[],f.push(u)):f=u}else e.repeated?(f=r[a]||[],f.push(t.decode(n,i,s))):f=t.decode(n,i,s);return Ka(r,a,f),s+=t.decode.bytes}return function e(u,c,f,l){if(null==f&&(f=0),null==l&&(l=u.length),!(l<=u.length&&f<=u.length))throw new Error("Decoded message is not valid");c||(c=new DataView(u.buffer,u.byteOffset,u.byteLength));for(var h,p=f,d={};;){if(l<=f){var y,v,g="",m=0;for(m=0;m<n.length;m++)if(g=n[m],!za(d[g]))throw new Error("Decoded message is not valid, missing required field: "+g);for(m=0;m<r.length;m++){let e;if(h=t.fields[m],v=s[m][0],y=s[m][1],g=h.name,!Object.prototype.hasOwnProperty.call(d,g)){var b=!1;if(h.oneof)for(var _=Object.keys(d),w=0;w<_.length;w++)if(o.indexOf(_[w])>-1){b=!0;break}b||(y?h.repeated?v=[]:(v=v&&y[v]?y[v].value:y[Object.keys(y)[0]].value,v=parseInt(v||0,10)):(e=Ga(h),v=$a(h,v)),Ka(d,g,v,e))}}return e.bytes=f-p,d}var k=Ea.decode(u,f);f+=Ea.decode.bytes;var E=i[k>>3];if(null!=E){var A=r[E];if((h=t.fields[E]).packed){var S=Ea.decode(u,f);for(S+=f+=Ea.decode.bytes;f<S;)f=a(A,h,d,u,c,f)}else f=a(A,h,d,u,c,f)}else f=Ha(7&k,u,c,f)}}},qa=Ma;var Va=function(t,e,r,n,i){const o=Object.keys(n),s=r.length,u={};for(let e=0;e<s;e++){u[e]={p:Ea.encode(t.fields[e].tag<<3|2),h:Ea.encode(t.fields[e].tag<<3|r[e].type)};const n=t.fields[e];t.fields[e].packed=n.repeated&&n.options&&n.options.packed&&"false"!==n.options.packed}function a(t,e,r,n,i,o,s){let u=0;if(!o)for(u=0;u<n.length;u++)t[r++]=n[u];return i.message&&(Ea.encode(i.encodingLength(s),t,r),r+=Ea.encode.bytes),i.encode(s,t,e,r),r+i.encode.bytes}return function e(c,f,l,h=0){null==f&&(f=new Uint8Array(i(c))),null==l&&(l=new DataView(f.buffer,f.byteOffset,f.byteLength));const p=h,d=Object.keys(c);let y=0,v=!1;for(y=0;y<o.length;y++){const t=o[y],e=n[y];if(d.indexOf(e)>-1){if(v)throw new Error("only one of the properties defined in oneof "+t+" can be set");v=!0}}for(y=0;y<s;y++){const e=r[y],n=t.fields[y];let i=c[n.name],o=0;if(!qa(i)){if(n.required)throw new Error(n.name+" is required");continue}const s=u[y].p,p=u[y].h,d=n.packed;if(n.map){const t=Object.keys(i);for(o=0;o<t.length;o++)t[o]={key:t[o],value:i[t[o]]};i=t}if(d){let t=0;for(o=0;o<i.length;o++)Object.prototype.hasOwnProperty.call(i,o)&&(t+=e.encodingLength(i[o]));if(t){for(o=0;o<p.length;o++)f[h++]=s[o];Ea.encode(t,f,h),h+=Ea.encode.bytes}}if(n.repeated){let t;for(o=0;o<i.length;o++)t=i[o],qa(t)&&(h=a(f,l,h,p,e,d,t))}else h=a(f,l,h,p,e,d,i)}return e.bytes=h-p,f}},Ya=Ma;var Ja=function(t,e,r){const n=Object.keys(r),i=e.length,o=new Array(i);for(let r=0;r<t.fields.length;r++){o[r]=Ea.encodingLength(t.fields[r].tag<<3|e[r].type);const n=t.fields[r];t.fields[r].packed=n.repeated&&n.options&&n.options.packed&&"false"!==n.options.packed}return function(s){let u=0,a=0,c=0;for(a=0;a<n.length;a++){const t=n[a],e=r[t];let i=!1;for(c=0;c<e.length;c++)if(Ya(s[e[c]])){if(i)throw new Error("only one of the properties defined in oneof "+t+" can be set");i=!0}}for(a=0;a<i;a++){const r=e[a],n=t.fields[a];let i=s[n.name];const f=o[a];let l;if(Ya(i)){if(n.map){const t=Object.keys(i);for(c=0;c<t.length;c++)t[c]={key:t[c],value:i[t[c]]};i=t}if(n.packed){let t=0;for(c=0;c<i.length;c++)Ya(i[c])&&(l=r.encodingLength(i[c]),t+=l,r.message&&(t+=Ea.encodingLength(l)));t&&(u+=f+t+Ea.encodingLength(t))}else if(n.repeated)for(c=0;c<i.length;c++)Ya(i[c])&&(l=r.encodingLength(i[c]),u+=f+l+(r.message?Ea.encodingLength(l):0));else l=r.encodingLength(i),u+=f+l+(r.message?Ea.encodingLength(l):0)}else if(n.required)throw new Error(n.name+" is required")}return u}};var Za=function(t,e){const r={},n={},i={},o=function(t,e){t.enums&&t.enums.forEach((function(t){t.id=e+(e?".":"")+t.name,n[t.id]=t,o(t,t.id)})),t.messages&&t.messages.forEach((function(n){n.id=e+(e?".":"")+n.name,r[n.id]=n,n.fields.forEach((function(n){if(!n.map)return;const i="Map_"+n.map.from+"_"+n.map.to,o={name:i,enums:[],messages:[],fields:[{name:"key",type:n.map.from,tag:1,repeated:!1,required:!0},{name:"value",type:n.map.to,tag:2,repeated:!1,required:!1}],extensions:null,id:e+(e?".":"")+i};r[o.id]||(r[o.id]=o,t.messages.push(o)),n.type=i,n.repeated=!0})),o(n,n.id)}))};o(t,"");const s=function(t,e){t.messages.forEach((function(r){e[r.name]=u(r.name,t.id)})),t.enums.forEach((function(t){e[t.name]=function(t){if(!t)return null;const e={};return Object.keys(t).forEach((function(r){e[r]=t[r].value})),e}(t.values)})),e.type=2,e.message=!0,e.name=t.name;const r={};t.fields.forEach((function(t){t.oneof&&(r[t.oneof]||(r[t.oneof]=[]),r[t.oneof].push(t.name))}));const n=t.fields.map((function(e){return u(e.type,t.id)})),i=Ja(t,n,r),o=Va(t,u,n,r,i),s=Wa(t,u,n);return o.bytes=s.bytes=0,e.buffer=!0,e.encode=o,e.decode=s,e.encodingLength=i,e},u=function(t,o,u){if(e&&e[t])return e[t];if(Da[t])return Da[t];const a=(o?o+"."+t:t).split(".").map((function(e,r,n){return n.slice(0,r).concat(t).join(".")})).reverse().reduce((function(t,e){return t||r[e]||n[e]}),null);if(!1===u)return a;if(!a)throw new Error("Could not resolve "+t);if(a.values)return function(t){const e=Object.keys(t.values||[]).map((function(e){return parseInt(t.values[e].value,10)}));return Da.make(0,(function t(r,n,i,o){if(!e.length||-1===e.indexOf(r))throw new Error("Invalid enum value: "+r);return Ea.encode(r,n,o),t.bytes=Ea.encode.bytes,n}),(function t(r,n,i){var o=Ea.decode(r,i);if(!e.length||-1===e.indexOf(o))throw new Error("Invalid enum value: "+o);return t.bytes=Ea.decode.bytes,o}),Ea.encodingLength)}(a);return i[a.id]||s(a,i[a.id]={})};return(t.enums||[]).concat((t.messages||[]).map((function(t){return u(t.id)})))},Xa=function(t,e){if(e||(e={}),!t)throw new Error("Pass in a .proto string or a protobuf-schema parsed object");var r="object"!=typeof t||t instanceof Uint8Array?ua.parse(t):t,n=function(){var t=this;Za(r,e.encodings||{}).forEach((function(e){t[e.name]=function(t){if(!t)return null;var e={};return Object.keys(t).forEach((function(r){e[r]=t[r].value})),e}(e.values)||e}))};return n.prototype.toString=function(){return ua.stringify(r)},n.prototype.toJSON=function(){return r},new n},Qa="// An IPFS MerkleDAG Link\nmessage PBLink {\n\n  // multihash of the target object\n  optional bytes Hash = 1;\n\n  // utf string name. should be unique per object\n  optional string Name = 2;\n\n  // cumulative size of target object\n  optional uint64 Tsize = 3;\n}\n\n// An IPFS MerkleDAG Node\nmessage PBNode {\n\n  // refs to other objects\n  repeated PBLink Links = 2;\n\n  // opaque user data\n  optional bytes Data = 1;\n}",tc=p((function(t,e){const r=Xa(Qa);e=t.exports;const n=t=>{const e=t.Data,n=t.Links||[];return r.PBNode.encode((t=>{const e={};return t.Data&&t.Data.byteLength>0?e.Data=t.Data:e.Data=null,t.Links&&t.Links.length>0?e.Links=t.Links.map((t=>({Hash:t.Hash.bytes,Name:t.Name,Tsize:t.Tsize}))):e.Links=null,e})({Data:e,Links:n}))};e.serializeDAGNode=n,e.serializeDAGNodeLike=(t,e=[])=>{const r={Data:t};return r.Links=e.map((t=>Uu.isDAGLink(t)?t:Uu.util.createDagLinkFromB58EncodedHash(t))),n(r)}}));function ec(t,e){for(const r in e)Object.defineProperty(t,r,{value:e[r],enumerable:!0,configurable:!0});return t}var rc=function(t,e,r){if(!t||"string"==typeof t)throw new TypeError("Please pass an Error to err-code");r||(r={}),"object"==typeof e&&(r=e,e=void 0),null!=e&&(r.code=e);try{return ec(t,r)}catch(e){r.message=t.message,r.stack=t.stack;const n=function(){};return n.prototype=Object.create(Object.getPrototypeOf(t)),ec(new n,r)}},nc=p((function(t){!function(){var e="input is invalid type",r="object"==typeof window,n=r?window:{};n.JS_SHA3_NO_WINDOW&&(r=!1);var i=!r&&"object"==typeof self;!n.JS_SHA3_NO_NODE_JS&&"object"==typeof kt&&kt.versions&&kt.versions.node?n=f:i&&(n=self);var o=!n.JS_SHA3_NO_COMMON_JS&&t.exports,s=!n.JS_SHA3_NO_ARRAY_BUFFER&&"undefined"!=typeof ArrayBuffer,u="0123456789abcdef".split(""),a=[4,1024,262144,67108864],c=[0,8,16,24],l=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648],h=[224,256,384,512],p=[128,256],d=["hex","buffer","arrayBuffer","array","digest"],y={128:168,256:136};!n.JS_SHA3_NO_NODE_JS&&Array.isArray||(Array.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)}),!s||!n.JS_SHA3_NO_ARRAY_BUFFER_IS_VIEW&&ArrayBuffer.isView||(ArrayBuffer.isView=function(t){return"object"==typeof t&&t.buffer&&t.buffer.constructor===ArrayBuffer});for(var v=function(t,e,r){return function(n){return new N(t,e,t).update(n)[r]()}},g=function(t,e,r){return function(n,i){return new N(t,e,i).update(n)[r]()}},m=function(t,e,r){return function(e,n,i,o){return E["cshake"+t].update(e,n,i,o)[r]()}},b=function(t,e,r){return function(e,n,i,o){return E["kmac"+t].update(e,n,i,o)[r]()}},_=function(t,e,r,n){for(var i=0;i<d.length;++i){var o=d[i];t[o]=e(r,n,o)}return t},w=function(t,e){var r=v(t,e,"hex");return r.create=function(){return new N(t,e,t)},r.update=function(t){return r.create().update(t)},_(r,v,t,e)},k=[{name:"keccak",padding:[1,256,65536,16777216],bits:h,createMethod:w},{name:"sha3",padding:[6,1536,393216,100663296],bits:h,createMethod:w},{name:"shake",padding:[31,7936,2031616,520093696],bits:p,createMethod:function(t,e){var r=g(t,e,"hex");return r.create=function(r){return new N(t,e,r)},r.update=function(t,e){return r.create(e).update(t)},_(r,g,t,e)}},{name:"cshake",padding:a,bits:p,createMethod:function(t,e){var r=y[t],n=m(t,0,"hex");return n.create=function(n,i,o){return i||o?new N(t,e,n).bytepad([i,o],r):E["shake"+t].create(n)},n.update=function(t,e,r,i){return n.create(e,r,i).update(t)},_(n,m,t,e)}},{name:"kmac",padding:a,bits:p,createMethod:function(t,e){var r=y[t],n=b(t,0,"hex");return n.create=function(n,i,o){return new C(t,e,i).bytepad(["KMAC",o],r).bytepad([n],r)},n.update=function(t,e,r,i){return n.create(t,r,i).update(e)},_(n,b,t,e)}}],E={},A=[],S=0;S<k.length;++S)for(var I=k[S],x=I.bits,B=0;B<x.length;++B){var T=I.name+"_"+x[B];if(A.push(T),E[T]=I.createMethod(x[B],I.padding),"sha3"!==I.name){var O=I.name+x[B];A.push(O),E[O]=E[T]}}function N(t,e,r){this.blocks=[],this.s=[],this.padding=e,this.outputBits=r,this.reset=!0,this.finalized=!1,this.block=0,this.start=0,this.blockCount=1600-(t<<1)>>5,this.byteCount=this.blockCount<<2,this.outputBlocks=r>>5,this.extraBytes=(31&r)>>3;for(var n=0;n<50;++n)this.s[n]=0}function C(t,e,r){N.call(this,t,e,r)}N.prototype.update=function(t){if(this.finalized)throw new Error("finalize already called");var r,n=typeof t;if("string"!==n){if("object"!==n)throw new Error(e);if(null===t)throw new Error(e);if(s&&t.constructor===ArrayBuffer)t=new Uint8Array(t);else if(!(Array.isArray(t)||s&&ArrayBuffer.isView(t)))throw new Error(e);r=!0}for(var i,o,u=this.blocks,a=this.byteCount,f=t.length,l=this.blockCount,h=0,p=this.s;h<f;){if(this.reset)for(this.reset=!1,u[0]=this.block,i=1;i<l+1;++i)u[i]=0;if(r)for(i=this.start;h<f&&i<a;++h)u[i>>2]|=t[h]<<c[3&i++];else for(i=this.start;h<f&&i<a;++h)(o=t.charCodeAt(h))<128?u[i>>2]|=o<<c[3&i++]:o<2048?(u[i>>2]|=(192|o>>6)<<c[3&i++],u[i>>2]|=(128|63&o)<<c[3&i++]):o<55296||o>=57344?(u[i>>2]|=(224|o>>12)<<c[3&i++],u[i>>2]|=(128|o>>6&63)<<c[3&i++],u[i>>2]|=(128|63&o)<<c[3&i++]):(o=65536+((1023&o)<<10|1023&t.charCodeAt(++h)),u[i>>2]|=(240|o>>18)<<c[3&i++],u[i>>2]|=(128|o>>12&63)<<c[3&i++],u[i>>2]|=(128|o>>6&63)<<c[3&i++],u[i>>2]|=(128|63&o)<<c[3&i++]);if(this.lastByteIndex=i,i>=a){for(this.start=i-a,this.block=u[l],i=0;i<l;++i)p[i]^=u[i];R(p),this.reset=!0}else this.start=i}return this},N.prototype.encode=function(t,e){var r=255&t,n=1,i=[r];for(r=255&(t>>=8);r>0;)i.unshift(r),r=255&(t>>=8),++n;return e?i.push(n):i.unshift(n),this.update(i),i.length},N.prototype.encodeString=function(t){var r,n=typeof t;if("string"!==n){if("object"!==n)throw new Error(e);if(null===t)throw new Error(e);if(s&&t.constructor===ArrayBuffer)t=new Uint8Array(t);else if(!(Array.isArray(t)||s&&ArrayBuffer.isView(t)))throw new Error(e);r=!0}var i=0,o=t.length;if(r)i=o;else for(var u=0;u<t.length;++u){var a=t.charCodeAt(u);a<128?i+=1:a<2048?i+=2:a<55296||a>=57344?i+=3:(a=65536+((1023&a)<<10|1023&t.charCodeAt(++u)),i+=4)}return i+=this.encode(8*i),this.update(t),i},N.prototype.bytepad=function(t,e){for(var r=this.encode(e),n=0;n<t.length;++n)r+=this.encodeString(t[n]);var i=e-r%e,o=[];return o.length=i,this.update(o),this},N.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var t=this.blocks,e=this.lastByteIndex,r=this.blockCount,n=this.s;if(t[e>>2]|=this.padding[3&e],this.lastByteIndex===this.byteCount)for(t[0]=t[r],e=1;e<r+1;++e)t[e]=0;for(t[r-1]|=2147483648,e=0;e<r;++e)n[e]^=t[e];R(n)}},N.prototype.toString=N.prototype.hex=function(){this.finalize();for(var t,e=this.blockCount,r=this.s,n=this.outputBlocks,i=this.extraBytes,o=0,s=0,a="";s<n;){for(o=0;o<e&&s<n;++o,++s)t=r[o],a+=u[t>>4&15]+u[15&t]+u[t>>12&15]+u[t>>8&15]+u[t>>20&15]+u[t>>16&15]+u[t>>28&15]+u[t>>24&15];s%e==0&&(R(r),o=0)}return i&&(t=r[o],a+=u[t>>4&15]+u[15&t],i>1&&(a+=u[t>>12&15]+u[t>>8&15]),i>2&&(a+=u[t>>20&15]+u[t>>16&15])),a},N.prototype.arrayBuffer=function(){this.finalize();var t,e=this.blockCount,r=this.s,n=this.outputBlocks,i=this.extraBytes,o=0,s=0,u=this.outputBits>>3;t=i?new ArrayBuffer(n+1<<2):new ArrayBuffer(u);for(var a=new Uint32Array(t);s<n;){for(o=0;o<e&&s<n;++o,++s)a[s]=r[o];s%e==0&&R(r)}return i&&(a[o]=r[o],t=t.slice(0,u)),t},N.prototype.buffer=N.prototype.arrayBuffer,N.prototype.digest=N.prototype.array=function(){this.finalize();for(var t,e,r=this.blockCount,n=this.s,i=this.outputBlocks,o=this.extraBytes,s=0,u=0,a=[];u<i;){for(s=0;s<r&&u<i;++s,++u)t=u<<2,e=n[s],a[t]=255&e,a[t+1]=e>>8&255,a[t+2]=e>>16&255,a[t+3]=e>>24&255;u%r==0&&R(n)}return o&&(t=u<<2,e=n[s],a[t]=255&e,o>1&&(a[t+1]=e>>8&255),o>2&&(a[t+2]=e>>16&255)),a},C.prototype=new N,C.prototype.finalize=function(){return this.encode(this.outputBits,!0),N.prototype.finalize.call(this)};var R=function(t){var e,r,n,i,o,s,u,a,c,f,h,p,d,y,v,g,m,b,_,w,k,E,A,S,I,x,B,T,O,N,C,R,U,j,L,P,D,M,z,F,K,H,G,$,W,q,V,Y,J,Z,X,Q,tt,et,rt,nt,it,ot,st,ut,at,ct,ft;for(n=0;n<48;n+=2)i=t[0]^t[10]^t[20]^t[30]^t[40],o=t[1]^t[11]^t[21]^t[31]^t[41],s=t[2]^t[12]^t[22]^t[32]^t[42],u=t[3]^t[13]^t[23]^t[33]^t[43],a=t[4]^t[14]^t[24]^t[34]^t[44],c=t[5]^t[15]^t[25]^t[35]^t[45],f=t[6]^t[16]^t[26]^t[36]^t[46],h=t[7]^t[17]^t[27]^t[37]^t[47],e=(p=t[8]^t[18]^t[28]^t[38]^t[48])^(s<<1|u>>>31),r=(d=t[9]^t[19]^t[29]^t[39]^t[49])^(u<<1|s>>>31),t[0]^=e,t[1]^=r,t[10]^=e,t[11]^=r,t[20]^=e,t[21]^=r,t[30]^=e,t[31]^=r,t[40]^=e,t[41]^=r,e=i^(a<<1|c>>>31),r=o^(c<<1|a>>>31),t[2]^=e,t[3]^=r,t[12]^=e,t[13]^=r,t[22]^=e,t[23]^=r,t[32]^=e,t[33]^=r,t[42]^=e,t[43]^=r,e=s^(f<<1|h>>>31),r=u^(h<<1|f>>>31),t[4]^=e,t[5]^=r,t[14]^=e,t[15]^=r,t[24]^=e,t[25]^=r,t[34]^=e,t[35]^=r,t[44]^=e,t[45]^=r,e=a^(p<<1|d>>>31),r=c^(d<<1|p>>>31),t[6]^=e,t[7]^=r,t[16]^=e,t[17]^=r,t[26]^=e,t[27]^=r,t[36]^=e,t[37]^=r,t[46]^=e,t[47]^=r,e=f^(i<<1|o>>>31),r=h^(o<<1|i>>>31),t[8]^=e,t[9]^=r,t[18]^=e,t[19]^=r,t[28]^=e,t[29]^=r,t[38]^=e,t[39]^=r,t[48]^=e,t[49]^=r,y=t[0],v=t[1],q=t[11]<<4|t[10]>>>28,V=t[10]<<4|t[11]>>>28,T=t[20]<<3|t[21]>>>29,O=t[21]<<3|t[20]>>>29,ut=t[31]<<9|t[30]>>>23,at=t[30]<<9|t[31]>>>23,H=t[40]<<18|t[41]>>>14,G=t[41]<<18|t[40]>>>14,j=t[2]<<1|t[3]>>>31,L=t[3]<<1|t[2]>>>31,g=t[13]<<12|t[12]>>>20,m=t[12]<<12|t[13]>>>20,Y=t[22]<<10|t[23]>>>22,J=t[23]<<10|t[22]>>>22,N=t[33]<<13|t[32]>>>19,C=t[32]<<13|t[33]>>>19,ct=t[42]<<2|t[43]>>>30,ft=t[43]<<2|t[42]>>>30,et=t[5]<<30|t[4]>>>2,rt=t[4]<<30|t[5]>>>2,P=t[14]<<6|t[15]>>>26,D=t[15]<<6|t[14]>>>26,b=t[25]<<11|t[24]>>>21,_=t[24]<<11|t[25]>>>21,Z=t[34]<<15|t[35]>>>17,X=t[35]<<15|t[34]>>>17,R=t[45]<<29|t[44]>>>3,U=t[44]<<29|t[45]>>>3,S=t[6]<<28|t[7]>>>4,I=t[7]<<28|t[6]>>>4,nt=t[17]<<23|t[16]>>>9,it=t[16]<<23|t[17]>>>9,M=t[26]<<25|t[27]>>>7,z=t[27]<<25|t[26]>>>7,w=t[36]<<21|t[37]>>>11,k=t[37]<<21|t[36]>>>11,Q=t[47]<<24|t[46]>>>8,tt=t[46]<<24|t[47]>>>8,$=t[8]<<27|t[9]>>>5,W=t[9]<<27|t[8]>>>5,x=t[18]<<20|t[19]>>>12,B=t[19]<<20|t[18]>>>12,ot=t[29]<<7|t[28]>>>25,st=t[28]<<7|t[29]>>>25,F=t[38]<<8|t[39]>>>24,K=t[39]<<8|t[38]>>>24,E=t[48]<<14|t[49]>>>18,A=t[49]<<14|t[48]>>>18,t[0]=y^~g&b,t[1]=v^~m&_,t[10]=S^~x&T,t[11]=I^~B&O,t[20]=j^~P&M,t[21]=L^~D&z,t[30]=$^~q&Y,t[31]=W^~V&J,t[40]=et^~nt&ot,t[41]=rt^~it&st,t[2]=g^~b&w,t[3]=m^~_&k,t[12]=x^~T&N,t[13]=B^~O&C,t[22]=P^~M&F,t[23]=D^~z&K,t[32]=q^~Y&Z,t[33]=V^~J&X,t[42]=nt^~ot&ut,t[43]=it^~st&at,t[4]=b^~w&E,t[5]=_^~k&A,t[14]=T^~N&R,t[15]=O^~C&U,t[24]=M^~F&H,t[25]=z^~K&G,t[34]=Y^~Z&Q,t[35]=J^~X&tt,t[44]=ot^~ut&ct,t[45]=st^~at&ft,t[6]=w^~E&y,t[7]=k^~A&v,t[16]=N^~R&S,t[17]=C^~U&I,t[26]=F^~H&j,t[27]=K^~G&L,t[36]=Z^~Q&$,t[37]=X^~tt&W,t[46]=ut^~ct&et,t[47]=at^~ft&rt,t[8]=E^~y&g,t[9]=A^~v&m,t[18]=R^~S&x,t[19]=U^~I&B,t[28]=H^~j&P,t[29]=G^~L&D,t[38]=Q^~$&q,t[39]=tt^~W&V,t[48]=ct^~et&nt,t[49]=ft^~rt&it,t[0]^=l[n],t[1]^=l[n+1]};if(o)t.exports=E;else for(S=0;S<A.length;++S)n[A[S]]=E[A[S]]}()})),ic=p((function(t,e){!function(r,n){var i={version:"3.0.0",x86:{},x64:{},inputValidation:!0};function o(t){if(!Array.isArray(t)&&!ArrayBuffer.isView(t))return!1;for(var e=0;e<t.length;e++)if(!Number.isInteger(t[e])||t[e]<0||t[e]>255)return!1;return!0}function s(t,e){return(65535&t)*e+(((t>>>16)*e&65535)<<16)}function u(t,e){return t<<e|t>>>32-e}function a(t){return t=s(t^=t>>>16,2246822507),t=s(t^=t>>>13,3266489909),t^=t>>>16}function c(t,e){t=[t[0]>>>16,65535&t[0],t[1]>>>16,65535&t[1]],e=[e[0]>>>16,65535&e[0],e[1]>>>16,65535&e[1]];var r=[0,0,0,0];return r[3]+=t[3]+e[3],r[2]+=r[3]>>>16,r[3]&=65535,r[2]+=t[2]+e[2],r[1]+=r[2]>>>16,r[2]&=65535,r[1]+=t[1]+e[1],r[0]+=r[1]>>>16,r[1]&=65535,r[0]+=t[0]+e[0],r[0]&=65535,[r[0]<<16|r[1],r[2]<<16|r[3]]}function f(t,e){t=[t[0]>>>16,65535&t[0],t[1]>>>16,65535&t[1]],e=[e[0]>>>16,65535&e[0],e[1]>>>16,65535&e[1]];var r=[0,0,0,0];return r[3]+=t[3]*e[3],r[2]+=r[3]>>>16,r[3]&=65535,r[2]+=t[2]*e[3],r[1]+=r[2]>>>16,r[2]&=65535,r[2]+=t[3]*e[2],r[1]+=r[2]>>>16,r[2]&=65535,r[1]+=t[1]*e[3],r[0]+=r[1]>>>16,r[1]&=65535,r[1]+=t[2]*e[2],r[0]+=r[1]>>>16,r[1]&=65535,r[1]+=t[3]*e[1],r[0]+=r[1]>>>16,r[1]&=65535,r[0]+=t[0]*e[3]+t[1]*e[2]+t[2]*e[1]+t[3]*e[0],r[0]&=65535,[r[0]<<16|r[1],r[2]<<16|r[3]]}function l(t,e){return 32===(e%=64)?[t[1],t[0]]:e<32?[t[0]<<e|t[1]>>>32-e,t[1]<<e|t[0]>>>32-e]:(e-=32,[t[1]<<e|t[0]>>>32-e,t[0]<<e|t[1]>>>32-e])}function h(t,e){return 0===(e%=64)?t:e<32?[t[0]<<e|t[1]>>>32-e,t[1]<<e]:[t[1]<<e-32,0]}function p(t,e){return[t[0]^e[0],t[1]^e[1]]}function d(t){return t=p(t,[0,t[0]>>>1]),t=p(t=f(t,[4283543511,3981806797]),[0,t[0]>>>1]),t=p(t=f(t,[3301882366,444984403]),[0,t[0]>>>1])}i.x86.hash32=function(t,e){if(i.inputValidation&&!o(t))return n;e=e||0;for(var r=t.length%4,c=t.length-r,f=e,l=0,h=3432918353,p=461845907,d=0;d<c;d+=4)l=s(l=t[d]|t[d+1]<<8|t[d+2]<<16|t[d+3]<<24,h),l=s(l=u(l,15),p),f=s(f=u(f^=l,13),5)+3864292196;switch(l=0,r){case 3:l^=t[d+2]<<16;case 2:l^=t[d+1]<<8;case 1:l=s(l^=t[d],h),f^=l=s(l=u(l,15),p)}return(f=a(f^=t.length))>>>0},i.x86.hash128=function(t,e){if(i.inputValidation&&!o(t))return n;e=e||0;for(var r=t.length%16,c=t.length-r,f=e,l=e,h=e,p=e,d=0,y=0,v=0,g=0,m=597399067,b=2869860233,_=951274213,w=2716044179,k=0;k<c;k+=16)d=t[k]|t[k+1]<<8|t[k+2]<<16|t[k+3]<<24,y=t[k+4]|t[k+5]<<8|t[k+6]<<16|t[k+7]<<24,v=t[k+8]|t[k+9]<<8|t[k+10]<<16|t[k+11]<<24,g=t[k+12]|t[k+13]<<8|t[k+14]<<16|t[k+15]<<24,d=u(d=s(d,m),15),f=u(f^=d=s(d,b),19),f=s(f+=l,5)+1444728091,y=u(y=s(y,b),16),l=u(l^=y=s(y,_),17),l=s(l+=h,5)+197830471,v=u(v=s(v,_),17),h=u(h^=v=s(v,w),15),h=s(h+=p,5)+2530024501,g=u(g=s(g,w),18),p=u(p^=g=s(g,m),13),p=s(p+=f,5)+850148119;switch(d=0,y=0,v=0,g=0,r){case 15:g^=t[k+14]<<16;case 14:g^=t[k+13]<<8;case 13:g=s(g^=t[k+12],w),p^=g=s(g=u(g,18),m);case 12:v^=t[k+11]<<24;case 11:v^=t[k+10]<<16;case 10:v^=t[k+9]<<8;case 9:v=s(v^=t[k+8],_),h^=v=s(v=u(v,17),w);case 8:y^=t[k+7]<<24;case 7:y^=t[k+6]<<16;case 6:y^=t[k+5]<<8;case 5:y=s(y^=t[k+4],b),l^=y=s(y=u(y,16),_);case 4:d^=t[k+3]<<24;case 3:d^=t[k+2]<<16;case 2:d^=t[k+1]<<8;case 1:d=s(d^=t[k],m),f^=d=s(d=u(d,15),b)}return f^=t.length,f+=l^=t.length,f+=h^=t.length,l+=f+=p^=t.length,h+=f,p+=f,f=a(f),f+=l=a(l),f+=h=a(h),l+=f+=p=a(p),h+=f,p+=f,("00000000"+(f>>>0).toString(16)).slice(-8)+("00000000"+(l>>>0).toString(16)).slice(-8)+("00000000"+(h>>>0).toString(16)).slice(-8)+("00000000"+(p>>>0).toString(16)).slice(-8)},i.x64.hash128=function(t,e){if(i.inputValidation&&!o(t))return n;e=e||0;for(var r=t.length%16,s=t.length-r,u=[0,e],a=[0,e],y=[0,0],v=[0,0],g=[2277735313,289559509],m=[1291169091,658871167],b=0;b<s;b+=16)y=[t[b+4]|t[b+5]<<8|t[b+6]<<16|t[b+7]<<24,t[b]|t[b+1]<<8|t[b+2]<<16|t[b+3]<<24],v=[t[b+12]|t[b+13]<<8|t[b+14]<<16|t[b+15]<<24,t[b+8]|t[b+9]<<8|t[b+10]<<16|t[b+11]<<24],y=l(y=f(y,g),31),u=c(u=l(u=p(u,y=f(y,m)),27),a),u=c(f(u,[0,5]),[0,1390208809]),v=l(v=f(v,m),33),a=c(a=l(a=p(a,v=f(v,g)),31),u),a=c(f(a,[0,5]),[0,944331445]);switch(y=[0,0],v=[0,0],r){case 15:v=p(v,h([0,t[b+14]],48));case 14:v=p(v,h([0,t[b+13]],40));case 13:v=p(v,h([0,t[b+12]],32));case 12:v=p(v,h([0,t[b+11]],24));case 11:v=p(v,h([0,t[b+10]],16));case 10:v=p(v,h([0,t[b+9]],8));case 9:v=f(v=p(v,[0,t[b+8]]),m),a=p(a,v=f(v=l(v,33),g));case 8:y=p(y,h([0,t[b+7]],56));case 7:y=p(y,h([0,t[b+6]],48));case 6:y=p(y,h([0,t[b+5]],40));case 5:y=p(y,h([0,t[b+4]],32));case 4:y=p(y,h([0,t[b+3]],24));case 3:y=p(y,h([0,t[b+2]],16));case 2:y=p(y,h([0,t[b+1]],8));case 1:y=f(y=p(y,[0,t[b]]),g),u=p(u,y=f(y=l(y,31),m))}return u=c(u=p(u,[0,t.length]),a=p(a,[0,t.length])),a=c(a,u),u=c(u=d(u),a=d(a)),a=c(a,u),("00000000"+(u[0]>>>0).toString(16)).slice(-8)+("00000000"+(u[1]>>>0).toString(16)).slice(-8)+("00000000"+(a[0]>>>0).toString(16)).slice(-8)+("00000000"+(a[1]>>>0).toString(16)).slice(-8)},t.exports&&(e=t.exports=i),e.murmurHash3=i}()}));const oc=self.crypto||self.msCrypto,sc=async(t,e)=>{if("undefined"==typeof self||!self.crypto&&!self.msCrypto)throw new Error("Please use a browser with webcrypto support and ensure the code has been delivered securely via HTTPS/TLS and run within a Secure Context");switch(e){case"sha1":return new Uint8Array(await oc.subtle.digest({name:"SHA-1"},t));case"sha2-256":return new Uint8Array(await oc.subtle.digest({name:"SHA-256"},t));case"sha2-512":return new Uint8Array(await oc.subtle.digest({name:"SHA-512"},t));case"dbl-sha2-256":{const e=await oc.subtle.digest({name:"SHA-256"},t);return new Uint8Array(await oc.subtle.digest({name:"SHA-256"},e))}default:throw new Error(`${e} is not a supported algorithm`)}};var uc={factory:t=>async e=>sc(e,t),digest:sc,multihashing:async(t,e,r)=>{const n=await sc(t,e);return lo.encode(n,e,r)}};var ac={fromNumberTo32BitBuf:t=>{const e=new Uint8Array(4);for(let r=0;r<4;r++)e[r]=255&t,t>>=8;return e}};function cc(t){return(4294967296+t).toString(16).substring(1)}var fc={normalizeInput:function(t){var e;if(t instanceof Uint8Array)e=t;else if(t instanceof K.Buffer)e=new Uint8Array(t);else{if("string"!=typeof t)throw new Error("Input must be an string, Buffer or Uint8Array");e=new Uint8Array(K.Buffer.from(t,"utf8"))}return e},toHex:function(t){return Array.prototype.map.call(t,(function(t){return(t<16?"0":"")+t.toString(16)})).join("")},debugPrint:function(t,e,r){for(var n="\n"+t+" = ",i=0;i<e.length;i+=2){if(32===r)n+=cc(e[i]).toUpperCase(),n+=" ",n+=cc(e[i+1]).toUpperCase();else{if(64!==r)throw new Error("Invalid size "+r);n+=cc(e[i+1]).toUpperCase(),n+=cc(e[i]).toUpperCase()}i%6==4?n+="\n"+new Array(t.length+4).join(" "):i<e.length-2&&(n+=" ")}console.log(n)},testSpeed:function(t,e,r){for(var n=(new Date).getTime(),i=new Uint8Array(e),o=0;o<e;o++)i[o]=o%256;var s=(new Date).getTime();for(console.log("Generated random input in "+(s-n)+"ms"),n=s,o=0;o<r;o++){var u=t(i),a=(new Date).getTime(),c=a-n;n=a,console.log("Hashed in "+c+"ms: "+u.substring(0,20)+"..."),console.log(Math.round(e/(1<<20)/(c/1e3)*100)/100+" MB PER SECOND")}}};function lc(t,e,r){var n=t[e]+t[r],i=t[e+1]+t[r+1];n>=4294967296&&i++,t[e]=n,t[e+1]=i}function hc(t,e,r,n){var i=t[e]+r;r<0&&(i+=4294967296);var o=t[e+1]+n;i>=4294967296&&o++,t[e]=i,t[e+1]=o}function pc(t,e){return t[e]^t[e+1]<<8^t[e+2]<<16^t[e+3]<<24}function dc(t,e,r,n,i,o){var s=mc[i],u=mc[i+1],a=mc[o],c=mc[o+1];lc(gc,t,e),hc(gc,t,s,u);var f=gc[n]^gc[t],l=gc[n+1]^gc[t+1];gc[n]=l,gc[n+1]=f,lc(gc,r,n),f=gc[e]^gc[r],l=gc[e+1]^gc[r+1],gc[e]=f>>>24^l<<8,gc[e+1]=l>>>24^f<<8,lc(gc,t,e),hc(gc,t,a,c),f=gc[n]^gc[t],l=gc[n+1]^gc[t+1],gc[n]=f>>>16^l<<16,gc[n+1]=l>>>16^f<<16,lc(gc,r,n),f=gc[e]^gc[r],l=gc[e+1]^gc[r+1],gc[e]=l>>>31^f<<1,gc[e+1]=f>>>31^l<<1}var yc=new Uint32Array([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),vc=new Uint8Array([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3].map((function(t){return 2*t}))),gc=new Uint32Array(32),mc=new Uint32Array(32);function bc(t,e){var r=0;for(r=0;r<16;r++)gc[r]=t.h[r],gc[r+16]=yc[r];for(gc[24]=gc[24]^t.t,gc[25]=gc[25]^t.t/4294967296,e&&(gc[28]=~gc[28],gc[29]=~gc[29]),r=0;r<32;r++)mc[r]=pc(t.b,4*r);for(r=0;r<12;r++)dc(0,8,16,24,vc[16*r+0],vc[16*r+1]),dc(2,10,18,26,vc[16*r+2],vc[16*r+3]),dc(4,12,20,28,vc[16*r+4],vc[16*r+5]),dc(6,14,22,30,vc[16*r+6],vc[16*r+7]),dc(0,10,20,30,vc[16*r+8],vc[16*r+9]),dc(2,12,22,24,vc[16*r+10],vc[16*r+11]),dc(4,14,16,26,vc[16*r+12],vc[16*r+13]),dc(6,8,18,28,vc[16*r+14],vc[16*r+15]);for(r=0;r<16;r++)t.h[r]=t.h[r]^gc[r]^gc[r+16]}function _c(t,e){if(0===t||t>64)throw new Error("Illegal output length, expected 0 < length <= 64");if(e&&e.length>64)throw new Error("Illegal key, expected Uint8Array with 0 < length <= 64");for(var r={b:new Uint8Array(128),h:new Uint32Array(16),t:0,c:0,outlen:t},n=0;n<16;n++)r.h[n]=yc[n];var i=e?e.length:0;return r.h[0]^=16842752^i<<8^t,e&&(wc(r,e),r.c=128),r}function wc(t,e){for(var r=0;r<e.length;r++)128===t.c&&(t.t+=t.c,bc(t,!1),t.c=0),t.b[t.c++]=e[r]}function kc(t){for(t.t+=t.c;t.c<128;)t.b[t.c++]=0;bc(t,!0);for(var e=new Uint8Array(t.outlen),r=0;r<t.outlen;r++)e[r]=t.h[r>>2]>>8*(3&r);return e}function Ec(t,e,r){r=r||64,t=fc.normalizeInput(t);var n=_c(r,e);return wc(n,t),kc(n)}var Ac={blake2b:Ec,blake2bHex:function(t,e,r){var n=Ec(t,e,r);return fc.toHex(n)},blake2bInit:_c,blake2bUpdate:wc,blake2bFinal:kc};function Sc(t,e){return t[e]^t[e+1]<<8^t[e+2]<<16^t[e+3]<<24}function Ic(t,e,r,n,i,o){Oc[t]=Oc[t]+Oc[e]+i,Oc[n]=xc(Oc[n]^Oc[t],16),Oc[r]=Oc[r]+Oc[n],Oc[e]=xc(Oc[e]^Oc[r],12),Oc[t]=Oc[t]+Oc[e]+o,Oc[n]=xc(Oc[n]^Oc[t],8),Oc[r]=Oc[r]+Oc[n],Oc[e]=xc(Oc[e]^Oc[r],7)}function xc(t,e){return t>>>e^t<<32-e}var Bc=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Tc=new Uint8Array([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0]),Oc=new Uint32Array(16),Nc=new Uint32Array(16);function Cc(t,e){var r=0;for(r=0;r<8;r++)Oc[r]=t.h[r],Oc[r+8]=Bc[r];for(Oc[12]^=t.t,Oc[13]^=t.t/4294967296,e&&(Oc[14]=~Oc[14]),r=0;r<16;r++)Nc[r]=Sc(t.b,4*r);for(r=0;r<10;r++)Ic(0,4,8,12,Nc[Tc[16*r+0]],Nc[Tc[16*r+1]]),Ic(1,5,9,13,Nc[Tc[16*r+2]],Nc[Tc[16*r+3]]),Ic(2,6,10,14,Nc[Tc[16*r+4]],Nc[Tc[16*r+5]]),Ic(3,7,11,15,Nc[Tc[16*r+6]],Nc[Tc[16*r+7]]),Ic(0,5,10,15,Nc[Tc[16*r+8]],Nc[Tc[16*r+9]]),Ic(1,6,11,12,Nc[Tc[16*r+10]],Nc[Tc[16*r+11]]),Ic(2,7,8,13,Nc[Tc[16*r+12]],Nc[Tc[16*r+13]]),Ic(3,4,9,14,Nc[Tc[16*r+14]],Nc[Tc[16*r+15]]);for(r=0;r<8;r++)t.h[r]^=Oc[r]^Oc[r+8]}function Rc(t,e){if(!(t>0&&t<=32))throw new Error("Incorrect output length, should be in [1, 32]");var r=e?e.length:0;if(e&&!(r>0&&r<=32))throw new Error("Incorrect key length, should be in [1, 32]");var n={h:new Uint32Array(Bc),b:new Uint32Array(64),c:0,t:0,outlen:t};return n.h[0]^=16842752^r<<8^t,r>0&&(Uc(n,e),n.c=64),n}function Uc(t,e){for(var r=0;r<e.length;r++)64===t.c&&(t.t+=t.c,Cc(t,!1),t.c=0),t.b[t.c++]=e[r]}function jc(t){for(t.t+=t.c;t.c<64;)t.b[t.c++]=0;Cc(t,!0);for(var e=new Uint8Array(t.outlen),r=0;r<t.outlen;r++)e[r]=t.h[r>>2]>>8*(3&r)&255;return e}function Lc(t,e,r){r=r||32,t=fc.normalizeInput(t);var n=Rc(r,e);return Uc(n,t),jc(n)}var Pc={blake2s:Lc,blake2sHex:function(t,e,r){var n=Lc(t,e,r);return fc.toHex(n)},blake2sInit:Rc,blake2sUpdate:Uc,blake2sFinal:jc},Dc={blake2b:Ac.blake2b,blake2bHex:Ac.blake2bHex,blake2bInit:Ac.blake2bInit,blake2bUpdate:Ac.blake2bUpdate,blake2bFinal:Ac.blake2bFinal,blake2s:Pc.blake2s,blake2sHex:Pc.blake2sHex,blake2sInit:Pc.blake2sInit,blake2sUpdate:Pc.blake2sUpdate,blake2sFinal:Pc.blake2sFinal};const Mc={init:Dc.blake2bInit,update:Dc.blake2bUpdate,digest:Dc.blake2bFinal},zc={init:Dc.blake2sInit,update:Dc.blake2sUpdate,digest:Dc.blake2sFinal},Fc=(t,e)=>async r=>{const n=e.init(t,null);return e.update(n,r),e.digest(n)};const{factory:Kc}=uc,{fromNumberTo32BitBuf:Hc}=ac,Gc=t=>async e=>{switch(t){case"sha3-224":return new Uint8Array(nc.sha3_224.arrayBuffer(e));case"sha3-256":return new Uint8Array(nc.sha3_256.arrayBuffer(e));case"sha3-384":return new Uint8Array(nc.sha3_384.arrayBuffer(e));case"sha3-512":return new Uint8Array(nc.sha3_512.arrayBuffer(e));case"shake-128":return new Uint8Array(nc.shake128.create(128).update(e).arrayBuffer());case"shake-256":return new Uint8Array(nc.shake256.create(256).update(e).arrayBuffer());case"keccak-224":return new Uint8Array(nc.keccak224.arrayBuffer(e));case"keccak-256":return new Uint8Array(nc.keccak256.arrayBuffer(e));case"keccak-384":return new Uint8Array(nc.keccak384.arrayBuffer(e));case"keccak-512":return new Uint8Array(nc.keccak512.arrayBuffer(e));case"murmur3-128":return Po(ic.x64.hash128(e),"base16");case"murmur3-32":return Hc(ic.x86.hash32(e));default:throw new TypeError(`${t} is not a supported algorithm`)}};var $c={identity:t=>t,sha1:Kc("sha1"),sha2256:Kc("sha2-256"),sha2512:Kc("sha2-512"),dblSha2256:Kc("dbl-sha2-256"),sha3224:Gc("sha3-224"),sha3256:Gc("sha3-256"),sha3384:Gc("sha3-384"),sha3512:Gc("sha3-512"),shake128:Gc("shake-128"),shake256:Gc("shake-256"),keccak224:Gc("keccak-224"),keccak256:Gc("keccak-256"),keccak384:Gc("keccak-384"),keccak512:Gc("keccak-512"),murmur3128:Gc("murmur3-128"),murmur332:Gc("murmur3-32"),addBlake:t=>{for(let e=0;e<64;e++)t[45569+e]=Fc(e+1,Mc);for(let e=0;e<32;e++)t[45633+e]=Fc(e+1,zc)}};var Wc=function(t,e){if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let r=0;r<t.byteLength;r++)if(t[r]!==e[r])return!1;return!0};async function qc(t,e,r){const n=await qc.digest(t,e,r);return lo.encode(n,e,r)}qc.multihash=lo,qc.digest=async(t,e,r)=>{const n=qc.createHash(e),i=await n(t);return r?i.slice(0,r):i},qc.createHash=function(t){if(!t)throw rc(new Error("hash algorithm must be specified"),"ERR_HASH_ALGORITHM_NOT_SPECIFIED");if(t=lo.coerceCode(t),!qc.functions[t])throw rc(new Error(`multihash function '${t}' not yet supported`),"ERR_HASH_ALGORITHM_NOT_SUPPORTED");return qc.functions[t]},qc.functions={0:$c.identity,17:$c.sha1,18:$c.sha2256,19:$c.sha2512,20:$c.sha3512,21:$c.sha3384,22:$c.sha3256,23:$c.sha3224,24:$c.shake128,25:$c.shake256,26:$c.keccak224,27:$c.keccak256,28:$c.keccak384,29:$c.keccak512,34:$c.murmur3128,35:$c.murmur332,86:$c.dblSha2256},$c.addBlake(qc.functions),qc.validate=async(t,e)=>{const r=await qc(t,lo.decode(e).name);return Wc(e,r)};var Vc=qc,Yc=p((function(t,e){(e=t.exports).codec=Jo.DAG_PB,e.defaultHashAlg=Jo.SHA2_256;e.cid=async(t,r)=>{const n={cidVersion:1,hashAlg:e.defaultHashAlg},i=Object.assign(n,r),o=await Vc(t,i.hashAlg),s=Jo.print[e.codec];return new as(i.cidVersion,s,o)}}));var Jc=async(t,e={})=>{const r=await Yc.cid(t.serialize(),e);return new Uu(e.name||"",t.size,r)},Zc=p((function(t,e){t.exports.createDagLinkFromB58EncodedHash=function(t){return new Uu(t.Name||t.name||"",t.Tsize||t.Size||t.size||0,t.Hash||t.hash||t.multihash||t.cid)}})),Xc=p((function(t,e){(t.exports=Uu).util=Zc}));var Qc=(t,e)=>{const r=(t=>{if(Xc.isDAGLink(t))return t;if(!("cid"in t||"hash"in t||"Hash"in t||"multihash"in t))throw new Error("Link must be a DAGLink or DAGLink-like. Convert the DAGNode into a DAGLink via `node.toDAGLink()`.");return new Xc(t.Name||t.name,t.Tsize||t.size,t.Hash||t.multihash||t.hash||t.cid)})(e);t.Links.push(r),Ru(t.Links)};var tf=(t,e)=>{let r=null;if("string"==typeof e?r=t=>t.Name===e:(e instanceof Uint8Array||as.isCID(e))&&(r=t=>Wc(t.Hash,e)),!r)throw new Error("second arg needs to be a name or CID");{const e=t.Links;let n=0;for(;n<e.length;){r(e[n])?e.splice(n,1):n++}}},ef=p((function(t,e){const{serializeDAGNode:r}=tc;t.exports=Bu(class{constructor(t,e=[],r=null){if(t||(t=new Uint8Array(0)),"string"==typeof t&&(t=Po(t)),!(t instanceof Uint8Array))throw new Error("Passed 'data' is not a Uint8Array or a String!");if(null!==r&&"number"!=typeof r)throw new Error("Passed 'serializedSize' must be a number!");e=e.map((t=>Uu.isDAGLink(t)?t:Uu.util.createDagLinkFromB58EncodedHash(t))),Ru(e),Object.defineProperties(this,{Data:{value:t,writable:!1,enumerable:!0},Links:{value:e,writable:!1,enumerable:!0},_serializedSize:{value:r,writable:!0,enumerable:!1},_size:{value:null,writable:!0,enumerable:!1}})}toJSON(){return this._json||(this._json=Object.freeze({data:this.Data,links:this.Links.map((t=>t.toJSON())),size:this.size})),Object.assign({},this._json)}toString(){return`DAGNode <data: "${Ro(this.Data,"base64urlpad")}", links: ${this.Links.length}, size: ${this.size}>`}_invalidateCached(){this._serializedSize=null,this._size=null}addLink(t){return this._invalidateCached(),Qc(this,t)}rmLink(t){return this._invalidateCached(),tf(this,t)}toDAGLink(t){return Jc(this,t)}serialize(){return r(this)}get size(){return null===this._size&&(null===this._serializedSize&&(this._serializedSize=this.serialize().length),this._size=this.Links.reduce(((t,e)=>t+e.Tsize),this._serializedSize)),this._size}set size(t){throw new Error("Can't set property: 'size' is immutable")}},{className:"DAGNode",symbolName:"@ipld/js-ipld-dag-pb/dagnode"})})),rf=p((function(t,e){t.exports=ef})),nf=p((function(t,e){const r=Xa(Qa),{serializeDAGNodeLike:n}=tc;(e=t.exports).codec=Yc.codec,e.defaultHashAlg=Yc.defaultHashAlg;e.serialize=t=>ef.isDAGNode(t)?t.serialize():n(t.Data,t.Links),e.deserialize=t=>{const e=r.PBNode.decode(t),n=e.Links.map((t=>new Uu(t.Name,t.Tsize,t.Hash))),i=null==e.Data?new Uint8Array(0):e.Data;return new ef(i,n,t.byteLength)},e.cid=(t,e)=>Yc.cid(t,e)})),of={resolve:(t,e)=>{let r=nf.deserialize(t);const n=e.split("/").filter(Boolean);for(;n.length;){const t=n.shift();if(void 0===r[t]){for(const e of r.Links)if(e.Name===t)return{value:e.Hash,remainderPath:n.join("/")};throw new Error(`Object has no property '${t}'`)}if(r=r[t],as.isCID(r))return{value:r,remainderPath:n.join("/")}}return{value:r,remainderPath:""}},tree:function*(t){const e=nf.deserialize(t);yield"Data",yield"Links";for(let t=0;t<e.Links.length;t++)yield`Links/${t}`,yield`Links/${t}/Name`,yield`Links/${t}/Tsize`,yield`Links/${t}/Hash`}},sf=p((function(t,e){e.DAGNode=rf,e.DAGLink=Xc,e.resolver=of,e.util=nf,e.codec=e.util.codec,e.defaultHashAlg=e.util.defaultHashAlg})),uf=function(t){return new sf.DAGLink(t.Name,t.Tsize,t.Hash)},af=function(t){var e,r,n,i=null===(e=null==t?void 0:t.value)||void 0===e?void 0:e.Data,o=null===(n=null===(r=null==t?void 0:t.value)||void 0===r?void 0:r.Links)||void 0===n?void 0:n.map(uf);return new sf.DAGNode(i,o)},cf=K.Buffer.from([8,1]),ff=function(t){return o(void 0,void 0,void 0,(function(){var e;return s(this,(function(r){switch(r.label){case 0:return[4,Iu()];case 1:return[4,r.sent().add(t,{cidVersion:1,pin:!0})];case 2:return[2,{cid:(e=r.sent()).cid.toString(),size:e.size,isFile:!0}]}}))}))},lf=function(t){return o(void 0,void 0,void 0,(function(){var e,r,n,i,o,u,a,f;return s(this,(function(s){switch(s.label){case 0:return[4,Iu()];case 1:return e=s.sent(),r=[],[4,bf(t)];case 2:s.sent(),s.label=3;case 3:s.trys.push([3,8,9,14]),n=c(e.cat(t)),s.label=4;case 4:return[4,n.next()];case 5:if((i=s.sent()).done)return[3,7];o=i.value,r.push(o),s.label=6;case 6:return[3,4];case 7:return[3,14];case 8:return u=s.sent(),a={error:u},[3,14];case 9:return s.trys.push([9,,12,13]),i&&!i.done&&(f=n.return)?[4,f.call(n)]:[3,11];case 10:s.sent(),s.label=11;case 11:return[3,13];case 12:if(a)throw a.error;return[7];case 13:return[7];case 14:return[2,r]}}))}))},hf=function(t){return o(void 0,void 0,void 0,(function(){var e;return s(this,(function(r){switch(r.label){case 0:return[4,lf(t)];case 1:return e=r.sent(),[2,K.Buffer.concat(e)]}}))}))},pf=function(t){return o(void 0,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return[4,hf(t)];case 1:return[2,e.sent().toString()]}}))}))},df=function(t){return o(void 0,void 0,void 0,(function(){var e,r,n,i,o,u,a,f;return s(this,(function(s){switch(s.label){case 0:return[4,Iu()];case 1:e=s.sent(),r=[],s.label=2;case 2:s.trys.push([2,7,8,13]),n=c(e.ls(t)),s.label=3;case 3:return[4,n.next()];case 4:if((i=s.sent()).done)return[3,6];o=i.value,r.push(o),s.label=5;case 5:return[3,3];case 6:return[3,13];case 7:return u=s.sent(),a={error:u},[3,13];case 8:return s.trys.push([8,,11,12]),i&&!i.done&&(f=n.return)?[4,f.call(n)]:[3,10];case 9:s.sent(),s.label=10;case 10:return[3,12];case 11:if(a)throw a.error;return[7];case 12:return[7];case 13:return[2,r]}}))}))},yf=function(t){return o(void 0,void 0,void 0,(function(){var e,r;return s(this,(function(n){switch(n.label){case 0:return[4,Iu()];case 1:return e=n.sent(),[4,bf(t)];case 2:return n.sent(),[4,e.dag.get(new as(t))];case 3:return r=n.sent(),[2,af(r)]}}))}))},vf=function(t){return o(void 0,void 0,void 0,(function(){var e,r,n;return s(this,(function(i){switch(i.label){case 0:return[4,Iu()];case 1:return[4,i.sent().dag.put(t,{format:"dag-pb",hashAlg:"sha2-256"})];case 2:return e=i.sent(),r=e.toV1().toString(),[4,bf(r)];case 3:return i.sent(),[4,mf(r)];case 4:return n=i.sent(),[2,{cid:r,size:n,isFile:!1}]}}))}))},gf=function(t){return o(void 0,void 0,void 0,(function(){var e;return s(this,(function(r){return e=new sf.DAGNode(cf,t),[2,vf(e)]}))}))},mf=function(t){return o(void 0,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return[4,Iu()];case 1:return[4,e.sent().files.stat("/ipfs/"+t)];case 2:return[2,e.sent().cumulativeSize]}}))}))},bf=function(t){return o(void 0,void 0,void 0,(function(){var e,r;return s(this,(function(n){switch(n.label){case 0:return[4,Iu()];case 1:e=n.sent(),n.label=2;case 2:return n.trys.push([2,4,,5]),[4,e.pin.add(t,{recursive:!1})];case 3:return n.sent(),[3,5];case 4:if(!(r=n.sent()).message||!r.message.includes("already pinned recursively"))throw new Error(r);return[3,5];case 5:return[2]}}))}))},_f=p((function(t,e){var r="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=o,e.SlowBuffer=function(t){+t!=t&&(t=0);return o.alloc(+t)},e.INSPECT_MAX_BYTES=50;var n=2147483647;function i(t){if(t>n)throw new RangeError('The value "'+t+'" is invalid for option "size"');var e=new Uint8Array(t);return Object.setPrototypeOf(e,o.prototype),e}function o(t,e,r){if("number"==typeof t){if("string"==typeof e)throw new TypeError('The "string" argument must be of type string. Received type number');return a(t)}return s(t,e,r)}function s(t,e,r){if("string"==typeof t)return function(t,e){"string"==typeof e&&""!==e||(e="utf8");if(!o.isEncoding(e))throw new TypeError("Unknown encoding: "+e);var r=0|h(t,e),n=i(r),s=n.write(t,e);s!==r&&(n=n.slice(0,s));return n}(t,e);if(ArrayBuffer.isView(t))return function(t){if(D(t,Uint8Array)){var e=new Uint8Array(t);return f(e.buffer,e.byteOffset,e.byteLength)}return c(t)}(t);if(null==t)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(D(t,ArrayBuffer)||t&&D(t.buffer,ArrayBuffer))return f(t,e,r);if("undefined"!=typeof SharedArrayBuffer&&(D(t,SharedArrayBuffer)||t&&D(t.buffer,SharedArrayBuffer)))return f(t,e,r);if("number"==typeof t)throw new TypeError('The "value" argument must not be of type number. Received type number');var n=t.valueOf&&t.valueOf();if(null!=n&&n!==t)return o.from(n,e,r);var s=function(t){if(o.isBuffer(t)){var e=0|l(t.length),r=i(e);return 0===r.length||t.copy(r,0,0,e),r}if(void 0!==t.length)return"number"!=typeof t.length||K(t.length)?i(0):c(t);if("Buffer"===t.type&&Array.isArray(t.data))return c(t.data)}(t);if(s)return s;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof t[Symbol.toPrimitive])return o.from(t[Symbol.toPrimitive]("string"),e,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}function u(t){if("number"!=typeof t)throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function a(t){return u(t),i(t<0?0:0|l(t))}function c(t){for(var e=t.length<0?0:0|l(t.length),r=i(e),n=0;n<e;n+=1)r[n]=255&t[n];return r}function f(t,e,r){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(r||0))throw new RangeError('"length" is outside of buffer bounds');var n;return n=void 0===e&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,e):new Uint8Array(t,e,r),Object.setPrototypeOf(n,o.prototype),n}function l(t){if(t>=n)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+n.toString(16)+" bytes");return 0|t}function h(t,e){if(o.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||D(t,ArrayBuffer))return t.byteLength;if("string"!=typeof t)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);var r=t.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;for(var i=!1;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return j(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return L(t).length;default:if(i)return n?-1:j(t).length;e=(""+e).toLowerCase(),i=!0}}function p(t,e,r){var n=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return x(this,e,r);case"utf8":case"utf-8":return E(this,e,r);case"ascii":return S(this,e,r);case"latin1":case"binary":return I(this,e,r);case"base64":return k(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return B(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function d(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function y(t,e,r,n,i){if(0===t.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),K(r=+r)&&(r=i?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(i)return-1;r=t.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof e&&(e=o.from(e,n)),o.isBuffer(e))return 0===e.length?-1:v(t,e,r,n,i);if("number"==typeof e)return e&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):v(t,[e],r,n,i);throw new TypeError("val must be string, number or Buffer")}function v(t,e,r,n,i){var o,s=1,u=t.length,a=e.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;s=2,u/=2,a/=2,r/=2}function c(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}if(i){var f=-1;for(o=r;o<u;o++)if(c(t,o)===c(e,-1===f?0:o-f)){if(-1===f&&(f=o),o-f+1===a)return f*s}else-1!==f&&(o-=o-f),f=-1}else for(r+a>u&&(r=u-a),o=r;o>=0;o--){for(var l=!0,h=0;h<a;h++)if(c(t,o+h)!==c(e,h)){l=!1;break}if(l)return o}return-1}function g(t,e,r,n){r=Number(r)||0;var i=t.length-r;n?(n=Number(n))>i&&(n=i):n=i;var o=e.length;n>o/2&&(n=o/2);for(var s=0;s<n;++s){var u=parseInt(e.substr(2*s,2),16);if(K(u))return s;t[r+s]=u}return s}function m(t,e,r,n){return P(j(e,t.length-r),t,r,n)}function b(t,e,r,n){return P(function(t){for(var e=[],r=0;r<t.length;++r)e.push(255&t.charCodeAt(r));return e}(e),t,r,n)}function _(t,e,r,n){return P(L(e),t,r,n)}function w(t,e,r,n){return P(function(t,e){for(var r,n,i,o=[],s=0;s<t.length&&!((e-=2)<0);++s)n=(r=t.charCodeAt(s))>>8,i=r%256,o.push(i),o.push(n);return o}(e,t.length-r),t,r,n)}function k(t,e,r){return 0===e&&r===t.length?M.fromByteArray(t):M.fromByteArray(t.slice(e,r))}function E(t,e,r){r=Math.min(t.length,r);for(var n=[],i=e;i<r;){var o,s,u,a,c=t[i],f=null,l=c>239?4:c>223?3:c>191?2:1;if(i+l<=r)switch(l){case 1:c<128&&(f=c);break;case 2:128==(192&(o=t[i+1]))&&(a=(31&c)<<6|63&o)>127&&(f=a);break;case 3:o=t[i+1],s=t[i+2],128==(192&o)&&128==(192&s)&&(a=(15&c)<<12|(63&o)<<6|63&s)>2047&&(a<55296||a>57343)&&(f=a);break;case 4:o=t[i+1],s=t[i+2],u=t[i+3],128==(192&o)&&128==(192&s)&&128==(192&u)&&(a=(15&c)<<18|(63&o)<<12|(63&s)<<6|63&u)>65535&&a<1114112&&(f=a)}null===f?(f=65533,l=1):f>65535&&(f-=65536,n.push(f>>>10&1023|55296),f=56320|1023&f),n.push(f),i+=l}return function(t){var e=t.length;if(e<=A)return String.fromCharCode.apply(String,t);var r="",n=0;for(;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=A));return r}(n)}e.kMaxLength=n,o.TYPED_ARRAY_SUPPORT=function(){try{var t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),42===t.foo()}catch(t){return!1}}(),o.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(o.prototype,"parent",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.buffer}}),Object.defineProperty(o.prototype,"offset",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.byteOffset}}),o.poolSize=8192,o.from=function(t,e,r){return s(t,e,r)},Object.setPrototypeOf(o.prototype,Uint8Array.prototype),Object.setPrototypeOf(o,Uint8Array),o.alloc=function(t,e,r){return function(t,e,r){return u(t),t<=0?i(t):void 0!==e?"string"==typeof r?i(t).fill(e,r):i(t).fill(e):i(t)}(t,e,r)},o.allocUnsafe=function(t){return a(t)},o.allocUnsafeSlow=function(t){return a(t)},o.isBuffer=function(t){return null!=t&&!0===t._isBuffer&&t!==o.prototype},o.compare=function(t,e){if(D(t,Uint8Array)&&(t=o.from(t,t.offset,t.byteLength)),D(e,Uint8Array)&&(e=o.from(e,e.offset,e.byteLength)),!o.isBuffer(t)||!o.isBuffer(e))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;for(var r=t.length,n=e.length,i=0,s=Math.min(r,n);i<s;++i)if(t[i]!==e[i]){r=t[i],n=e[i];break}return r<n?-1:n<r?1:0},o.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return o.alloc(0);var r;if(void 0===e)for(e=0,r=0;r<t.length;++r)e+=t[r].length;var n=o.allocUnsafe(e),i=0;for(r=0;r<t.length;++r){var s=t[r];if(D(s,Uint8Array))i+s.length>n.length?o.from(s).copy(n,i):Uint8Array.prototype.set.call(n,s,i);else{if(!o.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(n,i)}i+=s.length}return n},o.byteLength=h,o.prototype._isBuffer=!0,o.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)d(this,e,e+1);return this},o.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)d(this,e,e+3),d(this,e+1,e+2);return this},o.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)d(this,e,e+7),d(this,e+1,e+6),d(this,e+2,e+5),d(this,e+3,e+4);return this},o.prototype.toString=function(){var t=this.length;return 0===t?"":0===arguments.length?E(this,0,t):p.apply(this,arguments)},o.prototype.toLocaleString=o.prototype.toString,o.prototype.equals=function(t){if(!o.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===o.compare(this,t)},o.prototype.inspect=function(){var t="",r=e.INSPECT_MAX_BYTES;return t=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(t+=" ... "),"<Buffer "+t+">"},r&&(o.prototype[r]=o.prototype.inspect),o.prototype.compare=function(t,e,r,n,i){if(D(t,Uint8Array)&&(t=o.from(t,t.offset,t.byteLength)),!o.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(void 0===e&&(e=0),void 0===r&&(r=t?t.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),e<0||r>t.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&e>=r)return 0;if(n>=i)return-1;if(e>=r)return 1;if(this===t)return 0;for(var s=(i>>>=0)-(n>>>=0),u=(r>>>=0)-(e>>>=0),a=Math.min(s,u),c=this.slice(n,i),f=t.slice(e,r),l=0;l<a;++l)if(c[l]!==f[l]){s=c[l],u=f[l];break}return s<u?-1:u<s?1:0},o.prototype.includes=function(t,e,r){return-1!==this.indexOf(t,e,r)},o.prototype.indexOf=function(t,e,r){return y(this,t,e,r,!0)},o.prototype.lastIndexOf=function(t,e,r){return y(this,t,e,r,!1)},o.prototype.write=function(t,e,r,n){if(void 0===e)n="utf8",r=this.length,e=0;else if(void 0===r&&"string"==typeof e)n=e,r=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var i=this.length-e;if((void 0===r||r>i)&&(r=i),t.length>0&&(r<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return g(this,t,e,r);case"utf8":case"utf-8":return m(this,t,e,r);case"ascii":case"latin1":case"binary":return b(this,t,e,r);case"base64":return _(this,t,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return w(this,t,e,r);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var A=4096;function S(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(127&t[i]);return n}function I(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(t[i]);return n}function x(t,e,r){var n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);for(var i="",o=e;o<r;++o)i+=H[t[o]];return i}function B(t,e,r){for(var n=t.slice(e,r),i="",o=0;o<n.length-1;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function T(t,e,r){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}function O(t,e,r,n,i,s){if(!o.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<s)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}function N(t,e,r,n,i,o){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function C(t,e,r,n,i){return e=+e,r>>>=0,i||N(t,0,r,4),F(t,e,r,n,23,4),r+4}function R(t,e,r,n,i){return e=+e,r>>>=0,i||N(t,0,r,8),F(t,e,r,n,52,8),r+8}o.prototype.slice=function(t,e){var r=this.length;(t=~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),(e=void 0===e?r:~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t);var n=this.subarray(t,e);return Object.setPrototypeOf(n,o.prototype),n},o.prototype.readUintLE=o.prototype.readUIntLE=function(t,e,r){t>>>=0,e>>>=0,r||T(t,e,this.length);for(var n=this[t],i=1,o=0;++o<e&&(i*=256);)n+=this[t+o]*i;return n},o.prototype.readUintBE=o.prototype.readUIntBE=function(t,e,r){t>>>=0,e>>>=0,r||T(t,e,this.length);for(var n=this[t+--e],i=1;e>0&&(i*=256);)n+=this[t+--e]*i;return n},o.prototype.readUint8=o.prototype.readUInt8=function(t,e){return t>>>=0,e||T(t,1,this.length),this[t]},o.prototype.readUint16LE=o.prototype.readUInt16LE=function(t,e){return t>>>=0,e||T(t,2,this.length),this[t]|this[t+1]<<8},o.prototype.readUint16BE=o.prototype.readUInt16BE=function(t,e){return t>>>=0,e||T(t,2,this.length),this[t]<<8|this[t+1]},o.prototype.readUint32LE=o.prototype.readUInt32LE=function(t,e){return t>>>=0,e||T(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},o.prototype.readUint32BE=o.prototype.readUInt32BE=function(t,e){return t>>>=0,e||T(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},o.prototype.readIntLE=function(t,e,r){t>>>=0,e>>>=0,r||T(t,e,this.length);for(var n=this[t],i=1,o=0;++o<e&&(i*=256);)n+=this[t+o]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*e)),n},o.prototype.readIntBE=function(t,e,r){t>>>=0,e>>>=0,r||T(t,e,this.length);for(var n=e,i=1,o=this[t+--n];n>0&&(i*=256);)o+=this[t+--n]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*e)),o},o.prototype.readInt8=function(t,e){return t>>>=0,e||T(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},o.prototype.readInt16LE=function(t,e){t>>>=0,e||T(t,2,this.length);var r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},o.prototype.readInt16BE=function(t,e){t>>>=0,e||T(t,2,this.length);var r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},o.prototype.readInt32LE=function(t,e){return t>>>=0,e||T(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},o.prototype.readInt32BE=function(t,e){return t>>>=0,e||T(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},o.prototype.readFloatLE=function(t,e){return t>>>=0,e||T(t,4,this.length),z(this,t,!0,23,4)},o.prototype.readFloatBE=function(t,e){return t>>>=0,e||T(t,4,this.length),z(this,t,!1,23,4)},o.prototype.readDoubleLE=function(t,e){return t>>>=0,e||T(t,8,this.length),z(this,t,!0,52,8)},o.prototype.readDoubleBE=function(t,e){return t>>>=0,e||T(t,8,this.length),z(this,t,!1,52,8)},o.prototype.writeUintLE=o.prototype.writeUIntLE=function(t,e,r,n){(t=+t,e>>>=0,r>>>=0,n)||O(this,t,e,r,Math.pow(2,8*r)-1,0);var i=1,o=0;for(this[e]=255&t;++o<r&&(i*=256);)this[e+o]=t/i&255;return e+r},o.prototype.writeUintBE=o.prototype.writeUIntBE=function(t,e,r,n){(t=+t,e>>>=0,r>>>=0,n)||O(this,t,e,r,Math.pow(2,8*r)-1,0);var i=r-1,o=1;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=t/o&255;return e+r},o.prototype.writeUint8=o.prototype.writeUInt8=function(t,e,r){return t=+t,e>>>=0,r||O(this,t,e,1,255,0),this[e]=255&t,e+1},o.prototype.writeUint16LE=o.prototype.writeUInt16LE=function(t,e,r){return t=+t,e>>>=0,r||O(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},o.prototype.writeUint16BE=o.prototype.writeUInt16BE=function(t,e,r){return t=+t,e>>>=0,r||O(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},o.prototype.writeUint32LE=o.prototype.writeUInt32LE=function(t,e,r){return t=+t,e>>>=0,r||O(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},o.prototype.writeUint32BE=o.prototype.writeUInt32BE=function(t,e,r){return t=+t,e>>>=0,r||O(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},o.prototype.writeIntLE=function(t,e,r,n){if(t=+t,e>>>=0,!n){var i=Math.pow(2,8*r-1);O(this,t,e,r,i-1,-i)}var o=0,s=1,u=0;for(this[e]=255&t;++o<r&&(s*=256);)t<0&&0===u&&0!==this[e+o-1]&&(u=1),this[e+o]=(t/s>>0)-u&255;return e+r},o.prototype.writeIntBE=function(t,e,r,n){if(t=+t,e>>>=0,!n){var i=Math.pow(2,8*r-1);O(this,t,e,r,i-1,-i)}var o=r-1,s=1,u=0;for(this[e+o]=255&t;--o>=0&&(s*=256);)t<0&&0===u&&0!==this[e+o+1]&&(u=1),this[e+o]=(t/s>>0)-u&255;return e+r},o.prototype.writeInt8=function(t,e,r){return t=+t,e>>>=0,r||O(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},o.prototype.writeInt16LE=function(t,e,r){return t=+t,e>>>=0,r||O(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},o.prototype.writeInt16BE=function(t,e,r){return t=+t,e>>>=0,r||O(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},o.prototype.writeInt32LE=function(t,e,r){return t=+t,e>>>=0,r||O(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},o.prototype.writeInt32BE=function(t,e,r){return t=+t,e>>>=0,r||O(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},o.prototype.writeFloatLE=function(t,e,r){return C(this,t,e,!0,r)},o.prototype.writeFloatBE=function(t,e,r){return C(this,t,e,!1,r)},o.prototype.writeDoubleLE=function(t,e,r){return R(this,t,e,!0,r)},o.prototype.writeDoubleBE=function(t,e,r){return R(this,t,e,!1,r)},o.prototype.copy=function(t,e,r,n){if(!o.isBuffer(t))throw new TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-r&&(n=t.length-e+r);var i=n-r;return this===t&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(e,r,n):Uint8Array.prototype.set.call(t,this.subarray(r,n),e),i},o.prototype.fill=function(t,e,r,n){if("string"==typeof t){if("string"==typeof e?(n=e,e=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!o.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(1===t.length){var i=t.charCodeAt(0);("utf8"===n&&i<128||"latin1"===n)&&(t=i)}}else"number"==typeof t?t&=255:"boolean"==typeof t&&(t=Number(t));if(e<0||this.length<e||this.length<r)throw new RangeError("Out of range index");if(r<=e)return this;var s;if(e>>>=0,r=void 0===r?this.length:r>>>0,t||(t=0),"number"==typeof t)for(s=e;s<r;++s)this[s]=t;else{var u=o.isBuffer(t)?t:o.from(t,n),a=u.length;if(0===a)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(s=0;s<r-e;++s)this[s+e]=u[s%a]}return this};var U=/[^+/0-9A-Za-z-_]/g;function j(t,e){var r;e=e||1/0;for(var n=t.length,i=null,o=[],s=0;s<n;++s){if((r=t.charCodeAt(s))>55295&&r<57344){if(!i){if(r>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(s+1===n){(e-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(e-=3)>-1&&o.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((e-=1)<0)break;o.push(r)}else if(r<2048){if((e-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function L(t){return M.toByteArray(function(t){if((t=(t=t.split("=")[0]).trim().replace(U,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function P(t,e,r,n){for(var i=0;i<n&&!(i+r>=e.length||i>=t.length);++i)e[i+r]=t[i];return i}function D(t,e){return t instanceof e||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===e.name}function K(t){return t!=t}var H=function(){for(var t="0123456789abcdef",e=new Array(256),r=0;r<16;++r)for(var n=16*r,i=0;i<16;++i)e[n+i]=t[r]+t[i];return e}()})),wf=p((function(t){!function(e){var r,n=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,i=Math.ceil,o=Math.floor,s="[BigNumber Error] ",u=s+"Number primitive has more than 15 significant digits: ",a=1e14,c=14,f=9007199254740991,l=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],h=1e7,p=1e9;function d(t){var e=0|t;return t>0||t===e?e:e-1}function y(t){for(var e,r,n=1,i=t.length,o=t[0]+"";n<i;){for(e=t[n++]+"",r=c-e.length;r--;e="0"+e);o+=e}for(i=o.length;48===o.charCodeAt(--i););return o.slice(0,i+1||1)}function v(t,e){var r,n,i=t.c,o=e.c,s=t.s,u=e.s,a=t.e,c=e.e;if(!s||!u)return null;if(r=i&&!i[0],n=o&&!o[0],r||n)return r?n?0:-u:s;if(s!=u)return s;if(r=s<0,n=a==c,!i||!o)return n?0:!i^r?1:-1;if(!n)return a>c^r?1:-1;for(u=(a=i.length)<(c=o.length)?a:c,s=0;s<u;s++)if(i[s]!=o[s])return i[s]>o[s]^r?1:-1;return a==c?0:a>c^r?1:-1}function g(t,e,r,n){if(t<e||t>r||t!==o(t))throw Error(s+(n||"Argument")+("number"==typeof t?t<e||t>r?" out of range: ":" not an integer: ":" not a primitive number: ")+String(t))}function m(t){var e=t.c.length-1;return d(t.e/c)==e&&t.c[e]%2!=0}function b(t,e){return(t.length>1?t.charAt(0)+"."+t.slice(1):t)+(e<0?"e":"e+")+e}function _(t,e,r){var n,i;if(e<0){for(i=r+".";++e;i+=r);t=i+t}else if(++e>(n=t.length)){for(i=r,e-=n;--e;i+=r);t+=i}else e<n&&(t=t.slice(0,e)+"."+t.slice(e));return t}(r=function t(e){var r,w,k,E,A,S,I,x,B,T,O=H.prototype={constructor:H,toString:null,valueOf:null},N=new H(1),C=20,R=4,U=-7,j=21,L=-1e7,P=1e7,D=!1,M=1,z=0,F={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"",suffix:""},K="0123456789abcdefghijklmnopqrstuvwxyz";function H(t,e){var r,i,s,a,l,h,p,d,y=this;if(!(y instanceof H))return new H(t,e);if(null==e){if(t&&!0===t._isBigNumber)return y.s=t.s,void(!t.c||t.e>P?y.c=y.e=null:t.e<L?y.c=[y.e=0]:(y.e=t.e,y.c=t.c.slice()));if((h="number"==typeof t)&&0*t==0){if(y.s=1/t<0?(t=-t,-1):1,t===~~t){for(a=0,l=t;l>=10;l/=10,a++);return void(a>P?y.c=y.e=null:(y.e=a,y.c=[t]))}d=String(t)}else{if(!n.test(d=String(t)))return k(y,d,h);y.s=45==d.charCodeAt(0)?(d=d.slice(1),-1):1}(a=d.indexOf("."))>-1&&(d=d.replace(".","")),(l=d.search(/e/i))>0?(a<0&&(a=l),a+=+d.slice(l+1),d=d.substring(0,l)):a<0&&(a=d.length)}else{if(g(e,2,K.length,"Base"),10==e)return q(y=new H(t),C+y.e+1,R);if(d=String(t),h="number"==typeof t){if(0*t!=0)return k(y,d,h,e);if(y.s=1/t<0?(d=d.slice(1),-1):1,H.DEBUG&&d.replace(/^0\.0*|\./,"").length>15)throw Error(u+t)}else y.s=45===d.charCodeAt(0)?(d=d.slice(1),-1):1;for(r=K.slice(0,e),a=l=0,p=d.length;l<p;l++)if(r.indexOf(i=d.charAt(l))<0){if("."==i){if(l>a){a=p;continue}}else if(!s&&(d==d.toUpperCase()&&(d=d.toLowerCase())||d==d.toLowerCase()&&(d=d.toUpperCase()))){s=!0,l=-1,a=0;continue}return k(y,String(t),h,e)}h=!1,(a=(d=w(d,e,10,y.s)).indexOf("."))>-1?d=d.replace(".",""):a=d.length}for(l=0;48===d.charCodeAt(l);l++);for(p=d.length;48===d.charCodeAt(--p););if(d=d.slice(l,++p)){if(p-=l,h&&H.DEBUG&&p>15&&(t>f||t!==o(t)))throw Error(u+y.s*t);if((a=a-l-1)>P)y.c=y.e=null;else if(a<L)y.c=[y.e=0];else{if(y.e=a,y.c=[],l=(a+1)%c,a<0&&(l+=c),l<p){for(l&&y.c.push(+d.slice(0,l)),p-=c;l<p;)y.c.push(+d.slice(l,l+=c));l=c-(d=d.slice(l)).length}else l-=p;for(;l--;d+="0");y.c.push(+d)}}else y.c=[y.e=0]}function G(t,e,r,n){var i,o,s,u,a;if(null==r?r=R:g(r,0,8),!t.c)return t.toString();if(i=t.c[0],s=t.e,null==e)a=y(t.c),a=1==n||2==n&&(s<=U||s>=j)?b(a,s):_(a,s,"0");else if(o=(t=q(new H(t),e,r)).e,u=(a=y(t.c)).length,1==n||2==n&&(e<=o||o<=U)){for(;u<e;a+="0",u++);a=b(a,o)}else if(e-=s,a=_(a,o,"0"),o+1>u){if(--e>0)for(a+=".";e--;a+="0");}else if((e+=o-u)>0)for(o+1==u&&(a+=".");e--;a+="0");return t.s<0&&i?"-"+a:a}function $(t,e){for(var r,n=1,i=new H(t[0]);n<t.length;n++){if(!(r=new H(t[n])).s){i=r;break}e.call(i,r)&&(i=r)}return i}function W(t,e,r){for(var n=1,i=e.length;!e[--i];e.pop());for(i=e[0];i>=10;i/=10,n++);return(r=n+r*c-1)>P?t.c=t.e=null:r<L?t.c=[t.e=0]:(t.e=r,t.c=e),t}function q(t,e,r,n){var s,u,f,h,p,d,y,v=t.c,g=l;if(v){t:{for(s=1,h=v[0];h>=10;h/=10,s++);if((u=e-s)<0)u+=c,f=e,y=(p=v[d=0])/g[s-f-1]%10|0;else if((d=i((u+1)/c))>=v.length){if(!n)break t;for(;v.length<=d;v.push(0));p=y=0,s=1,f=(u%=c)-c+1}else{for(p=h=v[d],s=1;h>=10;h/=10,s++);y=(f=(u%=c)-c+s)<0?0:p/g[s-f-1]%10|0}if(n=n||e<0||null!=v[d+1]||(f<0?p:p%g[s-f-1]),n=r<4?(y||n)&&(0==r||r==(t.s<0?3:2)):y>5||5==y&&(4==r||n||6==r&&(u>0?f>0?p/g[s-f]:0:v[d-1])%10&1||r==(t.s<0?8:7)),e<1||!v[0])return v.length=0,n?(e-=t.e+1,v[0]=g[(c-e%c)%c],t.e=-e||0):v[0]=t.e=0,t;if(0==u?(v.length=d,h=1,d--):(v.length=d+1,h=g[c-u],v[d]=f>0?o(p/g[s-f]%g[f])*h:0),n)for(;;){if(0==d){for(u=1,f=v[0];f>=10;f/=10,u++);for(f=v[0]+=h,h=1;f>=10;f/=10,h++);u!=h&&(t.e++,v[0]==a&&(v[0]=1));break}if(v[d]+=h,v[d]!=a)break;v[d--]=0,h=1}for(u=v.length;0===v[--u];v.pop());}t.e>P?t.c=t.e=null:t.e<L&&(t.c=[t.e=0])}return t}function V(t){var e,r=t.e;return null===r?t.toString():(e=y(t.c),e=r<=U||r>=j?b(e,r):_(e,r,"0"),t.s<0?"-"+e:e)}return H.clone=t,H.ROUND_UP=0,H.ROUND_DOWN=1,H.ROUND_CEIL=2,H.ROUND_FLOOR=3,H.ROUND_HALF_UP=4,H.ROUND_HALF_DOWN=5,H.ROUND_HALF_EVEN=6,H.ROUND_HALF_CEIL=7,H.ROUND_HALF_FLOOR=8,H.EUCLID=9,H.config=H.set=function(t){var e,r;if(null!=t){if("object"!=typeof t)throw Error(s+"Object expected: "+t);if(t.hasOwnProperty(e="DECIMAL_PLACES")&&(g(r=t[e],0,p,e),C=r),t.hasOwnProperty(e="ROUNDING_MODE")&&(g(r=t[e],0,8,e),R=r),t.hasOwnProperty(e="EXPONENTIAL_AT")&&((r=t[e])&&r.pop?(g(r[0],-p,0,e),g(r[1],0,p,e),U=r[0],j=r[1]):(g(r,-p,p,e),U=-(j=r<0?-r:r))),t.hasOwnProperty(e="RANGE"))if((r=t[e])&&r.pop)g(r[0],-p,-1,e),g(r[1],1,p,e),L=r[0],P=r[1];else{if(g(r,-p,p,e),!r)throw Error(s+e+" cannot be zero: "+r);L=-(P=r<0?-r:r)}if(t.hasOwnProperty(e="CRYPTO")){if((r=t[e])!==!!r)throw Error(s+e+" not true or false: "+r);if(r){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw D=!r,Error(s+"crypto unavailable");D=r}else D=r}if(t.hasOwnProperty(e="MODULO_MODE")&&(g(r=t[e],0,9,e),M=r),t.hasOwnProperty(e="POW_PRECISION")&&(g(r=t[e],0,p,e),z=r),t.hasOwnProperty(e="FORMAT")){if("object"!=typeof(r=t[e]))throw Error(s+e+" not an object: "+r);F=r}if(t.hasOwnProperty(e="ALPHABET")){if("string"!=typeof(r=t[e])||/^.?$|[+\-.\s]|(.).*\1/.test(r))throw Error(s+e+" invalid: "+r);K=r}}return{DECIMAL_PLACES:C,ROUNDING_MODE:R,EXPONENTIAL_AT:[U,j],RANGE:[L,P],CRYPTO:D,MODULO_MODE:M,POW_PRECISION:z,FORMAT:F,ALPHABET:K}},H.isBigNumber=function(t){if(!t||!0!==t._isBigNumber)return!1;if(!H.DEBUG)return!0;var e,r,n=t.c,i=t.e,u=t.s;t:if("[object Array]"=={}.toString.call(n)){if((1===u||-1===u)&&i>=-p&&i<=p&&i===o(i)){if(0===n[0]){if(0===i&&1===n.length)return!0;break t}if((e=(i+1)%c)<1&&(e+=c),String(n[0]).length==e){for(e=0;e<n.length;e++)if((r=n[e])<0||r>=a||r!==o(r))break t;if(0!==r)return!0}}}else if(null===n&&null===i&&(null===u||1===u||-1===u))return!0;throw Error(s+"Invalid BigNumber: "+t)},H.maximum=H.max=function(){return $(arguments,O.lt)},H.minimum=H.min=function(){return $(arguments,O.gt)},H.random=(E=9007199254740992,A=Math.random()*E&2097151?function(){return o(Math.random()*E)}:function(){return 8388608*(1073741824*Math.random()|0)+(8388608*Math.random()|0)},function(t){var e,r,n,u,a,f=0,h=[],d=new H(N);if(null==t?t=C:g(t,0,p),u=i(t/c),D)if(crypto.getRandomValues){for(e=crypto.getRandomValues(new Uint32Array(u*=2));f<u;)(a=131072*e[f]+(e[f+1]>>>11))>=9e15?(r=crypto.getRandomValues(new Uint32Array(2)),e[f]=r[0],e[f+1]=r[1]):(h.push(a%1e14),f+=2);f=u/2}else{if(!crypto.randomBytes)throw D=!1,Error(s+"crypto unavailable");for(e=crypto.randomBytes(u*=7);f<u;)(a=281474976710656*(31&e[f])+1099511627776*e[f+1]+4294967296*e[f+2]+16777216*e[f+3]+(e[f+4]<<16)+(e[f+5]<<8)+e[f+6])>=9e15?crypto.randomBytes(7).copy(e,f):(h.push(a%1e14),f+=7);f=u/7}if(!D)for(;f<u;)(a=A())<9e15&&(h[f++]=a%1e14);for(u=h[--f],t%=c,u&&t&&(a=l[c-t],h[f]=o(u/a)*a);0===h[f];h.pop(),f--);if(f<0)h=[n=0];else{for(n=-1;0===h[0];h.splice(0,1),n-=c);for(f=1,a=h[0];a>=10;a/=10,f++);f<c&&(n-=c-f)}return d.e=n,d.c=h,d}),H.sum=function(){for(var t=1,e=arguments,r=new H(e[0]);t<e.length;)r=r.plus(e[t++]);return r},w=function(){var t="0123456789";function e(t,e,r,n){for(var i,o,s=[0],u=0,a=t.length;u<a;){for(o=s.length;o--;s[o]*=e);for(s[0]+=n.indexOf(t.charAt(u++)),i=0;i<s.length;i++)s[i]>r-1&&(null==s[i+1]&&(s[i+1]=0),s[i+1]+=s[i]/r|0,s[i]%=r)}return s.reverse()}return function(n,i,o,s,u){var a,c,f,l,h,p,d,v,g=n.indexOf("."),m=C,b=R;for(g>=0&&(l=z,z=0,n=n.replace(".",""),p=(v=new H(i)).pow(n.length-g),z=l,v.c=e(_(y(p.c),p.e,"0"),10,o,t),v.e=v.c.length),f=l=(d=e(n,i,o,u?(a=K,t):(a=t,K))).length;0==d[--l];d.pop());if(!d[0])return a.charAt(0);if(g<0?--f:(p.c=d,p.e=f,p.s=s,d=(p=r(p,v,m,b,o)).c,h=p.r,f=p.e),g=d[c=f+m+1],l=o/2,h=h||c<0||null!=d[c+1],h=b<4?(null!=g||h)&&(0==b||b==(p.s<0?3:2)):g>l||g==l&&(4==b||h||6==b&&1&d[c-1]||b==(p.s<0?8:7)),c<1||!d[0])n=h?_(a.charAt(1),-m,a.charAt(0)):a.charAt(0);else{if(d.length=c,h)for(--o;++d[--c]>o;)d[c]=0,c||(++f,d=[1].concat(d));for(l=d.length;!d[--l];);for(g=0,n="";g<=l;n+=a.charAt(d[g++]));n=_(n,f,a.charAt(0))}return n}}(),r=function(){function t(t,e,r){var n,i,o,s,u=0,a=t.length,c=e%h,f=e/h|0;for(t=t.slice();a--;)u=((i=c*(o=t[a]%h)+(n=f*o+(s=t[a]/h|0)*c)%h*h+u)/r|0)+(n/h|0)+f*s,t[a]=i%r;return u&&(t=[u].concat(t)),t}function e(t,e,r,n){var i,o;if(r!=n)o=r>n?1:-1;else for(i=o=0;i<r;i++)if(t[i]!=e[i]){o=t[i]>e[i]?1:-1;break}return o}function r(t,e,r,n){for(var i=0;r--;)t[r]-=i,i=t[r]<e[r]?1:0,t[r]=i*n+t[r]-e[r];for(;!t[0]&&t.length>1;t.splice(0,1));}return function(n,i,s,u,f){var l,h,p,y,v,g,m,b,_,w,k,E,A,S,I,x,B,T=n.s==i.s?1:-1,O=n.c,N=i.c;if(!(O&&O[0]&&N&&N[0]))return new H(n.s&&i.s&&(O?!N||O[0]!=N[0]:N)?O&&0==O[0]||!N?0*T:T/0:NaN);for(_=(b=new H(T)).c=[],T=s+(h=n.e-i.e)+1,f||(f=a,h=d(n.e/c)-d(i.e/c),T=T/c|0),p=0;N[p]==(O[p]||0);p++);if(N[p]>(O[p]||0)&&h--,T<0)_.push(1),y=!0;else{for(S=O.length,x=N.length,p=0,T+=2,(v=o(f/(N[0]+1)))>1&&(N=t(N,v,f),O=t(O,v,f),x=N.length,S=O.length),A=x,k=(w=O.slice(0,x)).length;k<x;w[k++]=0);B=N.slice(),B=[0].concat(B),I=N[0],N[1]>=f/2&&I++;do{if(v=0,(l=e(N,w,x,k))<0){if(E=w[0],x!=k&&(E=E*f+(w[1]||0)),(v=o(E/I))>1)for(v>=f&&(v=f-1),m=(g=t(N,v,f)).length,k=w.length;1==e(g,w,m,k);)v--,r(g,x<m?B:N,m,f),m=g.length,l=1;else 0==v&&(l=v=1),m=(g=N.slice()).length;if(m<k&&(g=[0].concat(g)),r(w,g,k,f),k=w.length,-1==l)for(;e(N,w,x,k)<1;)v++,r(w,x<k?B:N,k,f),k=w.length}else 0===l&&(v++,w=[0]);_[p++]=v,w[0]?w[k++]=O[A]||0:(w=[O[A]],k=1)}while((A++<S||null!=w[0])&&T--);y=null!=w[0],_[0]||_.splice(0,1)}if(f==a){for(p=1,T=_[0];T>=10;T/=10,p++);q(b,s+(b.e=p+h*c-1)+1,u,y)}else b.e=h,b.r=+y;return b}}(),S=/^(-?)0([xbo])(?=\w[\w.]*$)/i,I=/^([^.]+)\.$/,x=/^\.([^.]+)$/,B=/^-?(Infinity|NaN)$/,T=/^\s*\+(?=[\w.])|^\s+|\s+$/g,k=function(t,e,r,n){var i,o=r?e:e.replace(T,"");if(B.test(o))t.s=isNaN(o)?null:o<0?-1:1;else{if(!r&&(o=o.replace(S,(function(t,e,r){return i="x"==(r=r.toLowerCase())?16:"b"==r?2:8,n&&n!=i?t:e})),n&&(i=n,o=o.replace(I,"$1").replace(x,"0.$1")),e!=o))return new H(o,i);if(H.DEBUG)throw Error(s+"Not a"+(n?" base "+n:"")+" number: "+e);t.s=null}t.c=t.e=null},O.absoluteValue=O.abs=function(){var t=new H(this);return t.s<0&&(t.s=1),t},O.comparedTo=function(t,e){return v(this,new H(t,e))},O.decimalPlaces=O.dp=function(t,e){var r,n,i,o=this;if(null!=t)return g(t,0,p),null==e?e=R:g(e,0,8),q(new H(o),t+o.e+1,e);if(!(r=o.c))return null;if(n=((i=r.length-1)-d(this.e/c))*c,i=r[i])for(;i%10==0;i/=10,n--);return n<0&&(n=0),n},O.dividedBy=O.div=function(t,e){return r(this,new H(t,e),C,R)},O.dividedToIntegerBy=O.idiv=function(t,e){return r(this,new H(t,e),0,1)},O.exponentiatedBy=O.pow=function(t,e){var r,n,u,a,f,l,h,p,d=this;if((t=new H(t)).c&&!t.isInteger())throw Error(s+"Exponent not an integer: "+V(t));if(null!=e&&(e=new H(e)),f=t.e>14,!d.c||!d.c[0]||1==d.c[0]&&!d.e&&1==d.c.length||!t.c||!t.c[0])return p=new H(Math.pow(+V(d),f?2-m(t):+V(t))),e?p.mod(e):p;if(l=t.s<0,e){if(e.c?!e.c[0]:!e.s)return new H(NaN);(n=!l&&d.isInteger()&&e.isInteger())&&(d=d.mod(e))}else{if(t.e>9&&(d.e>0||d.e<-1||(0==d.e?d.c[0]>1||f&&d.c[1]>=24e7:d.c[0]<8e13||f&&d.c[0]<=9999975e7)))return a=d.s<0&&m(t)?-0:0,d.e>-1&&(a=1/a),new H(l?1/a:a);z&&(a=i(z/c+2))}for(f?(r=new H(.5),l&&(t.s=1),h=m(t)):h=(u=Math.abs(+V(t)))%2,p=new H(N);;){if(h){if(!(p=p.times(d)).c)break;a?p.c.length>a&&(p.c.length=a):n&&(p=p.mod(e))}if(u){if(0===(u=o(u/2)))break;h=u%2}else if(q(t=t.times(r),t.e+1,1),t.e>14)h=m(t);else{if(0===(u=+V(t)))break;h=u%2}d=d.times(d),a?d.c&&d.c.length>a&&(d.c.length=a):n&&(d=d.mod(e))}return n?p:(l&&(p=N.div(p)),e?p.mod(e):a?q(p,z,R,undefined):p)},O.integerValue=function(t){var e=new H(this);return null==t?t=R:g(t,0,8),q(e,e.e+1,t)},O.isEqualTo=O.eq=function(t,e){return 0===v(this,new H(t,e))},O.isFinite=function(){return!!this.c},O.isGreaterThan=O.gt=function(t,e){return v(this,new H(t,e))>0},O.isGreaterThanOrEqualTo=O.gte=function(t,e){return 1===(e=v(this,new H(t,e)))||0===e},O.isInteger=function(){return!!this.c&&d(this.e/c)>this.c.length-2},O.isLessThan=O.lt=function(t,e){return v(this,new H(t,e))<0},O.isLessThanOrEqualTo=O.lte=function(t,e){return-1===(e=v(this,new H(t,e)))||0===e},O.isNaN=function(){return!this.s},O.isNegative=function(){return this.s<0},O.isPositive=function(){return this.s>0},O.isZero=function(){return!!this.c&&0==this.c[0]},O.minus=function(t,e){var r,n,i,o,s=this,u=s.s;if(e=(t=new H(t,e)).s,!u||!e)return new H(NaN);if(u!=e)return t.s=-e,s.plus(t);var f=s.e/c,l=t.e/c,h=s.c,p=t.c;if(!f||!l){if(!h||!p)return h?(t.s=-e,t):new H(p?s:NaN);if(!h[0]||!p[0])return p[0]?(t.s=-e,t):new H(h[0]?s:3==R?-0:0)}if(f=d(f),l=d(l),h=h.slice(),u=f-l){for((o=u<0)?(u=-u,i=h):(l=f,i=p),i.reverse(),e=u;e--;i.push(0));i.reverse()}else for(n=(o=(u=h.length)<(e=p.length))?u:e,u=e=0;e<n;e++)if(h[e]!=p[e]){o=h[e]<p[e];break}if(o&&(i=h,h=p,p=i,t.s=-t.s),(e=(n=p.length)-(r=h.length))>0)for(;e--;h[r++]=0);for(e=a-1;n>u;){if(h[--n]<p[n]){for(r=n;r&&!h[--r];h[r]=e);--h[r],h[n]+=a}h[n]-=p[n]}for(;0==h[0];h.splice(0,1),--l);return h[0]?W(t,h,l):(t.s=3==R?-1:1,t.c=[t.e=0],t)},O.modulo=O.mod=function(t,e){var n,i,o=this;return t=new H(t,e),!o.c||!t.s||t.c&&!t.c[0]?new H(NaN):!t.c||o.c&&!o.c[0]?new H(o):(9==M?(i=t.s,t.s=1,n=r(o,t,0,3),t.s=i,n.s*=i):n=r(o,t,0,M),(t=o.minus(n.times(t))).c[0]||1!=M||(t.s=o.s),t)},O.multipliedBy=O.times=function(t,e){var r,n,i,o,s,u,f,l,p,y,v,g,m,b,_,w=this,k=w.c,E=(t=new H(t,e)).c;if(!(k&&E&&k[0]&&E[0]))return!w.s||!t.s||k&&!k[0]&&!E||E&&!E[0]&&!k?t.c=t.e=t.s=null:(t.s*=w.s,k&&E?(t.c=[0],t.e=0):t.c=t.e=null),t;for(n=d(w.e/c)+d(t.e/c),t.s*=w.s,(f=k.length)<(y=E.length)&&(m=k,k=E,E=m,i=f,f=y,y=i),i=f+y,m=[];i--;m.push(0));for(b=a,_=h,i=y;--i>=0;){for(r=0,v=E[i]%_,g=E[i]/_|0,o=i+(s=f);o>i;)r=((l=v*(l=k[--s]%_)+(u=g*l+(p=k[s]/_|0)*v)%_*_+m[o]+r)/b|0)+(u/_|0)+g*p,m[o--]=l%b;m[o]=r}return r?++n:m.splice(0,1),W(t,m,n)},O.negated=function(){var t=new H(this);return t.s=-t.s||null,t},O.plus=function(t,e){var r,n=this,i=n.s;if(e=(t=new H(t,e)).s,!i||!e)return new H(NaN);if(i!=e)return t.s=-e,n.minus(t);var o=n.e/c,s=t.e/c,u=n.c,f=t.c;if(!o||!s){if(!u||!f)return new H(i/0);if(!u[0]||!f[0])return f[0]?t:new H(u[0]?n:0*i)}if(o=d(o),s=d(s),u=u.slice(),i=o-s){for(i>0?(s=o,r=f):(i=-i,r=u),r.reverse();i--;r.push(0));r.reverse()}for((i=u.length)-(e=f.length)<0&&(r=f,f=u,u=r,e=i),i=0;e;)i=(u[--e]=u[e]+f[e]+i)/a|0,u[e]=a===u[e]?0:u[e]%a;return i&&(u=[i].concat(u),++s),W(t,u,s)},O.precision=O.sd=function(t,e){var r,n,i,o=this;if(null!=t&&t!==!!t)return g(t,1,p),null==e?e=R:g(e,0,8),q(new H(o),t,e);if(!(r=o.c))return null;if(n=(i=r.length-1)*c+1,i=r[i]){for(;i%10==0;i/=10,n--);for(i=r[0];i>=10;i/=10,n++);}return t&&o.e+1>n&&(n=o.e+1),n},O.shiftedBy=function(t){return g(t,-9007199254740991,f),this.times("1e"+t)},O.squareRoot=O.sqrt=function(){var t,e,n,i,o,s=this,u=s.c,a=s.s,c=s.e,f=C+4,l=new H("0.5");if(1!==a||!u||!u[0])return new H(!a||a<0&&(!u||u[0])?NaN:u?s:1/0);if(0==(a=Math.sqrt(+V(s)))||a==1/0?(((e=y(u)).length+c)%2==0&&(e+="0"),a=Math.sqrt(+e),c=d((c+1)/2)-(c<0||c%2),n=new H(e=a==1/0?"5e"+c:(e=a.toExponential()).slice(0,e.indexOf("e")+1)+c)):n=new H(a+""),n.c[0])for((a=(c=n.e)+f)<3&&(a=0);;)if(o=n,n=l.times(o.plus(r(s,o,f,1))),y(o.c).slice(0,a)===(e=y(n.c)).slice(0,a)){if(n.e<c&&--a,"9999"!=(e=e.slice(a-3,a+1))&&(i||"4999"!=e)){+e&&(+e.slice(1)||"5"!=e.charAt(0))||(q(n,n.e+C+2,1),t=!n.times(n).eq(s));break}if(!i&&(q(o,o.e+C+2,0),o.times(o).eq(s))){n=o;break}f+=4,a+=4,i=1}return q(n,n.e+C+1,R,t)},O.toExponential=function(t,e){return null!=t&&(g(t,0,p),t++),G(this,t,e,1)},O.toFixed=function(t,e){return null!=t&&(g(t,0,p),t=t+this.e+1),G(this,t,e)},O.toFormat=function(t,e,r){var n,i=this;if(null==r)null!=t&&e&&"object"==typeof e?(r=e,e=null):t&&"object"==typeof t?(r=t,t=e=null):r=F;else if("object"!=typeof r)throw Error(s+"Argument not an object: "+r);if(n=i.toFixed(t,e),i.c){var o,u=n.split("."),a=+r.groupSize,c=+r.secondaryGroupSize,f=r.groupSeparator||"",l=u[0],h=u[1],p=i.s<0,d=p?l.slice(1):l,y=d.length;if(c&&(o=a,a=c,c=o,y-=o),a>0&&y>0){for(o=y%a||a,l=d.substr(0,o);o<y;o+=a)l+=f+d.substr(o,a);c>0&&(l+=f+d.slice(o)),p&&(l="-"+l)}n=h?l+(r.decimalSeparator||"")+((c=+r.fractionGroupSize)?h.replace(new RegExp("\\d{"+c+"}\\B","g"),"$&"+(r.fractionGroupSeparator||"")):h):l}return(r.prefix||"")+n+(r.suffix||"")},O.toFraction=function(t){var e,n,i,o,u,a,f,h,p,d,v,g,m=this,b=m.c;if(null!=t&&(!(f=new H(t)).isInteger()&&(f.c||1!==f.s)||f.lt(N)))throw Error(s+"Argument "+(f.isInteger()?"out of range: ":"not an integer: ")+V(f));if(!b)return new H(m);for(e=new H(N),p=n=new H(N),i=h=new H(N),g=y(b),u=e.e=g.length-m.e-1,e.c[0]=l[(a=u%c)<0?c+a:a],t=!t||f.comparedTo(e)>0?u>0?e:p:f,a=P,P=1/0,f=new H(g),h.c[0]=0;d=r(f,e,0,1),1!=(o=n.plus(d.times(i))).comparedTo(t);)n=i,i=o,p=h.plus(d.times(o=p)),h=o,e=f.minus(d.times(o=e)),f=o;return o=r(t.minus(n),i,0,1),h=h.plus(o.times(p)),n=n.plus(o.times(i)),h.s=p.s=m.s,v=r(p,i,u*=2,R).minus(m).abs().comparedTo(r(h,n,u,R).minus(m).abs())<1?[p,i]:[h,n],P=a,v},O.toNumber=function(){return+V(this)},O.toPrecision=function(t,e){return null!=t&&g(t,1,p),G(this,t,e,2)},O.toString=function(t){var e,r=this,n=r.s,i=r.e;return null===i?n?(e="Infinity",n<0&&(e="-"+e)):e="NaN":(null==t?e=i<=U||i>=j?b(y(r.c),i):_(y(r.c),i,"0"):10===t?e=_(y((r=q(new H(r),C+i+1,R)).c),r.e,"0"):(g(t,2,K.length,"Base"),e=w(_(y(r.c),i,"0"),10,t,n,!0)),n<0&&r.c[0]&&(e="-"+e)),e},O.valueOf=O.toJSON=function(){return V(this)},O._isBigNumber=!0,null!=e&&H.set(e),H}()).default=r.BigNumber=r,t.exports?t.exports=r:(e||(e="undefined"!=typeof self&&self?self:window),e.BigNumber=r)}(f)}));const kf=wf.BigNumber;var Ef={MT:{POS_INT:0,NEG_INT:1,BYTE_STRING:2,UTF8_STRING:3,ARRAY:4,MAP:5,TAG:6,SIMPLE_FLOAT:7},TAG:{DATE_STRING:0,DATE_EPOCH:1,POS_BIGINT:2,NEG_BIGINT:3,DECIMAL_FRAC:4,BIGFLOAT:5,BASE64URL_EXPECTED:21,BASE64_EXPECTED:22,BASE16_EXPECTED:23,CBOR:24,URI:32,BASE64URL:33,BASE64:34,REGEXP:35,MIME:36},NUMBYTES:{ZERO:0,ONE:24,TWO:25,FOUR:26,EIGHT:27,INDEFINITE:31},SIMPLE:{FALSE:20,TRUE:21,NULL:22,UNDEFINED:23},SYMS:{NULL:Symbol("null"),UNDEFINED:Symbol("undef"),PARENT:Symbol("parent"),BREAK:Symbol("break"),STREAM:Symbol("stream")},SHIFT32:Math.pow(2,32),SHIFT16:Math.pow(2,16),MAX_SAFE_HIGH:2097151,NEG_ONE:new kf(-1),TEN:new kf(10),TWO:new kf(2),PARENT:{ARRAY:0,OBJECT:1,MAP:2,TAG:3,BYTE_STRING:4,UTF8_STRING:5}},Af=p((function(t,e){const{Buffer:r}=_f,n=wf.BigNumber,i=Ef.SHIFT32,o=Ef.SHIFT16;e.parseHalf=function(t){var e,r,n;return n=128&t[0]?-1:1,e=(124&t[0])>>2,r=(3&t[0])<<8|t[1],e?31===e?n*(r?NaN:Infinity):n*Math.pow(2,e-25)*(1024+r):5.960464477539063e-8*n*r},e.arrayBufferToBignumber=function(t){const e=t.byteLength;let r="";for(let n=0;n<e;n++)r+=(i=t[n])<16?"0"+i.toString(16):i.toString(16);var i;return new n(r,16)},e.buildMap=t=>{const e=new Map,r=Object.keys(t),n=r.length;for(let i=0;i<n;i++)e.set(r[i],t[r[i]]);return e},e.buildInt32=(t,e)=>t*o+e,e.buildInt64=(t,r,o,s)=>{const u=e.buildInt32(t,r),a=e.buildInt32(o,s);return u>2097151?new n(u).times(i).plus(a):u*i+a},e.writeHalf=function(t,e){const n=r.allocUnsafe(4);n.writeFloatBE(e,0);const i=n.readUInt32BE(0);if(0!=(8191&i))return!1;var o=i>>16&32768;const s=i>>23&255,u=8388607&i;if(s>=113&&s<=142)o+=(s-112<<10)+(u>>13);else{if(!(s>=103&&s<113))return!1;if(u&(1<<126-s)-1)return!1;o+=u+8388608>>126-s}return t.writeUInt16BE(o,0),!0},e.keySorter=function(t,e){var r=t[0].byteLength,n=e[0].byteLength;return r>n?1:n>r?-1:t[0].compare(e[0])},e.isNegativeZero=t=>0===t&&1/t<0,e.nextPowerOf2=t=>{let e=0;if(t&&!(t&t-1))return t;for(;0!==t;)t>>=1,e+=1;return 1<<e}}));const Sf=Ef.MT,If=Ef.SIMPLE,xf=Ef.SYMS;class Bf{constructor(t){if("number"!=typeof t)throw new Error("Invalid Simple type: "+typeof t);if(t<0||t>255||(0|t)!==t)throw new Error("value must be a small positive integer: "+t);this.value=t}toString(){return"simple("+this.value+")"}inspect(){return"simple("+this.value+")"}encodeCBOR(t){return t._pushInt(this.value,Sf.SIMPLE_FLOAT)}static isSimple(t){return t instanceof Bf}static decode(t,e){switch(null==e&&(e=!0),t){case If.FALSE:return!1;case If.TRUE:return!0;case If.NULL:return e?null:xf.NULL;case If.UNDEFINED:return e?void 0:xf.UNDEFINED;case-1:if(!e)throw new Error("Invalid BREAK");return xf.BREAK;default:return new Bf(t)}}}var Tf=Bf;class Of{constructor(t,e,r){if(this.tag=t,this.value=e,this.err=r,"number"!=typeof this.tag)throw new Error("Invalid tag type ("+typeof this.tag+")");if(this.tag<0||(0|this.tag)!==this.tag)throw new Error("Tag must be a positive integer: "+this.tag)}toString(){return`${this.tag}(${JSON.stringify(this.value)})`}encodeCBOR(t){return t._pushTag(this.tag),t.pushAny(this.value)}convert(t){var e,r;if("function"!=typeof(r=null!=t?t[this.tag]:void 0)&&"function"!=typeof(r=Of["_tag"+this.tag]))return this;try{return r.call(Of,this.value)}catch(t){return e=t,this.err=e,this}}}var Nf=Of;const Cf=self.location?self.location.protocol+"//"+self.location.host:"",Rf=self.URL;var Uf={URLWithLegacySupport:class{constructor(t="",e=Cf){this.super=new Rf(t,e),this.path=this.pathname+this.search,this.auth=this.username&&this.password?this.username+":"+this.password:null,this.query=this.search&&this.search.startsWith("?")?this.search.slice(1):null}get hash(){return this.super.hash}get host(){return this.super.host}get hostname(){return this.super.hostname}get href(){return this.super.href}get origin(){return this.super.origin}get password(){return this.super.password}get pathname(){return this.super.pathname}get port(){return this.super.port}get protocol(){return this.super.protocol}get search(){return this.super.search}get searchParams(){return this.super.searchParams}get username(){return this.super.username}set hash(t){this.super.hash=t}set host(t){this.super.host=t}set hostname(t){this.super.hostname=t}set href(t){this.super.href=t}set origin(t){this.super.origin=t}set password(t){this.super.password=t}set pathname(t){this.super.pathname=t}set port(t){this.super.port=t}set protocol(t){this.super.protocol=t}set search(t){this.super.search=t}set searchParams(t){this.super.searchParams=t}set username(t){this.super.username=t}createObjectURL(t){return this.super.createObjectURL(t)}revokeObjectURL(t){this.super.revokeObjectURL(t)}toJSON(){return this.super.toJSON()}toString(){return this.super.toString()}format(){return this.toString()}},URLSearchParams:self.URLSearchParams,defaultBase:Cf,format:function(t){if("string"==typeof t){return new Rf(t).toString()}if(!(t instanceof Rf)){const e=t.username&&t.password?`${t.username}:${t.password}@`:"",r=t.auth?t.auth+"@":"",n=t.port?":"+t.port:"",i=t.protocol?t.protocol+"//":"",o=t.host||"",s=t.hostname||"",u=t.search||(t.query?"?"+t.query:""),a=t.hash||"",c=t.pathname||"";return`${i}${e||r}${o||s+n}${t.path||c+u}${a}`}}};const{URLWithLegacySupport:jf,format:Lf}=Uf;const{URLWithLegacySupport:Pf,format:Df,URLSearchParams:Mf,defaultBase:zf}=Uf;var Ff={URL:Pf,URLSearchParams:Mf,format:Df,relative:(t,e={},r={},n)=>{let i,o=e.protocol?e.protocol.replace(":",""):"http";o=(r[o]||n||o)+":";try{i=new jf(t)}catch(t){i={}}const s=Object.assign({},e,{protocol:o||i.protocol,host:e.host||i.host});return new jf(t,Lf(s)).toString()},defaultBase:zf};const{Buffer:Kf}=_f,Hf=wf.BigNumber,{URL:Gf}=Ff;class $f{constructor(t){!(t=t||{}).size||t.size<65536?t.size=65536:t.size=Af.nextPowerOf2(t.size),this._heap=new ArrayBuffer(t.size),this._heap8=new Uint8Array(this._heap),this._buffer=Kf.from(this._heap),this._reset(),this._knownTags=Object.assign({0:t=>new Date(t),1:t=>new Date(1e3*t),2:t=>Af.arrayBufferToBignumber(t),3:t=>Ef.NEG_ONE.minus(Af.arrayBufferToBignumber(t)),4:t=>Ef.TEN.pow(t[0]).times(t[1]),5:t=>Ef.TWO.pow(t[0]).times(t[1]),32:t=>new Gf(t),35:t=>new RegExp(t)},t.tags),this.parser=function(t,e,r){"use asm";var n=new t.Uint8Array(r),i=e.pushInt,o=e.pushInt32,s=e.pushInt32Neg,u=e.pushInt64,a=e.pushInt64Neg,c=e.pushFloat,f=e.pushFloatSingle,l=e.pushFloatDouble,h=e.pushTrue,p=e.pushFalse,d=e.pushUndefined,y=e.pushNull,v=e.pushInfinity,g=e.pushInfinityNeg,m=e.pushNaN,b=e.pushNaNNeg,_=e.pushArrayStart,w=e.pushArrayStartFixed,k=e.pushArrayStartFixed32,E=e.pushArrayStartFixed64,A=e.pushObjectStart,S=e.pushObjectStartFixed,I=e.pushObjectStartFixed32,x=e.pushObjectStartFixed64,B=e.pushByteString,T=e.pushByteStringStart,O=e.pushUtf8String,N=e.pushUtf8StringStart,C=e.pushSimpleUnassigned,R=e.pushTagStart,U=e.pushTagStart4,j=e.pushTagStart8,L=e.pushTagUnassigned,P=e.pushBreak,D=t.Math.pow,M=0,z=0,F=0;function K(t){t=t|0;M=0;z=t;while((M|0)<(z|0)){F=Jt[n[M]&255](n[M]|0)|0;if((F|0)>0){break}}return F|0}function H(t){t=t|0;if(((M|0)+(t|0)|0)<(z|0)){return 0}return 1}function G(t){t=t|0;return n[t|0]<<8|n[t+1|0]|0}function $(t){t=t|0;return n[t|0]<<24|n[t+1|0]<<16|n[t+2|0]<<8|n[t+3|0]|0}function W(t){t=t|0;i(t|0);M=M+1|0;return 0}function q(t){t=t|0;if(H(1)|0){return 1}i(n[M+1|0]|0);M=M+2|0;return 0}function V(t){t=t|0;if(H(2)|0){return 1}i(G(M+1|0)|0);M=M+3|0;return 0}function Y(t){t=t|0;if(H(4)|0){return 1}o(G(M+1|0)|0,G(M+3|0)|0);M=M+5|0;return 0}function J(t){t=t|0;if(H(8)|0){return 1}u(G(M+1|0)|0,G(M+3|0)|0,G(M+5|0)|0,G(M+7|0)|0);M=M+9|0;return 0}function Z(t){t=t|0;i(-1-(t-32|0)|0);M=M+1|0;return 0}function X(t){t=t|0;if(H(1)|0){return 1}i(-1-(n[M+1|0]|0)|0);M=M+2|0;return 0}function Q(t){t=t|0;var e=0;if(H(2)|0){return 1}e=G(M+1|0)|0;i(-1-(e|0)|0);M=M+3|0;return 0}function tt(t){t=t|0;if(H(4)|0){return 1}s(G(M+1|0)|0,G(M+3|0)|0);M=M+5|0;return 0}function et(t){t=t|0;if(H(8)|0){return 1}a(G(M+1|0)|0,G(M+3|0)|0,G(M+5|0)|0,G(M+7|0)|0);M=M+9|0;return 0}function rt(t){t=t|0;var e=0;var r=0;var n=0;n=t-64|0;if(H(n|0)|0){return 1}e=M+1|0;r=(M+1|0)+(n|0)|0;B(e|0,r|0);M=r|0;return 0}function nt(t){t=t|0;var e=0;var r=0;var i=0;if(H(1)|0){return 1}i=n[M+1|0]|0;e=M+2|0;r=(M+2|0)+(i|0)|0;if(H(i+1|0)|0){return 1}B(e|0,r|0);M=r|0;return 0}function it(t){t=t|0;var e=0;var r=0;var n=0;if(H(2)|0){return 1}n=G(M+1|0)|0;e=M+3|0;r=(M+3|0)+(n|0)|0;if(H(n+2|0)|0){return 1}B(e|0,r|0);M=r|0;return 0}function ot(t){t=t|0;var e=0;var r=0;var n=0;if(H(4)|0){return 1}n=$(M+1|0)|0;e=M+5|0;r=(M+5|0)+(n|0)|0;if(H(n+4|0)|0){return 1}B(e|0,r|0);M=r|0;return 0}function st(t){t=t|0;return 1}function ut(t){t=t|0;T();M=M+1|0;return 0}function at(t){t=t|0;var e=0;var r=0;var n=0;n=t-96|0;if(H(n|0)|0){return 1}e=M+1|0;r=(M+1|0)+(n|0)|0;O(e|0,r|0);M=r|0;return 0}function ct(t){t=t|0;var e=0;var r=0;var i=0;if(H(1)|0){return 1}i=n[M+1|0]|0;e=M+2|0;r=(M+2|0)+(i|0)|0;if(H(i+1|0)|0){return 1}O(e|0,r|0);M=r|0;return 0}function ft(t){t=t|0;var e=0;var r=0;var n=0;if(H(2)|0){return 1}n=G(M+1|0)|0;e=M+3|0;r=(M+3|0)+(n|0)|0;if(H(n+2|0)|0){return 1}O(e|0,r|0);M=r|0;return 0}function lt(t){t=t|0;var e=0;var r=0;var n=0;if(H(4)|0){return 1}n=$(M+1|0)|0;e=M+5|0;r=(M+5|0)+(n|0)|0;if(H(n+4|0)|0){return 1}O(e|0,r|0);M=r|0;return 0}function ht(t){t=t|0;return 1}function pt(t){t=t|0;N();M=M+1|0;return 0}function dt(t){t=t|0;w(t-128|0);M=M+1|0;return 0}function yt(t){t=t|0;if(H(1)|0){return 1}w(n[M+1|0]|0);M=M+2|0;return 0}function vt(t){t=t|0;if(H(2)|0){return 1}w(G(M+1|0)|0);M=M+3|0;return 0}function gt(t){t=t|0;if(H(4)|0){return 1}k(G(M+1|0)|0,G(M+3|0)|0);M=M+5|0;return 0}function mt(t){t=t|0;if(H(8)|0){return 1}E(G(M+1|0)|0,G(M+3|0)|0,G(M+5|0)|0,G(M+7|0)|0);M=M+9|0;return 0}function bt(t){t=t|0;_();M=M+1|0;return 0}function _t(t){t=t|0;var e=0;e=t-160|0;if(H(e|0)|0){return 1}S(e|0);M=M+1|0;return 0}function wt(t){t=t|0;if(H(1)|0){return 1}S(n[M+1|0]|0);M=M+2|0;return 0}function kt(t){t=t|0;if(H(2)|0){return 1}S(G(M+1|0)|0);M=M+3|0;return 0}function Et(t){t=t|0;if(H(4)|0){return 1}I(G(M+1|0)|0,G(M+3|0)|0);M=M+5|0;return 0}function At(t){t=t|0;if(H(8)|0){return 1}x(G(M+1|0)|0,G(M+3|0)|0,G(M+5|0)|0,G(M+7|0)|0);M=M+9|0;return 0}function St(t){t=t|0;A();M=M+1|0;return 0}function It(t){t=t|0;R(t-192|0|0);M=M+1|0;return 0}function xt(t){t|0;R(t|0);M=M+1|0;return 0}function Bt(t){t|0;R(t|0);M=M+1|0;return 0}function Tt(t){t|0;R(t|0);M=M+1|0;return 0}function Ot(t){t|0;R(t|0);M=M+1|0;return 0}function Nt(t){t=t|0;R(t-192|0|0);M=M+1|0;return 0}function Ct(t){t|0;R(t|0);M=M+1|0;return 0}function Rt(t){t|0;R(t|0);M=M+1|0;return 0}function Ut(t){t|0;R(t|0);M=M+1|0;return 0}function jt(t){t=t|0;if(H(1)|0){return 1}R(n[M+1|0]|0);M=M+2|0;return 0}function Lt(t){t=t|0;if(H(2)|0){return 1}R(G(M+1|0)|0);M=M+3|0;return 0}function Pt(t){t=t|0;if(H(4)|0){return 1}U(G(M+1|0)|0,G(M+3|0)|0);M=M+5|0;return 0}function Dt(t){t=t|0;if(H(8)|0){return 1}j(G(M+1|0)|0,G(M+3|0)|0,G(M+5|0)|0,G(M+7|0)|0);M=M+9|0;return 0}function Mt(t){t=t|0;C((t|0)-224|0);M=M+1|0;return 0}function zt(t){t=t|0;p();M=M+1|0;return 0}function Ft(t){t=t|0;h();M=M+1|0;return 0}function Kt(t){t=t|0;y();M=M+1|0;return 0}function Ht(t){t=t|0;d();M=M+1|0;return 0}function Gt(t){t=t|0;if(H(1)|0){return 1}C(n[M+1|0]|0);M=M+2|0;return 0}function $t(t){t=t|0;var e=0;var r=0;var i=1.0;var o=0.0;var s=0.0;var u=0.0;if(H(2)|0){return 1}e=n[M+1|0]|0;r=n[M+2|0]|0;if((e|0)&0x80){i=-1.0}o=+(((e|0)&0x7C)>>2);s=+(((e|0)&0x03)<<8|r);if(+o==0.0){c(+(+i*+5.9604644775390625e-8*+s))}else if(+o==31.0){if(+i==1.0){if(+s>0.0){m()}else{v()}}else{if(+s>0.0){b()}else{g()}}}else{c(+(+i*D(+2,+(+o-25.0))*+(1024.0+s)))}M=M+3|0;return 0}function Wt(t){t=t|0;if(H(4)|0){return 1}f(n[M+1|0]|0,n[M+2|0]|0,n[M+3|0]|0,n[M+4|0]|0);M=M+5|0;return 0}function qt(t){t=t|0;if(H(8)|0){return 1}l(n[M+1|0]|0,n[M+2|0]|0,n[M+3|0]|0,n[M+4|0]|0,n[M+5|0]|0,n[M+6|0]|0,n[M+7|0]|0,n[M+8|0]|0);M=M+9|0;return 0}function Vt(t){t=t|0;return 1}function Yt(t){t=t|0;P();M=M+1|0;return 0}var Jt=[W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,q,V,Y,J,Vt,Vt,Vt,Vt,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,X,Q,tt,et,Vt,Vt,Vt,Vt,rt,rt,rt,rt,rt,rt,rt,rt,rt,rt,rt,rt,rt,rt,rt,rt,rt,rt,rt,rt,rt,rt,rt,rt,nt,it,ot,st,Vt,Vt,Vt,ut,at,at,at,at,at,at,at,at,at,at,at,at,at,at,at,at,at,at,at,at,at,at,at,at,ct,ft,lt,ht,Vt,Vt,Vt,pt,dt,dt,dt,dt,dt,dt,dt,dt,dt,dt,dt,dt,dt,dt,dt,dt,dt,dt,dt,dt,dt,dt,dt,dt,yt,vt,gt,mt,Vt,Vt,Vt,bt,_t,_t,_t,_t,_t,_t,_t,_t,_t,_t,_t,_t,_t,_t,_t,_t,_t,_t,_t,_t,_t,_t,_t,_t,wt,kt,Et,At,Vt,Vt,Vt,St,It,It,It,It,It,It,Nt,Nt,Nt,Nt,Nt,Nt,Nt,Nt,Nt,Nt,Nt,Nt,Nt,Nt,Nt,Nt,Nt,Nt,jt,Lt,Pt,Dt,Vt,Vt,Vt,Vt,Mt,Mt,Mt,Mt,Mt,Mt,Mt,Mt,Mt,Mt,Mt,Mt,Mt,Mt,Mt,Mt,Mt,Mt,Mt,Mt,zt,Ft,Kt,Ht,Gt,$t,Wt,qt,Vt,Vt,Vt,Yt];return{parse:K}}(f,{log:console.log.bind(console),pushInt:this.pushInt.bind(this),pushInt32:this.pushInt32.bind(this),pushInt32Neg:this.pushInt32Neg.bind(this),pushInt64:this.pushInt64.bind(this),pushInt64Neg:this.pushInt64Neg.bind(this),pushFloat:this.pushFloat.bind(this),pushFloatSingle:this.pushFloatSingle.bind(this),pushFloatDouble:this.pushFloatDouble.bind(this),pushTrue:this.pushTrue.bind(this),pushFalse:this.pushFalse.bind(this),pushUndefined:this.pushUndefined.bind(this),pushNull:this.pushNull.bind(this),pushInfinity:this.pushInfinity.bind(this),pushInfinityNeg:this.pushInfinityNeg.bind(this),pushNaN:this.pushNaN.bind(this),pushNaNNeg:this.pushNaNNeg.bind(this),pushArrayStart:this.pushArrayStart.bind(this),pushArrayStartFixed:this.pushArrayStartFixed.bind(this),pushArrayStartFixed32:this.pushArrayStartFixed32.bind(this),pushArrayStartFixed64:this.pushArrayStartFixed64.bind(this),pushObjectStart:this.pushObjectStart.bind(this),pushObjectStartFixed:this.pushObjectStartFixed.bind(this),pushObjectStartFixed32:this.pushObjectStartFixed32.bind(this),pushObjectStartFixed64:this.pushObjectStartFixed64.bind(this),pushByteString:this.pushByteString.bind(this),pushByteStringStart:this.pushByteStringStart.bind(this),pushUtf8String:this.pushUtf8String.bind(this),pushUtf8StringStart:this.pushUtf8StringStart.bind(this),pushSimpleUnassigned:this.pushSimpleUnassigned.bind(this),pushTagUnassigned:this.pushTagUnassigned.bind(this),pushTagStart:this.pushTagStart.bind(this),pushTagStart4:this.pushTagStart4.bind(this),pushTagStart8:this.pushTagStart8.bind(this),pushBreak:this.pushBreak.bind(this)},this._heap)}get _depth(){return this._parents.length}get _currentParent(){return this._parents[this._depth-1]}get _ref(){return this._currentParent.ref}_closeParent(){var t=this._parents.pop();if(t.length>0)throw new Error(`Missing ${t.length} elements`);switch(t.type){case Ef.PARENT.TAG:this._push(this.createTag(t.ref[0],t.ref[1]));break;case Ef.PARENT.BYTE_STRING:this._push(this.createByteString(t.ref,t.length));break;case Ef.PARENT.UTF8_STRING:this._push(this.createUtf8String(t.ref,t.length));break;case Ef.PARENT.MAP:if(t.values%2>0)throw new Error("Odd number of elements in the map");this._push(this.createMap(t.ref,t.length));break;case Ef.PARENT.OBJECT:if(t.values%2>0)throw new Error("Odd number of elements in the map");this._push(this.createObject(t.ref,t.length));break;case Ef.PARENT.ARRAY:this._push(this.createArray(t.ref,t.length))}this._currentParent&&this._currentParent.type===Ef.PARENT.TAG&&this._dec()}_dec(){const t=this._currentParent;t.length<0||(t.length--,0===t.length&&this._closeParent())}_push(t,e){const r=this._currentParent;switch(r.values++,r.type){case Ef.PARENT.ARRAY:case Ef.PARENT.BYTE_STRING:case Ef.PARENT.UTF8_STRING:r.length>-1?this._ref[this._ref.length-r.length]=t:this._ref.push(t),this._dec();break;case Ef.PARENT.OBJECT:null!=r.tmpKey?(this._ref[r.tmpKey]=t,r.tmpKey=null,this._dec()):(r.tmpKey=t,"string"!=typeof r.tmpKey&&(r.type=Ef.PARENT.MAP,r.ref=Af.buildMap(r.ref)));break;case Ef.PARENT.MAP:null!=r.tmpKey?(this._ref.set(r.tmpKey,t),r.tmpKey=null,this._dec()):r.tmpKey=t;break;case Ef.PARENT.TAG:this._ref.push(t),e||this._dec();break;default:throw new Error("Unknown parent type")}}_createParent(t,e,r){this._parents[this._depth]={type:e,length:r,ref:t,values:0,tmpKey:null}}_reset(){this._res=[],this._parents=[{type:Ef.PARENT.ARRAY,length:-1,ref:this._res,values:0,tmpKey:null}]}createTag(t,e){const r=this._knownTags[t];return r?r(e):new Nf(t,e)}createMap(t,e){return t}createObject(t,e){return t}createArray(t,e){return t}createByteString(t,e){return Kf.concat(t)}createByteStringFromHeap(t,e){return t===e?Kf.alloc(0):Kf.from(this._heap.slice(t,e))}createInt(t){return t}createInt32(t,e){return Af.buildInt32(t,e)}createInt64(t,e,r,n){return Af.buildInt64(t,e,r,n)}createFloat(t){return t}createFloatSingle(t,e,r,n){return z([t,e,r,n],0,!1,23,4)}createFloatDouble(t,e,r,n,i,o,s,u){return z([t,e,r,n,i,o,s,u],0,!1,52,8)}createInt32Neg(t,e){return-1-Af.buildInt32(t,e)}createInt64Neg(t,e,r,n){const i=Af.buildInt32(t,e),o=Af.buildInt32(r,n);return i>Ef.MAX_SAFE_HIGH?Ef.NEG_ONE.minus(new Hf(i).times(Ef.SHIFT32).plus(o)):-1-(i*Ef.SHIFT32+o)}createTrue(){return!0}createFalse(){return!1}createNull(){return null}createUndefined(){}createInfinity(){return 1/0}createInfinityNeg(){return-1/0}createNaN(){return NaN}createNaNNeg(){return NaN}createUtf8String(t,e){return t.join("")}createUtf8StringFromHeap(t,e){return t===e?"":this._buffer.toString("utf8",t,e)}createSimpleUnassigned(t){return new Tf(t)}pushInt(t){this._push(this.createInt(t))}pushInt32(t,e){this._push(this.createInt32(t,e))}pushInt64(t,e,r,n){this._push(this.createInt64(t,e,r,n))}pushFloat(t){this._push(this.createFloat(t))}pushFloatSingle(t,e,r,n){this._push(this.createFloatSingle(t,e,r,n))}pushFloatDouble(t,e,r,n,i,o,s,u){this._push(this.createFloatDouble(t,e,r,n,i,o,s,u))}pushInt32Neg(t,e){this._push(this.createInt32Neg(t,e))}pushInt64Neg(t,e,r,n){this._push(this.createInt64Neg(t,e,r,n))}pushTrue(){this._push(this.createTrue())}pushFalse(){this._push(this.createFalse())}pushNull(){this._push(this.createNull())}pushUndefined(){this._push(this.createUndefined())}pushInfinity(){this._push(this.createInfinity())}pushInfinityNeg(){this._push(this.createInfinityNeg())}pushNaN(){this._push(this.createNaN())}pushNaNNeg(){this._push(this.createNaNNeg())}pushArrayStart(){this._createParent([],Ef.PARENT.ARRAY,-1)}pushArrayStartFixed(t){this._createArrayStartFixed(t)}pushArrayStartFixed32(t,e){const r=Af.buildInt32(t,e);this._createArrayStartFixed(r)}pushArrayStartFixed64(t,e,r,n){const i=Af.buildInt64(t,e,r,n);this._createArrayStartFixed(i)}pushObjectStart(){this._createObjectStartFixed(-1)}pushObjectStartFixed(t){this._createObjectStartFixed(t)}pushObjectStartFixed32(t,e){const r=Af.buildInt32(t,e);this._createObjectStartFixed(r)}pushObjectStartFixed64(t,e,r,n){const i=Af.buildInt64(t,e,r,n);this._createObjectStartFixed(i)}pushByteStringStart(){this._parents[this._depth]={type:Ef.PARENT.BYTE_STRING,length:-1,ref:[],values:0,tmpKey:null}}pushByteString(t,e){this._push(this.createByteStringFromHeap(t,e))}pushUtf8StringStart(){this._parents[this._depth]={type:Ef.PARENT.UTF8_STRING,length:-1,ref:[],values:0,tmpKey:null}}pushUtf8String(t,e){this._push(this.createUtf8StringFromHeap(t,e))}pushSimpleUnassigned(t){this._push(this.createSimpleUnassigned(t))}pushTagStart(t){this._parents[this._depth]={type:Ef.PARENT.TAG,length:1,ref:[t]}}pushTagStart4(t,e){this.pushTagStart(Af.buildInt32(t,e))}pushTagStart8(t,e,r,n){this.pushTagStart(Af.buildInt64(t,e,r,n))}pushTagUnassigned(t){this._push(this.createTag(t))}pushBreak(){if(this._currentParent.length>-1)throw new Error("Unexpected break");this._closeParent()}_createObjectStartFixed(t){0!==t?this._createParent({},Ef.PARENT.OBJECT,t):this._push(this.createObject({}))}_createArrayStartFixed(t){0!==t?this._createParent(new Array(t),Ef.PARENT.ARRAY,t):this._push(this.createArray([]))}_decode(t){if(0===t.byteLength)throw new Error("Input too short");this._reset(),this._heap8.set(t);const e=this.parser.parse(t.byteLength);if(this._depth>1){for(;0===this._currentParent.length;)this._closeParent();if(this._depth>1)throw new Error("Undeterminated nesting")}if(e>0)throw new Error("Failed to parse");if(0===this._res.length)throw new Error("No valid result")}decodeFirst(t){return this._decode(t),this._res[0]}decodeAll(t){return this._decode(t),this._res}static decode(t,e){"string"==typeof t&&(t=Kf.from(t,e||"hex"));return new $f({size:t.length}).decodeFirst(t)}static decodeAll(t,e){"string"==typeof t&&(t=Kf.from(t,e||"hex"));return new $f({size:t.length}).decodeAll(t)}}$f.decodeFirst=$f.decode;var Wf=$f;const{Buffer:qf}=_f;class Vf extends Wf{createTag(t,e){return`${t}(${e})`}createInt(t){return super.createInt(t).toString()}createInt32(t,e){return super.createInt32(t,e).toString()}createInt64(t,e,r,n){return super.createInt64(t,e,r,n).toString()}createInt32Neg(t,e){return super.createInt32Neg(t,e).toString()}createInt64Neg(t,e,r,n){return super.createInt64Neg(t,e,r,n).toString()}createTrue(){return"true"}createFalse(){return"false"}createFloat(t){const e=super.createFloat(t);return Af.isNegativeZero(t)?"-0_1":`${e}_1`}createFloatSingle(t,e,r,n){return`${super.createFloatSingle(t,e,r,n)}_2`}createFloatDouble(t,e,r,n,i,o,s,u){return`${super.createFloatDouble(t,e,r,n,i,o,s,u)}_3`}createByteString(t,e){const r=t.join(", ");return-1===e?`(_ ${r})`:`h'${r}`}createByteStringFromHeap(t,e){return`h'${qf.from(super.createByteStringFromHeap(t,e)).toString("hex")}'`}createInfinity(){return"Infinity_1"}createInfinityNeg(){return"-Infinity_1"}createNaN(){return"NaN_1"}createNaNNeg(){return"-NaN_1"}createNull(){return"null"}createUndefined(){return"undefined"}createSimpleUnassigned(t){return`simple(${t})`}createArray(t,e){const r=super.createArray(t,e);return-1===e?`[_ ${r.join(", ")}]`:`[${r.join(", ")}]`}createMap(t,e){const r=super.createMap(t),n=Array.from(r.keys()).reduce(Jf(r),"");return-1===e?`{_ ${n}}`:`{${n}}`}createObject(t,e){const r=super.createObject(t),n=Object.keys(r).reduce(Jf(r),"");return-1===e?`{_ ${n}}`:`{${n}}`}createUtf8String(t,e){const r=t.join(", ");return-1===e?`(_ ${r})`:`"${r}"`}createUtf8StringFromHeap(t,e){return`"${qf.from(super.createUtf8StringFromHeap(t,e)).toString("utf8")}"`}static diagnose(t,e){"string"==typeof t&&(t=qf.from(t,e||"hex"));return(new Vf).decodeFirst(t)}}var Yf=Vf;function Jf(t){return(e,r)=>e?`${e}, ${r}: ${t[r]}`:`${r}: ${t[r]}`}const{Buffer:Zf}=_f,{URL:Xf}=Ff,Qf=wf.BigNumber,tl=Ef.MT,el=Ef.NUMBYTES,rl=Ef.SHIFT32,nl=Ef.SYMS,il=Ef.TAG,ol=Ef.MT.SIMPLE_FLOAT<<5|Ef.NUMBYTES.TWO,sl=Ef.MT.SIMPLE_FLOAT<<5|Ef.NUMBYTES.FOUR,ul=Ef.MT.SIMPLE_FLOAT<<5|Ef.NUMBYTES.EIGHT,al=Ef.MT.SIMPLE_FLOAT<<5|Ef.SIMPLE.TRUE,cl=Ef.MT.SIMPLE_FLOAT<<5|Ef.SIMPLE.FALSE,fl=Ef.MT.SIMPLE_FLOAT<<5|Ef.SIMPLE.UNDEFINED,ll=Ef.MT.SIMPLE_FLOAT<<5|Ef.SIMPLE.NULL,hl=new Qf("0x20000000000000"),pl=Zf.from("f97e00","hex"),dl=Zf.from("f9fc00","hex"),yl=Zf.from("f97c00","hex");class vl{constructor(t){t=t||{},this.streaming="function"==typeof t.stream,this.onData=t.stream,this.semanticTypes=[[Xf,this._pushUrl],[Qf,this._pushBigNumber]];const e=t.genTypes||[],r=e.length;for(let t=0;t<r;t++)this.addSemanticType(e[t][0],e[t][1]);this._reset()}addSemanticType(t,e){const r=this.semanticTypes.length;for(let n=0;n<r;n++){if(this.semanticTypes[n][0]===t){const t=this.semanticTypes[n][1];return this.semanticTypes[n][1]=e,t}}return this.semanticTypes.push([t,e]),null}push(t){return!t||(this.result[this.offset]=t,this.resultMethod[this.offset]=0,this.resultLength[this.offset]=t.length,this.offset++,this.streaming&&this.onData(this.finalize()),!0)}pushWrite(t,e,r){return this.result[this.offset]=t,this.resultMethod[this.offset]=e,this.resultLength[this.offset]=r,this.offset++,this.streaming&&this.onData(this.finalize()),!0}_pushUInt8(t){return this.pushWrite(t,1,1)}_pushUInt16BE(t){return this.pushWrite(t,2,2)}_pushUInt32BE(t){return this.pushWrite(t,3,4)}_pushDoubleBE(t){return this.pushWrite(t,4,8)}_pushNaN(){return this.push(pl)}_pushInfinity(t){const e=t<0?dl:yl;return this.push(e)}_pushFloat(t){const e=Zf.allocUnsafe(2);if(Af.writeHalf(e,t)&&Af.parseHalf(e)===t)return this._pushUInt8(ol)&&this.push(e);const r=Zf.allocUnsafe(4);return r.writeFloatBE(t,0),r.readFloatBE(0)===t?this._pushUInt8(sl)&&this.push(r):this._pushUInt8(ul)&&this._pushDoubleBE(t)}_pushInt(t,e,r){const n=e<<5;return t<24?this._pushUInt8(n|t):t<=255?this._pushUInt8(n|el.ONE)&&this._pushUInt8(t):t<=65535?this._pushUInt8(n|el.TWO)&&this._pushUInt16BE(t):t<=4294967295?this._pushUInt8(n|el.FOUR)&&this._pushUInt32BE(t):t<=Number.MAX_SAFE_INTEGER?this._pushUInt8(n|el.EIGHT)&&this._pushUInt32BE(Math.floor(t/rl))&&this._pushUInt32BE(t%rl):e===tl.NEG_INT?this._pushFloat(r):this._pushFloat(t)}_pushIntNum(t){return t<0?this._pushInt(-t-1,tl.NEG_INT,t):this._pushInt(t,tl.POS_INT)}_pushNumber(t){switch(!1){case t==t:return this._pushNaN(t);case isFinite(t):return this._pushInfinity(t);case t%1!=0:return this._pushIntNum(t);default:return this._pushFloat(t)}}_pushString(t){const e=Zf.byteLength(t,"utf8");return this._pushInt(e,tl.UTF8_STRING)&&this.pushWrite(t,5,e)}_pushBoolean(t){return this._pushUInt8(t?al:cl)}_pushUndefined(t){return this._pushUInt8(fl)}_pushArray(t,e){const r=e.length;if(!t._pushInt(r,tl.ARRAY))return!1;for(let n=0;n<r;n++)if(!t.pushAny(e[n]))return!1;return!0}_pushTag(t){return this._pushInt(t,tl.TAG)}_pushDate(t,e){return t._pushTag(il.DATE_EPOCH)&&t.pushAny(Math.round(e/1e3))}_pushBuffer(t,e){return t._pushInt(e.length,tl.BYTE_STRING)&&t.push(e)}_pushNoFilter(t,e){return t._pushBuffer(t,e.slice())}_pushRegexp(t,e){return t._pushTag(il.REGEXP)&&t.pushAny(e.source)}_pushSet(t,e){if(!t._pushInt(e.size,tl.ARRAY))return!1;for(const r of e)if(!t.pushAny(r))return!1;return!0}_pushUrl(t,e){return t._pushTag(il.URI)&&t.pushAny(e.format())}_pushBigint(t){let e=il.POS_BIGINT;t.isNegative()&&(t=t.negated().minus(1),e=il.NEG_BIGINT);let r=t.toString(16);r.length%2&&(r="0"+r);const n=Zf.from(r,"hex");return this._pushTag(e)&&this._pushBuffer(this,n)}_pushBigNumber(t,e){if(e.isNaN())return t._pushNaN();if(!e.isFinite())return t._pushInfinity(e.isNegative()?-1/0:1/0);if(e.isInteger())return t._pushBigint(e);if(!t._pushTag(il.DECIMAL_FRAC)||!t._pushInt(2,tl.ARRAY))return!1;const r=e.decimalPlaces(),n=e.multipliedBy(new Qf(10).pow(r));return!!t._pushIntNum(-r)&&(n.abs().isLessThan(hl)?t._pushIntNum(n.toNumber()):t._pushBigint(n))}_pushMap(t,e){return!!t._pushInt(e.size,tl.MAP)&&this._pushRawMap(e.size,Array.from(e))}_pushObject(t){if(!t)return this._pushUInt8(ll);for(var e=this.semanticTypes.length,r=0;r<e;r++)if(t instanceof this.semanticTypes[r][0])return this.semanticTypes[r][1].call(t,this,t);var n=t.encodeCBOR;if("function"==typeof n)return n.call(t,this);var i=Object.keys(t),o=i.length;return!!this._pushInt(o,tl.MAP)&&this._pushRawMap(o,i.map((e=>[e,t[e]])))}_pushRawMap(t,e){e=e.map((function(t){return t[0]=vl.encode(t[0]),t})).sort(Af.keySorter);for(var r=0;r<t;r++){if(!this.push(e[r][0]))return!1;if(!this.pushAny(e[r][1]))return!1}return!0}write(t){return this.pushAny(t)}pushAny(t){switch(function(t){return{}.toString.call(t).slice(8,-1)}(t)){case"Number":return this._pushNumber(t);case"String":return this._pushString(t);case"Boolean":return this._pushBoolean(t);case"Object":return this._pushObject(t);case"Array":return this._pushArray(this,t);case"Uint8Array":return this._pushBuffer(this,Zf.isBuffer(t)?t:Zf.from(t));case"Null":return this._pushUInt8(ll);case"Undefined":return this._pushUndefined(t);case"Map":return this._pushMap(this,t);case"Set":return this._pushSet(this,t);case"URL":return this._pushUrl(this,t);case"BigNumber":return this._pushBigNumber(this,t);case"Date":return this._pushDate(this,t);case"RegExp":return this._pushRegexp(this,t);case"Symbol":switch(t){case nl.NULL:return this._pushObject(null);case nl.UNDEFINED:return this._pushUndefined(void 0);default:throw new Error("Unknown symbol: "+t.toString())}default:throw new Error("Unknown type: "+typeof t+", "+(t?t.toString():""))}}finalize(){if(0===this.offset)return null;for(var t=this.result,e=this.resultLength,r=this.resultMethod,n=this.offset,i=0,o=0;o<n;o++)i+=e[o];var s=Zf.allocUnsafe(i),u=0,a=0;for(o=0;o<n;o++){switch(a=e[o],r[o]){case 0:t[o].copy(s,u);break;case 1:s.writeUInt8(t[o],u,!0);break;case 2:s.writeUInt16BE(t[o],u,!0);break;case 3:s.writeUInt32BE(t[o],u,!0);break;case 4:s.writeDoubleBE(t[o],u,!0);break;case 5:s.write(t[o],u,a,"utf8");break;default:throw new Error("unkown method")}u+=a}var c=s;return this._reset(),c}_reset(){this.result=[],this.resultMethod=[],this.resultLength=[],this.offset=0}static encode(t){const e=new vl;if(!e.pushAny(t))throw new Error("Failed to encode input");return e.finalize()}}var gl=vl,ml=p((function(t,e){e.Diagnose=Yf,e.Decoder=Wf,e.Encoder=gl,e.Simple=Tf,e.Tagged=Nf,e.decodeAll=e.Decoder.decodeAll,e.decodeFirst=e.Decoder.decodeFirst,e.diagnose=e.Diagnose.diagnose,e.encode=e.Encoder.encode,e.decode=e.Decoder.decode,e.leveldb={decode:e.Decoder.decodeAll,encode:e.Encoder.encode,buffer:!0,name:"cbor"}})),bl=function(t,e){return o(void 0,void 0,void 0,(function(){var r,n,i,o;return s(this,(function(s){switch(s.label){case 0:return jr(t)?[4,J(t)]:[3,2];case 1:return n=s.sent(),[3,3];case 2:n=t,s.label=3;case 3:return r=n,i=ml.encode(r),Tr(e)?[4,Vr.encrypt(i,e)]:[3,5];case 4:return o=s.sent(),[3,6];case 5:o=i,s.label=6;case 6:return[2,ff(o)]}}))}))},_l=function(t,e){return o(void 0,void 0,void 0,(function(){var r,n,i;return s(this,(function(o){switch(o.label){case 0:return[4,hf(t)];case 1:return r=o.sent(),Tr(e)?[4,Vr.decrypt(r,e)]:[3,3];case 2:return i=o.sent(),[3,4];case 3:i=r,o.label=4;case 4:return n=i,[2,ml.decode(n)]}}))}))},wl=Object.freeze({__proto__:null,add:bl,catAndDecode:_l}),kl=Object.freeze({__proto__:null,encoded:wl,set:function(t){Su=t},get:Iu,iframe:xu,add:ff,catRaw:lf,catBuf:hf,cat:pf,ls:df,dagGet:yf,dagPut:vf,dagPutLinks:gf,size:mf,attemptPin:bf,DAG_NODE_DATA:cf});function El(t){return Qr(Kr.Private,"Apps",t.creator,t.name)}function Al(t){var e,r,n,i,o=[];return t.app&&o.push(El(t.app)),(null===(e=t.fs)||void 0===e?void 0:e.private)&&(o=o.concat(null===(r=t.fs)||void 0===r?void 0:r.private.map((function(t){return on(Qr(Kr.Private),t)})))),(null===(n=t.fs)||void 0===n?void 0:n.public)&&(o=o.concat(null===(i=t.fs)||void 0===i?void 0:i.public.map((function(t){return on(Qr(Kr.Public),t)})))),o}const Sl={};
/*!
     * Copyright (c) 2019-2020 Digital Bazaar, Inc. All rights reserved.
     */
const Il="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";function xl(t,e){return function(t,e,r){if(!(t instanceof Uint8Array))throw new TypeError('"input" must be a Uint8Array.');if("string"!=typeof e)throw new TypeError('"alphabet" must be a string.');if(void 0!==r&&"number"!=typeof r)throw new TypeError('"maxline" must be a number.');if(0===t.length)return"";let n="",i=0;const o=e.length,s=e.charAt(0),u=[0];for(i=0;i<t.length;++i){let e=t[i];for(let t=0;t<u.length;++t)e+=u[t]<<8,u[t]=e%o,e=e/o|0;for(;e>0;)u.push(e%o),e=e/o|0}for(i=0;0===t[i]&&i<t.length-1;++i)n+=s;for(i=u.length-1;i>=0;--i)n+=e[u[i]];if(r){const t=new RegExp(".{1,"+r+"}","g");n=n.match(t).join("\r\n")}return n}(t,Il,e)}function Bl(t){return function(t,e){if("string"!=typeof t)throw new TypeError('"input" must be a string.');if("string"!=typeof e)throw new TypeError('"alphabet" must be a string.');if(0===t.length)return new Uint8Array;let r=Sl[e];if(!r){r=Sl[e]=[];for(let t=0;t<e.length;++t)r[e.charCodeAt(t)]=t}t=t.replace(/\s/g,"");const n=e.length,i=e.charAt(0),o=[0];for(let e=0;e<t.length;e++){const i=r[t.charCodeAt(e)];if(void 0===i)return;let s=i;for(let t=0;t<o.length;++t)s+=o[t]*n,o[t]=255&s,s>>=8;for(;s>0;)o.push(255&s),s>>=8}for(let e=0;t[e]===i&&e<t.length-1;++e)o.push(0);return new Uint8Array(o.reverse())}(t,Il)}var Tl,Ol=new Uint8Array([237,1]),Nl=new Uint8Array([234,1]),Cl=new Uint8Array([0,245,2]),Rl="did:key:z";function Ul(){return o(this,void 0,void 0,(function(){var t,e;return s(this,(function(r){switch(r.label){case 0:return[4,Zr.publicReadKey()];case 1:return t=r.sent(),[4,Zr.getAlg()];case 2:return e=r.sent(),[2,Ll(t,Fl(e))]}}))}))}function jl(){return o(this,void 0,void 0,(function(){var t,e;return s(this,(function(r){switch(r.label){case 0:return[4,Zr.publicWriteKey()];case 1:return t=r.sent(),[4,Zr.getAlg()];case 2:return e=r.sent(),[2,Ll(t,Fl(e))]}}))}))}function Ll(t,e){var r=xt.base64ToArrBuf(t),n=function(t){switch(t){case Tl.Edwards:return Ol;case Tl.RSA:return Cl;case Tl.BLS:return Nl;default:return null}}(e);if(null===n)throw new Error("Key type '"+e+"' not supported");var i=xt.joinBufs(n,r);return Rl+xl(new Uint8Array(i))}function Pl(t){if(!t.startsWith(Rl))throw new Error("Please use a base58-encoded DID formatted `did:key:z...`");var e=Bl(t.substr(Rl.length)),r=Ml(e),n=r.keyBuffer,i=r.type;return{publicKey:xt.arrBufToBase64(n),type:i}}function Dl(t){var e=t.charSize,r=void 0===e?16:e,n=t.data,i=t.did,u=t.signature;return o(this,void 0,void 0,(function(){var t,e,o,a,c,f;return s(this,(function(s){switch(s.label){case 0:switch(s.trys.push([0,7,,8]),t=Pl(i),e=t.type,o=t.publicKey,a=new Uint8Array(xt.base64ToArrBuf(u)),c=new Uint8Array(xt.normalizeUnicodeToBuf(n,r)),f=new Uint8Array(xt.base64ToArrBuf(o)),e){case Tl.Edwards:return[3,1];case Tl.RSA:return[3,3]}return[3,5];case 1:return[4,Jr.verify(c,a,f)];case 2:return[2,s.sent()];case 3:return[4,Yr.verify(c,a,f)];case 4:return[2,s.sent()];case 5:return[2,!1];case 6:return[3,8];case 7:return s.sent(),[2,!1];case 8:return[2]}}))}))}!function(t){t.RSA="rsa",t.Edwards="ed25519",t.BLS="bls12-381"}(Tl||(Tl={}));var Ml=function(t){if(zl(t,Cl))return{keyBuffer:t.slice(Cl.byteLength),type:Tl.RSA};if(zl(t,Ol))return{keyBuffer:t.slice(Ol.byteLength),type:Tl.Edwards};if(zl(t,Nl))return{keyBuffer:t.slice(Nl.byteLength),type:Tl.BLS};throw new Error("Unsupported key algorithm. Try using RSA.")},zl=function(t,e){return I(e,t.slice(0,e.byteLength))},Fl=function(t){switch(t){case"rsa":return Tl.RSA;case"ed25519":return Tl.Edwards;case"bls12-381":return Tl.BLS}throw new Error("Key Type "+t+" not supported")},Kl=Object.freeze({__proto__:null,get KeyType(){return Tl},exchange:Ul,root:function(t){return o(this,void 0,void 0,(function(){var e,r;return s(this,(function(n){switch(n.label){case 0:e=k.endpoints.user,n.label=1;case 1:return n.trys.push([1,3,,4]),[4,v("_did."+t+"."+e)];case 2:return null!==(r=n.sent())?[2,r]:[3,4];case 3:return n.sent(),[3,4];case 4:throw new Error("Could not locate user DID in DNS.")}}))}))},ucan:jl,write:jl,publicKeyToDid:Ll,didToPublicKey:Pl,verifySignedData:Dl}),Hl="wnfs";function Gl(t){return t.reduce((function(t,e){var r,i,o=$l(e),s=o.payload.rsc;if(Vl(o))return t;if("object"!=typeof s)return n(n({},t),((r={})[s]=e,r));var u=Array.from(Object.entries(s))[0],a=u[0]+":"+(u[0]===Hl?u[1].replace(/^\/+/,""):u[1]);return n(n({},t),((i={})[a]=e,i))}),{})}function $l(t){var e=t.split(".");return{header:JSON.parse($(e[0])),payload:JSON.parse($(e[1])),signature:e[2]||null}}function Wl(t){return W(JSON.stringify(t))}function ql(t){return W(JSON.stringify(n({},t)))}function Vl(t){return t.payload.exp<=Math.floor(Date.now()/1e3)}function Yl(t,e){return o(this,void 0,void 0,(function(){var r,n,i,o;return s(this,(function(s){switch(s.label){case 0:return r=Wl(t),n=ql(e),o=(i=Y).makeUrlSafe,[4,Zr.sign(r+"."+n,8)];case 1:return[2,o.apply(i,[s.sent()])]}}))}))}function Jl(t){switch(t){case"ed25519":return"EdDSA";case"rsa":return"RS256";default:return null}}var Zl=Object.freeze({__proto__:null,WNFS_PREFIX:Hl,build:function(t){var e=t.addSignature,r=void 0===e||e,n=t.audience,i=t.facts,u=void 0===i?[]:i,a=t.issuer,c=t.lifetimeInSeconds,f=void 0===c?30:c,l=t.potency,h=void 0===l?"APPEND":l,p=t.proof,d=t.resource;return o(this,void 0,void 0,(function(){var t,e,i,o,c,l,y,v,g,m,b;return s(this,(function(s){switch(s.label){case 0:return t=Math.floor(Date.now()/1e3),e=p&&$l(p),[4,Zr.getAlg()];case 1:return i=s.sent(),o={alg:Jl(i)||"UnknownAlgorithm",typ:"JWT",uav:"1.0.0"},c=t+f,l=t-60,e&&(y=e.payload,c=Math.min(y.exp,c),l=Math.max(y.nbf,l)),b={aud:n,exp:c,fct:u},(g=a)?[3,3]:[4,jl()];case 2:g=s.sent(),s.label=3;case 3:return b.iss=g,b.nbf=l,b.prf=p||null,b.ptc=h,b.rsc=d||(e?e.payload.rsc:"*"),v=b,r?[4,Yl(o,v)]:[3,5];case 4:return m=s.sent(),[3,6];case 5:m=null,s.label=6;case 6:return[2,{header:o,payload:v,signature:m}]}}))}))},compileDictionary:Gl,decode:$l,encode:function(t){return Wl(t.header)+"."+ql(t.payload)+"."+t.signature},encodeHeader:Wl,encodePayload:ql,isExpired:Vl,isValid:function t(e){return o(this,void 0,void 0,(function(){var r,n,i,o,u;return s(this,(function(s){switch(s.label){case 0:return r=Wl(e.header),n=ql(e.payload),[4,Dl({charSize:8,data:r+"."+n,did:e.payload.iss,signature:V(e.signature||"")})];case 1:return(i=s.sent())?e.payload.prf?(o=$l(e.payload.prf),(u=o.payload.aud===e.payload.iss)?[4,t(o)]:[2,u]):[2,!0]:[2,i];case 2:return[2,s.sent()]}}))}))},rootIssuer:function t(e,r){void 0===r&&(r=0);var n=function(t,e){try{return JSON.parse($(t.split(".")[1]))}catch(r){throw new Error("Invalid UCAN ("+e+" level"+(1===e?"":"s")+" deep): `"+t+"`")}}(e,r);return n.prf?t(n.prf,r+1):n.iss},sign:Yl}),Xl={};function Ql(){return o(this,void 0,void 0,(function(){return s(this,(function(t){switch(t.label){case 0:return Xl={},[4,Ir(Mr)];case 1:return t.sent(),[2]}}))}))}function th(t){return o(this,void 0,void 0,(function(){return s(this,(function(e){return[2,Xl["*"]||Xl["app:*"]||Xl["app:"+t]]}))}))}function eh(t){return o(this,void 0,void 0,(function(){var e,r,n,i,o;return s(this,(function(s){switch(s.label){case 0:return Xl["*"]?[2,Xl["*"]]:(r=!(e="*"===t)&&un(t),n=e?["*"]:yn(t),[4,Fr()]);case 1:return i=s.sent(),o=i?"wnfs:":"",[2,n.reduce((function(t,e,i){if(t)return t;var s=0===i,u=n.slice(0,n.length-i),a=nn(s&&!r?tn.apply(gn,u):Qr.apply(gn,u));return Xl[""+o+a]||null}),null)]}}))}))}function rh(t){return o(this,void 0,void 0,(function(){var e,r,n;return s(this,(function(i){switch(i.label){case 0:return[4,Ar(Mr)];case 1:return e=i.sent(),r=(e||[]).concat(t),Xl=Gl(r),n=Object.values(Xl),[4,Sr(Mr,n)];case 2:return i.sent(),[2]}}))}))}function nh(t,e){var r=t.app,n=t.fs,i="wnfs:",o=Xl["*"];if(o&&!Vl($l(o)))return!0;if(r){var s=i+nn(El(r)),u=Xl[s];if(!u||Vl($l(u)))return!1}if((null==n?void 0:n.private)&&!n.private.every((function(t){var e="wnfs:private/"+nn(t),r=Xl[e];return r&&!Vl($l(r))})))return!1;if((null==n?void 0:n.public)&&!n.public.every((function(t){var e="wnfs:public/"+nn(t),r=Xl[e];return r&&!Vl($l(r))})))return!1;return!0}var ih=p((function(t,e){!function(t){function e(t,e,r,n){var i,o=!1,s=0;function u(){i&&clearTimeout(i)}function a(){u(),o=!0}function c(){for(var a=arguments.length,c=new Array(a),f=0;f<a;f++)c[f]=arguments[f];var l=this,h=Date.now()-s;function p(){s=Date.now(),r.apply(l,c)}function d(){i=void 0}o||(n&&!i&&p(),u(),void 0===n&&h>t?p():!0!==e&&(i=setTimeout(n?d:p,void 0===n?t-h:t)))}return"boolean"!=typeof e&&(n=r,r=e,e=void 0),c.cancel=a,c}function r(t,r,n){return void 0===n?e(t,r,!1):e(t,n,!1!==r)}t.debounce=r,t.throttle=e,Object.defineProperty(t,"__esModule",{value:!0})}(e)})),oh=function(t){var e=t.name,r=t.cid,n=t.size;return new sf.DAGLink(e,n,r)},sh=function(t){var e=t.name,r=void 0===e?"":e,n=t.cid,i=t.size,o=t.mtime,s=t.type;return{name:r,cid:n.toString(),size:i,mtime:o,isFile:"dir"!==s}},uh=function(t){return{name:t.Name,cid:t.Hash.toString(),size:t.Tsize}},ah=function(t,e,r,n){return{name:t,cid:e,size:n,isFile:r,mtime:Date.now()}},ch=function(t){return t.reduce((function(t,e){return t[e.name]=e,t}),{})},fh=Object.freeze({__proto__:null,toDAGLink:oh,fromFSFile:sh,fromDAGLink:uh,make:ah,arrToMap:ch}),lh=function(t){return o(void 0,void 0,void 0,(function(){return s(this,(function(e){return[2,hf(t)]}))}))},hh=function(t,e){return o(void 0,void 0,void 0,(function(){return s(this,(function(r){return[2,_l(t,e)]}))}))},ph=function(t){return o(void 0,void 0,void 0,(function(){return s(this,(function(e){return[2,ff(t)]}))}))},dh=function(t,e){return o(void 0,void 0,void 0,(function(){return s(this,(function(r){return[2,bl(t,e)]}))}))},yh=function(t){return o(void 0,void 0,void 0,(function(){var e;return s(this,(function(r){switch(r.label){case 0:return[4,yf(t)];case 1:return e=r.sent(),[2,ch(e.Links.map(uh))]}}))}))},vh=function(t){return o(void 0,void 0,void 0,(function(){var e,r;return s(this,(function(n){switch(n.label){case 0:return[4,df(t)];case 1:return e=n.sent(),r=ch(e.map(sh)),[4,yf(t)];case 2:return n.sent().Links.forEach((function(t){r[t.Name]&&0===r[t.Name].size&&(r[t.Name].size=t.Tsize)})),[2,r]}}))}))},gh=function(t){return o(void 0,void 0,void 0,(function(){var e;return s(this,(function(r){return e=Object.values(t).filter((function(t){return void 0!==t})).map(oh),[2,gf(e)]}))}))},mh=function(t){return Ur(t)&&void 0!==t.content},bh=function(t){return Ur(t)&&Rr(t.name)&&Cr(t.size)&&Nr(t.isFile)},_h=function(t){return bh(t)&&Sh(t.cid)},wh=function(t){return Ur(t)&&function(t){return Ur(t)&&Cr(t.mtime)&&Cr(t.ctime)&&Cr(t.mode)&&Rr(t._type)}(t.unixMeta)&&Nr(t.isFile)&&Ih(t.version)},kh=function(t){return Ur(t)&&Object.values(t).every((function(t){return Ur(t)&&Sh(t.cid)&&Sh(t.userland)&&Sh(t.metadata)&&kh(t.subSkeleton)}))},Eh=function(t){return Ur(t)&&kh(t.skeleton)&&wh(t.metadata)&&!1===t.metadata.isFile},Ah=function(t){return Ur(t)&&wh(t.metadata)&&!0===t.metadata.isFile},Sh=function(t){return Rr(t)},Ih=function(t){if(!Ur(t))return!1;var e=t.major,r=t.minor,n=t.patch;return Cr(e)&&Cr(r)&&Cr(n)},xh=function(t,e){return o(void 0,void 0,void 0,(function(){var r,n,i;return s(this,(function(o){switch(o.label){case 0:return[4,bl(e,null)];case 1:return r=o.sent(),n=r.cid,i=r.size,[2,ah(t,n,!0,i)]}}))}))},Bh=function(t){return o(void 0,void 0,void 0,(function(){var e,r,n,i,o,u,a,c;return s(this,(function(s){switch(s.label){case 0:return[4,vh(t)];case 1:return e=s.sent(),[4,Nh(e,"metadata",wh)];case 2:return(r=s.sent()).isFile?(i=void 0,[3,5]):[3,3];case 3:return[4,Nh(e,"skeleton",kh)];case 4:i=s.sent(),s.label=5;case 5:if(n=i,o=(null===(a=e.userland)||void 0===a?void 0:a.cid)||null,!Sh(o))throw new Error("Could not find userland");return u=(null===(c=e.previous)||void 0===c?void 0:c.cid)||void 0,[2,{userland:o,metadata:r,previous:u,skeleton:n}]}}))}))},Th=function(t,e){return o(void 0,void 0,void 0,(function(){var r;return s(this,(function(n){switch(n.label){case 0:return Rr(t)?[4,vh(t)]:[3,2];case 1:return r=n.sent(),[2,Oh(r,e)];case 2:return[2,Oh(t,e)]}}))}))},Oh=function(t,e){return o(void 0,void 0,void 0,(function(){var r,n;return s(this,(function(i){return(r=null===(n=t[e])||void 0===n?void 0:n.cid)?[2,_l(r,null)]:[2,null]}))}))},Nh=function(t,e,r,n){return void 0===n&&(n=!1),o(void 0,void 0,void 0,(function(){var i;return s(this,(function(o){switch(o.label){case 0:return[4,Th(t,e)];case 1:return i=o.sent(),[2,Ch(i,e,r,n)]}}))}))},Ch=function(t,e,r,n){if(void 0===n&&(n=!1),!Or(t)){if(n)return t;throw new Error("Could not find header value: "+e)}if(r(t))return t;throw new Error("Improperly formatted header value: "+e)},Rh=function(t){return Ur(t)&&wh(t.metadata)&&t.metadata.isFile&&Rr(t.key)&&Sh(t.content)},Uh=function(t){return Ur(t)&&wh(t.metadata)&&!1===t.metadata.isFile&&Cr(t.revision)&&Lh(t.links)&&Ph(t.skeleton)},jh=function(t){return bh(t)&&Rr(t.key)&&Rr(t.pointer)},Lh=function(t){return Ur(t)&&Object.values(t).every(jh)},Ph=function(t){return Ur(t)&&Object.values(t).every(Dh)},Dh=function(t){return Ur(t)&&Sh(t.cid)&&Rr(t.key)&&Ph(t.subSkeleton)},Mh={UINT32:p((function(t){!function(e){function r(t,e){return this instanceof r?(this._low=0,this._high=0,this.remainder=null,void 0===e?i.call(this,t):"string"==typeof t?o.call(this,t,e):void n.call(this,t,e)):new r(t,e)}function n(t,e){return this._low=0|t,this._high=0|e,this}function i(t){return this._low=65535&t,this._high=t>>>16,this}function o(t,e){var r=parseInt(t,e||10);return this._low=65535&r,this._high=r>>>16,this}r(Math.pow(36,5)),r(Math.pow(16,7)),r(Math.pow(10,9)),r(Math.pow(2,30)),r(36),r(16),r(10),r(2),r.prototype.fromBits=n,r.prototype.fromNumber=i,r.prototype.fromString=o,r.prototype.toNumber=function(){return 65536*this._high+this._low},r.prototype.toString=function(t){return this.toNumber().toString(t||10)},r.prototype.add=function(t){var e=this._low+t._low,r=e>>>16;return r+=this._high+t._high,this._low=65535&e,this._high=65535&r,this},r.prototype.subtract=function(t){return this.add(t.clone().negate())},r.prototype.multiply=function(t){var e,r,n=this._high,i=this._low,o=t._high,s=t._low;return e=(r=i*s)>>>16,e+=n*s,e&=65535,e+=i*o,this._low=65535&r,this._high=65535&e,this},r.prototype.div=function(t){if(0==t._low&&0==t._high)throw Error("division by zero");if(0==t._high&&1==t._low)return this.remainder=new r(0),this;if(t.gt(this))return this.remainder=this.clone(),this._low=0,this._high=0,this;if(this.eq(t))return this.remainder=new r(0),this._low=1,this._high=0,this;for(var e=t.clone(),n=-1;!this.lt(e);)e.shiftLeft(1,!0),n++;for(this.remainder=this.clone(),this._low=0,this._high=0;n>=0;n--)e.shiftRight(1),this.remainder.lt(e)||(this.remainder.subtract(e),n>=16?this._high|=1<<n-16:this._low|=1<<n);return this},r.prototype.negate=function(){var t=1+(65535&~this._low);return this._low=65535&t,this._high=~this._high+(t>>>16)&65535,this},r.prototype.equals=r.prototype.eq=function(t){return this._low==t._low&&this._high==t._high},r.prototype.greaterThan=r.prototype.gt=function(t){return this._high>t._high||!(this._high<t._high)&&this._low>t._low},r.prototype.lessThan=r.prototype.lt=function(t){return this._high<t._high||!(this._high>t._high)&&this._low<t._low},r.prototype.or=function(t){return this._low|=t._low,this._high|=t._high,this},r.prototype.and=function(t){return this._low&=t._low,this._high&=t._high,this},r.prototype.not=function(){return this._low=65535&~this._low,this._high=65535&~this._high,this},r.prototype.xor=function(t){return this._low^=t._low,this._high^=t._high,this},r.prototype.shiftRight=r.prototype.shiftr=function(t){return t>16?(this._low=this._high>>t-16,this._high=0):16==t?(this._low=this._high,this._high=0):(this._low=this._low>>t|this._high<<16-t&65535,this._high>>=t),this},r.prototype.shiftLeft=r.prototype.shiftl=function(t,e){return t>16?(this._high=this._low<<t-16,this._low=0,e||(this._high&=65535)):16==t?(this._high=this._low,this._low=0):(this._high=this._high<<t|this._low>>16-t,this._low=this._low<<t&65535,e||(this._high&=65535)),this},r.prototype.rotateLeft=r.prototype.rotl=function(t){var e=this._high<<16|this._low;return e=e<<t|e>>>32-t,this._low=65535&e,this._high=e>>>16,this},r.prototype.rotateRight=r.prototype.rotr=function(t){var e=this._high<<16|this._low;return e=e>>>t|e<<32-t,this._low=65535&e,this._high=e>>>16,this},r.prototype.clone=function(){return new r(this._low,this._high)},t.exports?t.exports=r:e.UINT32=r}(f)})),UINT64:p((function(t){!function(e){var r={16:i(Math.pow(16,5)),10:i(Math.pow(10,5)),2:i(Math.pow(2,5))},n={16:i(16),10:i(10),2:i(2)};function i(t,e,r,n){return this instanceof i?(this.remainder=null,"string"==typeof t?u.call(this,t,e):void 0===e?s.call(this,t):void o.apply(this,arguments)):new i(t,e,r,n)}function o(t,e,r,n){return void 0===r?(this._a00=65535&t,this._a16=t>>>16,this._a32=65535&e,this._a48=e>>>16,this):(this._a00=0|t,this._a16=0|e,this._a32=0|r,this._a48=0|n,this)}function s(t){return this._a00=65535&t,this._a16=t>>>16,this._a32=0,this._a48=0,this}function u(t,e){e=e||10,this._a00=0,this._a16=0,this._a32=0,this._a48=0;for(var n=r[e]||new i(Math.pow(e,5)),o=0,s=t.length;o<s;o+=5){var u=Math.min(5,s-o),a=parseInt(t.slice(o,o+u),e);this.multiply(u<5?new i(Math.pow(e,u)):n).add(new i(a))}return this}i.prototype.fromBits=o,i.prototype.fromNumber=s,i.prototype.fromString=u,i.prototype.toNumber=function(){return 65536*this._a16+this._a00},i.prototype.toString=function(t){var e=n[t=t||10]||new i(t);if(!this.gt(e))return this.toNumber().toString(t);for(var r=this.clone(),o=new Array(64),s=63;s>=0&&(r.div(e),o[s]=r.remainder.toNumber().toString(t),r.gt(e));s--);return o[s-1]=r.toNumber().toString(t),o.join("")},i.prototype.add=function(t){var e=this._a00+t._a00,r=e>>>16,n=(r+=this._a16+t._a16)>>>16,i=(n+=this._a32+t._a32)>>>16;return i+=this._a48+t._a48,this._a00=65535&e,this._a16=65535&r,this._a32=65535&n,this._a48=65535&i,this},i.prototype.subtract=function(t){return this.add(t.clone().negate())},i.prototype.multiply=function(t){var e=this._a00,r=this._a16,n=this._a32,i=this._a48,o=t._a00,s=t._a16,u=t._a32,a=e*o,c=a>>>16,f=(c+=e*s)>>>16;c&=65535,f+=(c+=r*o)>>>16;var l=(f+=e*u)>>>16;return f&=65535,l+=(f+=r*s)>>>16,f&=65535,l+=(f+=n*o)>>>16,l+=e*t._a48,l&=65535,l+=r*u,l&=65535,l+=n*s,l&=65535,l+=i*o,this._a00=65535&a,this._a16=65535&c,this._a32=65535&f,this._a48=65535&l,this},i.prototype.div=function(t){if(0==t._a16&&0==t._a32&&0==t._a48){if(0==t._a00)throw Error("division by zero");if(1==t._a00)return this.remainder=new i(0),this}if(t.gt(this))return this.remainder=this.clone(),this._a00=0,this._a16=0,this._a32=0,this._a48=0,this;if(this.eq(t))return this.remainder=new i(0),this._a00=1,this._a16=0,this._a32=0,this._a48=0,this;for(var e=t.clone(),r=-1;!this.lt(e);)e.shiftLeft(1,!0),r++;for(this.remainder=this.clone(),this._a00=0,this._a16=0,this._a32=0,this._a48=0;r>=0;r--)e.shiftRight(1),this.remainder.lt(e)||(this.remainder.subtract(e),r>=48?this._a48|=1<<r-48:r>=32?this._a32|=1<<r-32:r>=16?this._a16|=1<<r-16:this._a00|=1<<r);return this},i.prototype.negate=function(){var t=1+(65535&~this._a00);return this._a00=65535&t,t=(65535&~this._a16)+(t>>>16),this._a16=65535&t,t=(65535&~this._a32)+(t>>>16),this._a32=65535&t,this._a48=~this._a48+(t>>>16)&65535,this},i.prototype.equals=i.prototype.eq=function(t){return this._a48==t._a48&&this._a00==t._a00&&this._a32==t._a32&&this._a16==t._a16},i.prototype.greaterThan=i.prototype.gt=function(t){return this._a48>t._a48||!(this._a48<t._a48)&&(this._a32>t._a32||!(this._a32<t._a32)&&(this._a16>t._a16||!(this._a16<t._a16)&&this._a00>t._a00))},i.prototype.lessThan=i.prototype.lt=function(t){return this._a48<t._a48||!(this._a48>t._a48)&&(this._a32<t._a32||!(this._a32>t._a32)&&(this._a16<t._a16||!(this._a16>t._a16)&&this._a00<t._a00))},i.prototype.or=function(t){return this._a00|=t._a00,this._a16|=t._a16,this._a32|=t._a32,this._a48|=t._a48,this},i.prototype.and=function(t){return this._a00&=t._a00,this._a16&=t._a16,this._a32&=t._a32,this._a48&=t._a48,this},i.prototype.xor=function(t){return this._a00^=t._a00,this._a16^=t._a16,this._a32^=t._a32,this._a48^=t._a48,this},i.prototype.not=function(){return this._a00=65535&~this._a00,this._a16=65535&~this._a16,this._a32=65535&~this._a32,this._a48=65535&~this._a48,this},i.prototype.shiftRight=i.prototype.shiftr=function(t){return(t%=64)>=48?(this._a00=this._a48>>t-48,this._a16=0,this._a32=0,this._a48=0):t>=32?(t-=32,this._a00=65535&(this._a32>>t|this._a48<<16-t),this._a16=this._a48>>t&65535,this._a32=0,this._a48=0):t>=16?(t-=16,this._a00=65535&(this._a16>>t|this._a32<<16-t),this._a16=65535&(this._a32>>t|this._a48<<16-t),this._a32=this._a48>>t&65535,this._a48=0):(this._a00=65535&(this._a00>>t|this._a16<<16-t),this._a16=65535&(this._a16>>t|this._a32<<16-t),this._a32=65535&(this._a32>>t|this._a48<<16-t),this._a48=this._a48>>t&65535),this},i.prototype.shiftLeft=i.prototype.shiftl=function(t,e){return(t%=64)>=48?(this._a48=this._a00<<t-48,this._a32=0,this._a16=0,this._a00=0):t>=32?(t-=32,this._a48=this._a16<<t|this._a00>>16-t,this._a32=this._a00<<t&65535,this._a16=0,this._a00=0):t>=16?(t-=16,this._a48=this._a32<<t|this._a16>>16-t,this._a32=65535&(this._a16<<t|this._a00>>16-t),this._a16=this._a00<<t&65535,this._a00=0):(this._a48=this._a48<<t|this._a32>>16-t,this._a32=65535&(this._a32<<t|this._a16>>16-t),this._a16=65535&(this._a16<<t|this._a00>>16-t),this._a00=this._a00<<t&65535),e||(this._a48&=65535),this},i.prototype.rotateLeft=i.prototype.rotl=function(t){if(0==(t%=64))return this;if(t>=32){var e=this._a00;if(this._a00=this._a32,this._a32=e,e=this._a48,this._a48=this._a16,this._a16=e,32==t)return this;t-=32}var r=this._a48<<16|this._a32,n=this._a16<<16|this._a00,i=r<<t|n>>>32-t,o=n<<t|r>>>32-t;return this._a00=65535&o,this._a16=o>>>16,this._a32=65535&i,this._a48=i>>>16,this},i.prototype.rotateRight=i.prototype.rotr=function(t){if(0==(t%=64))return this;if(t>=32){var e=this._a00;if(this._a00=this._a32,this._a32=e,e=this._a48,this._a48=this._a16,this._a16=e,32==t)return this;t-=32}var r=this._a48<<16|this._a32,n=this._a16<<16|this._a00,i=r>>>t|n<<32-t,o=n>>>t|r<<32-t;return this._a00=65535&o,this._a16=o>>>16,this._a32=65535&i,this._a48=i>>>16,this},i.prototype.clone=function(){return new i(this._a00,this._a16,this._a32,this._a48)},t.exports?t.exports=i:e.UINT64=i}(f)}))},zh=Mh.UINT32;zh.prototype.xxh_update=function(t,e){var r,n,i=Kh._low,o=Kh._high;r=(n=t*i)>>>16,r+=e*i,r&=65535,r+=t*o;var s=this._low+(65535&n),u=s>>>16,a=(u+=this._high+(65535&r))<<16|65535&s;u=(a=a<<13|a>>>19)>>>16,r=(n=(s=65535&a)*(i=Fh._low))>>>16,r+=u*i,r&=65535,r+=s*(o=Fh._high),this._low=65535&n,this._high=65535&r};var Fh=zh("2654435761"),Kh=zh("2246822519"),Hh=zh("3266489917"),Gh=zh("668265263"),$h=zh("374761393");function Wh(){return 2==arguments.length?new Wh(arguments[1]).update(arguments[0]).digest():this instanceof Wh?void qh.call(this,arguments[0]):new Wh(arguments[0])}function qh(t){return this.seed=t instanceof zh?t.clone():zh(t),this.v1=this.seed.clone().add(Fh).add(Kh),this.v2=this.seed.clone().add(Kh),this.v3=this.seed.clone(),this.v4=this.seed.clone().subtract(Fh),this.total_len=0,this.memsize=0,this.memory=null,this}Wh.prototype.init=qh,Wh.prototype.update=function(t){var e,r="string"==typeof t;r&&(t=function(t){for(var e=[],r=0,n=t.length;r<n;r++){var i=t.charCodeAt(r);i<128?e.push(i):i<2048?e.push(192|i>>6,128|63&i):i<55296||i>=57344?e.push(224|i>>12,128|i>>6&63,128|63&i):(r++,i=65536+((1023&i)<<10|1023&t.charCodeAt(r)),e.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|63&i))}return new Uint8Array(e)}(t),r=!1,e=!0),"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer&&(e=!0,t=new Uint8Array(t));var n=0,i=t.length,o=n+i;if(0==i)return this;if(this.total_len+=i,0==this.memsize&&(this.memory=r?"":e?new Uint8Array(16):new K.Buffer(16)),this.memsize+i<16)return r?this.memory+=t:e?this.memory.set(t.subarray(0,i),this.memsize):t.copy(this.memory,this.memsize,0,i),this.memsize+=i,this;if(this.memsize>0){r?this.memory+=t.slice(0,16-this.memsize):e?this.memory.set(t.subarray(0,16-this.memsize),this.memsize):t.copy(this.memory,this.memsize,0,16-this.memsize);var s=0;r?(this.v1.xxh_update(this.memory.charCodeAt(s+1)<<8|this.memory.charCodeAt(s),this.memory.charCodeAt(s+3)<<8|this.memory.charCodeAt(s+2)),s+=4,this.v2.xxh_update(this.memory.charCodeAt(s+1)<<8|this.memory.charCodeAt(s),this.memory.charCodeAt(s+3)<<8|this.memory.charCodeAt(s+2)),s+=4,this.v3.xxh_update(this.memory.charCodeAt(s+1)<<8|this.memory.charCodeAt(s),this.memory.charCodeAt(s+3)<<8|this.memory.charCodeAt(s+2)),s+=4,this.v4.xxh_update(this.memory.charCodeAt(s+1)<<8|this.memory.charCodeAt(s),this.memory.charCodeAt(s+3)<<8|this.memory.charCodeAt(s+2))):(this.v1.xxh_update(this.memory[s+1]<<8|this.memory[s],this.memory[s+3]<<8|this.memory[s+2]),s+=4,this.v2.xxh_update(this.memory[s+1]<<8|this.memory[s],this.memory[s+3]<<8|this.memory[s+2]),s+=4,this.v3.xxh_update(this.memory[s+1]<<8|this.memory[s],this.memory[s+3]<<8|this.memory[s+2]),s+=4,this.v4.xxh_update(this.memory[s+1]<<8|this.memory[s],this.memory[s+3]<<8|this.memory[s+2])),n+=16-this.memsize,this.memsize=0,r&&(this.memory="")}if(n<=o-16){var u=o-16;do{r?(this.v1.xxh_update(t.charCodeAt(n+1)<<8|t.charCodeAt(n),t.charCodeAt(n+3)<<8|t.charCodeAt(n+2)),n+=4,this.v2.xxh_update(t.charCodeAt(n+1)<<8|t.charCodeAt(n),t.charCodeAt(n+3)<<8|t.charCodeAt(n+2)),n+=4,this.v3.xxh_update(t.charCodeAt(n+1)<<8|t.charCodeAt(n),t.charCodeAt(n+3)<<8|t.charCodeAt(n+2)),n+=4,this.v4.xxh_update(t.charCodeAt(n+1)<<8|t.charCodeAt(n),t.charCodeAt(n+3)<<8|t.charCodeAt(n+2))):(this.v1.xxh_update(t[n+1]<<8|t[n],t[n+3]<<8|t[n+2]),n+=4,this.v2.xxh_update(t[n+1]<<8|t[n],t[n+3]<<8|t[n+2]),n+=4,this.v3.xxh_update(t[n+1]<<8|t[n],t[n+3]<<8|t[n+2]),n+=4,this.v4.xxh_update(t[n+1]<<8|t[n],t[n+3]<<8|t[n+2])),n+=4}while(n<=u)}return n<o&&(r?this.memory+=t.slice(n):e?this.memory.set(t.subarray(n,o),this.memsize):t.copy(this.memory,this.memsize,n,o),this.memsize=o-n),this},Wh.prototype.digest=function(){var t,e,r=this.memory,n="string"==typeof r,i=0,o=this.memsize,s=new zh;for((t=this.total_len>=16?this.v1.rotl(1).add(this.v2.rotl(7).add(this.v3.rotl(12).add(this.v4.rotl(18)))):this.seed.clone().add($h)).add(s.fromNumber(this.total_len));i<=o-4;)n?s.fromBits(r.charCodeAt(i+1)<<8|r.charCodeAt(i),r.charCodeAt(i+3)<<8|r.charCodeAt(i+2)):s.fromBits(r[i+1]<<8|r[i],r[i+3]<<8|r[i+2]),t.add(s.multiply(Hh)).rotl(17).multiply(Gh),i+=4;for(;i<o;)s.fromBits(n?r.charCodeAt(i++):r[i++],0),t.add(s.multiply($h)).rotl(11).multiply(Fh);return e=t.clone().shiftRight(15),t.xor(e).multiply(Kh),e=t.clone().shiftRight(13),t.xor(e).multiply(Hh),e=t.clone().shiftRight(16),t.xor(e),this.init(this.seed),t};var Vh=Wh,Yh=Mh.UINT64,Jh=Yh("11400714785074694791"),Zh=Yh("14029467366897019727"),Xh=Yh("1609587929392839161"),Qh=Yh("9650029242287828579"),tp=Yh("2870177450012600261");function ep(){return 2==arguments.length?new ep(arguments[1]).update(arguments[0]).digest():this instanceof ep?void rp.call(this,arguments[0]):new ep(arguments[0])}function rp(t){return this.seed=t instanceof Yh?t.clone():Yh(t),this.v1=this.seed.clone().add(Jh).add(Zh),this.v2=this.seed.clone().add(Zh),this.v3=this.seed.clone(),this.v4=this.seed.clone().subtract(Jh),this.total_len=0,this.memsize=0,this.memory=null,this}ep.prototype.init=rp,ep.prototype.update=function(t){var e,r="string"==typeof t;r&&(t=function(t){for(var e=[],r=0,n=t.length;r<n;r++){var i=t.charCodeAt(r);i<128?e.push(i):i<2048?e.push(192|i>>6,128|63&i):i<55296||i>=57344?e.push(224|i>>12,128|i>>6&63,128|63&i):(r++,i=65536+((1023&i)<<10|1023&t.charCodeAt(r)),e.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|63&i))}return new Uint8Array(e)}(t),r=!1,e=!0),"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer&&(e=!0,t=new Uint8Array(t));var n=0,i=t.length,o=n+i;if(0==i)return this;if(this.total_len+=i,0==this.memsize&&(this.memory=r?"":e?new Uint8Array(32):new K.Buffer(32)),this.memsize+i<32)return r?this.memory+=t:e?this.memory.set(t.subarray(0,i),this.memsize):t.copy(this.memory,this.memsize,0,i),this.memsize+=i,this;if(this.memsize>0){r?this.memory+=t.slice(0,32-this.memsize):e?this.memory.set(t.subarray(0,32-this.memsize),this.memsize):t.copy(this.memory,this.memsize,0,32-this.memsize);var s=0;if(r)a=Yh(this.memory.charCodeAt(s+1)<<8|this.memory.charCodeAt(s),this.memory.charCodeAt(s+3)<<8|this.memory.charCodeAt(s+2),this.memory.charCodeAt(s+5)<<8|this.memory.charCodeAt(s+4),this.memory.charCodeAt(s+7)<<8|this.memory.charCodeAt(s+6)),this.v1.add(a.multiply(Zh)).rotl(31).multiply(Jh),s+=8,a=Yh(this.memory.charCodeAt(s+1)<<8|this.memory.charCodeAt(s),this.memory.charCodeAt(s+3)<<8|this.memory.charCodeAt(s+2),this.memory.charCodeAt(s+5)<<8|this.memory.charCodeAt(s+4),this.memory.charCodeAt(s+7)<<8|this.memory.charCodeAt(s+6)),this.v2.add(a.multiply(Zh)).rotl(31).multiply(Jh),s+=8,a=Yh(this.memory.charCodeAt(s+1)<<8|this.memory.charCodeAt(s),this.memory.charCodeAt(s+3)<<8|this.memory.charCodeAt(s+2),this.memory.charCodeAt(s+5)<<8|this.memory.charCodeAt(s+4),this.memory.charCodeAt(s+7)<<8|this.memory.charCodeAt(s+6)),this.v3.add(a.multiply(Zh)).rotl(31).multiply(Jh),s+=8,a=Yh(this.memory.charCodeAt(s+1)<<8|this.memory.charCodeAt(s),this.memory.charCodeAt(s+3)<<8|this.memory.charCodeAt(s+2),this.memory.charCodeAt(s+5)<<8|this.memory.charCodeAt(s+4),this.memory.charCodeAt(s+7)<<8|this.memory.charCodeAt(s+6)),this.v4.add(a.multiply(Zh)).rotl(31).multiply(Jh);else a=Yh(this.memory[s+1]<<8|this.memory[s],this.memory[s+3]<<8|this.memory[s+2],this.memory[s+5]<<8|this.memory[s+4],this.memory[s+7]<<8|this.memory[s+6]),this.v1.add(a.multiply(Zh)).rotl(31).multiply(Jh),s+=8,a=Yh(this.memory[s+1]<<8|this.memory[s],this.memory[s+3]<<8|this.memory[s+2],this.memory[s+5]<<8|this.memory[s+4],this.memory[s+7]<<8|this.memory[s+6]),this.v2.add(a.multiply(Zh)).rotl(31).multiply(Jh),s+=8,a=Yh(this.memory[s+1]<<8|this.memory[s],this.memory[s+3]<<8|this.memory[s+2],this.memory[s+5]<<8|this.memory[s+4],this.memory[s+7]<<8|this.memory[s+6]),this.v3.add(a.multiply(Zh)).rotl(31).multiply(Jh),s+=8,a=Yh(this.memory[s+1]<<8|this.memory[s],this.memory[s+3]<<8|this.memory[s+2],this.memory[s+5]<<8|this.memory[s+4],this.memory[s+7]<<8|this.memory[s+6]),this.v4.add(a.multiply(Zh)).rotl(31).multiply(Jh);n+=32-this.memsize,this.memsize=0,r&&(this.memory="")}if(n<=o-32){var u=o-32;do{var a;if(r)a=Yh(t.charCodeAt(n+1)<<8|t.charCodeAt(n),t.charCodeAt(n+3)<<8|t.charCodeAt(n+2),t.charCodeAt(n+5)<<8|t.charCodeAt(n+4),t.charCodeAt(n+7)<<8|t.charCodeAt(n+6)),this.v1.add(a.multiply(Zh)).rotl(31).multiply(Jh),n+=8,a=Yh(t.charCodeAt(n+1)<<8|t.charCodeAt(n),t.charCodeAt(n+3)<<8|t.charCodeAt(n+2),t.charCodeAt(n+5)<<8|t.charCodeAt(n+4),t.charCodeAt(n+7)<<8|t.charCodeAt(n+6)),this.v2.add(a.multiply(Zh)).rotl(31).multiply(Jh),n+=8,a=Yh(t.charCodeAt(n+1)<<8|t.charCodeAt(n),t.charCodeAt(n+3)<<8|t.charCodeAt(n+2),t.charCodeAt(n+5)<<8|t.charCodeAt(n+4),t.charCodeAt(n+7)<<8|t.charCodeAt(n+6)),this.v3.add(a.multiply(Zh)).rotl(31).multiply(Jh),n+=8,a=Yh(t.charCodeAt(n+1)<<8|t.charCodeAt(n),t.charCodeAt(n+3)<<8|t.charCodeAt(n+2),t.charCodeAt(n+5)<<8|t.charCodeAt(n+4),t.charCodeAt(n+7)<<8|t.charCodeAt(n+6)),this.v4.add(a.multiply(Zh)).rotl(31).multiply(Jh);else a=Yh(t[n+1]<<8|t[n],t[n+3]<<8|t[n+2],t[n+5]<<8|t[n+4],t[n+7]<<8|t[n+6]),this.v1.add(a.multiply(Zh)).rotl(31).multiply(Jh),a=Yh(t[(n+=8)+1]<<8|t[n],t[n+3]<<8|t[n+2],t[n+5]<<8|t[n+4],t[n+7]<<8|t[n+6]),this.v2.add(a.multiply(Zh)).rotl(31).multiply(Jh),a=Yh(t[(n+=8)+1]<<8|t[n],t[n+3]<<8|t[n+2],t[n+5]<<8|t[n+4],t[n+7]<<8|t[n+6]),this.v3.add(a.multiply(Zh)).rotl(31).multiply(Jh),a=Yh(t[(n+=8)+1]<<8|t[n],t[n+3]<<8|t[n+2],t[n+5]<<8|t[n+4],t[n+7]<<8|t[n+6]),this.v4.add(a.multiply(Zh)).rotl(31).multiply(Jh);n+=8}while(n<=u)}return n<o&&(r?this.memory+=t.slice(n):e?this.memory.set(t.subarray(n,o),this.memsize):t.copy(this.memory,this.memsize,n,o),this.memsize=o-n),this},ep.prototype.digest=function(){var t,e,r=this.memory,n="string"==typeof r,i=0,o=this.memsize,s=new Yh;for(this.total_len>=32?((t=this.v1.clone().rotl(1)).add(this.v2.clone().rotl(7)),t.add(this.v3.clone().rotl(12)),t.add(this.v4.clone().rotl(18)),t.xor(this.v1.multiply(Zh).rotl(31).multiply(Jh)),t.multiply(Jh).add(Qh),t.xor(this.v2.multiply(Zh).rotl(31).multiply(Jh)),t.multiply(Jh).add(Qh),t.xor(this.v3.multiply(Zh).rotl(31).multiply(Jh)),t.multiply(Jh).add(Qh),t.xor(this.v4.multiply(Zh).rotl(31).multiply(Jh)),t.multiply(Jh).add(Qh)):t=this.seed.clone().add(tp),t.add(s.fromNumber(this.total_len));i<=o-8;)n?s.fromBits(r.charCodeAt(i+1)<<8|r.charCodeAt(i),r.charCodeAt(i+3)<<8|r.charCodeAt(i+2),r.charCodeAt(i+5)<<8|r.charCodeAt(i+4),r.charCodeAt(i+7)<<8|r.charCodeAt(i+6)):s.fromBits(r[i+1]<<8|r[i],r[i+3]<<8|r[i+2],r[i+5]<<8|r[i+4],r[i+7]<<8|r[i+6]),s.multiply(Zh).rotl(31).multiply(Jh),t.xor(s).rotl(27).multiply(Jh).add(Qh),i+=8;for(i+4<=o&&(n?s.fromBits(r.charCodeAt(i+1)<<8|r.charCodeAt(i),r.charCodeAt(i+3)<<8|r.charCodeAt(i+2),0,0):s.fromBits(r[i+1]<<8|r[i],r[i+3]<<8|r[i+2],0,0),t.xor(s.multiply(Jh)).rotl(23).multiply(Zh).add(Xh),i+=4);i<o;)s.fromBits(n?r.charCodeAt(i++):r[i++],0,0,0),t.xor(s.multiply(tp)).rotl(11).multiply(Jh);return e=t.clone().shiftRight(33),t.xor(e).multiply(Zh),e=t.clone().shiftRight(29),t.xor(e).multiply(Xh),e=t.clone().shiftRight(32),t.xor(e),this.init(this.seed),t};var np={h32:Vh,h64:ep},ip=f&&f.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},op=(f&&f.__importDefault||function(t){return t&&t.__esModule?t:{default:t}})(np);var sp=function(t,e){for(var r=new Array(t),n="function"==typeof e?e:function(){return e},i=0;i<t;i++)r[i]=n();return r};function up(t,e,r){void 0===e&&(e=!1),void 0===r&&(r=78187493520);var n=op.default.h64(t,r+1),i=op.default.h64(t,r+2);if(e)return{first:n.toNumber(),second:i.toNumber()};var o=n.toString(16);o.length<16&&(o="0".repeat(16-o.length)+o);var s=i.toString(16);return s.length<16&&(s="0".repeat(16-s.length)+s),{first:Number(o),second:Number(s)}}var ap=up;var cp=function(t,e){void 0===e&&(e=78187493520);var r=op.default.h64(t,e+1),n=op.default.h64(t,e+2),i=r.toString(16);i.length<16&&(i="0".repeat(16-i.length)+i);var o=n.toString(16);return o.length<16&&(o="0".repeat(16-o.length)+o),{first:i,second:o}};var fp=function(t,e){void 0===e&&(e=78187493520);var r=op.default.h64(t,e+1),n=op.default.h64(t,e+2),i=r.toString(16);i.length<16&&(i="0".repeat(16-i.length)+i);var o=n.toString(16);return o.length<16&&(o="0".repeat(16-o.length)+o),{int:{first:r.toNumber(),second:n.toNumber()},string:{first:i,second:o}}};function lp(t,e,r,n){return Math.abs((e+t*r)%n)}var hp=lp;var pp=function(t,e,r,n){return void 0===n&&(n=78187493520),function t(e,r,i,o,s){if(void 0===s&&(s=[]),s.length===o)return s;var u=up(r,!0,n+i%e),a=lp(e,u.first,u.second,i);return s.includes(a)||s.push(a),t(e+1,r,i,o,s)}(1,t,e,r)};var dp=function(t,e,r,n){void 0===n&&(n=78187493520);for(var i=[],o=1;o<=r;o++){var s=up(t,!0,n+e%o);i.push(lp(o,s.first,s.second,e))}if(i.length!==r)throw new Error("report this, please, shouldnt be of different size");return i};var yp=function(t,e,r){void 0===r&&(r=Math.random),t=Math.ceil(t),e=Math.floor(e);var n=r();return Math.floor(n*(e-t+1))+t};var vp=function(t,e){for(var r=Math.max(t.length,e.length),n=K.Buffer.allocUnsafe(r).fill(0),i=0;i<r;++i)i<t.length&&i<e.length?n[r-i-1]=t[t.length-i-1]^e[e.length-i-1]:i<t.length&&i>=e.length?n[r-i-1]^=t[t.length-i-1]:i<e.length&&i>=t.length&&(n[r-i-1]^=e[e.length-i-1]);for(var o=0,s=n.values(),u=s.next();!u.done&&0===u.value;)o++,u=s.next();return n.slice(o)};var gp=function(t){var e,r;if(null===t||!t)return!0;try{for(var n=ip(t),i=n.next();!i.done;i=n.next()){if(0!==i.value)return!1}}catch(t){e={error:t}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(e)throw e.error}}return!0};var mp=function(t,e,r){switch(void 0===e&&(e=78187493520),r){case 32:return op.default.h32(t,e).toNumber();case 64:default:return op.default.h64(t,e).toNumber()}};var bp=function(t,e,r,n){var i;switch(void 0===e&&(e=78187493520),void 0===r&&(r=16),void 0===n&&(n=64),n){case 32:i=op.default.h32(t,e);break;case 64:default:i=op.default.h64(t,e)}var o="";return 16===r?(o=i.toString(r)).length<n/4&&(o="0".repeat(n/4-o.length)+o):2===r&&(o=Ap(i.toString(16))).length<n&&(o="0".repeat(n-o.length)+o),o};var _p=function(t,e,r,n){var i;switch(void 0===e&&(e=78187493520),void 0===r&&(r=16),void 0===n&&(n=64),n){case 32:i=op.default.h32(t,e);break;case 64:default:i=op.default.h64(t,e)}var o="";return 16===r?(o=i.toString(r)).length<n/4&&(o="0".repeat(n/4-o.length)+o):2===r&&(o=Ap(i.toString(16))).length<n&&(o="0".repeat(n-o.length)+o),{int:i.toNumber(),string:o}};function wp(){return 78187493520}var kp=wp;var Ep=function(t){return Math.ceil(Math.pow(2,Math.floor(Math.log(t)/Math.log(2))))};function Ap(t){return parseInt(t,16).toString(2)}var Sp=Ap;var Ip=function(t){return[128,64,32,16,8,4,2,1].map((function(e){return(e&t)>0?1:0}))};var xp=function(t){return t.reduce((function(t,e,r){if(0===e)return t;if(1===e)return t+Math.pow(2,7-r);throw new Error("Not binary")}),0)},Bp=Object.defineProperty({allocateArray:sp,hashTwice:ap,hashTwiceAsString:cp,allInOneHashTwice:fp,doubleHashing:hp,getDistinctIndices:pp,getIndices:dp,randomInt:yp,xorBuffer:vp,isEmptyBuffer:gp,hashAsInt:mp,hashAsString:bp,hashIntAndString:_p,getDefaultSeed:kp,power2:Ep,hex2bin:Sp,uint8ToBits:Ip,bitsToUint8:xp},"__esModule",{value:!0}),Tp=p((function(t){!function(t,e,r){function n(t){var e,r=this,n=(e=4022871197,function(t){t=String(t);for(var r=0;r<t.length;r++){var n=.02519603282416938*(e+=t.charCodeAt(r));n-=e=n>>>0,e=(n*=e)>>>0,e+=4294967296*(n-=e)}return 2.3283064365386963e-10*(e>>>0)});r.next=function(){var t=2091639*r.s0+2.3283064365386963e-10*r.c;return r.s0=r.s1,r.s1=r.s2,r.s2=t-(r.c=0|t)},r.c=1,r.s0=n(" "),r.s1=n(" "),r.s2=n(" "),r.s0-=n(t),r.s0<0&&(r.s0+=1),r.s1-=n(t),r.s1<0&&(r.s1+=1),r.s2-=n(t),r.s2<0&&(r.s2+=1),n=null}function i(t,e){return e.c=t.c,e.s0=t.s0,e.s1=t.s1,e.s2=t.s2,e}function o(t,e){var r=new n(t),o=e&&e.state,s=r.next;return s.int32=function(){return 4294967296*r.next()|0},s.double=function(){return s()+11102230246251565e-32*(2097152*s()|0)},s.quick=s,o&&("object"==typeof o&&i(o,r),s.state=function(){return i(r,{})}),s}e&&e.exports?e.exports=o:r&&r.amd?r((function(){return o})):this.alea=o}(0,t,!1)})),Op=p((function(t){!function(t,e,r){function n(t){var e=this,r="";e.x=0,e.y=0,e.z=0,e.w=0,e.next=function(){var t=e.x^e.x<<11;return e.x=e.y,e.y=e.z,e.z=e.w,e.w^=e.w>>>19^t^t>>>8},t===(0|t)?e.x=t:r+=t;for(var n=0;n<r.length+64;n++)e.x^=0|r.charCodeAt(n),e.next()}function i(t,e){return e.x=t.x,e.y=t.y,e.z=t.z,e.w=t.w,e}function o(t,e){var r=new n(t),o=e&&e.state,s=function(){return(r.next()>>>0)/4294967296};return s.double=function(){do{var t=((r.next()>>>11)+(r.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},s.int32=r.next,s.quick=s,o&&("object"==typeof o&&i(o,r),s.state=function(){return i(r,{})}),s}e&&e.exports?e.exports=o:r&&r.amd?r((function(){return o})):this.xor128=o}(0,t,!1)})),Np=p((function(t){!function(t,e,r){function n(t){var e=this,r="";e.next=function(){var t=e.x^e.x>>>2;return e.x=e.y,e.y=e.z,e.z=e.w,e.w=e.v,(e.d=e.d+362437|0)+(e.v=e.v^e.v<<4^t^t<<1)|0},e.x=0,e.y=0,e.z=0,e.w=0,e.v=0,t===(0|t)?e.x=t:r+=t;for(var n=0;n<r.length+64;n++)e.x^=0|r.charCodeAt(n),n==r.length&&(e.d=e.x<<10^e.x>>>4),e.next()}function i(t,e){return e.x=t.x,e.y=t.y,e.z=t.z,e.w=t.w,e.v=t.v,e.d=t.d,e}function o(t,e){var r=new n(t),o=e&&e.state,s=function(){return(r.next()>>>0)/4294967296};return s.double=function(){do{var t=((r.next()>>>11)+(r.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},s.int32=r.next,s.quick=s,o&&("object"==typeof o&&i(o,r),s.state=function(){return i(r,{})}),s}e&&e.exports?e.exports=o:r&&r.amd?r((function(){return o})):this.xorwow=o}(0,t,!1)})),Cp=p((function(t){!function(t,e,r){function n(t){var e=this;e.next=function(){var t,r,n=e.x,i=e.i;return t=n[i],r=(t^=t>>>7)^t<<24,r^=(t=n[i+1&7])^t>>>10,r^=(t=n[i+3&7])^t>>>3,r^=(t=n[i+4&7])^t<<7,t=n[i+7&7],r^=(t^=t<<13)^t<<9,n[i]=r,e.i=i+1&7,r},function(t,e){var r,n=[];if(e===(0|e))n[0]=e;else for(e=""+e,r=0;r<e.length;++r)n[7&r]=n[7&r]<<15^e.charCodeAt(r)+n[r+1&7]<<13;for(;n.length<8;)n.push(0);for(r=0;r<8&&0===n[r];++r);for(8==r&&(n[7]=-1),t.x=n,t.i=0,r=256;r>0;--r)t.next()}(e,t)}function i(t,e){return e.x=t.x.slice(),e.i=t.i,e}function o(t,e){null==t&&(t=+new Date);var r=new n(t),o=e&&e.state,s=function(){return(r.next()>>>0)/4294967296};return s.double=function(){do{var t=((r.next()>>>11)+(r.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},s.int32=r.next,s.quick=s,o&&(o.x&&i(o,r),s.state=function(){return i(r,{})}),s}e&&e.exports?e.exports=o:r&&r.amd?r((function(){return o})):this.xorshift7=o}(0,t,!1)})),Rp=p((function(t){!function(t,e,r){function n(t){var e=this;e.next=function(){var t,r,n=e.w,i=e.X,o=e.i;return e.w=n=n+1640531527|0,r=i[o+34&127],t=i[o=o+1&127],r^=r<<13,t^=t<<17,r^=r>>>15,t^=t>>>12,r=i[o]=r^t,e.i=o,r+(n^n>>>16)|0},function(t,e){var r,n,i,o,s,u=[],a=128;for(e===(0|e)?(n=e,e=null):(e+="\0",n=0,a=Math.max(a,e.length)),i=0,o=-32;o<a;++o)e&&(n^=e.charCodeAt((o+32)%e.length)),0===o&&(s=n),n^=n<<10,n^=n>>>15,n^=n<<4,n^=n>>>13,o>=0&&(s=s+1640531527|0,i=0==(r=u[127&o]^=n+s)?i+1:0);for(i>=128&&(u[127&(e&&e.length||0)]=-1),i=127,o=512;o>0;--o)n=u[i+34&127],r=u[i=i+1&127],n^=n<<13,r^=r<<17,n^=n>>>15,r^=r>>>12,u[i]=n^r;t.w=s,t.X=u,t.i=i}(e,t)}function i(t,e){return e.i=t.i,e.w=t.w,e.X=t.X.slice(),e}function o(t,e){null==t&&(t=+new Date);var r=new n(t),o=e&&e.state,s=function(){return(r.next()>>>0)/4294967296};return s.double=function(){do{var t=((r.next()>>>11)+(r.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},s.int32=r.next,s.quick=s,o&&(o.X&&i(o,r),s.state=function(){return i(r,{})}),s}e&&e.exports?e.exports=o:r&&r.amd?r((function(){return o})):this.xor4096=o}(0,t,!1)})),Up=p((function(t){!function(t,e,r){function n(t){var e=this,r="";e.next=function(){var t=e.b,r=e.c,n=e.d,i=e.a;return t=t<<25^t>>>7^r,r=r-n|0,n=n<<24^n>>>8^i,i=i-t|0,e.b=t=t<<20^t>>>12^r,e.c=r=r-n|0,e.d=n<<16^r>>>16^i,e.a=i-t|0},e.a=0,e.b=0,e.c=-1640531527,e.d=1367130551,t===Math.floor(t)?(e.a=t/4294967296|0,e.b=0|t):r+=t;for(var n=0;n<r.length+20;n++)e.b^=0|r.charCodeAt(n),e.next()}function i(t,e){return e.a=t.a,e.b=t.b,e.c=t.c,e.d=t.d,e}function o(t,e){var r=new n(t),o=e&&e.state,s=function(){return(r.next()>>>0)/4294967296};return s.double=function(){do{var t=((r.next()>>>11)+(r.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},s.int32=r.next,s.quick=s,o&&("object"==typeof o&&i(o,r),s.state=function(){return i(r,{})}),s}e&&e.exports?e.exports=o:r&&r.amd?r((function(){return o})):this.tychei=o}(0,t,!1)})),jp=h(Object.freeze({__proto__:null,default:{}})),Lp=p((function(t){!function(e,r,n){var i,o=256,s=n.pow(o,6),u=n.pow(2,52),a=2*u,c=255;function f(t,c,f){var v=[],g=d(p((c=1==c?{entropy:!0}:c||{}).entropy?[t,y(r)]:null==t?function(){try{var t;return i&&(t=i.randomBytes)?t=t(o):(t=new Uint8Array(o),(e.crypto||e.msCrypto).getRandomValues(t)),y(t)}catch(t){var n=e.navigator,s=n&&n.plugins;return[+new Date,e,s,e.screen,y(r)]}}():t,3),v),m=new l(v),b=function(){for(var t=m.g(6),e=s,r=0;t<u;)t=(t+r)*o,e*=o,r=m.g(1);for(;t>=a;)t/=2,e/=2,r>>>=1;return(t+r)/e};return b.int32=function(){return 0|m.g(4)},b.quick=function(){return m.g(4)/4294967296},b.double=b,d(y(m.S),r),(c.pass||f||function(t,e,r,i){return i&&(i.S&&h(i,m),t.state=function(){return h(m,{})}),r?(n.random=t,e):t})(b,g,"global"in c?c.global:this==n,c.state)}function l(t){var e,r=t.length,n=this,i=0,s=n.i=n.j=0,u=n.S=[];for(r||(t=[r++]);i<o;)u[i]=i++;for(i=0;i<o;i++)u[i]=u[s=c&s+t[i%r]+(e=u[i])],u[s]=e;(n.g=function(t){for(var e,r=0,i=n.i,s=n.j,u=n.S;t--;)e=u[i=c&i+1],r=r*o+u[c&(u[i]=u[s=c&s+e])+(u[s]=e)];return n.i=i,n.j=s,r})(o)}function h(t,e){return e.i=t.i,e.j=t.j,e.S=t.S.slice(),e}function p(t,e){var r,n=[],i=typeof t;if(e&&"object"==i)for(r in t)try{n.push(p(t[r],e-1))}catch(t){}return n.length?n:"string"==i?t:t+"\0"}function d(t,e){for(var r,n=t+"",i=0;i<n.length;)e[c&i]=c&(r^=19*e[c&i])+n.charCodeAt(i++);return y(e)}function y(t){return String.fromCharCode.apply(0,t)}if(d(n.random(),r),t.exports){t.exports=f;try{i=jp}catch(t){}}else n.seedrandom=f}("undefined"!=typeof self?self:f,[],Math)}));Lp.alea=Tp,Lp.xor128=Op,Lp.xorwow=Np,Lp.xorshift7=Cp,Lp.xor4096=Rp,Lp.tychei=Up;var Pp,Dp=Lp,Mp=f&&f.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e},zp=f&&f.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},Fp=Mp(Bp),Kp=zp(Dp),Hp=function(){function t(){this._seed=Fp.getDefaultSeed(),this._rng=Kp.default(""+this._seed)}return Object.defineProperty(t.prototype,"seed",{get:function(){return this._seed},set:function(t){this._seed=t,this._rng=Kp.default(""+this._seed)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"random",{get:function(){return this._rng},enumerable:!0,configurable:!0}),t}(),Gp=Object.defineProperty({default:Hp},"__esModule",{value:!0});!function(t){!function(e){var r="object"==typeof f?f:"object"==typeof self?self:"object"==typeof this?this:Function("return this;")(),n=i(t);function i(t,e){return function(r,n){"function"!=typeof t[r]&&Object.defineProperty(t,r,{configurable:!0,writable:!0,value:n}),e&&e(r,n)}}void 0===r.Reflect?r.Reflect=t:n=i(r.Reflect,n),function(t){var e=Object.prototype.hasOwnProperty,r="function"==typeof Symbol,n=r&&void 0!==Symbol.toPrimitive?Symbol.toPrimitive:"@@toPrimitive",i=r&&void 0!==Symbol.iterator?Symbol.iterator:"@@iterator",o="function"==typeof Object.create,s={__proto__:[]}instanceof Array,u=!o&&!s,a={create:o?function(){return nt(Object.create(null))}:s?function(){return nt({__proto__:null})}:function(){return nt({})},has:u?function(t,r){return e.call(t,r)}:function(t,e){return e in t},get:u?function(t,r){return e.call(t,r)?t[r]:void 0}:function(t,e){return t[e]}},c=Object.getPrototypeOf(Function),f="object"==typeof kt&&kt.env&&"true"===kt.env.REFLECT_METADATA_USE_MAP_POLYFILL,l=f||"function"!=typeof Map||"function"!=typeof Map.prototype.entries?tt():Map,h=f||"function"!=typeof Set||"function"!=typeof Set.prototype.entries?et():Set,p=new(f||"function"!=typeof WeakMap?rt():WeakMap);function d(t,e,r,n){if(j(r)){if(!G(t))throw new TypeError;if(!W(e))throw new TypeError;return A(t,e)}if(!G(t))throw new TypeError;if(!D(e))throw new TypeError;if(!D(n)&&!j(n)&&!L(n))throw new TypeError;return L(n)&&(n=void 0),S(t,e,r=H(r),n)}function y(t,e){function r(r,n){if(!D(r))throw new TypeError;if(!j(n)&&!q(n))throw new TypeError;N(t,e,r,n)}return r}function v(t,e,r,n){if(!D(r))throw new TypeError;return j(n)||(n=H(n)),N(t,e,r,n)}function g(t,e,r){if(!D(e))throw new TypeError;return j(r)||(r=H(r)),x(t,e,r)}function m(t,e,r){if(!D(e))throw new TypeError;return j(r)||(r=H(r)),B(t,e,r)}function b(t,e,r){if(!D(e))throw new TypeError;return j(r)||(r=H(r)),T(t,e,r)}function _(t,e,r){if(!D(e))throw new TypeError;return j(r)||(r=H(r)),O(t,e,r)}function w(t,e){if(!D(t))throw new TypeError;return j(e)||(e=H(e)),C(t,e)}function k(t,e){if(!D(t))throw new TypeError;return j(e)||(e=H(e)),R(t,e)}function E(t,e,r){if(!D(e))throw new TypeError;j(r)||(r=H(r));var n=I(e,r,!1);if(j(n))return!1;if(!n.delete(t))return!1;if(n.size>0)return!0;var i=p.get(e);return i.delete(r),i.size>0||p.delete(e),!0}function A(t,e){for(var r=t.length-1;r>=0;--r){var n=(0,t[r])(e);if(!j(n)&&!L(n)){if(!W(n))throw new TypeError;e=n}}return e}function S(t,e,r,n){for(var i=t.length-1;i>=0;--i){var o=(0,t[i])(e,r,n);if(!j(o)&&!L(o)){if(!D(o))throw new TypeError;n=o}}return n}function I(t,e,r){var n=p.get(t);if(j(n)){if(!r)return;n=new l,p.set(t,n)}var i=n.get(e);if(j(i)){if(!r)return;i=new l,n.set(e,i)}return i}function x(t,e,r){if(B(t,e,r))return!0;var n=Q(e);return!L(n)&&x(t,n,r)}function B(t,e,r){var n=I(e,r,!1);return!j(n)&&F(n.has(t))}function T(t,e,r){if(B(t,e,r))return O(t,e,r);var n=Q(e);return L(n)?void 0:T(t,n,r)}function O(t,e,r){var n=I(e,r,!1);if(!j(n))return n.get(t)}function N(t,e,r,n){I(r,n,!0).set(t,e)}function C(t,e){var r=R(t,e),n=Q(t);if(null===n)return r;var i=C(n,e);if(i.length<=0)return r;if(r.length<=0)return i;for(var o=new h,s=[],u=0,a=r;u<a.length;u++){var c=a[u];o.has(c)||(o.add(c),s.push(c))}for(var f=0,l=i;f<l.length;f++){c=l[f];o.has(c)||(o.add(c),s.push(c))}return s}function R(t,e){var r=[],n=I(t,e,!1);if(j(n))return r;for(var i=Y(n.keys()),o=0;;){var s=Z(i);if(!s)return r.length=o,r;var u=J(s);try{r[o]=u}catch(t){try{X(i)}finally{throw t}}o++}}function U(t){if(null===t)return 1;switch(typeof t){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return null===t?1:6;default:return 6}}function j(t){return void 0===t}function L(t){return null===t}function P(t){return"symbol"==typeof t}function D(t){return"object"==typeof t?null!==t:"function"==typeof t}function M(t,e){switch(U(t)){case 0:case 1:case 2:case 3:case 4:case 5:return t}var r=3===e?"string":5===e?"number":"default",i=V(t,n);if(void 0!==i){var o=i.call(t,r);if(D(o))throw new TypeError;return o}return z(t,"default"===r?"number":r)}function z(t,e){if("string"===e){var r=t.toString;if($(r))if(!D(i=r.call(t)))return i;if($(n=t.valueOf))if(!D(i=n.call(t)))return i}else{var n;if($(n=t.valueOf))if(!D(i=n.call(t)))return i;var i,o=t.toString;if($(o))if(!D(i=o.call(t)))return i}throw new TypeError}function F(t){return!!t}function K(t){return""+t}function H(t){var e=M(t,3);return P(e)?e:K(e)}function G(t){return Array.isArray?Array.isArray(t):t instanceof Object?t instanceof Array:"[object Array]"===Object.prototype.toString.call(t)}function $(t){return"function"==typeof t}function W(t){return"function"==typeof t}function q(t){switch(U(t)){case 3:case 4:return!0;default:return!1}}function V(t,e){var r=t[e];if(null!=r){if(!$(r))throw new TypeError;return r}}function Y(t){var e=V(t,i);if(!$(e))throw new TypeError;var r=e.call(t);if(!D(r))throw new TypeError;return r}function J(t){return t.value}function Z(t){var e=t.next();return!e.done&&e}function X(t){var e=t.return;e&&e.call(t)}function Q(t){var e=Object.getPrototypeOf(t);if("function"!=typeof t||t===c)return e;if(e!==c)return e;var r=t.prototype,n=r&&Object.getPrototypeOf(r);if(null==n||n===Object.prototype)return e;var i=n.constructor;return"function"!=typeof i||i===t?e:i}function tt(){var t={},e=[],r=function(){function t(t,e,r){this._index=0,this._keys=t,this._values=e,this._selector=r}return t.prototype["@@iterator"]=function(){return this},t.prototype[i]=function(){return this},t.prototype.next=function(){var t=this._index;if(t>=0&&t<this._keys.length){var r=this._selector(this._keys[t],this._values[t]);return t+1>=this._keys.length?(this._index=-1,this._keys=e,this._values=e):this._index++,{value:r,done:!1}}return{value:void 0,done:!0}},t.prototype.throw=function(t){throw this._index>=0&&(this._index=-1,this._keys=e,this._values=e),t},t.prototype.return=function(t){return this._index>=0&&(this._index=-1,this._keys=e,this._values=e),{value:t,done:!0}},t}();return function(){function e(){this._keys=[],this._values=[],this._cacheKey=t,this._cacheIndex=-2}return Object.defineProperty(e.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),e.prototype.has=function(t){return this._find(t,!1)>=0},e.prototype.get=function(t){var e=this._find(t,!1);return e>=0?this._values[e]:void 0},e.prototype.set=function(t,e){var r=this._find(t,!0);return this._values[r]=e,this},e.prototype.delete=function(e){var r=this._find(e,!1);if(r>=0){for(var n=this._keys.length,i=r+1;i<n;i++)this._keys[i-1]=this._keys[i],this._values[i-1]=this._values[i];return this._keys.length--,this._values.length--,e===this._cacheKey&&(this._cacheKey=t,this._cacheIndex=-2),!0}return!1},e.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=t,this._cacheIndex=-2},e.prototype.keys=function(){return new r(this._keys,this._values,n)},e.prototype.values=function(){return new r(this._keys,this._values,o)},e.prototype.entries=function(){return new r(this._keys,this._values,s)},e.prototype["@@iterator"]=function(){return this.entries()},e.prototype[i]=function(){return this.entries()},e.prototype._find=function(t,e){return this._cacheKey!==t&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=t)),this._cacheIndex<0&&e&&(this._cacheIndex=this._keys.length,this._keys.push(t),this._values.push(void 0)),this._cacheIndex},e}();function n(t,e){return t}function o(t,e){return e}function s(t,e){return[t,e]}}function et(){return function(){function t(){this._map=new l}return Object.defineProperty(t.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),t.prototype.has=function(t){return this._map.has(t)},t.prototype.add=function(t){return this._map.set(t,t),this},t.prototype.delete=function(t){return this._map.delete(t)},t.prototype.clear=function(){this._map.clear()},t.prototype.keys=function(){return this._map.keys()},t.prototype.values=function(){return this._map.values()},t.prototype.entries=function(){return this._map.entries()},t.prototype["@@iterator"]=function(){return this.keys()},t.prototype[i]=function(){return this.keys()},t}()}function rt(){var t=16,r=a.create(),n=i();return function(){function t(){this._key=i()}return t.prototype.has=function(t){var e=o(t,!1);return void 0!==e&&a.has(e,this._key)},t.prototype.get=function(t){var e=o(t,!1);return void 0!==e?a.get(e,this._key):void 0},t.prototype.set=function(t,e){return o(t,!0)[this._key]=e,this},t.prototype.delete=function(t){var e=o(t,!1);return void 0!==e&&delete e[this._key]},t.prototype.clear=function(){this._key=i()},t}();function i(){var t;do{t="@@WeakMap@@"+c()}while(a.has(r,t));return r[t]=!0,t}function o(t,r){if(!e.call(t,n)){if(!r)return;Object.defineProperty(t,n,{value:a.create()})}return t[n]}function s(t,e){for(var r=0;r<e;++r)t[r]=255*Math.random()|0;return t}function u(t){return"function"==typeof Uint8Array?"undefined"!=typeof crypto?crypto.getRandomValues(new Uint8Array(t)):"undefined"!=typeof msCrypto?msCrypto.getRandomValues(new Uint8Array(t)):s(new Uint8Array(t),t):s(new Array(t),t)}function c(){var e=u(t);e[6]=79&e[6]|64,e[8]=191&e[8]|128;for(var r="",n=0;n<t;++n){var i=e[n];4!==n&&6!==n&&8!==n||(r+="-"),i<16&&(r+="0"),r+=i.toString(16).toLowerCase()}return r}}function nt(t){return t.__=void 0,delete t.__,t}t("decorate",d),t("metadata",y),t("defineMetadata",v),t("hasMetadata",g),t("hasOwnMetadata",m),t("getMetadata",b),t("getOwnMetadata",_),t("getMetadataKeys",w),t("getOwnMetadataKeys",k),t("deleteMetadata",E)}(n)}()}(Pp||(Pp={}));var $p=f&&f.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,i,o=r.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=o.next()).done;)s.push(n.value)}catch(t){i={error:t}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return s},Wp=f&&f.__spread||function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat($p(arguments[e]));return t};function qp(t){return null==t?t:Array.isArray(t)?t.map(qp):"object"==typeof t?"saveAsJSON"in t?t.saveAsJSON():Object.assign({},t):t}var Vp=qp;var Yp=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];return function(r){var n={type:t};return e.forEach((function(t){n[t]=qp(r[t])})),n}};var Jp=function(t){return function(e){return e.prototype.saveAsJSON=function(){return t.export(this)},e.fromJSON=function(e){return t.import(e)},e}},Zp=Symbol("bloom-filters:exportable:class-name"),Xp=Symbol("bloom-filters:exportable:fields"),Qp=Symbol("bloom-filters:exportable:constructor-parameters");var td=function(t,e){return void 0===t&&(t=qp),void 0===e&&(e=function(t){return t}),function(r,n){var i=[];Reflect.hasMetadata(Xp,r)&&(i=Reflect.getMetadata(Xp,r)),i.push({name:n,exporter:t,importer:e}),Reflect.defineMetadata(Xp,i,r)}};var ed=function(t){return function(e,r,n){var i=new Map;Reflect.hasMetadata(Qp,e)&&(i=Reflect.getMetadata(Qp,e)),i.set(t,n),Reflect.defineMetadata(Qp,i,e)}};var rd=function(t,e){return void 0===e&&(e=[]),function(r){if(Reflect.defineMetadata(Zp,t,r.prototype),!Reflect.hasMetadata(Xp,r.prototype)||0===e.length)throw new SyntaxError("No exported fields declared when @AutoExportable is called");Reflect.hasMetadata(Qp,r)||Reflect.defineMetadata(Qp,new Map,r),r.prototype.saveAsJSON=function(){var t=this,n={type:Reflect.getMetadata(Zp,r.prototype)};return Reflect.getMetadata(Xp,r.prototype).forEach((function(e){n[e.name]=e.exporter(t[e.name])})),e.forEach((function(e){n[e]=qp(t[e])})),n},r.fromJSON=function(t){var n=Reflect.getMetadata(Zp,r.prototype),i=Reflect.getMetadata(Qp,r),o=Reflect.getMetadata(Xp,r.prototype);if(t.type!==n)throw new Error("Cannot create an object "+n+' from a JSON export with type "'+t.type+'"');var s=[],u=[];e.map((function(t){return{name:t,importer:function(t){return t}}})).concat(o).forEach((function(e){if(!(e.name in t))throw new Error('Invalid import: required field "'+e+'" not found in JSON export "'+t+'"');i.has(e.name)?s[i.get(e.name)]=e.importer(t[e.name]):u.push({name:e.name,value:e.importer(t[e.name])})}));var a=new(r.bind.apply(r,Wp([void 0],s)));return u.forEach((function(t){a[t.name]=t.value})),a}}},nd=Object.defineProperty({cloneField:Vp,cloneObject:Yp,Exportable:Jp,Field:td,Parameter:ed,AutoExportable:rd},"__esModule",{value:!0});var id=function(t,e){return Math.ceil(-t*Math.log(e)/Math.pow(Math.log(2),2))};var od=function(t,e){return Math.ceil(t/e*Math.log(2))},sd=Object.defineProperty({optimalFilterSize:id,optimalHashes:od},"__esModule",{value:!0}),ud=f&&f.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),ad=f&&f.__decorate||function(t,e,r,n){var i,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,r,n);else for(var u=t.length-1;u>=0;u--)(i=t[u])&&(s=(o<3?i(s):o>3?i(e,r,s):i(e,r))||s);return o>3&&s&&Object.defineProperty(e,r,s),s},cd=f&&f.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},fd=f&&f.__param||function(t,e){return function(r,n){e(r,n,t)}},ld=function(t){function e(e,r){var n=t.call(this)||this;if(r<1)throw new Error("A BloomFilter cannot uses less than one hash function, while you tried to use "+r+".");return n._size=e.length,n._nbHashes=r,n._filter=e,n._length=0,n}var r;return ud(e,t),r=e,e.empty=function(t,e){var n=Bp.allocateArray(t,0);return new r(n,e)},e.create=function(t,e){var n=sd.optimalFilterSize(t,e),i=sd.optimalHashes(n,t),o=Bp.allocateArray(n,0);return new r(o,i)},e.from=function(t,e){var n=Array.from(t),i=r.create(n.length,e);return n.forEach((function(t){return i.add(t)})),i},e.fromBytes=function(t,e){for(var n=[],i=0;i<t.length;i++){var o=Bp.uint8ToBits(t[i]);n=n.concat(o)}return new r(n,e)},Object.defineProperty(e.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"length",{get:function(){return this._length},enumerable:!0,configurable:!0}),e.prototype.add=function(t){for(var e=Bp.getDistinctIndices(t,this._size,this._nbHashes,this.seed),r=0;r<e.length;r++)this._filter[e[r]]=1;this._length++},e.prototype.has=function(t){for(var e=Bp.getDistinctIndices(t,this._size,this._nbHashes,this.seed),r=0;r<e.length;r++)if(!this._filter[e[r]])return!1;return!0},e.prototype.rate=function(){return Math.pow(1-Math.exp(-this._nbHashes*this._length/this._size),this._nbHashes)},e.prototype.equals=function(t){return this._size===t._size&&this._nbHashes===t._nbHashes&&this._filter.every((function(e,r){return t._filter[r]===e}))},e.prototype.toBytes=function(){for(var t=new Uint8Array(Math.ceil(this._size/8)),e=0;e<t.length;e++){var r=this._filter.slice(8*e,8*e+8);t[e]=Bp.bitsToUint8(r)}return t},ad([nd.Field(),cd("design:type",Number)],e.prototype,"_size",void 0),ad([nd.Field(),cd("design:type",Number)],e.prototype,"_nbHashes",void 0),ad([nd.Field(),cd("design:type",Array)],e.prototype,"_filter",void 0),ad([nd.Field(),cd("design:type",Number)],e.prototype,"_length",void 0),e=r=ad([nd.AutoExportable("BloomFilter",["_seed"]),fd(0,nd.Parameter("_filter")),fd(1,nd.Parameter("_nbHashes")),cd("design:paramtypes",[Array,Number])],e)}((f&&f.__importDefault||function(t){return t&&t.__esModule?t:{default:t}})(Gp).default),hd=Object.defineProperty({default:ld},"__esModule",{value:!0}),pd=f&&f.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),dd=f&&f.__decorate||function(t,e,r,n){var i,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,r,n);else for(var u=t.length-1;u>=0;u--)(i=t[u])&&(s=(o<3?i(s):o>3?i(e,r,s):i(e,r))||s);return o>3&&s&&Object.defineProperty(e,r,s),s},yd=f&&f.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},vd=f&&f.__param||function(t,e){return function(r,n){e(r,n,t)}},gd=function(t){function e(e,r){var n=t.call(this)||this;if(r<1)throw new Error("A CountingBloomFilter must used at least one hash function, but you tried to use "+r+" functions. Consider increasing it.");return n._size=e,n._nbHashes=r,n._filter=Bp.allocateArray(n._size,(function(){return[0,0]})),n._length=0,n}var r;return pd(e,t),r=e,e.create=function(t,e){var n=sd.optimalFilterSize(t,e);return new r(n,sd.optimalHashes(n,t))},e.from=function(t,e){var n=Array.from(t),i=r.create(n.length,e);return n.forEach((function(t){return i.add(t)})),i},Object.defineProperty(e.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"length",{get:function(){return this._length},enumerable:!0,configurable:!0}),e.prototype.add=function(t){for(var e=Bp.getDistinctIndices(t,this._size,this._nbHashes,this.seed),r=0;r<e.length;r++)this._filter[e[r]][1]+=1,this._filter[e[r]][1]>0&&(this._filter[e[r]][0]=1);this._length++},e.prototype.remove=function(t){for(var e=Bp.getDistinctIndices(t,this._size,this._nbHashes,this.seed),r=0;r<e.length;r++)this._filter[e[r]][1]-=1,this._filter[e[r]][1]<=0&&(this._filter[e[r]][0]=0);return this._length--,!0},e.prototype.has=function(t){for(var e=Bp.getDistinctIndices(t,this._size,this._nbHashes,this.seed),r=0;r<e.length;r++)if(!this._filter[e[r]][0])return!1;return!0},e.prototype.rate=function(){return Math.pow(1-Math.exp(-this._nbHashes*this._length/this._size),this._nbHashes)},e.prototype.equals=function(t){return this._size===t._size&&this._nbHashes===t._nbHashes&&this._length===t._length&&this._filter.every((function(e,r){return t._filter[r][0]===e[0]&&t._filter[r][1]===e[1]}))},dd([nd.Field(),yd("design:type",Number)],e.prototype,"_size",void 0),dd([nd.Field(),yd("design:type",Number)],e.prototype,"_nbHashes",void 0),dd([nd.Field(),yd("design:type",Array)],e.prototype,"_filter",void 0),dd([nd.Field(),yd("design:type",Number)],e.prototype,"_length",void 0),e=r=dd([nd.AutoExportable("CountingBloomFilter",["_seed"]),vd(0,nd.Parameter("_size")),vd(1,nd.Parameter("_nbHashes")),yd("design:paramtypes",[Number,Number])],e)}((f&&f.__importDefault||function(t){return t&&t.__esModule?t:{default:t}})(Gp).default),md=Object.defineProperty({default:gd},"__esModule",{value:!0}),bd=f&&f.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),_d=f&&f.__decorate||function(t,e,r,n){var i,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,r,n);else for(var u=t.length-1;u>=0;u--)(i=t[u])&&(s=(o<3?i(s):o>3?i(e,r,s):i(e,r))||s);return o>3&&s&&Object.defineProperty(e,r,s),s},wd=f&&f.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},kd=f&&f.__param||function(t,e){return function(r,n){e(r,n,t)}};var Ed=function(t){function e(e,r,n,i){var o=t.call(this)||this;return o._size=e,o._nbHashes=r,o._loadFactor=n,o._m=Math.ceil(o._size/o._nbHashes),o._filter=Bp.allocateArray(o._nbHashes,(function(){return Bp.allocateArray(o._m,0)})),o._capacity=void 0!==i?i:function(t,e,r){return Math.ceil(t*(Math.log(e)*Math.log(1-e))/(-r*Math.log(e)))}(o._size,n,r),o._length=0,o}var r;return bd(e,t),r=e,e.create=function(t,e,n){void 0===n&&(n=.5);var i=function(t,e,r){return Math.ceil(t*-Math.log(e)/(Math.log(r)*Math.log(1-r)))}(t,e,n),o=function(t,e){return Math.ceil(Math.log(t)/Math.log(e))}(e,n);return new r(i,o,n,t)},e.from=function(t,e,n){void 0===n&&(n=.5);var i=Array.from(t),o=r.create(i.length,e,n);return i.forEach((function(t){return o.add(t)})),o},Object.defineProperty(e.prototype,"capacity",{get:function(){return this._capacity},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"length",{get:function(){return this._length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"loadFactor",{get:function(){return this._loadFactor},enumerable:!0,configurable:!0}),e.prototype.add=function(t){for(var e=Bp.getIndices(t,this._m,this._nbHashes,this.seed),r=0;r<this._nbHashes;r++)this._filter[r][e[r]]=1;this._length++},e.prototype.has=function(t){for(var e=Bp.getIndices(t,this._m,this._nbHashes,this.seed),r=0;r<this._nbHashes;r++)if(!this._filter[r][e[r]])return!1;return!0},e.prototype.rate=function(){var t=this._currentload();return Math.pow(t,this._nbHashes)},e.prototype.equals=function(t){return this._size===t._size&&this._nbHashes===t._nbHashes&&this._length===t._length&&this._loadFactor===t._loadFactor&&this._filter.every((function(e,r){return t._filter[r].every((function(t,r){return e[r]===t}))}))},e.prototype._currentload=function(){return this._filter.map((function(t){return t.reduce((function(t,e){return t+e}),0)})).reduce((function(t,e){return t+e}),0)/this._size},_d([nd.Field(),wd("design:type",Number)],e.prototype,"_size",void 0),_d([nd.Field(),wd("design:type",Number)],e.prototype,"_nbHashes",void 0),_d([nd.Field(),wd("design:type",Number)],e.prototype,"_loadFactor",void 0),_d([nd.Field(),wd("design:type",Number)],e.prototype,"_m",void 0),_d([nd.Field(),wd("design:type",Array)],e.prototype,"_filter",void 0),_d([nd.Field(),wd("design:type",Number)],e.prototype,"_capacity",void 0),_d([nd.Field(),wd("design:type",Number)],e.prototype,"_length",void 0),e=r=_d([nd.AutoExportable("PartitionedBloomFilter",["_seed"]),kd(0,nd.Parameter("_size")),kd(1,nd.Parameter("_nbHashes")),kd(2,nd.Parameter("_loadFactor")),kd(3,nd.Parameter("_capacity")),wd("design:paramtypes",[Number,Number,Number,Number])],e)}((f&&f.__importDefault||function(t){return t&&t.__esModule?t:{default:t}})(Gp).default),Ad=Object.defineProperty({default:Ed},"__esModule",{value:!0}),Sd=f&&f.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Id=f&&f.__decorate||function(t,e,r,n){var i,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,r,n);else for(var u=t.length-1;u>=0;u--)(i=t[u])&&(s=(o<3?i(s):o>3?i(e,r,s):i(e,r))||s);return o>3&&s&&Object.defineProperty(e,r,s),s},xd=f&&f.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},Bd=f&&f.__param||function(t,e){return function(r,n){e(r,n,t)}},Td=f&&f.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Od=function(t){function e(e,r){var n=t.call(this)||this;return n._columns=e,n._rows=r,n._matrix=Bp.allocateArray(n._rows,(function(){return Bp.allocateArray(n._columns,0)})),n._allSums=0,n}var r;return Sd(e,t),r=e,e.create=function(t,e){void 0===e&&(e=.999);var n=Math.ceil(Math.E/t),i=Math.ceil(Math.log(1/e));return new r(n,i)},e.from=function(t,e,n){var i,o;void 0===n&&(n=.999);var s=r.create(e,n);try{for(var u=Td(t),a=u.next();!a.done;a=u.next()){var c=a.value;s.update(c)}}catch(t){i={error:t}}finally{try{a&&!a.done&&(o=u.return)&&o.call(u)}finally{if(i)throw i.error}}return s},Object.defineProperty(e.prototype,"columns",{get:function(){return this._columns},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rows",{get:function(){return this._rows},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sum",{get:function(){return this._allSums},enumerable:!0,configurable:!0}),e.prototype.update=function(t,e){void 0===e&&(e=1),this._allSums+=e;for(var r=Bp.getDistinctIndices(t,this._columns,this._rows,this.seed),n=0;n<this._rows;n++)this._matrix[n][r[n]]+=e},e.prototype.count=function(t){for(var e=1/0,r=Bp.getDistinctIndices(t,this._columns,this._rows,this.seed),n=0;n<this._rows;n++){var i=this._matrix[n][r[n]];e=Math.min(i,e)}return e},e.prototype.equals=function(t){if(this._columns!==t._columns||this._rows!==t._rows)return!1;for(var e=0;e<this._rows;e++)for(var r=0;r<this._columns;r++)if(this._matrix[e][r]!==t._matrix[e][r])return!1;return!0},e.prototype.merge=function(t){if(this._columns!==t._columns)throw new Error("Cannot merge two sketches with different number of columns");if(this._rows!==t._rows)throw new Error("Cannot merge two sketches with different number of rows");for(var e=0;e<this._rows;e++)for(var r=0;r<this._columns;r++)this._matrix[e][r]+=t._matrix[e][r]},e.prototype.clone=function(){var t=new r(this._columns,this._rows);return t.merge(this),t.seed=this.seed,t},Id([nd.Field(),xd("design:type",Number)],e.prototype,"_columns",void 0),Id([nd.Field(),xd("design:type",Number)],e.prototype,"_rows",void 0),Id([nd.Field(),xd("design:type",Array)],e.prototype,"_matrix",void 0),Id([nd.Field(),xd("design:type",Number)],e.prototype,"_allSums",void 0),e=r=Id([nd.AutoExportable("CountMinSketch",["_seed"]),Bd(0,nd.Parameter("_columns")),Bd(1,nd.Parameter("_rows")),xd("design:paramtypes",[Number,Number])],e)}((f&&f.__importDefault||function(t){return t&&t.__esModule?t:{default:t}})(Gp).default),Nd=Object.defineProperty({default:Od},"__esModule",{value:!0}),Cd=f&&f.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Rd=f&&f.__decorate||function(t,e,r,n){var i,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,r,n);else for(var u=t.length-1;u>=0;u--)(i=t[u])&&(s=(o<3?i(s):o>3?i(e,r,s):i(e,r))||s);return o>3&&s&&Object.defineProperty(e,r,s),s},Ud=f&&f.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},jd=f&&f.__param||function(t,e){return function(r,n){e(r,n,t)}},Ld=(f&&f.__importDefault||function(t){return t&&t.__esModule?t:{default:t}})(Gp),Pd=Math.pow(2,32);var Dd=function(t){function e(e){var r=t.call(this)||this;return r._nbRegisters=e,r._nbBytesPerHash=Math.round(Math.log2(e)),r._correctionBias=function(t){switch(t){case 16:return.673;case 32:return.697;case 64:return.709;default:return.7213/(1+1.079/t)}}(e),r._registers=Bp.allocateArray(r._nbRegisters,0),r}var r;return Cd(e,t),r=e,Object.defineProperty(e.prototype,"nbRegisters",{get:function(){return this._nbRegisters},enumerable:!0,configurable:!0}),e.prototype.update=function(t){for(var e=Bp.hashAsInt(t,this.seed).toString(2),r=1+parseInt(e.slice(0,this._nbBytesPerHash-1),2),n=e.slice(this._nbBytesPerHash),i=0;"1"!==n[i]&&i<n.length-1;)i++;this._registers[r]=Math.max(this._registers[r],i)},e.prototype.count=function(t){void 0===t&&(t=!1);var e=this._registers.reduce((function(t,e){return t+Math.pow(2,-e)}),0),r=this._correctionBias*Math.pow(this._nbRegisters,2)/e;return r>Pd/30&&(r=-Pd*Math.log(1-r/Pd)),t&&(r=Math.round(r)),r},e.prototype.accuracy=function(){return 1.04/Math.sqrt(this._nbRegisters)},e.prototype.merge=function(t){if(this.nbRegisters!==t.nbRegisters)throw new Error("Two HyperLogLog must have the same number of registers to be merged. Tried to merge two HyperLogLog with m = "+this.nbRegisters+" and m = "+t.nbRegisters);for(var e=new r(this.nbRegisters),n=0;n<this.nbRegisters-1;n++)e._registers[n]=Math.max(this._registers[n],t._registers[n]);return e},e.prototype.equals=function(t){if(this.nbRegisters!==t.nbRegisters)return!1;for(var e=0;e<this.nbRegisters-1;e++)if(this._registers[e]!==t._registers[e])return!1;return!0},Rd([nd.Field(),Ud("design:type",Number)],e.prototype,"_nbRegisters",void 0),Rd([nd.Field(),Ud("design:type",Number)],e.prototype,"_nbBytesPerHash",void 0),Rd([nd.Field(),Ud("design:type",Number)],e.prototype,"_correctionBias",void 0),Rd([nd.Field(),Ud("design:type",Array)],e.prototype,"_registers",void 0),e=r=Rd([nd.AutoExportable("HyperLogLog",["_seed"]),jd(0,nd.Parameter("_nbRegisters")),Ud("design:paramtypes",[Number])],e)}(Ld.default),Md=Object.defineProperty({default:Dd},"__esModule",{value:!0}),zd=p((function(t,e){(function(){var r,n="Expected a function",i="__lodash_hash_undefined__",o="__lodash_placeholder__",s=16,u=32,a=64,c=128,l=256,h=1/0,p=9007199254740991,d=NaN,y=4294967295,v=[["ary",c],["bind",1],["bindKey",2],["curry",8],["curryRight",s],["flip",512],["partial",u],["partialRight",a],["rearg",l]],g="[object Arguments]",m="[object Array]",b="[object Boolean]",_="[object Date]",w="[object Error]",k="[object Function]",E="[object GeneratorFunction]",A="[object Map]",S="[object Number]",I="[object Object]",x="[object Promise]",B="[object RegExp]",T="[object Set]",O="[object String]",N="[object Symbol]",C="[object WeakMap]",R="[object ArrayBuffer]",U="[object DataView]",j="[object Float32Array]",L="[object Float64Array]",P="[object Int8Array]",D="[object Int16Array]",M="[object Int32Array]",z="[object Uint8Array]",F="[object Uint8ClampedArray]",K="[object Uint16Array]",H="[object Uint32Array]",G=/\b__p \+= '';/g,$=/\b(__p \+=) '' \+/g,W=/(__e\(.*?\)|\b__t\)) \+\n'';/g,q=/&(?:amp|lt|gt|quot|#39);/g,V=/[&<>"']/g,Y=RegExp(q.source),J=RegExp(V.source),Z=/<%-([\s\S]+?)%>/g,X=/<%([\s\S]+?)%>/g,Q=/<%=([\s\S]+?)%>/g,tt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,et=/^\w*$/,rt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,nt=/[\\^$.*+?()[\]{}|]/g,it=RegExp(nt.source),ot=/^\s+|\s+$/g,st=/^\s+/,ut=/\s+$/,at=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ct=/\{\n\/\* \[wrapped with (.+)\] \*/,ft=/,? & /,lt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ht=/\\(\\)?/g,pt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,dt=/\w*$/,yt=/^[-+]0x[0-9a-f]+$/i,vt=/^0b[01]+$/i,gt=/^\[object .+?Constructor\]$/,mt=/^0o[0-7]+$/i,bt=/^(?:0|[1-9]\d*)$/,_t=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,wt=/($^)/,kt=/['\n\r\u2028\u2029\\]/g,Et="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",At="\\u2700-\\u27bf",St="a-z\\xdf-\\xf6\\xf8-\\xff",It="A-Z\\xc0-\\xd6\\xd8-\\xde",xt="\\ufe0e\\ufe0f",Bt="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Tt="[']",Ot="[\\ud800-\\udfff]",Nt="["+Bt+"]",Ct="["+Et+"]",Rt="\\d+",Ut="[\\u2700-\\u27bf]",jt="["+St+"]",Lt="[^\\ud800-\\udfff"+Bt+Rt+At+St+It+"]",Pt="\\ud83c[\\udffb-\\udfff]",Dt="[^\\ud800-\\udfff]",Mt="(?:\\ud83c[\\udde6-\\uddff]){2}",zt="[\\ud800-\\udbff][\\udc00-\\udfff]",Ft="["+It+"]",Kt="(?:"+jt+"|"+Lt+")",Ht="(?:"+Ft+"|"+Lt+")",Gt="(?:['](?:d|ll|m|re|s|t|ve))?",$t="(?:['](?:D|LL|M|RE|S|T|VE))?",Wt="(?:"+Ct+"|"+Pt+")"+"?",qt="[\\ufe0e\\ufe0f]?",Vt=qt+Wt+("(?:\\u200d(?:"+[Dt,Mt,zt].join("|")+")"+qt+Wt+")*"),Yt="(?:"+[Ut,Mt,zt].join("|")+")"+Vt,Jt="(?:"+[Dt+Ct+"?",Ct,Mt,zt,Ot].join("|")+")",Zt=RegExp(Tt,"g"),Xt=RegExp(Ct,"g"),Qt=RegExp(Pt+"(?="+Pt+")|"+Jt+Vt,"g"),te=RegExp([Ft+"?"+jt+"+"+Gt+"(?="+[Nt,Ft,"$"].join("|")+")",Ht+"+"+$t+"(?="+[Nt,Ft+Kt,"$"].join("|")+")",Ft+"?"+Kt+"+"+Gt,Ft+"+"+$t,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Rt,Yt].join("|"),"g"),ee=RegExp("[\\u200d\\ud800-\\udfff"+Et+xt+"]"),re=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,ne=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],ie=-1,oe={};oe[j]=oe[L]=oe[P]=oe[D]=oe[M]=oe[z]=oe[F]=oe[K]=oe[H]=!0,oe[g]=oe[m]=oe[R]=oe[b]=oe[U]=oe[_]=oe[w]=oe[k]=oe[A]=oe[S]=oe[I]=oe[B]=oe[T]=oe[O]=oe[C]=!1;var se={};se[g]=se[m]=se[R]=se[U]=se[b]=se[_]=se[j]=se[L]=se[P]=se[D]=se[M]=se[A]=se[S]=se[I]=se[B]=se[T]=se[O]=se[N]=se[z]=se[F]=se[K]=se[H]=!0,se[w]=se[k]=se[C]=!1;var ue={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ae=parseFloat,ce=parseInt,fe="object"==typeof f&&f&&f.Object===Object&&f,le="object"==typeof self&&self&&self.Object===Object&&self,he=fe||le||Function("return this")(),pe=e&&!e.nodeType&&e,de=pe&&t&&!t.nodeType&&t,ye=de&&de.exports===pe,ve=ye&&fe.process,ge=function(){try{var t=de&&de.require&&de.require("util").types;return t||ve&&ve.binding&&ve.binding("util")}catch(t){}}(),me=ge&&ge.isArrayBuffer,be=ge&&ge.isDate,_e=ge&&ge.isMap,we=ge&&ge.isRegExp,ke=ge&&ge.isSet,Ee=ge&&ge.isTypedArray;function Ae(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}function Se(t,e,r,n){for(var i=-1,o=null==t?0:t.length;++i<o;){var s=t[i];e(n,s,r(s),t)}return n}function Ie(t,e){for(var r=-1,n=null==t?0:t.length;++r<n&&!1!==e(t[r],r,t););return t}function xe(t,e){for(var r=null==t?0:t.length;r--&&!1!==e(t[r],r,t););return t}function Be(t,e){for(var r=-1,n=null==t?0:t.length;++r<n;)if(!e(t[r],r,t))return!1;return!0}function Te(t,e){for(var r=-1,n=null==t?0:t.length,i=0,o=[];++r<n;){var s=t[r];e(s,r,t)&&(o[i++]=s)}return o}function Oe(t,e){return!!(null==t?0:t.length)&&ze(t,e,0)>-1}function Ne(t,e,r){for(var n=-1,i=null==t?0:t.length;++n<i;)if(r(e,t[n]))return!0;return!1}function Ce(t,e){for(var r=-1,n=null==t?0:t.length,i=Array(n);++r<n;)i[r]=e(t[r],r,t);return i}function Re(t,e){for(var r=-1,n=e.length,i=t.length;++r<n;)t[i+r]=e[r];return t}function Ue(t,e,r,n){var i=-1,o=null==t?0:t.length;for(n&&o&&(r=t[++i]);++i<o;)r=e(r,t[i],i,t);return r}function je(t,e,r,n){var i=null==t?0:t.length;for(n&&i&&(r=t[--i]);i--;)r=e(r,t[i],i,t);return r}function Le(t,e){for(var r=-1,n=null==t?0:t.length;++r<n;)if(e(t[r],r,t))return!0;return!1}var Pe=Ge("length");function De(t,e,r){var n;return r(t,(function(t,r,i){if(e(t,r,i))return n=r,!1})),n}function Me(t,e,r,n){for(var i=t.length,o=r+(n?1:-1);n?o--:++o<i;)if(e(t[o],o,t))return o;return-1}function ze(t,e,r){return e==e?function(t,e,r){var n=r-1,i=t.length;for(;++n<i;)if(t[n]===e)return n;return-1}(t,e,r):Me(t,Ke,r)}function Fe(t,e,r,n){for(var i=r-1,o=t.length;++i<o;)if(n(t[i],e))return i;return-1}function Ke(t){return t!=t}function He(t,e){var r=null==t?0:t.length;return r?qe(t,e)/r:d}function Ge(t){return function(e){return null==e?r:e[t]}}function $e(t){return function(e){return null==t?r:t[e]}}function We(t,e,r,n,i){return i(t,(function(t,i,o){r=n?(n=!1,t):e(r,t,i,o)})),r}function qe(t,e){for(var n,i=-1,o=t.length;++i<o;){var s=e(t[i]);s!==r&&(n=n===r?s:n+s)}return n}function Ve(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}function Ye(t){return function(e){return t(e)}}function Je(t,e){return Ce(e,(function(e){return t[e]}))}function Ze(t,e){return t.has(e)}function Xe(t,e){for(var r=-1,n=t.length;++r<n&&ze(e,t[r],0)>-1;);return r}function Qe(t,e){for(var r=t.length;r--&&ze(e,t[r],0)>-1;);return r}function tr(t,e){for(var r=t.length,n=0;r--;)t[r]===e&&++n;return n}var er=$e({"":"A","":"A","":"A","":"A","":"A","":"A","":"a","":"a","":"a","":"a","":"a","":"a","":"C","":"c","":"D","":"d","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"N","":"n","":"O","":"O","":"O","":"O","":"O","":"O","":"o","":"o","":"o","":"o","":"o","":"o","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"Y","":"y","":"y","":"Ae","":"ae","":"Th","":"th","":"ss","":"A","":"A","":"A","":"a","":"a","":"a","":"C","":"C","":"C","":"C","":"c","":"c","":"c","":"c","":"D","":"D","":"d","":"d","":"E","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"e","":"G","":"G","":"G","":"G","":"g","":"g","":"g","":"g","":"H","":"H","":"h","":"h","":"I","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"i","":"J","":"j","":"K","":"k","":"k","":"L","":"L","":"L","":"L","":"L","":"l","":"l","":"l","":"l","":"l","":"N","":"N","":"N","":"N","":"n","":"n","":"n","":"n","":"O","":"O","":"O","":"o","":"o","":"o","":"R","":"R","":"R","":"r","":"r","":"r","":"S","":"S","":"S","":"S","":"s","":"s","":"s","":"s","":"T","":"T","":"T","":"t","":"t","":"t","":"U","":"U","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"u","":"u","":"W","":"w","":"Y","":"y","":"Y","":"Z","":"Z","":"Z","":"z","":"z","":"z","":"IJ","":"ij","":"Oe","":"oe","":"'n","":"s"}),rr=$e({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function nr(t){return"\\"+ue[t]}function ir(t){return ee.test(t)}function or(t){var e=-1,r=Array(t.size);return t.forEach((function(t,n){r[++e]=[n,t]})),r}function sr(t,e){return function(r){return t(e(r))}}function ur(t,e){for(var r=-1,n=t.length,i=0,s=[];++r<n;){var u=t[r];u!==e&&u!==o||(t[r]=o,s[i++]=r)}return s}function ar(t){var e=-1,r=Array(t.size);return t.forEach((function(t){r[++e]=t})),r}function cr(t){var e=-1,r=Array(t.size);return t.forEach((function(t){r[++e]=[t,t]})),r}function fr(t){return ir(t)?function(t){var e=Qt.lastIndex=0;for(;Qt.test(t);)++e;return e}(t):Pe(t)}function lr(t){return ir(t)?function(t){return t.match(Qt)||[]}(t):function(t){return t.split("")}(t)}var hr=$e({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var pr=function t(e){var f,Et=(e=null==e?he:pr.defaults(he.Object(),e,pr.pick(he,ne))).Array,At=e.Date,St=e.Error,It=e.Function,xt=e.Math,Bt=e.Object,Tt=e.RegExp,Ot=e.String,Nt=e.TypeError,Ct=Et.prototype,Rt=It.prototype,Ut=Bt.prototype,jt=e["__core-js_shared__"],Lt=Rt.toString,Pt=Ut.hasOwnProperty,Dt=0,Mt=(f=/[^.]+$/.exec(jt&&jt.keys&&jt.keys.IE_PROTO||""))?"Symbol(src)_1."+f:"",zt=Ut.toString,Ft=Lt.call(Bt),Kt=he._,Ht=Tt("^"+Lt.call(Pt).replace(nt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Gt=ye?e.Buffer:r,$t=e.Symbol,Wt=e.Uint8Array,qt=Gt?Gt.allocUnsafe:r,Vt=sr(Bt.getPrototypeOf,Bt),Yt=Bt.create,Jt=Ut.propertyIsEnumerable,Qt=Ct.splice,ee=$t?$t.isConcatSpreadable:r,ue=$t?$t.iterator:r,fe=$t?$t.toStringTag:r,le=function(){try{var t=ho(Bt,"defineProperty");return t({},"",{}),t}catch(t){}}(),pe=e.clearTimeout!==he.clearTimeout&&e.clearTimeout,de=At&&At.now!==he.Date.now&&At.now,ve=e.setTimeout!==he.setTimeout&&e.setTimeout,ge=xt.ceil,Pe=xt.floor,$e=Bt.getOwnPropertySymbols,dr=Gt?Gt.isBuffer:r,yr=e.isFinite,vr=Ct.join,gr=sr(Bt.keys,Bt),mr=xt.max,br=xt.min,_r=At.now,wr=e.parseInt,kr=xt.random,Er=Ct.reverse,Ar=ho(e,"DataView"),Sr=ho(e,"Map"),Ir=ho(e,"Promise"),xr=ho(e,"Set"),Br=ho(e,"WeakMap"),Tr=ho(Bt,"create"),Or=Br&&new Br,Nr={},Cr=zo(Ar),Rr=zo(Sr),Ur=zo(Ir),jr=zo(xr),Lr=zo(Br),Pr=$t?$t.prototype:r,Dr=Pr?Pr.valueOf:r,Mr=Pr?Pr.toString:r;function zr(t){if(nu(t)&&!Ws(t)&&!(t instanceof Gr)){if(t instanceof Hr)return t;if(Pt.call(t,"__wrapped__"))return Fo(t)}return new Hr(t)}var Fr=function(){function t(){}return function(e){if(!ru(e))return{};if(Yt)return Yt(e);t.prototype=e;var n=new t;return t.prototype=r,n}}();function Kr(){}function Hr(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=r}function Gr(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=y,this.__views__=[]}function $r(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function Wr(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function qr(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function Vr(t){var e=-1,r=null==t?0:t.length;for(this.__data__=new qr;++e<r;)this.add(t[e])}function Yr(t){var e=this.__data__=new Wr(t);this.size=e.size}function Jr(t,e){var r=Ws(t),n=!r&&$s(t),i=!r&&!n&&Js(t),o=!r&&!n&&!i&&lu(t),s=r||n||i||o,u=s?Ve(t.length,Ot):[],a=u.length;for(var c in t)!e&&!Pt.call(t,c)||s&&("length"==c||i&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||_o(c,a))||u.push(c);return u}function Zr(t){var e=t.length;return e?t[Yn(0,e-1)]:r}function Xr(t,e){return Po(Oi(t),an(e,0,t.length))}function Qr(t){return Po(Oi(t))}function tn(t,e,n){(n!==r&&!Ks(t[e],n)||n===r&&!(e in t))&&sn(t,e,n)}function en(t,e,n){var i=t[e];Pt.call(t,e)&&Ks(i,n)&&(n!==r||e in t)||sn(t,e,n)}function rn(t,e){for(var r=t.length;r--;)if(Ks(t[r][0],e))return r;return-1}function nn(t,e,r,n){return pn(t,(function(t,i,o){e(n,t,r(t),o)})),n}function on(t,e){return t&&Ni(e,Ru(e),t)}function sn(t,e,r){"__proto__"==e&&le?le(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}function un(t,e){for(var n=-1,i=e.length,o=Et(i),s=null==t;++n<i;)o[n]=s?r:Bu(t,e[n]);return o}function an(t,e,n){return t==t&&(n!==r&&(t=t<=n?t:n),e!==r&&(t=t>=e?t:e)),t}function cn(t,e,n,i,o,s){var u,a=1&e,c=2&e,f=4&e;if(n&&(u=o?n(t,i,o,s):n(t)),u!==r)return u;if(!ru(t))return t;var l=Ws(t);if(l){if(u=function(t){var e=t.length,r=new t.constructor(e);e&&"string"==typeof t[0]&&Pt.call(t,"index")&&(r.index=t.index,r.input=t.input);return r}(t),!a)return Oi(t,u)}else{var h=vo(t),p=h==k||h==E;if(Js(t))return Ai(t,a);if(h==I||h==g||p&&!o){if(u=c||p?{}:mo(t),!a)return c?function(t,e){return Ni(t,yo(t),e)}(t,function(t,e){return t&&Ni(e,Uu(e),t)}(u,t)):function(t,e){return Ni(t,po(t),e)}(t,on(u,t))}else{if(!se[h])return o?t:{};u=function(t,e,r){var n=t.constructor;switch(e){case R:return Si(t);case b:case _:return new n(+t);case U:return function(t,e){var r=e?Si(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)}(t,r);case j:case L:case P:case D:case M:case z:case F:case K:case H:return Ii(t,r);case A:return new n;case S:case O:return new n(t);case B:return function(t){var e=new t.constructor(t.source,dt.exec(t));return e.lastIndex=t.lastIndex,e}(t);case T:return new n;case N:return function(t){return Dr?Bt(Dr.call(t)):{}}(t)}}(t,h,a)}}s||(s=new Yr);var d=s.get(t);if(d)return d;s.set(t,u),au(t)?t.forEach((function(r){u.add(cn(r,e,n,r,t,s))})):iu(t)&&t.forEach((function(r,i){u.set(i,cn(r,e,n,i,t,s))}));var y=l?r:(f?c?oo:io:c?Uu:Ru)(t);return Ie(y||t,(function(r,i){y&&(r=t[i=r]),en(u,i,cn(r,e,n,i,t,s))})),u}function fn(t,e,n){var i=n.length;if(null==t)return!i;for(t=Bt(t);i--;){var o=n[i],s=e[o],u=t[o];if(u===r&&!(o in t)||!s(u))return!1}return!0}function ln(t,e,i){if("function"!=typeof t)throw new Nt(n);return Ro((function(){t.apply(r,i)}),e)}function hn(t,e,r,n){var i=-1,o=Oe,s=!0,u=t.length,a=[],c=e.length;if(!u)return a;r&&(e=Ce(e,Ye(r))),n?(o=Ne,s=!1):e.length>=200&&(o=Ze,s=!1,e=new Vr(e));t:for(;++i<u;){var f=t[i],l=null==r?f:r(f);if(f=n||0!==f?f:0,s&&l==l){for(var h=c;h--;)if(e[h]===l)continue t;a.push(f)}else o(e,l,n)||a.push(f)}return a}zr.templateSettings={escape:Z,evaluate:X,interpolate:Q,variable:"",imports:{_:zr}},zr.prototype=Kr.prototype,zr.prototype.constructor=zr,Hr.prototype=Fr(Kr.prototype),Hr.prototype.constructor=Hr,Gr.prototype=Fr(Kr.prototype),Gr.prototype.constructor=Gr,$r.prototype.clear=function(){this.__data__=Tr?Tr(null):{},this.size=0},$r.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},$r.prototype.get=function(t){var e=this.__data__;if(Tr){var n=e[t];return n===i?r:n}return Pt.call(e,t)?e[t]:r},$r.prototype.has=function(t){var e=this.__data__;return Tr?e[t]!==r:Pt.call(e,t)},$r.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=Tr&&e===r?i:e,this},Wr.prototype.clear=function(){this.__data__=[],this.size=0},Wr.prototype.delete=function(t){var e=this.__data__,r=rn(e,t);return!(r<0)&&(r==e.length-1?e.pop():Qt.call(e,r,1),--this.size,!0)},Wr.prototype.get=function(t){var e=this.__data__,n=rn(e,t);return n<0?r:e[n][1]},Wr.prototype.has=function(t){return rn(this.__data__,t)>-1},Wr.prototype.set=function(t,e){var r=this.__data__,n=rn(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this},qr.prototype.clear=function(){this.size=0,this.__data__={hash:new $r,map:new(Sr||Wr),string:new $r}},qr.prototype.delete=function(t){var e=fo(this,t).delete(t);return this.size-=e?1:0,e},qr.prototype.get=function(t){return fo(this,t).get(t)},qr.prototype.has=function(t){return fo(this,t).has(t)},qr.prototype.set=function(t,e){var r=fo(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this},Vr.prototype.add=Vr.prototype.push=function(t){return this.__data__.set(t,i),this},Vr.prototype.has=function(t){return this.__data__.has(t)},Yr.prototype.clear=function(){this.__data__=new Wr,this.size=0},Yr.prototype.delete=function(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r},Yr.prototype.get=function(t){return this.__data__.get(t)},Yr.prototype.has=function(t){return this.__data__.has(t)},Yr.prototype.set=function(t,e){var r=this.__data__;if(r instanceof Wr){var n=r.__data__;if(!Sr||n.length<199)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new qr(n)}return r.set(t,e),this.size=r.size,this};var pn=Ui(wn),dn=Ui(kn,!0);function yn(t,e){var r=!0;return pn(t,(function(t,n,i){return r=!!e(t,n,i)})),r}function vn(t,e,n){for(var i=-1,o=t.length;++i<o;){var s=t[i],u=e(s);if(null!=u&&(a===r?u==u&&!fu(u):n(u,a)))var a=u,c=s}return c}function gn(t,e){var r=[];return pn(t,(function(t,n,i){e(t,n,i)&&r.push(t)})),r}function mn(t,e,r,n,i){var o=-1,s=t.length;for(r||(r=bo),i||(i=[]);++o<s;){var u=t[o];e>0&&r(u)?e>1?mn(u,e-1,r,n,i):Re(i,u):n||(i[i.length]=u)}return i}var bn=ji(),_n=ji(!0);function wn(t,e){return t&&bn(t,e,Ru)}function kn(t,e){return t&&_n(t,e,Ru)}function En(t,e){return Te(e,(function(e){return Qs(t[e])}))}function An(t,e){for(var n=0,i=(e=_i(e,t)).length;null!=t&&n<i;)t=t[Mo(e[n++])];return n&&n==i?t:r}function Sn(t,e,r){var n=e(t);return Ws(t)?n:Re(n,r(t))}function In(t){return null==t?t===r?"[object Undefined]":"[object Null]":fe&&fe in Bt(t)?function(t){var e=Pt.call(t,fe),n=t[fe];try{t[fe]=r;var i=!0}catch(t){}var o=zt.call(t);i&&(e?t[fe]=n:delete t[fe]);return o}(t):function(t){return zt.call(t)}(t)}function xn(t,e){return t>e}function Bn(t,e){return null!=t&&Pt.call(t,e)}function Tn(t,e){return null!=t&&e in Bt(t)}function On(t,e,n){for(var i=n?Ne:Oe,o=t[0].length,s=t.length,u=s,a=Et(s),c=1/0,f=[];u--;){var l=t[u];u&&e&&(l=Ce(l,Ye(e))),c=br(l.length,c),a[u]=!n&&(e||o>=120&&l.length>=120)?new Vr(u&&l):r}l=t[0];var h=-1,p=a[0];t:for(;++h<o&&f.length<c;){var d=l[h],y=e?e(d):d;if(d=n||0!==d?d:0,!(p?Ze(p,y):i(f,y,n))){for(u=s;--u;){var v=a[u];if(!(v?Ze(v,y):i(t[u],y,n)))continue t}p&&p.push(y),f.push(d)}}return f}function Nn(t,e,n){var i=null==(t=To(t,e=_i(e,t)))?t:t[Mo(Xo(e))];return null==i?r:Ae(i,t,n)}function Cn(t){return nu(t)&&In(t)==g}function Rn(t,e,n,i,o){return t===e||(null==t||null==e||!nu(t)&&!nu(e)?t!=t&&e!=e:function(t,e,n,i,o,s){var u=Ws(t),a=Ws(e),c=u?m:vo(t),f=a?m:vo(e),l=(c=c==g?I:c)==I,h=(f=f==g?I:f)==I,p=c==f;if(p&&Js(t)){if(!Js(e))return!1;u=!0,l=!1}if(p&&!l)return s||(s=new Yr),u||lu(t)?ro(t,e,n,i,o,s):function(t,e,r,n,i,o,s){switch(r){case U:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case R:return!(t.byteLength!=e.byteLength||!o(new Wt(t),new Wt(e)));case b:case _:case S:return Ks(+t,+e);case w:return t.name==e.name&&t.message==e.message;case B:case O:return t==e+"";case A:var u=or;case T:var a=1&n;if(u||(u=ar),t.size!=e.size&&!a)return!1;var c=s.get(t);if(c)return c==e;n|=2,s.set(t,e);var f=ro(u(t),u(e),n,i,o,s);return s.delete(t),f;case N:if(Dr)return Dr.call(t)==Dr.call(e)}return!1}(t,e,c,n,i,o,s);if(!(1&n)){var d=l&&Pt.call(t,"__wrapped__"),y=h&&Pt.call(e,"__wrapped__");if(d||y){var v=d?t.value():t,k=y?e.value():e;return s||(s=new Yr),o(v,k,n,i,s)}}if(!p)return!1;return s||(s=new Yr),function(t,e,n,i,o,s){var u=1&n,a=io(t),c=a.length,f=io(e).length;if(c!=f&&!u)return!1;var l=c;for(;l--;){var h=a[l];if(!(u?h in e:Pt.call(e,h)))return!1}var p=s.get(t),d=s.get(e);if(p&&d)return p==e&&d==t;var y=!0;s.set(t,e),s.set(e,t);var v=u;for(;++l<c;){var g=t[h=a[l]],m=e[h];if(i)var b=u?i(m,g,h,e,t,s):i(g,m,h,t,e,s);if(!(b===r?g===m||o(g,m,n,i,s):b)){y=!1;break}v||(v="constructor"==h)}if(y&&!v){var _=t.constructor,w=e.constructor;_==w||!("constructor"in t)||!("constructor"in e)||"function"==typeof _&&_ instanceof _&&"function"==typeof w&&w instanceof w||(y=!1)}return s.delete(t),s.delete(e),y}(t,e,n,i,o,s)}(t,e,n,i,Rn,o))}function Un(t,e,n,i){var o=n.length,s=o,u=!i;if(null==t)return!s;for(t=Bt(t);o--;){var a=n[o];if(u&&a[2]?a[1]!==t[a[0]]:!(a[0]in t))return!1}for(;++o<s;){var c=(a=n[o])[0],f=t[c],l=a[1];if(u&&a[2]){if(f===r&&!(c in t))return!1}else{var h=new Yr;if(i)var p=i(f,l,c,t,e,h);if(!(p===r?Rn(l,f,3,i,h):p))return!1}}return!0}function jn(t){return!(!ru(t)||(e=t,Mt&&Mt in e))&&(Qs(t)?Ht:gt).test(zo(t));var e}function Ln(t){return"function"==typeof t?t:null==t?oa:"object"==typeof t?Ws(t)?Kn(t[0],t[1]):Fn(t):da(t)}function Pn(t){if(!So(t))return gr(t);var e=[];for(var r in Bt(t))Pt.call(t,r)&&"constructor"!=r&&e.push(r);return e}function Dn(t){if(!ru(t))return function(t){var e=[];if(null!=t)for(var r in Bt(t))e.push(r);return e}(t);var e=So(t),r=[];for(var n in t)("constructor"!=n||!e&&Pt.call(t,n))&&r.push(n);return r}function Mn(t,e){return t<e}function zn(t,e){var r=-1,n=Vs(t)?Et(t.length):[];return pn(t,(function(t,i,o){n[++r]=e(t,i,o)})),n}function Fn(t){var e=lo(t);return 1==e.length&&e[0][2]?xo(e[0][0],e[0][1]):function(r){return r===t||Un(r,t,e)}}function Kn(t,e){return ko(t)&&Io(e)?xo(Mo(t),e):function(n){var i=Bu(n,t);return i===r&&i===e?Tu(n,t):Rn(e,i,3)}}function Hn(t,e,n,i,o){t!==e&&bn(e,(function(s,u){if(o||(o=new Yr),ru(s))!function(t,e,n,i,o,s,u){var a=No(t,n),c=No(e,n),f=u.get(c);if(f)return void tn(t,n,f);var l=s?s(a,c,n+"",t,e,u):r,h=l===r;if(h){var p=Ws(c),d=!p&&Js(c),y=!p&&!d&&lu(c);l=c,p||d||y?Ws(a)?l=a:Ys(a)?l=Oi(a):d?(h=!1,l=Ai(c,!0)):y?(h=!1,l=Ii(c,!0)):l=[]:su(c)||$s(c)?(l=a,$s(a)?l=bu(a):ru(a)&&!Qs(a)||(l=mo(c))):h=!1}h&&(u.set(c,l),o(l,c,i,s,u),u.delete(c));tn(t,n,l)}(t,e,u,n,Hn,i,o);else{var a=i?i(No(t,u),s,u+"",t,e,o):r;a===r&&(a=s),tn(t,u,a)}}),Uu)}function Gn(t,e){var n=t.length;if(n)return _o(e+=e<0?n:0,n)?t[e]:r}function $n(t,e,r){e=e.length?Ce(e,(function(t){return Ws(t)?function(e){return An(e,1===t.length?t[0]:t)}:t})):[oa];var n=-1;return e=Ce(e,Ye(co())),function(t,e){var r=t.length;for(t.sort(e);r--;)t[r]=t[r].value;return t}(zn(t,(function(t,r,i){return{criteria:Ce(e,(function(e){return e(t)})),index:++n,value:t}})),(function(t,e){return function(t,e,r){var n=-1,i=t.criteria,o=e.criteria,s=i.length,u=r.length;for(;++n<s;){var a=xi(i[n],o[n]);if(a)return n>=u?a:a*("desc"==r[n]?-1:1)}return t.index-e.index}(t,e,r)}))}function Wn(t,e,r){for(var n=-1,i=e.length,o={};++n<i;){var s=e[n],u=An(t,s);r(u,s)&&ti(o,_i(s,t),u)}return o}function qn(t,e,r,n){var i=n?Fe:ze,o=-1,s=e.length,u=t;for(t===e&&(e=Oi(e)),r&&(u=Ce(t,Ye(r)));++o<s;)for(var a=0,c=e[o],f=r?r(c):c;(a=i(u,f,a,n))>-1;)u!==t&&Qt.call(u,a,1),Qt.call(t,a,1);return t}function Vn(t,e){for(var r=t?e.length:0,n=r-1;r--;){var i=e[r];if(r==n||i!==o){var o=i;_o(i)?Qt.call(t,i,1):hi(t,i)}}return t}function Yn(t,e){return t+Pe(kr()*(e-t+1))}function Jn(t,e){var r="";if(!t||e<1||e>p)return r;do{e%2&&(r+=t),(e=Pe(e/2))&&(t+=t)}while(e);return r}function Zn(t,e){return Uo(Bo(t,e,oa),t+"")}function Xn(t){return Zr(Ku(t))}function Qn(t,e){var r=Ku(t);return Po(r,an(e,0,r.length))}function ti(t,e,n,i){if(!ru(t))return t;for(var o=-1,s=(e=_i(e,t)).length,u=s-1,a=t;null!=a&&++o<s;){var c=Mo(e[o]),f=n;if("__proto__"===c||"constructor"===c||"prototype"===c)return t;if(o!=u){var l=a[c];(f=i?i(l,c,a):r)===r&&(f=ru(l)?l:_o(e[o+1])?[]:{})}en(a,c,f),a=a[c]}return t}var ei=Or?function(t,e){return Or.set(t,e),t}:oa,ri=le?function(t,e){return le(t,"toString",{configurable:!0,enumerable:!1,value:ra(e),writable:!0})}:oa;function ni(t){return Po(Ku(t))}function ii(t,e,r){var n=-1,i=t.length;e<0&&(e=-e>i?0:i+e),(r=r>i?i:r)<0&&(r+=i),i=e>r?0:r-e>>>0,e>>>=0;for(var o=Et(i);++n<i;)o[n]=t[n+e];return o}function oi(t,e){var r;return pn(t,(function(t,n,i){return!(r=e(t,n,i))})),!!r}function si(t,e,r){var n=0,i=null==t?n:t.length;if("number"==typeof e&&e==e&&i<=2147483647){for(;n<i;){var o=n+i>>>1,s=t[o];null!==s&&!fu(s)&&(r?s<=e:s<e)?n=o+1:i=o}return i}return ui(t,e,oa,r)}function ui(t,e,n,i){var o=0,s=null==t?0:t.length;if(0===s)return 0;for(var u=(e=n(e))!=e,a=null===e,c=fu(e),f=e===r;o<s;){var l=Pe((o+s)/2),h=n(t[l]),p=h!==r,d=null===h,y=h==h,v=fu(h);if(u)var g=i||y;else g=f?y&&(i||p):a?y&&p&&(i||!d):c?y&&p&&!d&&(i||!v):!d&&!v&&(i?h<=e:h<e);g?o=l+1:s=l}return br(s,4294967294)}function ai(t,e){for(var r=-1,n=t.length,i=0,o=[];++r<n;){var s=t[r],u=e?e(s):s;if(!r||!Ks(u,a)){var a=u;o[i++]=0===s?0:s}}return o}function ci(t){return"number"==typeof t?t:fu(t)?d:+t}function fi(t){if("string"==typeof t)return t;if(Ws(t))return Ce(t,fi)+"";if(fu(t))return Mr?Mr.call(t):"";var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function li(t,e,r){var n=-1,i=Oe,o=t.length,s=!0,u=[],a=u;if(r)s=!1,i=Ne;else if(o>=200){var c=e?null:Ji(t);if(c)return ar(c);s=!1,i=Ze,a=new Vr}else a=e?[]:u;t:for(;++n<o;){var f=t[n],l=e?e(f):f;if(f=r||0!==f?f:0,s&&l==l){for(var h=a.length;h--;)if(a[h]===l)continue t;e&&a.push(l),u.push(f)}else i(a,l,r)||(a!==u&&a.push(l),u.push(f))}return u}function hi(t,e){return null==(t=To(t,e=_i(e,t)))||delete t[Mo(Xo(e))]}function pi(t,e,r,n){return ti(t,e,r(An(t,e)),n)}function di(t,e,r,n){for(var i=t.length,o=n?i:-1;(n?o--:++o<i)&&e(t[o],o,t););return r?ii(t,n?0:o,n?o+1:i):ii(t,n?o+1:0,n?i:o)}function yi(t,e){var r=t;return r instanceof Gr&&(r=r.value()),Ue(e,(function(t,e){return e.func.apply(e.thisArg,Re([t],e.args))}),r)}function vi(t,e,r){var n=t.length;if(n<2)return n?li(t[0]):[];for(var i=-1,o=Et(n);++i<n;)for(var s=t[i],u=-1;++u<n;)u!=i&&(o[i]=hn(o[i]||s,t[u],e,r));return li(mn(o,1),e,r)}function gi(t,e,n){for(var i=-1,o=t.length,s=e.length,u={};++i<o;){var a=i<s?e[i]:r;n(u,t[i],a)}return u}function mi(t){return Ys(t)?t:[]}function bi(t){return"function"==typeof t?t:oa}function _i(t,e){return Ws(t)?t:ko(t,e)?[t]:Do(_u(t))}var wi=Zn;function ki(t,e,n){var i=t.length;return n=n===r?i:n,!e&&n>=i?t:ii(t,e,n)}var Ei=pe||function(t){return he.clearTimeout(t)};function Ai(t,e){if(e)return t.slice();var r=t.length,n=qt?qt(r):new t.constructor(r);return t.copy(n),n}function Si(t){var e=new t.constructor(t.byteLength);return new Wt(e).set(new Wt(t)),e}function Ii(t,e){var r=e?Si(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}function xi(t,e){if(t!==e){var n=t!==r,i=null===t,o=t==t,s=fu(t),u=e!==r,a=null===e,c=e==e,f=fu(e);if(!a&&!f&&!s&&t>e||s&&u&&c&&!a&&!f||i&&u&&c||!n&&c||!o)return 1;if(!i&&!s&&!f&&t<e||f&&n&&o&&!i&&!s||a&&n&&o||!u&&o||!c)return-1}return 0}function Bi(t,e,r,n){for(var i=-1,o=t.length,s=r.length,u=-1,a=e.length,c=mr(o-s,0),f=Et(a+c),l=!n;++u<a;)f[u]=e[u];for(;++i<s;)(l||i<o)&&(f[r[i]]=t[i]);for(;c--;)f[u++]=t[i++];return f}function Ti(t,e,r,n){for(var i=-1,o=t.length,s=-1,u=r.length,a=-1,c=e.length,f=mr(o-u,0),l=Et(f+c),h=!n;++i<f;)l[i]=t[i];for(var p=i;++a<c;)l[p+a]=e[a];for(;++s<u;)(h||i<o)&&(l[p+r[s]]=t[i++]);return l}function Oi(t,e){var r=-1,n=t.length;for(e||(e=Et(n));++r<n;)e[r]=t[r];return e}function Ni(t,e,n,i){var o=!n;n||(n={});for(var s=-1,u=e.length;++s<u;){var a=e[s],c=i?i(n[a],t[a],a,n,t):r;c===r&&(c=t[a]),o?sn(n,a,c):en(n,a,c)}return n}function Ci(t,e){return function(r,n){var i=Ws(r)?Se:nn,o=e?e():{};return i(r,t,co(n,2),o)}}function Ri(t){return Zn((function(e,n){var i=-1,o=n.length,s=o>1?n[o-1]:r,u=o>2?n[2]:r;for(s=t.length>3&&"function"==typeof s?(o--,s):r,u&&wo(n[0],n[1],u)&&(s=o<3?r:s,o=1),e=Bt(e);++i<o;){var a=n[i];a&&t(e,a,i,s)}return e}))}function Ui(t,e){return function(r,n){if(null==r)return r;if(!Vs(r))return t(r,n);for(var i=r.length,o=e?i:-1,s=Bt(r);(e?o--:++o<i)&&!1!==n(s[o],o,s););return r}}function ji(t){return function(e,r,n){for(var i=-1,o=Bt(e),s=n(e),u=s.length;u--;){var a=s[t?u:++i];if(!1===r(o[a],a,o))break}return e}}function Li(t){return function(e){var n=ir(e=_u(e))?lr(e):r,i=n?n[0]:e.charAt(0),o=n?ki(n,1).join(""):e.slice(1);return i[t]()+o}}function Pi(t){return function(e){return Ue(Qu($u(e).replace(Zt,"")),t,"")}}function Di(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var r=Fr(t.prototype),n=t.apply(r,e);return ru(n)?n:r}}function Mi(t){return function(e,n,i){var o=Bt(e);if(!Vs(e)){var s=co(n,3);e=Ru(e),n=function(t){return s(o[t],t,o)}}var u=t(e,n,i);return u>-1?o[s?e[u]:u]:r}}function zi(t){return no((function(e){var i=e.length,o=i,s=Hr.prototype.thru;for(t&&e.reverse();o--;){var u=e[o];if("function"!=typeof u)throw new Nt(n);if(s&&!a&&"wrapper"==uo(u))var a=new Hr([],!0)}for(o=a?o:i;++o<i;){var c=uo(u=e[o]),f="wrapper"==c?so(u):r;a=f&&Eo(f[0])&&424==f[1]&&!f[4].length&&1==f[9]?a[uo(f[0])].apply(a,f[3]):1==u.length&&Eo(u)?a[c]():a.thru(u)}return function(){var t=arguments,r=t[0];if(a&&1==t.length&&Ws(r))return a.plant(r).value();for(var n=0,o=i?e[n].apply(this,t):r;++n<i;)o=e[n].call(this,o);return o}}))}function Fi(t,e,n,i,o,s,u,a,f,l){var h=e&c,p=1&e,d=2&e,y=24&e,v=512&e,g=d?r:Di(t);return function r(){for(var c=arguments.length,m=Et(c),b=c;b--;)m[b]=arguments[b];if(y)var _=ao(r),w=tr(m,_);if(i&&(m=Bi(m,i,o,y)),s&&(m=Ti(m,s,u,y)),c-=w,y&&c<l){var k=ur(m,_);return Vi(t,e,Fi,r.placeholder,n,m,k,a,f,l-c)}var E=p?n:this,A=d?E[t]:t;return c=m.length,a?m=Oo(m,a):v&&c>1&&m.reverse(),h&&f<c&&(m.length=f),this&&this!==he&&this instanceof r&&(A=g||Di(A)),A.apply(E,m)}}function Ki(t,e){return function(r,n){return function(t,e,r,n){return wn(t,(function(t,i,o){e(n,r(t),i,o)})),n}(r,t,e(n),{})}}function Hi(t,e){return function(n,i){var o;if(n===r&&i===r)return e;if(n!==r&&(o=n),i!==r){if(o===r)return i;"string"==typeof n||"string"==typeof i?(n=fi(n),i=fi(i)):(n=ci(n),i=ci(i)),o=t(n,i)}return o}}function Gi(t){return no((function(e){return e=Ce(e,Ye(co())),Zn((function(r){var n=this;return t(e,(function(t){return Ae(t,n,r)}))}))}))}function $i(t,e){var n=(e=e===r?" ":fi(e)).length;if(n<2)return n?Jn(e,t):e;var i=Jn(e,ge(t/fr(e)));return ir(e)?ki(lr(i),0,t).join(""):i.slice(0,t)}function Wi(t){return function(e,n,i){return i&&"number"!=typeof i&&wo(e,n,i)&&(n=i=r),e=yu(e),n===r?(n=e,e=0):n=yu(n),function(t,e,r,n){for(var i=-1,o=mr(ge((e-t)/(r||1)),0),s=Et(o);o--;)s[n?o:++i]=t,t+=r;return s}(e,n,i=i===r?e<n?1:-1:yu(i),t)}}function qi(t){return function(e,r){return"string"==typeof e&&"string"==typeof r||(e=mu(e),r=mu(r)),t(e,r)}}function Vi(t,e,n,i,o,s,c,f,l,h){var p=8&e;e|=p?u:a,4&(e&=~(p?a:u))||(e&=-4);var d=[t,e,o,p?s:r,p?c:r,p?r:s,p?r:c,f,l,h],y=n.apply(r,d);return Eo(t)&&Co(y,d),y.placeholder=i,jo(y,t,e)}function Yi(t){var e=xt[t];return function(t,r){if(t=mu(t),(r=null==r?0:br(vu(r),292))&&yr(t)){var n=(_u(t)+"e").split("e");return+((n=(_u(e(n[0]+"e"+(+n[1]+r)))+"e").split("e"))[0]+"e"+(+n[1]-r))}return e(t)}}var Ji=xr&&1/ar(new xr([,-0]))[1]==h?function(t){return new xr(t)}:fa;function Zi(t){return function(e){var r=vo(e);return r==A?or(e):r==T?cr(e):function(t,e){return Ce(e,(function(e){return[e,t[e]]}))}(e,t(e))}}function Xi(t,e,i,f,h,p,d,y){var v=2&e;if(!v&&"function"!=typeof t)throw new Nt(n);var g=f?f.length:0;if(g||(e&=-97,f=h=r),d=d===r?d:mr(vu(d),0),y=y===r?y:vu(y),g-=h?h.length:0,e&a){var m=f,b=h;f=h=r}var _=v?r:so(t),w=[t,e,i,f,h,m,b,p,d,y];if(_&&function(t,e){var r=t[1],n=e[1],i=r|n,s=i<131,u=n==c&&8==r||n==c&&r==l&&t[7].length<=e[8]||384==n&&e[7].length<=e[8]&&8==r;if(!s&&!u)return t;1&n&&(t[2]=e[2],i|=1&r?0:4);var a=e[3];if(a){var f=t[3];t[3]=f?Bi(f,a,e[4]):a,t[4]=f?ur(t[3],o):e[4]}(a=e[5])&&(f=t[5],t[5]=f?Ti(f,a,e[6]):a,t[6]=f?ur(t[5],o):e[6]);(a=e[7])&&(t[7]=a);n&c&&(t[8]=null==t[8]?e[8]:br(t[8],e[8]));null==t[9]&&(t[9]=e[9]);t[0]=e[0],t[1]=i}(w,_),t=w[0],e=w[1],i=w[2],f=w[3],h=w[4],!(y=w[9]=w[9]===r?v?0:t.length:mr(w[9]-g,0))&&24&e&&(e&=-25),e&&1!=e)k=8==e||e==s?function(t,e,n){var i=Di(t);return function o(){for(var s=arguments.length,u=Et(s),a=s,c=ao(o);a--;)u[a]=arguments[a];var f=s<3&&u[0]!==c&&u[s-1]!==c?[]:ur(u,c);return(s-=f.length)<n?Vi(t,e,Fi,o.placeholder,r,u,f,r,r,n-s):Ae(this&&this!==he&&this instanceof o?i:t,this,u)}}(t,e,y):e!=u&&33!=e||h.length?Fi.apply(r,w):function(t,e,r,n){var i=1&e,o=Di(t);return function e(){for(var s=-1,u=arguments.length,a=-1,c=n.length,f=Et(c+u),l=this&&this!==he&&this instanceof e?o:t;++a<c;)f[a]=n[a];for(;u--;)f[a++]=arguments[++s];return Ae(l,i?r:this,f)}}(t,e,i,f);else var k=function(t,e,r){var n=1&e,i=Di(t);return function e(){return(this&&this!==he&&this instanceof e?i:t).apply(n?r:this,arguments)}}(t,e,i);return jo((_?ei:Co)(k,w),t,e)}function Qi(t,e,n,i){return t===r||Ks(t,Ut[n])&&!Pt.call(i,n)?e:t}function to(t,e,n,i,o,s){return ru(t)&&ru(e)&&(s.set(e,t),Hn(t,e,r,to,s),s.delete(e)),t}function eo(t){return su(t)?r:t}function ro(t,e,n,i,o,s){var u=1&n,a=t.length,c=e.length;if(a!=c&&!(u&&c>a))return!1;var f=s.get(t),l=s.get(e);if(f&&l)return f==e&&l==t;var h=-1,p=!0,d=2&n?new Vr:r;for(s.set(t,e),s.set(e,t);++h<a;){var y=t[h],v=e[h];if(i)var g=u?i(v,y,h,e,t,s):i(y,v,h,t,e,s);if(g!==r){if(g)continue;p=!1;break}if(d){if(!Le(e,(function(t,e){if(!Ze(d,e)&&(y===t||o(y,t,n,i,s)))return d.push(e)}))){p=!1;break}}else if(y!==v&&!o(y,v,n,i,s)){p=!1;break}}return s.delete(t),s.delete(e),p}function no(t){return Uo(Bo(t,r,qo),t+"")}function io(t){return Sn(t,Ru,po)}function oo(t){return Sn(t,Uu,yo)}var so=Or?function(t){return Or.get(t)}:fa;function uo(t){for(var e=t.name+"",r=Nr[e],n=Pt.call(Nr,e)?r.length:0;n--;){var i=r[n],o=i.func;if(null==o||o==t)return i.name}return e}function ao(t){return(Pt.call(zr,"placeholder")?zr:t).placeholder}function co(){var t=zr.iteratee||sa;return t=t===sa?Ln:t,arguments.length?t(arguments[0],arguments[1]):t}function fo(t,e){var r,n,i=t.__data__;return("string"==(n=typeof(r=e))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==r:null===r)?i["string"==typeof e?"string":"hash"]:i.map}function lo(t){for(var e=Ru(t),r=e.length;r--;){var n=e[r],i=t[n];e[r]=[n,i,Io(i)]}return e}function ho(t,e){var n=function(t,e){return null==t?r:t[e]}(t,e);return jn(n)?n:r}var po=$e?function(t){return null==t?[]:(t=Bt(t),Te($e(t),(function(e){return Jt.call(t,e)})))}:ga,yo=$e?function(t){for(var e=[];t;)Re(e,po(t)),t=Vt(t);return e}:ga,vo=In;function go(t,e,r){for(var n=-1,i=(e=_i(e,t)).length,o=!1;++n<i;){var s=Mo(e[n]);if(!(o=null!=t&&r(t,s)))break;t=t[s]}return o||++n!=i?o:!!(i=null==t?0:t.length)&&eu(i)&&_o(s,i)&&(Ws(t)||$s(t))}function mo(t){return"function"!=typeof t.constructor||So(t)?{}:Fr(Vt(t))}function bo(t){return Ws(t)||$s(t)||!!(ee&&t&&t[ee])}function _o(t,e){var r=typeof t;return!!(e=null==e?p:e)&&("number"==r||"symbol"!=r&&bt.test(t))&&t>-1&&t%1==0&&t<e}function wo(t,e,r){if(!ru(r))return!1;var n=typeof e;return!!("number"==n?Vs(r)&&_o(e,r.length):"string"==n&&e in r)&&Ks(r[e],t)}function ko(t,e){if(Ws(t))return!1;var r=typeof t;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=t&&!fu(t))||(et.test(t)||!tt.test(t)||null!=e&&t in Bt(e))}function Eo(t){var e=uo(t),r=zr[e];if("function"!=typeof r||!(e in Gr.prototype))return!1;if(t===r)return!0;var n=so(r);return!!n&&t===n[0]}(Ar&&vo(new Ar(new ArrayBuffer(1)))!=U||Sr&&vo(new Sr)!=A||Ir&&vo(Ir.resolve())!=x||xr&&vo(new xr)!=T||Br&&vo(new Br)!=C)&&(vo=function(t){var e=In(t),n=e==I?t.constructor:r,i=n?zo(n):"";if(i)switch(i){case Cr:return U;case Rr:return A;case Ur:return x;case jr:return T;case Lr:return C}return e});var Ao=jt?Qs:ma;function So(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||Ut)}function Io(t){return t==t&&!ru(t)}function xo(t,e){return function(n){return null!=n&&(n[t]===e&&(e!==r||t in Bt(n)))}}function Bo(t,e,n){return e=mr(e===r?t.length-1:e,0),function(){for(var r=arguments,i=-1,o=mr(r.length-e,0),s=Et(o);++i<o;)s[i]=r[e+i];i=-1;for(var u=Et(e+1);++i<e;)u[i]=r[i];return u[e]=n(s),Ae(t,this,u)}}function To(t,e){return e.length<2?t:An(t,ii(e,0,-1))}function Oo(t,e){for(var n=t.length,i=br(e.length,n),o=Oi(t);i--;){var s=e[i];t[i]=_o(s,n)?o[s]:r}return t}function No(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}var Co=Lo(ei),Ro=ve||function(t,e){return he.setTimeout(t,e)},Uo=Lo(ri);function jo(t,e,r){var n=e+"";return Uo(t,function(t,e){var r=e.length;if(!r)return t;var n=r-1;return e[n]=(r>1?"& ":"")+e[n],e=e.join(r>2?", ":" "),t.replace(at,"{\n/* [wrapped with "+e+"] */\n")}(n,function(t,e){return Ie(v,(function(r){var n="_."+r[0];e&r[1]&&!Oe(t,n)&&t.push(n)})),t.sort()}(function(t){var e=t.match(ct);return e?e[1].split(ft):[]}(n),r)))}function Lo(t){var e=0,n=0;return function(){var i=_r(),o=16-(i-n);if(n=i,o>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(r,arguments)}}function Po(t,e){var n=-1,i=t.length,o=i-1;for(e=e===r?i:e;++n<e;){var s=Yn(n,o),u=t[s];t[s]=t[n],t[n]=u}return t.length=e,t}var Do=function(t){var e=Ls(t,(function(t){return 500===r.size&&r.clear(),t})),r=e.cache;return e}((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(rt,(function(t,r,n,i){e.push(n?i.replace(ht,"$1"):r||t)})),e}));function Mo(t){if("string"==typeof t||fu(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function zo(t){if(null!=t){try{return Lt.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function Fo(t){if(t instanceof Gr)return t.clone();var e=new Hr(t.__wrapped__,t.__chain__);return e.__actions__=Oi(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var Ko=Zn((function(t,e){return Ys(t)?hn(t,mn(e,1,Ys,!0)):[]})),Ho=Zn((function(t,e){var n=Xo(e);return Ys(n)&&(n=r),Ys(t)?hn(t,mn(e,1,Ys,!0),co(n,2)):[]})),Go=Zn((function(t,e){var n=Xo(e);return Ys(n)&&(n=r),Ys(t)?hn(t,mn(e,1,Ys,!0),r,n):[]}));function $o(t,e,r){var n=null==t?0:t.length;if(!n)return-1;var i=null==r?0:vu(r);return i<0&&(i=mr(n+i,0)),Me(t,co(e,3),i)}function Wo(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var o=i-1;return n!==r&&(o=vu(n),o=n<0?mr(i+o,0):br(o,i-1)),Me(t,co(e,3),o,!0)}function qo(t){return(null==t?0:t.length)?mn(t,1):[]}function Vo(t){return t&&t.length?t[0]:r}var Yo=Zn((function(t){var e=Ce(t,mi);return e.length&&e[0]===t[0]?On(e):[]})),Jo=Zn((function(t){var e=Xo(t),n=Ce(t,mi);return e===Xo(n)?e=r:n.pop(),n.length&&n[0]===t[0]?On(n,co(e,2)):[]})),Zo=Zn((function(t){var e=Xo(t),n=Ce(t,mi);return(e="function"==typeof e?e:r)&&n.pop(),n.length&&n[0]===t[0]?On(n,r,e):[]}));function Xo(t){var e=null==t?0:t.length;return e?t[e-1]:r}var Qo=Zn(ts);function ts(t,e){return t&&t.length&&e&&e.length?qn(t,e):t}var es=no((function(t,e){var r=null==t?0:t.length,n=un(t,e);return Vn(t,Ce(e,(function(t){return _o(t,r)?+t:t})).sort(xi)),n}));function rs(t){return null==t?t:Er.call(t)}var ns=Zn((function(t){return li(mn(t,1,Ys,!0))})),is=Zn((function(t){var e=Xo(t);return Ys(e)&&(e=r),li(mn(t,1,Ys,!0),co(e,2))})),os=Zn((function(t){var e=Xo(t);return e="function"==typeof e?e:r,li(mn(t,1,Ys,!0),r,e)}));function ss(t){if(!t||!t.length)return[];var e=0;return t=Te(t,(function(t){if(Ys(t))return e=mr(t.length,e),!0})),Ve(e,(function(e){return Ce(t,Ge(e))}))}function us(t,e){if(!t||!t.length)return[];var n=ss(t);return null==e?n:Ce(n,(function(t){return Ae(e,r,t)}))}var as=Zn((function(t,e){return Ys(t)?hn(t,e):[]})),cs=Zn((function(t){return vi(Te(t,Ys))})),fs=Zn((function(t){var e=Xo(t);return Ys(e)&&(e=r),vi(Te(t,Ys),co(e,2))})),ls=Zn((function(t){var e=Xo(t);return e="function"==typeof e?e:r,vi(Te(t,Ys),r,e)})),hs=Zn(ss);var ps=Zn((function(t){var e=t.length,n=e>1?t[e-1]:r;return n="function"==typeof n?(t.pop(),n):r,us(t,n)}));function ds(t){var e=zr(t);return e.__chain__=!0,e}function ys(t,e){return e(t)}var vs=no((function(t){var e=t.length,n=e?t[0]:0,i=this.__wrapped__,o=function(e){return un(e,t)};return!(e>1||this.__actions__.length)&&i instanceof Gr&&_o(n)?((i=i.slice(n,+n+(e?1:0))).__actions__.push({func:ys,args:[o],thisArg:r}),new Hr(i,this.__chain__).thru((function(t){return e&&!t.length&&t.push(r),t}))):this.thru(o)}));var gs=Ci((function(t,e,r){Pt.call(t,r)?++t[r]:sn(t,r,1)}));var ms=Mi($o),bs=Mi(Wo);function _s(t,e){return(Ws(t)?Ie:pn)(t,co(e,3))}function ws(t,e){return(Ws(t)?xe:dn)(t,co(e,3))}var ks=Ci((function(t,e,r){Pt.call(t,r)?t[r].push(e):sn(t,r,[e])}));var Es=Zn((function(t,e,r){var n=-1,i="function"==typeof e,o=Vs(t)?Et(t.length):[];return pn(t,(function(t){o[++n]=i?Ae(e,t,r):Nn(t,e,r)})),o})),As=Ci((function(t,e,r){sn(t,r,e)}));function Ss(t,e){return(Ws(t)?Ce:zn)(t,co(e,3))}var Is=Ci((function(t,e,r){t[r?0:1].push(e)}),(function(){return[[],[]]}));var xs=Zn((function(t,e){if(null==t)return[];var r=e.length;return r>1&&wo(t,e[0],e[1])?e=[]:r>2&&wo(e[0],e[1],e[2])&&(e=[e[0]]),$n(t,mn(e,1),[])})),Bs=de||function(){return he.Date.now()};function Ts(t,e,n){return e=n?r:e,e=t&&null==e?t.length:e,Xi(t,c,r,r,r,r,e)}function Os(t,e){var i;if("function"!=typeof e)throw new Nt(n);return t=vu(t),function(){return--t>0&&(i=e.apply(this,arguments)),t<=1&&(e=r),i}}var Ns=Zn((function(t,e,r){var n=1;if(r.length){var i=ur(r,ao(Ns));n|=u}return Xi(t,n,e,r,i)})),Cs=Zn((function(t,e,r){var n=3;if(r.length){var i=ur(r,ao(Cs));n|=u}return Xi(e,n,t,r,i)}));function Rs(t,e,i){var o,s,u,a,c,f,l=0,h=!1,p=!1,d=!0;if("function"!=typeof t)throw new Nt(n);function y(e){var n=o,i=s;return o=s=r,l=e,a=t.apply(i,n)}function v(t){return l=t,c=Ro(m,e),h?y(t):a}function g(t){var n=t-f;return f===r||n>=e||n<0||p&&t-l>=u}function m(){var t=Bs();if(g(t))return b(t);c=Ro(m,function(t){var r=e-(t-f);return p?br(r,u-(t-l)):r}(t))}function b(t){return c=r,d&&o?y(t):(o=s=r,a)}function _(){var t=Bs(),n=g(t);if(o=arguments,s=this,f=t,n){if(c===r)return v(f);if(p)return Ei(c),c=Ro(m,e),y(f)}return c===r&&(c=Ro(m,e)),a}return e=mu(e)||0,ru(i)&&(h=!!i.leading,u=(p="maxWait"in i)?mr(mu(i.maxWait)||0,e):u,d="trailing"in i?!!i.trailing:d),_.cancel=function(){c!==r&&Ei(c),l=0,o=f=s=c=r},_.flush=function(){return c===r?a:b(Bs())},_}var Us=Zn((function(t,e){return ln(t,1,e)})),js=Zn((function(t,e,r){return ln(t,mu(e)||0,r)}));function Ls(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new Nt(n);var r=function(){var n=arguments,i=e?e.apply(this,n):n[0],o=r.cache;if(o.has(i))return o.get(i);var s=t.apply(this,n);return r.cache=o.set(i,s)||o,s};return r.cache=new(Ls.Cache||qr),r}function Ps(t){if("function"!=typeof t)throw new Nt(n);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}Ls.Cache=qr;var Ds=wi((function(t,e){var r=(e=1==e.length&&Ws(e[0])?Ce(e[0],Ye(co())):Ce(mn(e,1),Ye(co()))).length;return Zn((function(n){for(var i=-1,o=br(n.length,r);++i<o;)n[i]=e[i].call(this,n[i]);return Ae(t,this,n)}))})),Ms=Zn((function(t,e){var n=ur(e,ao(Ms));return Xi(t,u,r,e,n)})),zs=Zn((function(t,e){var n=ur(e,ao(zs));return Xi(t,a,r,e,n)})),Fs=no((function(t,e){return Xi(t,l,r,r,r,e)}));function Ks(t,e){return t===e||t!=t&&e!=e}var Hs=qi(xn),Gs=qi((function(t,e){return t>=e})),$s=Cn(function(){return arguments}())?Cn:function(t){return nu(t)&&Pt.call(t,"callee")&&!Jt.call(t,"callee")},Ws=Et.isArray,qs=me?Ye(me):function(t){return nu(t)&&In(t)==R};function Vs(t){return null!=t&&eu(t.length)&&!Qs(t)}function Ys(t){return nu(t)&&Vs(t)}var Js=dr||ma,Zs=be?Ye(be):function(t){return nu(t)&&In(t)==_};function Xs(t){if(!nu(t))return!1;var e=In(t);return e==w||"[object DOMException]"==e||"string"==typeof t.message&&"string"==typeof t.name&&!su(t)}function Qs(t){if(!ru(t))return!1;var e=In(t);return e==k||e==E||"[object AsyncFunction]"==e||"[object Proxy]"==e}function tu(t){return"number"==typeof t&&t==vu(t)}function eu(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=p}function ru(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function nu(t){return null!=t&&"object"==typeof t}var iu=_e?Ye(_e):function(t){return nu(t)&&vo(t)==A};function ou(t){return"number"==typeof t||nu(t)&&In(t)==S}function su(t){if(!nu(t)||In(t)!=I)return!1;var e=Vt(t);if(null===e)return!0;var r=Pt.call(e,"constructor")&&e.constructor;return"function"==typeof r&&r instanceof r&&Lt.call(r)==Ft}var uu=we?Ye(we):function(t){return nu(t)&&In(t)==B};var au=ke?Ye(ke):function(t){return nu(t)&&vo(t)==T};function cu(t){return"string"==typeof t||!Ws(t)&&nu(t)&&In(t)==O}function fu(t){return"symbol"==typeof t||nu(t)&&In(t)==N}var lu=Ee?Ye(Ee):function(t){return nu(t)&&eu(t.length)&&!!oe[In(t)]};var hu=qi(Mn),pu=qi((function(t,e){return t<=e}));function du(t){if(!t)return[];if(Vs(t))return cu(t)?lr(t):Oi(t);if(ue&&t[ue])return function(t){for(var e,r=[];!(e=t.next()).done;)r.push(e.value);return r}(t[ue]());var e=vo(t);return(e==A?or:e==T?ar:Ku)(t)}function yu(t){return t?(t=mu(t))===h||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}function vu(t){var e=yu(t),r=e%1;return e==e?r?e-r:e:0}function gu(t){return t?an(vu(t),0,y):0}function mu(t){if("number"==typeof t)return t;if(fu(t))return d;if(ru(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=ru(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(ot,"");var r=vt.test(t);return r||mt.test(t)?ce(t.slice(2),r?2:8):yt.test(t)?d:+t}function bu(t){return Ni(t,Uu(t))}function _u(t){return null==t?"":fi(t)}var wu=Ri((function(t,e){if(So(e)||Vs(e))Ni(e,Ru(e),t);else for(var r in e)Pt.call(e,r)&&en(t,r,e[r])})),ku=Ri((function(t,e){Ni(e,Uu(e),t)})),Eu=Ri((function(t,e,r,n){Ni(e,Uu(e),t,n)})),Au=Ri((function(t,e,r,n){Ni(e,Ru(e),t,n)})),Su=no(un);var Iu=Zn((function(t,e){t=Bt(t);var n=-1,i=e.length,o=i>2?e[2]:r;for(o&&wo(e[0],e[1],o)&&(i=1);++n<i;)for(var s=e[n],u=Uu(s),a=-1,c=u.length;++a<c;){var f=u[a],l=t[f];(l===r||Ks(l,Ut[f])&&!Pt.call(t,f))&&(t[f]=s[f])}return t})),xu=Zn((function(t){return t.push(r,to),Ae(Lu,r,t)}));function Bu(t,e,n){var i=null==t?r:An(t,e);return i===r?n:i}function Tu(t,e){return null!=t&&go(t,e,Tn)}var Ou=Ki((function(t,e,r){null!=e&&"function"!=typeof e.toString&&(e=zt.call(e)),t[e]=r}),ra(oa)),Nu=Ki((function(t,e,r){null!=e&&"function"!=typeof e.toString&&(e=zt.call(e)),Pt.call(t,e)?t[e].push(r):t[e]=[r]}),co),Cu=Zn(Nn);function Ru(t){return Vs(t)?Jr(t):Pn(t)}function Uu(t){return Vs(t)?Jr(t,!0):Dn(t)}var ju=Ri((function(t,e,r){Hn(t,e,r)})),Lu=Ri((function(t,e,r,n){Hn(t,e,r,n)})),Pu=no((function(t,e){var r={};if(null==t)return r;var n=!1;e=Ce(e,(function(e){return e=_i(e,t),n||(n=e.length>1),e})),Ni(t,oo(t),r),n&&(r=cn(r,7,eo));for(var i=e.length;i--;)hi(r,e[i]);return r}));var Du=no((function(t,e){return null==t?{}:function(t,e){return Wn(t,e,(function(e,r){return Tu(t,r)}))}(t,e)}));function Mu(t,e){if(null==t)return{};var r=Ce(oo(t),(function(t){return[t]}));return e=co(e),Wn(t,r,(function(t,r){return e(t,r[0])}))}var zu=Zi(Ru),Fu=Zi(Uu);function Ku(t){return null==t?[]:Je(t,Ru(t))}var Hu=Pi((function(t,e,r){return e=e.toLowerCase(),t+(r?Gu(e):e)}));function Gu(t){return Xu(_u(t).toLowerCase())}function $u(t){return(t=_u(t))&&t.replace(_t,er).replace(Xt,"")}var Wu=Pi((function(t,e,r){return t+(r?"-":"")+e.toLowerCase()})),qu=Pi((function(t,e,r){return t+(r?" ":"")+e.toLowerCase()})),Vu=Li("toLowerCase");var Yu=Pi((function(t,e,r){return t+(r?"_":"")+e.toLowerCase()}));var Ju=Pi((function(t,e,r){return t+(r?" ":"")+Xu(e)}));var Zu=Pi((function(t,e,r){return t+(r?" ":"")+e.toUpperCase()})),Xu=Li("toUpperCase");function Qu(t,e,n){return t=_u(t),(e=n?r:e)===r?function(t){return re.test(t)}(t)?function(t){return t.match(te)||[]}(t):function(t){return t.match(lt)||[]}(t):t.match(e)||[]}var ta=Zn((function(t,e){try{return Ae(t,r,e)}catch(t){return Xs(t)?t:new St(t)}})),ea=no((function(t,e){return Ie(e,(function(e){e=Mo(e),sn(t,e,Ns(t[e],t))})),t}));function ra(t){return function(){return t}}var na=zi(),ia=zi(!0);function oa(t){return t}function sa(t){return Ln("function"==typeof t?t:cn(t,1))}var ua=Zn((function(t,e){return function(r){return Nn(r,t,e)}})),aa=Zn((function(t,e){return function(r){return Nn(t,r,e)}}));function ca(t,e,r){var n=Ru(e),i=En(e,n);null!=r||ru(e)&&(i.length||!n.length)||(r=e,e=t,t=this,i=En(e,Ru(e)));var o=!(ru(r)&&"chain"in r&&!r.chain),s=Qs(t);return Ie(i,(function(r){var n=e[r];t[r]=n,s&&(t.prototype[r]=function(){var e=this.__chain__;if(o||e){var r=t(this.__wrapped__),i=r.__actions__=Oi(this.__actions__);return i.push({func:n,args:arguments,thisArg:t}),r.__chain__=e,r}return n.apply(t,Re([this.value()],arguments))})})),t}function fa(){}var la=Gi(Ce),ha=Gi(Be),pa=Gi(Le);function da(t){return ko(t)?Ge(Mo(t)):function(t){return function(e){return An(e,t)}}(t)}var ya=Wi(),va=Wi(!0);function ga(){return[]}function ma(){return!1}var ba=Hi((function(t,e){return t+e}),0),_a=Yi("ceil"),wa=Hi((function(t,e){return t/e}),1),ka=Yi("floor");var Ea,Aa=Hi((function(t,e){return t*e}),1),Sa=Yi("round"),Ia=Hi((function(t,e){return t-e}),0);return zr.after=function(t,e){if("function"!=typeof e)throw new Nt(n);return t=vu(t),function(){if(--t<1)return e.apply(this,arguments)}},zr.ary=Ts,zr.assign=wu,zr.assignIn=ku,zr.assignInWith=Eu,zr.assignWith=Au,zr.at=Su,zr.before=Os,zr.bind=Ns,zr.bindAll=ea,zr.bindKey=Cs,zr.castArray=function(){if(!arguments.length)return[];var t=arguments[0];return Ws(t)?t:[t]},zr.chain=ds,zr.chunk=function(t,e,n){e=(n?wo(t,e,n):e===r)?1:mr(vu(e),0);var i=null==t?0:t.length;if(!i||e<1)return[];for(var o=0,s=0,u=Et(ge(i/e));o<i;)u[s++]=ii(t,o,o+=e);return u},zr.compact=function(t){for(var e=-1,r=null==t?0:t.length,n=0,i=[];++e<r;){var o=t[e];o&&(i[n++]=o)}return i},zr.concat=function(){var t=arguments.length;if(!t)return[];for(var e=Et(t-1),r=arguments[0],n=t;n--;)e[n-1]=arguments[n];return Re(Ws(r)?Oi(r):[r],mn(e,1))},zr.cond=function(t){var e=null==t?0:t.length,r=co();return t=e?Ce(t,(function(t){if("function"!=typeof t[1])throw new Nt(n);return[r(t[0]),t[1]]})):[],Zn((function(r){for(var n=-1;++n<e;){var i=t[n];if(Ae(i[0],this,r))return Ae(i[1],this,r)}}))},zr.conforms=function(t){return function(t){var e=Ru(t);return function(r){return fn(r,t,e)}}(cn(t,1))},zr.constant=ra,zr.countBy=gs,zr.create=function(t,e){var r=Fr(t);return null==e?r:on(r,e)},zr.curry=function t(e,n,i){var o=Xi(e,8,r,r,r,r,r,n=i?r:n);return o.placeholder=t.placeholder,o},zr.curryRight=function t(e,n,i){var o=Xi(e,s,r,r,r,r,r,n=i?r:n);return o.placeholder=t.placeholder,o},zr.debounce=Rs,zr.defaults=Iu,zr.defaultsDeep=xu,zr.defer=Us,zr.delay=js,zr.difference=Ko,zr.differenceBy=Ho,zr.differenceWith=Go,zr.drop=function(t,e,n){var i=null==t?0:t.length;return i?ii(t,(e=n||e===r?1:vu(e))<0?0:e,i):[]},zr.dropRight=function(t,e,n){var i=null==t?0:t.length;return i?ii(t,0,(e=i-(e=n||e===r?1:vu(e)))<0?0:e):[]},zr.dropRightWhile=function(t,e){return t&&t.length?di(t,co(e,3),!0,!0):[]},zr.dropWhile=function(t,e){return t&&t.length?di(t,co(e,3),!0):[]},zr.fill=function(t,e,n,i){var o=null==t?0:t.length;return o?(n&&"number"!=typeof n&&wo(t,e,n)&&(n=0,i=o),function(t,e,n,i){var o=t.length;for((n=vu(n))<0&&(n=-n>o?0:o+n),(i=i===r||i>o?o:vu(i))<0&&(i+=o),i=n>i?0:gu(i);n<i;)t[n++]=e;return t}(t,e,n,i)):[]},zr.filter=function(t,e){return(Ws(t)?Te:gn)(t,co(e,3))},zr.flatMap=function(t,e){return mn(Ss(t,e),1)},zr.flatMapDeep=function(t,e){return mn(Ss(t,e),h)},zr.flatMapDepth=function(t,e,n){return n=n===r?1:vu(n),mn(Ss(t,e),n)},zr.flatten=qo,zr.flattenDeep=function(t){return(null==t?0:t.length)?mn(t,h):[]},zr.flattenDepth=function(t,e){return(null==t?0:t.length)?mn(t,e=e===r?1:vu(e)):[]},zr.flip=function(t){return Xi(t,512)},zr.flow=na,zr.flowRight=ia,zr.fromPairs=function(t){for(var e=-1,r=null==t?0:t.length,n={};++e<r;){var i=t[e];n[i[0]]=i[1]}return n},zr.functions=function(t){return null==t?[]:En(t,Ru(t))},zr.functionsIn=function(t){return null==t?[]:En(t,Uu(t))},zr.groupBy=ks,zr.initial=function(t){return(null==t?0:t.length)?ii(t,0,-1):[]},zr.intersection=Yo,zr.intersectionBy=Jo,zr.intersectionWith=Zo,zr.invert=Ou,zr.invertBy=Nu,zr.invokeMap=Es,zr.iteratee=sa,zr.keyBy=As,zr.keys=Ru,zr.keysIn=Uu,zr.map=Ss,zr.mapKeys=function(t,e){var r={};return e=co(e,3),wn(t,(function(t,n,i){sn(r,e(t,n,i),t)})),r},zr.mapValues=function(t,e){var r={};return e=co(e,3),wn(t,(function(t,n,i){sn(r,n,e(t,n,i))})),r},zr.matches=function(t){return Fn(cn(t,1))},zr.matchesProperty=function(t,e){return Kn(t,cn(e,1))},zr.memoize=Ls,zr.merge=ju,zr.mergeWith=Lu,zr.method=ua,zr.methodOf=aa,zr.mixin=ca,zr.negate=Ps,zr.nthArg=function(t){return t=vu(t),Zn((function(e){return Gn(e,t)}))},zr.omit=Pu,zr.omitBy=function(t,e){return Mu(t,Ps(co(e)))},zr.once=function(t){return Os(2,t)},zr.orderBy=function(t,e,n,i){return null==t?[]:(Ws(e)||(e=null==e?[]:[e]),Ws(n=i?r:n)||(n=null==n?[]:[n]),$n(t,e,n))},zr.over=la,zr.overArgs=Ds,zr.overEvery=ha,zr.overSome=pa,zr.partial=Ms,zr.partialRight=zs,zr.partition=Is,zr.pick=Du,zr.pickBy=Mu,zr.property=da,zr.propertyOf=function(t){return function(e){return null==t?r:An(t,e)}},zr.pull=Qo,zr.pullAll=ts,zr.pullAllBy=function(t,e,r){return t&&t.length&&e&&e.length?qn(t,e,co(r,2)):t},zr.pullAllWith=function(t,e,n){return t&&t.length&&e&&e.length?qn(t,e,r,n):t},zr.pullAt=es,zr.range=ya,zr.rangeRight=va,zr.rearg=Fs,zr.reject=function(t,e){return(Ws(t)?Te:gn)(t,Ps(co(e,3)))},zr.remove=function(t,e){var r=[];if(!t||!t.length)return r;var n=-1,i=[],o=t.length;for(e=co(e,3);++n<o;){var s=t[n];e(s,n,t)&&(r.push(s),i.push(n))}return Vn(t,i),r},zr.rest=function(t,e){if("function"!=typeof t)throw new Nt(n);return Zn(t,e=e===r?e:vu(e))},zr.reverse=rs,zr.sampleSize=function(t,e,n){return e=(n?wo(t,e,n):e===r)?1:vu(e),(Ws(t)?Xr:Qn)(t,e)},zr.set=function(t,e,r){return null==t?t:ti(t,e,r)},zr.setWith=function(t,e,n,i){return i="function"==typeof i?i:r,null==t?t:ti(t,e,n,i)},zr.shuffle=function(t){return(Ws(t)?Qr:ni)(t)},zr.slice=function(t,e,n){var i=null==t?0:t.length;return i?(n&&"number"!=typeof n&&wo(t,e,n)?(e=0,n=i):(e=null==e?0:vu(e),n=n===r?i:vu(n)),ii(t,e,n)):[]},zr.sortBy=xs,zr.sortedUniq=function(t){return t&&t.length?ai(t):[]},zr.sortedUniqBy=function(t,e){return t&&t.length?ai(t,co(e,2)):[]},zr.split=function(t,e,n){return n&&"number"!=typeof n&&wo(t,e,n)&&(e=n=r),(n=n===r?y:n>>>0)?(t=_u(t))&&("string"==typeof e||null!=e&&!uu(e))&&!(e=fi(e))&&ir(t)?ki(lr(t),0,n):t.split(e,n):[]},zr.spread=function(t,e){if("function"!=typeof t)throw new Nt(n);return e=null==e?0:mr(vu(e),0),Zn((function(r){var n=r[e],i=ki(r,0,e);return n&&Re(i,n),Ae(t,this,i)}))},zr.tail=function(t){var e=null==t?0:t.length;return e?ii(t,1,e):[]},zr.take=function(t,e,n){return t&&t.length?ii(t,0,(e=n||e===r?1:vu(e))<0?0:e):[]},zr.takeRight=function(t,e,n){var i=null==t?0:t.length;return i?ii(t,(e=i-(e=n||e===r?1:vu(e)))<0?0:e,i):[]},zr.takeRightWhile=function(t,e){return t&&t.length?di(t,co(e,3),!1,!0):[]},zr.takeWhile=function(t,e){return t&&t.length?di(t,co(e,3)):[]},zr.tap=function(t,e){return e(t),t},zr.throttle=function(t,e,r){var i=!0,o=!0;if("function"!=typeof t)throw new Nt(n);return ru(r)&&(i="leading"in r?!!r.leading:i,o="trailing"in r?!!r.trailing:o),Rs(t,e,{leading:i,maxWait:e,trailing:o})},zr.thru=ys,zr.toArray=du,zr.toPairs=zu,zr.toPairsIn=Fu,zr.toPath=function(t){return Ws(t)?Ce(t,Mo):fu(t)?[t]:Oi(Do(_u(t)))},zr.toPlainObject=bu,zr.transform=function(t,e,r){var n=Ws(t),i=n||Js(t)||lu(t);if(e=co(e,4),null==r){var o=t&&t.constructor;r=i?n?new o:[]:ru(t)&&Qs(o)?Fr(Vt(t)):{}}return(i?Ie:wn)(t,(function(t,n,i){return e(r,t,n,i)})),r},zr.unary=function(t){return Ts(t,1)},zr.union=ns,zr.unionBy=is,zr.unionWith=os,zr.uniq=function(t){return t&&t.length?li(t):[]},zr.uniqBy=function(t,e){return t&&t.length?li(t,co(e,2)):[]},zr.uniqWith=function(t,e){return e="function"==typeof e?e:r,t&&t.length?li(t,r,e):[]},zr.unset=function(t,e){return null==t||hi(t,e)},zr.unzip=ss,zr.unzipWith=us,zr.update=function(t,e,r){return null==t?t:pi(t,e,bi(r))},zr.updateWith=function(t,e,n,i){return i="function"==typeof i?i:r,null==t?t:pi(t,e,bi(n),i)},zr.values=Ku,zr.valuesIn=function(t){return null==t?[]:Je(t,Uu(t))},zr.without=as,zr.words=Qu,zr.wrap=function(t,e){return Ms(bi(e),t)},zr.xor=cs,zr.xorBy=fs,zr.xorWith=ls,zr.zip=hs,zr.zipObject=function(t,e){return gi(t||[],e||[],en)},zr.zipObjectDeep=function(t,e){return gi(t||[],e||[],ti)},zr.zipWith=ps,zr.entries=zu,zr.entriesIn=Fu,zr.extend=ku,zr.extendWith=Eu,ca(zr,zr),zr.add=ba,zr.attempt=ta,zr.camelCase=Hu,zr.capitalize=Gu,zr.ceil=_a,zr.clamp=function(t,e,n){return n===r&&(n=e,e=r),n!==r&&(n=(n=mu(n))==n?n:0),e!==r&&(e=(e=mu(e))==e?e:0),an(mu(t),e,n)},zr.clone=function(t){return cn(t,4)},zr.cloneDeep=function(t){return cn(t,5)},zr.cloneDeepWith=function(t,e){return cn(t,5,e="function"==typeof e?e:r)},zr.cloneWith=function(t,e){return cn(t,4,e="function"==typeof e?e:r)},zr.conformsTo=function(t,e){return null==e||fn(t,e,Ru(e))},zr.deburr=$u,zr.defaultTo=function(t,e){return null==t||t!=t?e:t},zr.divide=wa,zr.endsWith=function(t,e,n){t=_u(t),e=fi(e);var i=t.length,o=n=n===r?i:an(vu(n),0,i);return(n-=e.length)>=0&&t.slice(n,o)==e},zr.eq=Ks,zr.escape=function(t){return(t=_u(t))&&J.test(t)?t.replace(V,rr):t},zr.escapeRegExp=function(t){return(t=_u(t))&&it.test(t)?t.replace(nt,"\\$&"):t},zr.every=function(t,e,n){var i=Ws(t)?Be:yn;return n&&wo(t,e,n)&&(e=r),i(t,co(e,3))},zr.find=ms,zr.findIndex=$o,zr.findKey=function(t,e){return De(t,co(e,3),wn)},zr.findLast=bs,zr.findLastIndex=Wo,zr.findLastKey=function(t,e){return De(t,co(e,3),kn)},zr.floor=ka,zr.forEach=_s,zr.forEachRight=ws,zr.forIn=function(t,e){return null==t?t:bn(t,co(e,3),Uu)},zr.forInRight=function(t,e){return null==t?t:_n(t,co(e,3),Uu)},zr.forOwn=function(t,e){return t&&wn(t,co(e,3))},zr.forOwnRight=function(t,e){return t&&kn(t,co(e,3))},zr.get=Bu,zr.gt=Hs,zr.gte=Gs,zr.has=function(t,e){return null!=t&&go(t,e,Bn)},zr.hasIn=Tu,zr.head=Vo,zr.identity=oa,zr.includes=function(t,e,r,n){t=Vs(t)?t:Ku(t),r=r&&!n?vu(r):0;var i=t.length;return r<0&&(r=mr(i+r,0)),cu(t)?r<=i&&t.indexOf(e,r)>-1:!!i&&ze(t,e,r)>-1},zr.indexOf=function(t,e,r){var n=null==t?0:t.length;if(!n)return-1;var i=null==r?0:vu(r);return i<0&&(i=mr(n+i,0)),ze(t,e,i)},zr.inRange=function(t,e,n){return e=yu(e),n===r?(n=e,e=0):n=yu(n),function(t,e,r){return t>=br(e,r)&&t<mr(e,r)}(t=mu(t),e,n)},zr.invoke=Cu,zr.isArguments=$s,zr.isArray=Ws,zr.isArrayBuffer=qs,zr.isArrayLike=Vs,zr.isArrayLikeObject=Ys,zr.isBoolean=function(t){return!0===t||!1===t||nu(t)&&In(t)==b},zr.isBuffer=Js,zr.isDate=Zs,zr.isElement=function(t){return nu(t)&&1===t.nodeType&&!su(t)},zr.isEmpty=function(t){if(null==t)return!0;if(Vs(t)&&(Ws(t)||"string"==typeof t||"function"==typeof t.splice||Js(t)||lu(t)||$s(t)))return!t.length;var e=vo(t);if(e==A||e==T)return!t.size;if(So(t))return!Pn(t).length;for(var r in t)if(Pt.call(t,r))return!1;return!0},zr.isEqual=function(t,e){return Rn(t,e)},zr.isEqualWith=function(t,e,n){var i=(n="function"==typeof n?n:r)?n(t,e):r;return i===r?Rn(t,e,r,n):!!i},zr.isError=Xs,zr.isFinite=function(t){return"number"==typeof t&&yr(t)},zr.isFunction=Qs,zr.isInteger=tu,zr.isLength=eu,zr.isMap=iu,zr.isMatch=function(t,e){return t===e||Un(t,e,lo(e))},zr.isMatchWith=function(t,e,n){return n="function"==typeof n?n:r,Un(t,e,lo(e),n)},zr.isNaN=function(t){return ou(t)&&t!=+t},zr.isNative=function(t){if(Ao(t))throw new St("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return jn(t)},zr.isNil=function(t){return null==t},zr.isNull=function(t){return null===t},zr.isNumber=ou,zr.isObject=ru,zr.isObjectLike=nu,zr.isPlainObject=su,zr.isRegExp=uu,zr.isSafeInteger=function(t){return tu(t)&&t>=-9007199254740991&&t<=p},zr.isSet=au,zr.isString=cu,zr.isSymbol=fu,zr.isTypedArray=lu,zr.isUndefined=function(t){return t===r},zr.isWeakMap=function(t){return nu(t)&&vo(t)==C},zr.isWeakSet=function(t){return nu(t)&&"[object WeakSet]"==In(t)},zr.join=function(t,e){return null==t?"":vr.call(t,e)},zr.kebabCase=Wu,zr.last=Xo,zr.lastIndexOf=function(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var o=i;return n!==r&&(o=(o=vu(n))<0?mr(i+o,0):br(o,i-1)),e==e?function(t,e,r){for(var n=r+1;n--;)if(t[n]===e)return n;return n}(t,e,o):Me(t,Ke,o,!0)},zr.lowerCase=qu,zr.lowerFirst=Vu,zr.lt=hu,zr.lte=pu,zr.max=function(t){return t&&t.length?vn(t,oa,xn):r},zr.maxBy=function(t,e){return t&&t.length?vn(t,co(e,2),xn):r},zr.mean=function(t){return He(t,oa)},zr.meanBy=function(t,e){return He(t,co(e,2))},zr.min=function(t){return t&&t.length?vn(t,oa,Mn):r},zr.minBy=function(t,e){return t&&t.length?vn(t,co(e,2),Mn):r},zr.stubArray=ga,zr.stubFalse=ma,zr.stubObject=function(){return{}},zr.stubString=function(){return""},zr.stubTrue=function(){return!0},zr.multiply=Aa,zr.nth=function(t,e){return t&&t.length?Gn(t,vu(e)):r},zr.noConflict=function(){return he._===this&&(he._=Kt),this},zr.noop=fa,zr.now=Bs,zr.pad=function(t,e,r){t=_u(t);var n=(e=vu(e))?fr(t):0;if(!e||n>=e)return t;var i=(e-n)/2;return $i(Pe(i),r)+t+$i(ge(i),r)},zr.padEnd=function(t,e,r){t=_u(t);var n=(e=vu(e))?fr(t):0;return e&&n<e?t+$i(e-n,r):t},zr.padStart=function(t,e,r){t=_u(t);var n=(e=vu(e))?fr(t):0;return e&&n<e?$i(e-n,r)+t:t},zr.parseInt=function(t,e,r){return r||null==e?e=0:e&&(e=+e),wr(_u(t).replace(st,""),e||0)},zr.random=function(t,e,n){if(n&&"boolean"!=typeof n&&wo(t,e,n)&&(e=n=r),n===r&&("boolean"==typeof e?(n=e,e=r):"boolean"==typeof t&&(n=t,t=r)),t===r&&e===r?(t=0,e=1):(t=yu(t),e===r?(e=t,t=0):e=yu(e)),t>e){var i=t;t=e,e=i}if(n||t%1||e%1){var o=kr();return br(t+o*(e-t+ae("1e-"+((o+"").length-1))),e)}return Yn(t,e)},zr.reduce=function(t,e,r){var n=Ws(t)?Ue:We,i=arguments.length<3;return n(t,co(e,4),r,i,pn)},zr.reduceRight=function(t,e,r){var n=Ws(t)?je:We,i=arguments.length<3;return n(t,co(e,4),r,i,dn)},zr.repeat=function(t,e,n){return e=(n?wo(t,e,n):e===r)?1:vu(e),Jn(_u(t),e)},zr.replace=function(){var t=arguments,e=_u(t[0]);return t.length<3?e:e.replace(t[1],t[2])},zr.result=function(t,e,n){var i=-1,o=(e=_i(e,t)).length;for(o||(o=1,t=r);++i<o;){var s=null==t?r:t[Mo(e[i])];s===r&&(i=o,s=n),t=Qs(s)?s.call(t):s}return t},zr.round=Sa,zr.runInContext=t,zr.sample=function(t){return(Ws(t)?Zr:Xn)(t)},zr.size=function(t){if(null==t)return 0;if(Vs(t))return cu(t)?fr(t):t.length;var e=vo(t);return e==A||e==T?t.size:Pn(t).length},zr.snakeCase=Yu,zr.some=function(t,e,n){var i=Ws(t)?Le:oi;return n&&wo(t,e,n)&&(e=r),i(t,co(e,3))},zr.sortedIndex=function(t,e){return si(t,e)},zr.sortedIndexBy=function(t,e,r){return ui(t,e,co(r,2))},zr.sortedIndexOf=function(t,e){var r=null==t?0:t.length;if(r){var n=si(t,e);if(n<r&&Ks(t[n],e))return n}return-1},zr.sortedLastIndex=function(t,e){return si(t,e,!0)},zr.sortedLastIndexBy=function(t,e,r){return ui(t,e,co(r,2),!0)},zr.sortedLastIndexOf=function(t,e){if(null==t?0:t.length){var r=si(t,e,!0)-1;if(Ks(t[r],e))return r}return-1},zr.startCase=Ju,zr.startsWith=function(t,e,r){return t=_u(t),r=null==r?0:an(vu(r),0,t.length),e=fi(e),t.slice(r,r+e.length)==e},zr.subtract=Ia,zr.sum=function(t){return t&&t.length?qe(t,oa):0},zr.sumBy=function(t,e){return t&&t.length?qe(t,co(e,2)):0},zr.template=function(t,e,n){var i=zr.templateSettings;n&&wo(t,e,n)&&(e=r),t=_u(t),e=Eu({},e,i,Qi);var o,s,u=Eu({},e.imports,i.imports,Qi),a=Ru(u),c=Je(u,a),f=0,l=e.interpolate||wt,h="__p += '",p=Tt((e.escape||wt).source+"|"+l.source+"|"+(l===Q?pt:wt).source+"|"+(e.evaluate||wt).source+"|$","g"),d="//# sourceURL="+(Pt.call(e,"sourceURL")?(e.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++ie+"]")+"\n";t.replace(p,(function(e,r,n,i,u,a){return n||(n=i),h+=t.slice(f,a).replace(kt,nr),r&&(o=!0,h+="' +\n__e("+r+") +\n'"),u&&(s=!0,h+="';\n"+u+";\n__p += '"),n&&(h+="' +\n((__t = ("+n+")) == null ? '' : __t) +\n'"),f=a+e.length,e})),h+="';\n";var y=Pt.call(e,"variable")&&e.variable;y||(h="with (obj) {\n"+h+"\n}\n"),h=(s?h.replace(G,""):h).replace($,"$1").replace(W,"$1;"),h="function("+(y||"obj")+") {\n"+(y?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(s?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+h+"return __p\n}";var v=ta((function(){return It(a,d+"return "+h).apply(r,c)}));if(v.source=h,Xs(v))throw v;return v},zr.times=function(t,e){if((t=vu(t))<1||t>p)return[];var r=y,n=br(t,y);e=co(e),t-=y;for(var i=Ve(n,e);++r<t;)e(r);return i},zr.toFinite=yu,zr.toInteger=vu,zr.toLength=gu,zr.toLower=function(t){return _u(t).toLowerCase()},zr.toNumber=mu,zr.toSafeInteger=function(t){return t?an(vu(t),-9007199254740991,p):0===t?t:0},zr.toString=_u,zr.toUpper=function(t){return _u(t).toUpperCase()},zr.trim=function(t,e,n){if((t=_u(t))&&(n||e===r))return t.replace(ot,"");if(!t||!(e=fi(e)))return t;var i=lr(t),o=lr(e);return ki(i,Xe(i,o),Qe(i,o)+1).join("")},zr.trimEnd=function(t,e,n){if((t=_u(t))&&(n||e===r))return t.replace(ut,"");if(!t||!(e=fi(e)))return t;var i=lr(t);return ki(i,0,Qe(i,lr(e))+1).join("")},zr.trimStart=function(t,e,n){if((t=_u(t))&&(n||e===r))return t.replace(st,"");if(!t||!(e=fi(e)))return t;var i=lr(t);return ki(i,Xe(i,lr(e))).join("")},zr.truncate=function(t,e){var n=30,i="...";if(ru(e)){var o="separator"in e?e.separator:o;n="length"in e?vu(e.length):n,i="omission"in e?fi(e.omission):i}var s=(t=_u(t)).length;if(ir(t)){var u=lr(t);s=u.length}if(n>=s)return t;var a=n-fr(i);if(a<1)return i;var c=u?ki(u,0,a).join(""):t.slice(0,a);if(o===r)return c+i;if(u&&(a+=c.length-a),uu(o)){if(t.slice(a).search(o)){var f,l=c;for(o.global||(o=Tt(o.source,_u(dt.exec(o))+"g")),o.lastIndex=0;f=o.exec(l);)var h=f.index;c=c.slice(0,h===r?a:h)}}else if(t.indexOf(fi(o),a)!=a){var p=c.lastIndexOf(o);p>-1&&(c=c.slice(0,p))}return c+i},zr.unescape=function(t){return(t=_u(t))&&Y.test(t)?t.replace(q,hr):t},zr.uniqueId=function(t){var e=++Dt;return _u(t)+e},zr.upperCase=Zu,zr.upperFirst=Xu,zr.each=_s,zr.eachRight=ws,zr.first=Vo,ca(zr,(Ea={},wn(zr,(function(t,e){Pt.call(zr.prototype,e)||(Ea[e]=t)})),Ea),{chain:!1}),zr.VERSION="4.17.20",Ie(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(t){zr[t].placeholder=zr})),Ie(["drop","take"],(function(t,e){Gr.prototype[t]=function(n){n=n===r?1:mr(vu(n),0);var i=this.__filtered__&&!e?new Gr(this):this.clone();return i.__filtered__?i.__takeCount__=br(n,i.__takeCount__):i.__views__.push({size:br(n,y),type:t+(i.__dir__<0?"Right":"")}),i},Gr.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}})),Ie(["filter","map","takeWhile"],(function(t,e){var r=e+1,n=1==r||3==r;Gr.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:co(t,3),type:r}),e.__filtered__=e.__filtered__||n,e}})),Ie(["head","last"],(function(t,e){var r="take"+(e?"Right":"");Gr.prototype[t]=function(){return this[r](1).value()[0]}})),Ie(["initial","tail"],(function(t,e){var r="drop"+(e?"":"Right");Gr.prototype[t]=function(){return this.__filtered__?new Gr(this):this[r](1)}})),Gr.prototype.compact=function(){return this.filter(oa)},Gr.prototype.find=function(t){return this.filter(t).head()},Gr.prototype.findLast=function(t){return this.reverse().find(t)},Gr.prototype.invokeMap=Zn((function(t,e){return"function"==typeof t?new Gr(this):this.map((function(r){return Nn(r,t,e)}))})),Gr.prototype.reject=function(t){return this.filter(Ps(co(t)))},Gr.prototype.slice=function(t,e){t=vu(t);var n=this;return n.__filtered__&&(t>0||e<0)?new Gr(n):(t<0?n=n.takeRight(-t):t&&(n=n.drop(t)),e!==r&&(n=(e=vu(e))<0?n.dropRight(-e):n.take(e-t)),n)},Gr.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},Gr.prototype.toArray=function(){return this.take(y)},wn(Gr.prototype,(function(t,e){var n=/^(?:filter|find|map|reject)|While$/.test(e),i=/^(?:head|last)$/.test(e),o=zr[i?"take"+("last"==e?"Right":""):e],s=i||/^find/.test(e);o&&(zr.prototype[e]=function(){var e=this.__wrapped__,u=i?[1]:arguments,a=e instanceof Gr,c=u[0],f=a||Ws(e),l=function(t){var e=o.apply(zr,Re([t],u));return i&&h?e[0]:e};f&&n&&"function"==typeof c&&1!=c.length&&(a=f=!1);var h=this.__chain__,p=!!this.__actions__.length,d=s&&!h,y=a&&!p;if(!s&&f){e=y?e:new Gr(this);var v=t.apply(e,u);return v.__actions__.push({func:ys,args:[l],thisArg:r}),new Hr(v,h)}return d&&y?t.apply(this,u):(v=this.thru(l),d?i?v.value()[0]:v.value():v)})})),Ie(["pop","push","shift","sort","splice","unshift"],(function(t){var e=Ct[t],r=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",n=/^(?:pop|shift)$/.test(t);zr.prototype[t]=function(){var t=arguments;if(n&&!this.__chain__){var i=this.value();return e.apply(Ws(i)?i:[],t)}return this[r]((function(r){return e.apply(Ws(r)?r:[],t)}))}})),wn(Gr.prototype,(function(t,e){var r=zr[e];if(r){var n=r.name+"";Pt.call(Nr,n)||(Nr[n]=[]),Nr[n].push({name:e,func:r})}})),Nr[Fi(r,2).name]=[{name:"wrapper",func:r}],Gr.prototype.clone=function(){var t=new Gr(this.__wrapped__);return t.__actions__=Oi(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=Oi(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=Oi(this.__views__),t},Gr.prototype.reverse=function(){if(this.__filtered__){var t=new Gr(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},Gr.prototype.value=function(){var t=this.__wrapped__.value(),e=this.__dir__,r=Ws(t),n=e<0,i=r?t.length:0,o=function(t,e,r){var n=-1,i=r.length;for(;++n<i;){var o=r[n],s=o.size;switch(o.type){case"drop":t+=s;break;case"dropRight":e-=s;break;case"take":e=br(e,t+s);break;case"takeRight":t=mr(t,e-s)}}return{start:t,end:e}}(0,i,this.__views__),s=o.start,u=o.end,a=u-s,c=n?u:s-1,f=this.__iteratees__,l=f.length,h=0,p=br(a,this.__takeCount__);if(!r||!n&&i==a&&p==a)return yi(t,this.__actions__);var d=[];t:for(;a--&&h<p;){for(var y=-1,v=t[c+=e];++y<l;){var g=f[y],m=g.iteratee,b=g.type,_=m(v);if(2==b)v=_;else if(!_){if(1==b)continue t;break t}}d[h++]=v}return d},zr.prototype.at=vs,zr.prototype.chain=function(){return ds(this)},zr.prototype.commit=function(){return new Hr(this.value(),this.__chain__)},zr.prototype.next=function(){this.__values__===r&&(this.__values__=du(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?r:this.__values__[this.__index__++]}},zr.prototype.plant=function(t){for(var e,n=this;n instanceof Kr;){var i=Fo(n);i.__index__=0,i.__values__=r,e?o.__wrapped__=i:e=i;var o=i;n=n.__wrapped__}return o.__wrapped__=t,e},zr.prototype.reverse=function(){var t=this.__wrapped__;if(t instanceof Gr){var e=t;return this.__actions__.length&&(e=new Gr(this)),(e=e.reverse()).__actions__.push({func:ys,args:[rs],thisArg:r}),new Hr(e,this.__chain__)}return this.thru(rs)},zr.prototype.toJSON=zr.prototype.valueOf=zr.prototype.value=function(){return yi(this.__wrapped__,this.__actions__)},zr.prototype.first=zr.prototype.head,ue&&(zr.prototype[ue]=function(){return this}),zr}();de?((de.exports=pr)._=pr,pe._=pr):he._=pr}).call(f)})),Fd=f&&f.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Kd=f&&f.__decorate||function(t,e,r,n){var i,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,r,n);else for(var u=t.length-1;u>=0;u--)(i=t[u])&&(s=(o<3?i(s):o>3?i(e,r,s):i(e,r))||s);return o>3&&s&&Object.defineProperty(e,r,s),s},Hd=f&&f.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},Gd=f&&f.__param||function(t,e){return function(r,n){e(r,n,t)}},$d=f&&f.__generator||function(t,e){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}},Wd=f&&f.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},qd=Wd(Gp),Vd=Wd(Nd),Yd=function(){function t(){this._content=[]}return Object.defineProperty(t.prototype,"length",{get:function(){return this._content.length},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"content",{get:function(){return this._content},set:function(t){this._content=t},enumerable:!0,configurable:!0}),t.prototype.get=function(t){return this._content[t]},t.prototype.add=function(t){var e=zd.sortedIndexBy(this._content,t,(function(t){return t.frequency}));this._content.splice(e,0,t)},t.prototype.remove=function(t){this._content.splice(t,1)},t.prototype.popMin=function(){return this._content.shift()},t.prototype.indexOf=function(t){return this._content.findIndex((function(e){return e.value===t}))},t.prototype.clear=function(){this._content=[]},t}(),Jd=function(t){function e(e,r,n){var i=t.call(this)||this;return i._k=e,i._errorRate=r,i._accuracy=n,i._sketch=Vd.default.create(r,n),i._heap=new Yd,i}return Fd(e,t),e.prototype.add=function(t){this._sketch.update(t);var e=this._sketch.count(t);if(this._heap.length<this._k||e>=this._heap.get(0).frequency){var r=this._heap.indexOf(t);r>-1&&this._heap.remove(r),this._heap.add({value:t,frequency:e}),this._heap.length>this._k&&this._heap.popMin()}},e.prototype.clear=function(){this._sketch=Vd.default.create(this._errorRate,this._accuracy),this._heap.clear()},e.prototype.values=function(){for(var t=[],e=this._heap.length-1;e>0;e--){var r=this._heap.get(e);t.push({value:r.value,frequency:r.frequency,rank:this._heap.length-e})}return t},e.prototype.iterator=function(){var t=this._heap;return function(){var e,r;return $d(this,(function(n){switch(n.label){case 0:e=t.length-1,n.label=1;case 1:return e>0?[4,{value:(r=t.get(e)).value,frequency:r.frequency,rank:t.length-e}]:[3,4];case 2:n.sent(),n.label=3;case 3:return e--,[3,1];case 4:return[2]}}))}()},Kd([nd.Field(),Hd("design:type",Number)],e.prototype,"_k",void 0),Kd([nd.Field(),Hd("design:type",Number)],e.prototype,"_errorRate",void 0),Kd([nd.Field(),Hd("design:type",Number)],e.prototype,"_accuracy",void 0),Kd([nd.Field(),Hd("design:type",Vd.default)],e.prototype,"_sketch",void 0),Kd([nd.Field((function(t){return t.content}),(function(t){var e=new Yd;return e.content=t,e})),Hd("design:type",Yd)],e.prototype,"_heap",void 0),e=Kd([nd.AutoExportable("TopK",["_seed"]),Gd(0,nd.Parameter("_k")),Gd(1,nd.Parameter("_errorRate")),Gd(2,nd.Parameter("_accuracy")),Hd("design:paramtypes",[Number,Number,Number])],e)}(qd.default),Zd=Object.defineProperty({default:Jd},"__esModule",{value:!0}),Xd=f&&f.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Qd=f&&f.__decorate||function(t,e,r,n){var i,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,r,n);else for(var u=t.length-1;u>=0;u--)(i=t[u])&&(s=(o<3?i(s):o>3?i(e,r,s):i(e,r))||s);return o>3&&s&&Object.defineProperty(e,r,s),s},ty=f&&f.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},ey=f&&f.__param||function(t,e){return function(r,n){e(r,n,t)}},ry=f&&f.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,i,o=r.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=o.next()).done;)s.push(n.value)}catch(t){i={error:t}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return s},ny=f&&f.__spread||function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(ry(arguments[e]));return t},iy=(f&&f.__importDefault||function(t){return t&&t.__esModule?t:{default:t}})(Gp),oy=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Xd(e,t),e}(Error);function sy(t,e){return(e.a*t+e.b)%e.c}var uy=function(t){function e(e,r){var n=t.call(this)||this;return n._nbHashes=e,n._hashFunctions=r,n._signature=Bp.allocateArray(n._nbHashes,1/0),n}return Xd(e,t),Object.defineProperty(e.prototype,"nbHashes",{get:function(){return this._nbHashes},enumerable:!0,configurable:!0}),e.prototype.isEmpty=function(){return this._signature[0]===1/0},e.prototype.add=function(t){for(var e=0;e<this._nbHashes;e++)this._signature[e]=Math.min(this._signature[e],sy(t,this._hashFunctions[e]))},e.prototype.bulkLoad=function(t){for(var e=this,r=function(r){var i=t.map((function(t){return sy(t,e._hashFunctions[r])}));n._signature[r]=Math.min.apply(Math,ny([n._signature[r]],i))},n=this,i=0;i<this._nbHashes;i++)r(i)},e.prototype.compareWith=function(t){if(this.isEmpty()||t.isEmpty())throw new oy("Cannot compute a Jaccard similairty with a MinHash that contains no values");return zd.intersection(this._signature,t._signature).length/this._nbHashes},Qd([nd.Field(),ty("design:type",Number)],e.prototype,"_nbHashes",void 0),Qd([nd.Field(),ty("design:type",Array)],e.prototype,"_hashFunctions",void 0),Qd([nd.Field(),ty("design:type",Array)],e.prototype,"_signature",void 0),e=Qd([nd.AutoExportable("MinHash",["_seed"]),ey(0,nd.Parameter("_nbHashes")),ey(1,nd.Parameter("_hashFunctions")),ty("design:paramtypes",[Number,Array])],e)}(iy.default),ay=Object.defineProperty({MinHash:uy},"__esModule",{value:!0});function cy(t){if(2!==t&&t%2==0)return!1;for(var e=2;e<Math.sqrt(t);e++)if(t%e==0)return!1;return!0}var fy=function(){function t(t,e){this._nbHashes=t,this._maxValue=e,this._hashFunctions=[];for(var r=function(t){for(var e=0;;){if(cy(t+e))return t+e;e++}}(this._maxValue),n=0;n<this._nbHashes;n++){var i=zd.random(0,this._maxValue,!1),o=zd.random(0,this._maxValue,!1);this._hashFunctions.push({a:i,b:o,c:r})}}return t.prototype.create=function(){return new ay.MinHash(this._nbHashes,this._hashFunctions)},t}(),ly=Object.defineProperty({default:fy},"__esModule",{value:!0});var hy=function(t,e){return t===e||t!=t&&e!=e},py=1/0,dy=17976931348623157e292,yy=NaN,vy="[object Symbol]",gy=/^\s+|\s+$/g,my=/^[-+]0x[0-9a-f]+$/i,by=/^0b[01]+$/i,_y=/^0o[0-7]+$/i,wy=parseInt;function ky(t){return t!=t}var Ey=Object.prototype.toString,Ay=Math.max;function Sy(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}var Iy=function(t,e,r){var n=t?t.length:0;if(!n)return-1;var i=null==r?0:function(t){var e=function(t){if(!t)return 0===t?t:0;if((t=function(t){if("number"==typeof t)return t;if(function(t){return"symbol"==typeof t||function(t){return!!t&&"object"==typeof t}(t)&&Ey.call(t)==vy}(t))return yy;if(Sy(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=Sy(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(gy,"");var r=by.test(t);return r||_y.test(t)?wy(t.slice(2),r?2:8):my.test(t)?yy:+t}(t))===py||t===-1/0){return(t<0?-1:1)*dy}return t==t?t:0}(t),r=e%1;return e==e?r?e-r:e:0}(r);return i<0&&(i=Ay(n+i,0)),function(t,e,r){if(e!=e)return function(t,e,r,n){for(var i=t.length,o=r+(n?1:-1);n?o--:++o<i;)if(e(t[o],o,t))return o;return-1}(t,ky,r);for(var n=r-1,i=t.length;++n<i;)if(t[n]===e)return n;return-1}(t,e,i)},xy=f&&f.__decorate||function(t,e,r,n){var i,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,r,n);else for(var u=t.length-1;u>=0;u--)(i=t[u])&&(s=(o<3?i(s):o>3?i(e,r,s):i(e,r))||s);return o>3&&s&&Object.defineProperty(e,r,s),s},By=f&&f.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},Ty=f&&f.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},Oy=f&&f.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e},Ny=Ty(hy),Cy=Ty(Iy),Ry=Oy(Bp),Uy=nd,jy=function(){function t(t){this._elements=Ry.allocateArray(t,null),this._size=t,this._length=0}var e;return e=t,Object.defineProperty(t.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"length",{get:function(){return this._length},enumerable:!0,configurable:!0}),t.prototype.isFree=function(){return this._length<this._size},t.prototype.nextEmptySlot=function(){return Cy.default(this._elements,null)},t.prototype.at=function(t){return this._elements[t]},t.prototype.add=function(t){return!(null===t||!this.isFree())&&(this.set(this.nextEmptySlot(),t),this._length++,!0)},t.prototype.remove=function(t){var e=Cy.default(this._elements,t);return!(e<=-1)&&(this.unset(e),!0)},t.prototype.has=function(t){return Cy.default(this._elements,t)>-1},t.prototype.set=function(t,e){this._elements[t]=e},t.prototype.unset=function(t){this._elements[t]=null,this._length--},t.prototype.swapRandom=function(t,e){void 0===e&&(e=Math.random);var r=Ry.randomInt(0,this._length-1,e),n=this._elements[r];return this._elements[r]=t,n},t.prototype.swap=function(t,e){var r=this._elements[t];return this._elements[t]=e,r},t.prototype.equals=function(t){return this._size===t.size&&this._length===t.length&&this._elements.every((function(e,r){return Ny.default(t.at(r),e)}))},t=e=xy([nd.Exportable({export:Uy.cloneObject("Bucket","_size","_elements"),import:function(t){if(t.type,!("_elements"in t))throw new Error("Cannot create a Bucket from a JSON export which does not represent a bucket");var r=new e(t._size);return t._elements.forEach((function(t,e){null!==t&&(r._elements[e]=t,r._length++)})),r}}),By("design:paramtypes",[Number])],t)}(),Ly=Object.defineProperty({default:jy},"__esModule",{value:!0}),Py=f&&f.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Dy=f&&f.__decorate||function(t,e,r,n){var i,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,r,n);else for(var u=t.length-1;u>=0;u--)(i=t[u])&&(s=(o<3?i(s):o>3?i(e,r,s):i(e,r))||s);return o>3&&s&&Object.defineProperty(e,r,s),s},My=f&&f.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},zy=f&&f.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},Fy=zy(Gp),Ky=zy(Ly);var Hy=function(t){function e(e,r,n,i){void 0===i&&(i=500);var o=t.call(this)||this;return o._filter=Bp.allocateArray(e,(function(){return new Ky.default(n)})),o._size=e,o._bucketSize=n,o._fingerprintLength=r,o._length=0,o._maxKicks=i,o}var r;return Py(e,t),r=e,e.create=function(t,e,n,i){void 0===n&&(n=4),void 0===i&&(i=500);var o=function(t,e){var r=Math.ceil(Math.log2(1/e)+Math.log2(2*t));return Math.ceil(r/4)}(n,e),s=Math.ceil(t/n/.955);return new r(s,o,n,i)},e.from=function(t,e,n,i){void 0===n&&(n=4),void 0===i&&(i=500);var o=Array.from(t),s=r.create(o.length,e,n,i);return o.forEach((function(t){return s.add(t)})),s},Object.defineProperty(e.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fullSize",{get:function(){return this.size*this.bucketSize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"length",{get:function(){return this._length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fingerprintLength",{get:function(){return this._fingerprintLength},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bucketSize",{get:function(){return this._bucketSize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxKicks",{get:function(){return this._maxKicks},enumerable:!0,configurable:!0}),e.prototype.add=function(t,e,r){void 0===e&&(e=!1),void 0===r&&(r=!1);var n=this._locations(t);if(this._filter[n.firstIndex].isFree())this._filter[n.firstIndex].add(n.fingerprint);else{if(!this._filter[n.secondIndex].isFree()){for(var i=this.random()<.5?n.firstIndex:n.secondIndex,o=n.fingerprint,s=[],u=0;u<this._maxKicks;u++){var a=Bp.randomInt(0,this._filter[i].length-1,this.random),c=this._filter[i].at(a);s.push([i,a,c]),this._filter[i].set(a,o),o=c;var f=Bp.hashAsInt(o,this.seed,64);if(i=Math.abs(i^Math.abs(f))%this._filter.length,this._filter[i].isFree())return this._filter[i].add(o),this._length++,!0}if(!r)for(var l=s.length-1;l>=0;l--){var h=s[l];this._filter[h[0]].set(h[1],h[2])}if(e)throw new Error('The Cuckoo Filter is full, cannot insert element "'+t+'"');return!1}this._filter[n.secondIndex].add(n.fingerprint)}return this._length++,!0},e.prototype.remove=function(t){var e=this._locations(t);return this._filter[e.firstIndex].has(e.fingerprint)?(this._filter[e.firstIndex].remove(e.fingerprint),this._length--,!0):!!this._filter[e.secondIndex].has(e.fingerprint)&&(this._filter[e.secondIndex].remove(e.fingerprint),this._length--,!0)},e.prototype.has=function(t){var e=this._locations(t);return this._filter[e.firstIndex].has(e.fingerprint)||this._filter[e.secondIndex].has(e.fingerprint)},e.prototype.rate=function(){var t=this._computeHashTableLoad(),e=this._fingerprintLength/t.load;return Math.pow(2,Math.log2(2*this._bucketSize)-t.load*e)},e.prototype._computeHashTableLoad=function(){var t=this._filter.length*this._bucketSize,e=this._filter.reduce((function(t,e){return t+e.length}),0);return{used:e,free:t-e,size:t,load:e/t}},e.prototype._locations=function(t){var e=Bp.hashIntAndString(t,this.seed,16,64),r=e.int;if(this._fingerprintLength>e.string.length)throw new Error("The fingerprint length ("+this._fingerprintLength+") is higher than the hash length ("+e.string.length+"). Please reduce the fingerprint length or report if it is an unexpected behavior.");var n=e.string.substring(0,this._fingerprintLength),i=Math.abs(r),o=Math.abs(Bp.hashAsInt(n,this.seed,64)),s=Math.abs(i^o);return{fingerprint:n,firstIndex:i%this._size,secondIndex:s%this._size}},e.prototype.equals=function(t){for(var e=0,r=!0;r&&e<this._filter.length;){var n=this._filter[e];t._filter[e].equals(n)||(r=!1),e++}return r},e=r=Dy([nd.Exportable({export:nd.cloneObject("CuckooFilter","_size","_fingerprintLength","_length","_maxKicks","_filter","_seed"),import:function(t){if(!("CuckooFilter"===t.type&&"_size"in t&&"_fingerprintLength"in t&&"_length"in t&&"_maxKicks"in t&&"_filter"in t&&"_seed"in t))throw new Error("Cannot create a CuckooFilter from a JSON export which does not represent a cuckoo filter");var e=new r(t._size,t._fingerprintLength,t._bucketSize,t._maxKicks);return e._length=t._length,e._filter=t._filter.map((function(t){var e=new Ky.default(t._size);return t._elements.forEach((function(t,r){null!==t&&(e._elements[r]=t,e._length++)})),e})),e.seed=t.seed,e}}),My("design:paramtypes",[Number,Number,Number,Number])],e)}(Fy.default),Gy=Object.defineProperty({default:Hy},"__esModule",{value:!0}),$y=f&&f.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Wy=f&&f.__decorate||function(t,e,r,n){var i,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,r,n);else for(var u=t.length-1;u>=0;u--)(i=t[u])&&(s=(o<3?i(s):o>3?i(e,r,s):i(e,r))||s);return o>3&&s&&Object.defineProperty(e,r,s),s},qy=f&&f.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},Vy=f&&f.__param||function(t,e){return function(r,n){e(r,n,t)}},Yy=(f&&f.__importDefault||function(t){return t&&t.__esModule?t:{default:t}})(Gp),Jy=Symbol.for("nodejs.util.inspect.custom"),Zy=function(t){function e(e,r,n){var i=t.call(this)||this;return i._idSum=e,i._hashSum=r,i._count=n,i}var r;return $y(e,t),r=e,e.empty=function(){return new r(K.Buffer.allocUnsafe(0).fill(0),K.Buffer.allocUnsafe(0).fill(0),0)},e.prototype[Jy]=function(){return"Cell:<"+JSON.stringify(this._idSum.toJSON().data)+", "+JSON.stringify(this._hashSum.toJSON().data)+", "+this._count+">"},Object.defineProperty(e.prototype,"idSum",{get:function(){return this._idSum},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hashSum",{get:function(){return this._hashSum},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"count",{get:function(){return this._count},enumerable:!0,configurable:!0}),e.prototype.add=function(t,e){this._idSum=Bp.xorBuffer(this._idSum,t),this._hashSum=Bp.xorBuffer(this._hashSum,e),this._count++},e.prototype.xorm=function(t){return new r(Bp.xorBuffer(this._idSum,t.idSum),Bp.xorBuffer(this._hashSum,t.hashSum),this._count-t.count)},e.prototype.isEmpty=function(){return this._idSum.equals(K.Buffer.from(""))&&this._hashSum.equals(K.Buffer.from(""))&&0===this._count},e.prototype.equals=function(t){return this._count===t.count&&this._idSum.equals(t.idSum)&&this._hashSum.equals(t.hashSum)},e.prototype.isPure=function(){if(this.isEmpty()||1!==this._count&&-1!==this._count)return!1;var t=Bp.hashTwiceAsString(JSON.stringify(this._idSum.toJSON()),this.seed);return this._hashSum.equals(K.Buffer.from(t.first))},Wy([nd.Field((function(t){return t.toString()}),K.Buffer.from),qy("design:type",K.Buffer)],e.prototype,"_idSum",void 0),Wy([nd.Field((function(t){return t.toString()}),K.Buffer.from),qy("design:type",K.Buffer)],e.prototype,"_hashSum",void 0),Wy([nd.Field(),qy("design:type",Number)],e.prototype,"_count",void 0),e=r=Wy([nd.AutoExportable("Cell",["_seed"]),Vy(0,nd.Parameter("_idSum")),Vy(1,nd.Parameter("_hashSum")),Vy(2,nd.Parameter("_count")),qy("design:paramtypes",[K.Buffer,K.Buffer,Number])],e)}(Yy.default),Xy=Object.defineProperty({default:Zy},"__esModule",{value:!0}),Qy=f&&f.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),tv=f&&f.__decorate||function(t,e,r,n){var i,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,r,n);else for(var u=t.length-1;u>=0;u--)(i=t[u])&&(s=(o<3?i(s):o>3?i(e,r,s):i(e,r))||s);return o>3&&s&&Object.defineProperty(e,r,s),s},ev=f&&f.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},rv=f&&f.__param||function(t,e){return function(r,n){e(r,n,t)}},nv=f&&f.__generator||function(t,e){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}},iv=f&&f.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},ov=iv(Gp),sv=iv(Xy),uv=function(t){function e(e,r){void 0===r&&(r=3);var n=t.call(this)||this;if(void 0===K.Buffer)throw new Error('No native Buffer implementation bound in your JavaScript env. If you are in a Web browser, consider importing the polyfill "feross/buffer" (https://github.com/feross/buffer).');if(r<=0)throw new Error("The hashCount must be a non-zero, positive integer");return n._size=e,n._hashCount=r,n._elements=Bp.allocateArray(n._size,(function(){return sv.default.empty()})),n}var r;return Qy(e,t),r=e,e.create=function(t,e){var n=sd.optimalFilterSize(t,e),i=sd.optimalHashes(n,t);return new r(n,i)},e.from=function(t,e){var n=Array.from(t),i=r.create(n.length,e);return n.forEach((function(t){return i.add(t)})),i},Object.defineProperty(e.prototype,"hashCount",{get:function(){return this._hashCount},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"length",{get:function(){return this._elements.reduce((function(t,e){return t+e.count}),0)/this._hashCount},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"elements",{get:function(){return this._elements},enumerable:!0,configurable:!0}),e.prototype.add=function(t){for(var e=Bp.allInOneHashTwice(JSON.stringify(t.toJSON()),this.seed),r=Bp.getDistinctIndices(e.string.first,this._size,this._hashCount,this.seed),n=0;n<this._hashCount;++n)this._elements[r[n]].add(t,K.Buffer.from(e.string.first))},e.prototype.remove=function(t){for(var e=Bp.allInOneHashTwice(JSON.stringify(t.toJSON()),this.seed),r=Bp.getDistinctIndices(e.string.first,this.size,this._hashCount,this.seed),n=0;n<this._hashCount;++n)this._elements[r[n]]=this._elements[r[n]].xorm(new sv.default(K.Buffer.from(t),K.Buffer.from(e.string.first),1));return!0},e.prototype.has=function(t){for(var e=Bp.allInOneHashTwice(JSON.stringify(t.toJSON()),this.seed),r=Bp.getDistinctIndices(e.string.first,this.size,this._hashCount,this.seed),n=0;n<this._hashCount;++n){if(0===this._elements[r[n]].count)return!1;if(1===this._elements[r[n]].count)return!!this._elements[r[n]].idSum.equals(t)}return!0},e.prototype.listEntries=function(){var t=this,e=[];return function(){var r,n,i;return nv(this,(function(o){switch(o.label){case 0:r=function(r){var n;return nv(this,(function(i){switch(i.label){case 0:return(n=t._elements[r]).count>0&&-1===e.findIndex((function(t){return t.equals(n.idSum)}))?t.has(n.idSum)?(e.push(n.idSum),[4,n.idSum]):[3,2]:[3,3];case 1:return i.sent(),[3,3];case 2:return[2,{value:!1}];case 3:return[2]}}))},n=0,o.label=1;case 1:return n<t._elements.length-1?[5,r(n)]:[3,4];case 2:if("object"==typeof(i=o.sent()))return[2,i.value];o.label=3;case 3:return n++,[3,1];case 4:return[2,!0]}}))}()},e.prototype.substract=function(t){if(this.size!==t.size)throw new Error("The two Invertible Bloom Filters must be of the same size");var e=new r(t._size,t._hashCount);e.seed=this.seed;for(var n=0;n<this.size;++n)e._elements[n]=this._elements[n].xorm(t._elements[n]);return e},e.prototype.equals=function(t){if(t._size!==this._size||t._hashCount!==this._hashCount||t.seed!==this.seed)return!1;for(var e=0;e<t._elements.length;++e)if(!t._elements[e].equals(this._elements[e]))return!1;return!0},e.prototype.decode=function(t,e){void 0===t&&(t=[]),void 0===e&&(e=[]);for(var r=[],n=null,i=0;i<this._elements.length;++i)(n=this._elements[i]).isPure()&&r.push(i);for(;0!==r.length;){var o=(n=this._elements[r.pop()]).idSum,s=n.count;if(n.isPure()){if(1===s)t.push(o);else{if(-1!==s)throw new Error("Please report, not possible");e.push(o)}var u=Bp.allInOneHashTwice(JSON.stringify(o.toJSON()),this.seed),a=Bp.getDistinctIndices(u.string.first,this._size,this._hashCount,this.seed);for(i=0;i<a.length;++i)this._elements[a[i]]=this._elements[a[i]].xorm(new sv.default(o,K.Buffer.from(u.string.first),s)),this._elements[a[i]].isPure()&&r.push(a[i])}}return this._elements.findIndex((function(t){return!t.isEmpty()}))>-1?{success:!1,reason:{cell:n,iblt:this},additional:t,missing:e}:{success:!0,additional:t,missing:e}},tv([nd.Field(),ev("design:type",Number)],e.prototype,"_size",void 0),tv([nd.Field(),ev("design:type",Number)],e.prototype,"_hashCount",void 0),tv([nd.Field(void 0,(function(t){return t.map((function(t){var e=new sv.default(K.Buffer.from(t._idSum),K.Buffer.from(t._hashSum),t._count);return e.seed=t._seed,e}))})),ev("design:type",Array)],e.prototype,"_elements",void 0),e=r=tv([nd.AutoExportable("InvertibleBloomFilter",["_seed"]),rv(0,nd.Parameter("_size")),rv(1,nd.Parameter("_hashCount")),ev("design:paramtypes",[Number,Number])],e)}(ov.default),av=Object.defineProperty({default:uv},"__esModule",{value:!0}),cv=hd.default;md.default,Ad.default,Nd.default,Md.default,Zd.default,ay.MinHash,ly.default,Gy.default,av.default,Xy.default;var fv,lv=function(t){return o(void 0,void 0,void 0,(function(){var e;return s(this,(function(r){return e="0".repeat(256),[2,hv(e,t)]}))}))},hv=function(t,e){return o(void 0,void 0,void 0,(function(){var r,n;return s(this,(function(i){switch(i.label){case 0:return r=bv(t),[4,qr.sha256Str(e)];case 1:return n=i.sent(),r.add(n),[4,mv(r)];case 2:return[2,i.sent()]}}))}))},pv=function(t,e,r){return o(void 0,void 0,void 0,(function(){return s(this,(function(n){switch(n.label){case 0:return[4,hv(t,""+r+e)];case 1:return[2,n.sent()]}}))}))},dv=function(t){return o(void 0,void 0,void 0,(function(){var e;return s(this,(function(r){switch(r.label){case 0:return[4,vv(bv(t))];case 1:return e=r.sent(),[2,yv(e)]}}))}))},yv=function(t){return o(void 0,void 0,void 0,(function(){var e,r;return s(this,(function(n){switch(n.label){case 0:return e=new Uint8Array(t.toBytes()),[4,qr.sha256(e)];case 1:return r=n.sent(),[2,$r(r)]}}))}))},vv=function(t,e){return void 0===e&&(e=320),o(void 0,void 0,void 0,(function(){var r,n,i;return s(this,(function(o){switch(o.label){case 0:if(e>8*t.toBytes().byteLength)throw new Error("threshold is bigger than filter size");if(gv(t)>=e)return[2,t];r=t.toBytes(),n=r,o.label=1;case 1:return[4,qr.sha256(n)];case 2:i=o.sent(),t.add($r(i)),n=i,o.label=3;case 3:if(_v(r,t.toBytes()))return[3,1];o.label=4;case 4:return[2,vv(t,e)]}}))}))},gv=function(t){for(var e=new Uint32Array(t.toBytes()),r=0,n=0;n<e.length;n++)r+=wv(e[n]);return r},mv=function(t){return $r(t.toBytes())},bv=function(t){var e=function(t){for(var e=new Uint8Array(t.length/2),r=0;r<e.length;r++)e[r]=parseInt(t.slice(2*r,2*r+2),16);return e}(t);return cv.fromBytes(e,16)},_v=function(t,e){if(t.byteLength!==e.byteLength)return!1;for(var r=new Uint8Array(t),n=new Uint8Array(e),i=0;i<r.length;i++)if(r[i]!==n[i])return!1;return!0},wv=function(t){var e=t-(t>>1&1431655765),r=(858993459&e)+(e>>2&858993459);return 16843009*(r+(r>>4)&252645135)>>24},kv=function(t,e,r){return o(void 0,void 0,void 0,(function(){var n,i,o,u,a,c,f,l,h;return s(this,(function(s){switch(s.label){case 0:return[4,dh(e,r)];case 1:return n=s.sent(),i=n.cid,o=n.size,[4,pv(e.bareNameFilter,r,e.revision)];case 2:return u=s.sent(),[4,dv(u)];case 3:return a=s.sent(),[4,t.add(a,i)];case 4:return s.sent(),Rh(e)?[4,hv(e.bareNameFilter,e.key)]:[3,9];case 5:return c=s.sent(),[4,pv(c,e.key,e.revision)];case 6:return f=s.sent(),[4,dv(f)];case 7:return l=s.sent(),[4,t.add(l,e.content)];case 8:s.sent(),s.label=9;case 9:return h=Rh(e)?[{},!0]:[e.skeleton,!1],[2,{cid:i,name:a,key:r,size:o,isFile:h[1],skeleton:h[0]}]}}))}))},Ev=function(t,e){return o(void 0,void 0,void 0,(function(){var r;return s(this,(function(n){switch(n.label){case 0:return[4,_l(t,e)];case 1:if(r=n.sent(),!Uh(i=r)&&!Rh(i))throw new Error("Could not parse a valid filesystem object, "+t);return[2,r]}var i}))}))},Av=function(t,e,r){return o(void 0,void 0,void 0,(function(){var n;return s(this,(function(i){switch(i.label){case 0:return[4,t.get(e)];case 1:return null===(n=i.sent())?[2,null]:[2,Sv(n,r)]}}))}))},Sv=function(t,e){return o(void 0,void 0,void 0,(function(){return s(this,(function(r){switch(r.label){case 0:return[4,Ev(t,e)];case 1:return[2,r.sent()]}}))}))},Iv=function(t,e,r){return o(void 0,void 0,void 0,(function(){var n;return s(this,(function(i){switch(i.label){case 0:return[4,t.get(e)];case 1:return null===(n=i.sent())?[2,null]:[2,xv(t,n,r)]}}))}))},xv=function(t,e,r){return o(void 0,void 0,void 0,(function(){var n,i,o;return s(this,(function(s){switch(s.label){case 0:return[4,Sv(e,r)];case 1:return n=s.sent(),[4,Tv(t,n.bareNameFilter,r,n.revision)];case 2:return(null==(i=s.sent())?void 0:i.cid)?[4,Sv(null==i?void 0:i.cid,r)]:[3,4];case 3:return o=s.sent(),[3,5];case 4:o=n,s.label=5;case 5:return[2,o]}}))}))},Bv=function(t,e,r){return o(void 0,void 0,void 0,(function(){var n,i;return s(this,(function(o){switch(o.label){case 0:return[4,pv(e,r,1)];case 1:return n=o.sent(),[4,dv(n)];case 2:return i=o.sent(),[2,Iv(t,i,r)]}}))}))},Tv=function(t,e,r,n){return o(void 0,void 0,void 0,(function(){var i,o,u,a,c,f,l;return s(this,(function(s){switch(s.label){case 0:i=n,o=null,u=0,a=null,s.label=1;case 1:return null!==o?[3,3]:(c=n+Math.pow(2,u),[4,Ov(t,e,r,c)]);case 2:return null!==(l=s.sent())?(a=l,i=c):o=c,u++,[3,1];case 3:return i<o-1?(f=Math.floor((o+i)/2),[4,Ov(t,e,r,f)]):[3,5];case 4:return null!==(l=s.sent())?(a=l,i=f):o=f,[3,3];case 5:return[2,a]}}))}))},Ov=function(t,e,r,n){return o(void 0,void 0,void 0,(function(){var i,o,u;return s(this,(function(s){switch(s.label){case 0:return[4,pv(e,r,n)];case 1:return i=s.sent(),[4,dv(i)];case 2:return o=s.sent(),[4,t.get(o)];case 3:return[2,(u=s.sent())?{cid:u,name:o,number:n}:null]}}))}))},Nv=function(t,e,r){return{major:t,minor:e,patch:r}},Cv=function(t){return t.major+"."+t.minor+"."+t.patch},Rv=Nv(0,0,0),Uv=Nv(1,0,0),jv=Nv(1,0,0),Lv=function(){function t(t){this.content=t}return t.prototype.put=function(){return o(this,void 0,void 0,(function(){return s(this,(function(t){switch(t.label){case 0:return[4,this.putDetailed()];case 1:return[2,t.sent().cid]}}))}))},t.prototype.updateContent=function(t){return o(this,void 0,void 0,(function(){return s(this,(function(e){return this.content=t,[2,this]}))}))},t}(),Pv=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.create=function(t){return new e(t)},e.fromCID=function(t){return o(this,void 0,void 0,(function(){return s(this,(function(r){switch(r.label){case 0:return[4,lh(t)];case 1:return[2,new e(r.sent())]}}))}))},e.instanceOf=function(t){return Ur(t)&&void 0!==t.content},e.prototype.put=function(){return o(this,void 0,void 0,(function(){return s(this,(function(t){switch(t.label){case 0:return[4,this.putDetailed()];case 1:return[2,t.sent().cid]}}))}))},e.prototype.putDetailed=function(){return o(this,void 0,void 0,(function(){return s(this,(function(t){return[2,ph(this.content)]}))}))},e}(Lv),Dv=function(){function t(t){this.version=t}return t.prototype.put=function(){return o(this,void 0,void 0,(function(){return s(this,(function(t){switch(t.label){case 0:return[4,this.putDetailed()];case 1:return[2,t.sent().cid]}}))}))},t.prototype.ls=function(t){return o(this,void 0,void 0,(function(){var e;return s(this,(function(r){switch(r.label){case 0:return[4,this.get(t)];case 1:if(null===(e=r.sent()))throw new Error("Path does not exist");if(mh(e))throw new Error("Can not `ls` a file");return[2,e.getLinks()]}}))}))},t.prototype.cat=function(t){return o(this,void 0,void 0,(function(){var e;return s(this,(function(r){switch(r.label){case 0:return[4,this.get(t)];case 1:if(null===(e=r.sent()))throw new Error("Path does not exist");if(!mh(e))throw new Error("Can not `cat` a directory");return[2,e.content]}}))}))},t.prototype.mkdir=function(t){return o(this,void 0,void 0,(function(){var e=this;return s(this,(function(r){return[2,this.mkdirRecurse(t,(function(){return e.put()}))]}))}))},t.prototype.mkdirRecurse=function(t,e){return o(this,void 0,void 0,(function(){var r,n,i,o=this;return s(this,(function(s){switch(s.label){case 0:if(r=t[0],n=t.slice(1),!r)throw new Error("Invalid path: empty");return[4,this.getOrCreateDirectChild(r,e)];case 1:if(i=s.sent(),mh(i))throw new Error("There is a file along the given path: "+vn(t));return n.length?[4,i.mkdirRecurse(n,(function(){return o.updateDirectChild(i,r,e)}))]:[3,3];case 2:s.sent(),s.label=3;case 3:return[2,this]}}))}))},t.prototype.add=function(t,e){return o(this,void 0,void 0,(function(){var r=this;return s(this,(function(n){switch(n.label){case 0:return[4,this.addRecurse(t,e,(function(){return r.put()}))];case 1:return n.sent(),[2,this]}}))}))},t.prototype.addRecurse=function(t,e,r){return o(this,void 0,void 0,(function(){var n,i,u,a=this;return s(this,(function(c){switch(c.label){case 0:if(n=t[0],i=t.slice(1),!n)throw new Error("Invalid path: empty");return 0!==i.length?[3,2]:[4,this.createOrUpdateChildFile(e,n,r)];case 1:return c.sent(),[3,5];case 2:return[4,this.getOrCreateDirectChild(n,r)];case 3:if(u=c.sent(),mh(u))throw new Error("There is a file along the given path: "+vn(t));return[4,u.addRecurse(i,e,(function(){return o(a,void 0,void 0,(function(){return s(this,(function(t){switch(t.label){case 0:return[4,this.updateDirectChild(u,n,r)];case 1:return t.sent(),[2]}}))}))}))];case 4:c.sent(),c.label=5;case 5:return[2,this]}}))}))},t.prototype.rm=function(t){return o(this,void 0,void 0,(function(){var e=this;return s(this,(function(r){switch(r.label){case 0:return[4,this.rmRecurse(t,(function(){return e.put()}))];case 1:return r.sent(),[2,this]}}))}))},t.prototype.rmRecurse=function(t,e){return o(this,void 0,void 0,(function(){var r,n,i,u=this;return s(this,(function(a){switch(a.label){case 0:if(r=t[0],n=t.slice(1),!r)throw new Error("Invalid path: empty");return 0!==n.length?[3,3]:(this.removeDirectChild(r),e?[4,e()]:[3,2]);case 1:a.sent(),a.label=2;case 2:return[3,6];case 3:return[4,this.getDirectChild(r)];case 4:if(null===(i=a.sent()))throw new Error("Invalid path: does not exist");if(mh(i))throw new Error("There is a file along the given path: "+vn(t));return[4,i.rmRecurse(n,(function(){return o(u,void 0,void 0,(function(){return s(this,(function(t){switch(t.label){case 0:return[4,this.updateDirectChild(i,r,e)];case 1:return t.sent(),[2]}}))}))}))];case 5:a.sent(),a.label=6;case 6:return[2,this]}}))}))},t.prototype.mv=function(t,e){return o(this,void 0,void 0,(function(){var r,n,i,u=this;return s(this,(function(c){switch(c.label){case 0:return[4,this.get(t)];case 1:if(null===(r=c.sent()))throw new Error("Path does not exist: "+vn(t));if(e.length<1)throw new Error("Path does not exist: "+vn(e));return n=e.slice(0,-1),[4,this.get(n)];case 2:return(i=c.sent())?[3,5]:[4,this.mkdir(n)];case 3:return c.sent(),[4,this.get(n)];case 4:return i=c.sent(),[3,6];case 5:if(mh(i))throw new Error("Can not `mv` to a file: "+vn(n));c.label=6;case 6:return[4,this.rm(t)];case 7:return c.sent(),[4,a(e).reverse().reduce((function(t,r,n){return t.then((function(t){return o(u,void 0,void 0,(function(){var i,o,u;return s(this,(function(s){switch(s.label){case 0:return(i=e.slice(0,-(n+1))).length?[4,this.get(i)]:[3,2];case 1:return u=s.sent(),[3,3];case 2:u=this,s.label=3;case 3:return!(o=u)||mh(o)?[3,5]:[4,o.updateDirectChild(t,r,null)];case 4:return s.sent(),[2,o];case 5:throw new Error("Failed to update tree while moving node")}}))}))}))}),Promise.resolve(r))];case 8:return c.sent(),[2,this]}}))}))},t.prototype.exists=function(t){return o(this,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return[4,this.get(t)];case 1:return[2,null!==e.sent()]}}))}))},t.prototype.read=function(t){return this.get(t)},t.prototype.write=function(t,e){return this.add(t,e)},t.prototype.getOrCreateDirectChild=function(t,e){return o(this,void 0,void 0,(function(){var r;return s(this,(function(n){switch(n.label){case 0:return[4,this.getDirectChild(t)];case 1:return[2,null!==(r=n.sent())?r:this.createChildTree(t,e)]}}))}))},t}(),Mv=function(t){function e(e){var r=t.call(this,Rv)||this;return r.links=e,r.children={},r}return r(e,t),e.empty=function(){return o(this,void 0,void 0,(function(){return s(this,(function(t){return[2,new e({})]}))}))},e.fromCID=function(t){return o(this,void 0,void 0,(function(){return s(this,(function(r){switch(r.label){case 0:return[4,vh(t)];case 1:return[2,new e(r.sent())]}}))}))},e.fromLinks=function(t){return new e(t)},e.prototype.createChildTree=function(t,r){return o(this,void 0,void 0,(function(){var n,i;return s(this,(function(o){switch(o.label){case 0:return[4,e.empty()];case 1:if(n=o.sent(),i=this.children[t]){if(Pv.instanceOf(i))throw new Error("There is a file at the given path: "+t);return[2,i]}return[4,this.updateDirectChild(n,t,r)];case 2:return o.sent(),[2,n]}}))}))},e.prototype.createOrUpdateChildFile=function(t,e,r){return o(this,void 0,void 0,(function(){var n,i;return s(this,(function(o){switch(o.label){case 0:return[4,this.getDirectChild(e)];case 1:return null!==(n=o.sent())?[3,3]:[4,Pv.create(t)];case 2:return i=o.sent(),[3,6];case 3:return Pv.instanceOf(n)?[4,n.updateContent(t)]:[3,5];case 4:return i=o.sent(),[3,6];case 5:throw new Error("There is already a directory with that name: "+e);case 6:return[4,this.updateDirectChild(i,e,r)];case 7:return o.sent(),[2,i]}}))}))},e.prototype.putDetailed=function(){return o(this,void 0,void 0,(function(){return s(this,(function(t){return[2,gh(this.links)]}))}))},e.prototype.putAndUpdateLink=function(t,e,r){return o(this,void 0,void 0,(function(){var n;return s(this,(function(i){switch(i.label){case 0:return[4,t.putDetailed()];case 1:return n=i.sent(),this.updateLink(e,n),r?[4,r()]:[3,3];case 2:i.sent(),i.label=3;case 3:return[2,this]}}))}))},e.prototype.updateDirectChild=function(t,e,r){return o(this,void 0,void 0,(function(){return s(this,(function(n){return this.children[e]=t,[2,this.putAndUpdateLink(t,e,r)]}))}))},e.prototype.removeDirectChild=function(t){return delete this.links[t],this.children[t]&&delete this.children[t],this},e.prototype.getDirectChild=function(t){return o(this,void 0,void 0,(function(){var r,n,i;return s(this,(function(o){switch(o.label){case 0:return this.children[t]?[2,this.children[t]]:null===(r=this.links[t]||null)?[2,null]:r.isFile?[4,Pv.fromCID(r.cid)]:[3,2];case 1:return i=o.sent(),[3,4];case 2:return[4,e.fromCID(r.cid)];case 3:i=o.sent(),o.label=4;case 4:return n=i,this.children[t]?[2,this.children[t]]:(this.children[t]=n,[2,n])}}))}))},e.prototype.get=function(t){return o(this,void 0,void 0,(function(){var e,r,n;return s(this,(function(i){switch(i.label){case 0:return e=t[0],r=t.slice(1),e?[4,this.getDirectChild(e)]:[2,this];case 1:return n=i.sent(),r.length?null===n||mh(n)?[2,null]:[2,n.get(r)]:[2,n]}}))}))},e.prototype.updateLink=function(t,e){var r=e.cid,n=e.size,i=e.isFile;return this.links[t]=ah(t,r,i,n),this},e.prototype.getLinks=function(){return this.links},e}(Dv),zv={0:!0,1:!0,2:!0,3:!0,4:!0,5:!0,6:!0,7:!0,8:!0,9:!0,a:!0,b:!0,c:!0,d:!0,e:!0,f:!0},Fv=function(){function t(t){this.links=t,this.children={}}return t.create=function(){return new t({})},t.fromCID=function(e){return o(this,void 0,void 0,(function(){return s(this,(function(r){switch(r.label){case 0:return[4,yh(e)];case 1:return[2,new t(r.sent())]}}))}))},t.prototype.putDetailed=function(){return o(this,void 0,void 0,(function(){return s(this,(function(t){return[2,gh(this.links)]}))}))},t.prototype.put=function(){return o(this,void 0,void 0,(function(){return s(this,(function(t){switch(t.label){case 0:return[4,this.putDetailed()];case 1:return[2,t.sent().cid]}}))}))},t.prototype.add=function(t,e){return o(this,void 0,void 0,(function(){var r,n,i;return s(this,(function(o){switch(o.label){case 0:if(s=t[0],!0!==zv[s])throw new Error("Not a valid name, must be hexadecimal");return r=this.nextTreeOrSiblingName(t),t!==r?[3,1]:[3,9];case 1:return null!==r?[3,2]:(this.links[t]=ah(t,e,!0,0),[3,9]);case 2:return 1!==r.length?[3,6]:[4,this.getDirectChild(r)];case 3:return[4,o.sent().add(t.slice(1),e)];case 4:return o.sent(),[4,this.putAndUpdateChildLink(r)];case 5:return o.sent(),[3,9];case 6:return n=this.addEmptyChild(t[0]),i=this.links[r].cid,this.removeChild(r),[4,Promise.all([n.add(t.slice(1),e),n.add(r.slice(1),i)])];case 7:return o.sent(),[4,this.putAndUpdateChildLink(t[0])];case 8:o.sent(),o.label=9;case 9:return[2]}var s}))}))},t.prototype.putAndUpdateChildLink=function(t){var e,r;return o(this,void 0,void 0,(function(){var n,i,o,u,a;return s(this,(function(s){switch(s.label){case 0:return n=null===(e=this.links[t])||void 0===e?void 0:e.cid,[4,this.children[t].putDetailed()];case 1:return i=s.sent(),o=i.cid,u=i.size,a=null===(r=this.links[t])||void 0===r?void 0:r.cid,n==a?[3,3]:[4,this.putAndUpdateChildLink(t)];case 2:return[2,s.sent()];case 3:return this.links[t]=ah(t,o,!1,u),[2]}}))}))},t.prototype.addEmptyChild=function(e){var r=t.create();return this.children[e]=r,r},t.prototype.get=function(t){return o(this,void 0,void 0,(function(){var e;return s(this,(function(r){switch(r.label){case 0:return null===(e=this.nextTreeName(t))?[2,null]:e.length>1?[2,this.links[e].cid]:[4,this.getDirectChild(e)];case 1:return[2,r.sent().get(t.slice(1))]}}))}))},t.prototype.exists=function(t){return o(this,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return[4,this.get(t)];case 1:return[2,null!==e.sent()]}}))}))},t.prototype.members=function(){return o(this,void 0,void 0,(function(){var e=this;return s(this,(function(r){switch(r.label){case 0:return[4,Promise.all(Object.values(this.links).map((function(r){var i=r.name,u=r.cid;return o(e,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return i.length>1?[2,[{name:i,cid:u}]]:[4,t.fromCID(u)];case 1:return[4,e.sent().members()];case 2:return[2,e.sent().map((function(t){return n(n({},t),{name:i+t.name})}))]}}))}))})))];case 1:return[2,r.sent().reduce((function(t,e){return t.concat(e)}))]}}))}))},t.prototype.getDirectChild=function(e){return o(this,void 0,void 0,(function(){var r;return s(this,(function(n){switch(n.label){case 0:return this.children[e]?[2,this.children[e]]:[4,t.fromCID(this.links[e].cid)];case 1:return r=n.sent(),this.children[e]?[2,this.children[e]]:(this.children[e]=r,[2,r])}}))}))},t.prototype.removeChild=function(t){delete this.links[t],this.children[t]&&delete this.children[t]},t.prototype.directChildExists=function(t){return void 0!==this.links[t]||void 0!==this.children[t]},t.prototype.nextTreeName=function(t){return this.directChildExists(t[0])?t[0]:this.directChildExists(t)?t:null},t.prototype.nextTreeOrSiblingName=function(t){var e=t[0];return this.directChildExists(e)?e:Object.keys(this.links).find((function(t){return e===t[0]}))||null},t}(),Kv=function(){function t(t){this.node=t}return t.prototype.back=function(e){void 0===e&&(e=-1);var r=Math.abs(Math.min(e,-1));return Array.from({length:r},(function(t,e){return e})).reduce((function(e){return e.then((function(e){return e?t._getPreviousVersion(e):null}))}),Promise.resolve(this.node))},t.prototype.prior=function(e){return o(this,void 0,void 0,(function(){return s(this,(function(r){return[2,t._prior(this.node,e)]}))}))},t.prototype.list=function(e){return void 0===e&&(e=5),o(this,void 0,void 0,(function(){return s(this,(function(r){switch(r.label){case 0:return[4,Array.from({length:e},(function(t,e){return e})).reduce((function(e,r){return e.then((function(e){var n=e.node,i=e.acc;return n?t._getPreviousVersion(n).then((function(t){return{node:t,acc:a(i,[{delta:-(r+1),timestamp:n.header.metadata.unixMeta.mtime}])}})):Promise.resolve({node:null,acc:i})}))}),t._getPreviousVersion(this.node).then((function(t){return{node:t,acc:[]}})))];case 1:return[2,r.sent().acc]}}))}))},t._getPreviousVersion=function(t){return o(this,void 0,void 0,(function(){return s(this,(function(e){return t.header.previous?[2,t.constructor.fromCID(t.header.previous)]:[2,Promise.resolve(null)]}))}))},t._prior=function(e,r){return o(this,void 0,void 0,(function(){var n;return s(this,(function(i){switch(i.label){case 0:return e.header.metadata.unixMeta.mtime<r?[2,e]:[4,t._getPreviousVersion(e)];case 1:return[2,(n=i.sent())?t._prior(n,r):null]}}))}))},t}();!function(t){t.Raw="raw",t.Directory="dir",t.File="file",t.Metadata="metadata",t.Symlink="symlink",t.HAMTShard="hamtShard"}(fv||(fv={}));var Hv=function(t){return{mtime:Date.now(),ctime:Date.now(),mode:t?644:755,_type:t?fv.File:fv.Directory}},Gv=function(t){return{isFile:t,version:jv,unixMeta:Hv(t)}},$v=function(t){return n(n({},t),{unixMeta:n(n({},t.unixMeta),{mtime:Date.now()})})},Wv=function(t){function e(e){var r=e.content,n=e.header,i=e.cid,o=t.call(this,r)||this;return o.cid=i,o.header=n,o.history=new Kv(o),o}return r(e,t),e.instanceOf=function(t){return Ur(t)&&void 0!==t.content&&Ah(t.header)},e.create=function(t){return o(this,void 0,void 0,(function(){return s(this,(function(r){return[2,new e({content:t,header:{metadata:Gv(!0)},cid:null})]}))}))},e.fromCID=function(t){return o(this,void 0,void 0,(function(){var r;return s(this,(function(n){switch(n.label){case 0:return[4,Bh(t)];case 1:return r=n.sent(),[2,e.fromInfo(r,t)]}}))}))},e.fromInfo=function(t,r){return o(this,void 0,void 0,(function(){var n,i,o;return s(this,(function(s){switch(s.label){case 0:return n=t.userland,i=t.metadata,o=t.previous,[4,lh(n)];case 1:return[2,new e({content:s.sent(),header:{metadata:i,previous:o},cid:r})]}}))}))},e.prototype.putDetailed=function(){return o(this,void 0,void 0,(function(){var t;return s(this,(function(e){switch(e.label){case 0:return[4,(r=this.content,n=$v(this.header.metadata),i=this.cid,o(void 0,void 0,void 0,(function(){var t,e,o,u,a,c,f,l,h,p;return s(this,(function(s){switch(s.label){case 0:return[4,ph(r)];case 1:return t=s.sent(),e=ah("userland",t.cid,!0,t.size),[4,xh("metadata",n)];case 2:return o=s.sent(),null==i?[3,4]:(c=(a=fh).make,f=["previous",i,!1],[4,mf(i)]);case 3:return u=c.apply(a,f.concat([s.sent()])),[3,5];case 4:u=void 0,s.label=5;case 5:return[4,gh({metadata:o,userland:e,previous:u})];case 6:return l=s.sent(),h=l.cid,p=l.size,[2,{cid:h,userland:e.cid,metadata:o.cid,size:p,isFile:!0,skeleton:{}}]}}))})))];case 1:return t=e.sent(),this.cid=t.cid,[2,t]}var r,n,i}))}))},e}(Lv),qv=function(t,e){var r=t[e[0]]||null,n=function(t){var e=t.slice(1);if(e.length<1)return null;return e}(e);return null===r||null===n?r:qv(r.subSkeleton,n)};var Vv=function(t){function e(e){var r=e.links,n=e.header,i=e.cid,o=t.call(this,n.metadata.version)||this;return o.children={},o.cid=i,o.links=r,o.header=n,o.history=new Kv(o),o}return r(e,t),e.empty=function(){return o(this,void 0,void 0,(function(){return s(this,(function(t){return[2,new e({links:{},header:{metadata:Gv(!1),skeleton:{}},cid:null})]}))}))},e.fromCID=function(t){return o(this,void 0,void 0,(function(){var r;return s(this,(function(n){switch(n.label){case 0:return[4,Bh(t)];case 1:if(r=n.sent(),!Eh(i=r)||!Sh(i.userland))throw new Error("Could not parse a valid public tree at: "+t);return[2,e.fromInfo(r,t)]}var i}))}))},e.fromInfo=function(t,r){return o(this,void 0,void 0,(function(){var n,i,o,u;return s(this,(function(s){switch(s.label){case 0:return n=t.userland,i=t.metadata,o=t.previous,u=t.skeleton,[4,vh(n)];case 1:return[2,new e({links:s.sent(),header:{metadata:i,previous:o,skeleton:u},cid:r})]}}))}))},e.instanceOf=function(t){return function(t){return Ur(t)&&Object.values(t).every(_h)}(t.links)&&Eh(t.header)},e.prototype.createChildTree=function(t,r){return o(this,void 0,void 0,(function(){var n,i;return s(this,(function(o){switch(o.label){case 0:return[4,e.empty()];case 1:if(n=o.sent(),i=this.children[t]){if(Wv.instanceOf(i))throw new Error("There is a file at the given path: "+t);if(e.instanceOf(i))return[2,i];throw new Error("Not a public tree at the given path: "+t)}return[4,this.updateDirectChild(n,t,r)];case 2:return o.sent(),[2,n]}}))}))},e.prototype.createOrUpdateChildFile=function(t,e,r){return o(this,void 0,void 0,(function(){var n,i;return s(this,(function(o){switch(o.label){case 0:return[4,this.getDirectChild(e)];case 1:return null!==(n=o.sent())?[3,3]:[4,Wv.create(t)];case 2:return i=o.sent(),[3,6];case 3:return Wv.instanceOf(n)?[4,n.updateContent(t)]:[3,5];case 4:return i=o.sent(),[3,6];case 5:throw new Error("There is already a directory with that name: "+e);case 6:return[4,this.updateDirectChild(i,e,r)];case 7:return o.sent(),[2,i]}}))}))},e.prototype.putDetailed=function(){return o(this,void 0,void 0,(function(){var t;return s(this,(function(e){switch(e.label){case 0:return[4,(r=this.links,n=this.header.skeleton,i=this.header.metadata,u=this.cid,o(void 0,void 0,void 0,(function(){var t,e,o,a,c,f,l,h,p,d,y,v;return s(this,(function(s){switch(s.label){case 0:return[4,gh(r)];case 1:return t=s.sent(),e=ah("userland",t.cid,!0,t.size),[4,Promise.all([xh("metadata",i),xh("skeleton",n)])];case 2:return o=s.sent(),a=o[0],c=o[1],null==u?[3,4]:(h=(l=fh).make,p=["previous",u,!1],[4,mf(u)]);case 3:return f=h.apply(l,p.concat([s.sent()])),[3,5];case 4:f=void 0,s.label=5;case 5:return[4,gh({metadata:a,skeleton:c,userland:e,previous:f})];case 6:return d=s.sent(),y=d.cid,v=d.size,[2,{cid:y,userland:e.cid,metadata:a.cid,size:v,isFile:!1,skeleton:n}]}}))})))];case 1:return t=e.sent(),this.header.previous=this.cid||void 0,this.cid=t.cid,[2,t]}var r,n,i,u}))}))},e.prototype.updateDirectChild=function(t,e,r){return o(this,void 0,void 0,(function(){var n;return s(this,(function(i){switch(i.label){case 0:return this.children[e]=t,[4,t.putDetailed()];case 1:return n=i.sent(),this.updateLink(e,n),r?[4,r()]:[3,3];case 2:i.sent(),i.label=3;case 3:return[2,this]}}))}))},e.prototype.removeDirectChild=function(t){return delete this.links[t],delete this.header.skeleton[t],this.children[t]&&delete this.children[t],this},e.prototype.getDirectChild=function(t){return o(this,void 0,void 0,(function(){var r,n,i;return s(this,(function(o){switch(o.label){case 0:return this.children[t]?[2,this.children[t]]:null===(r=this.header.skeleton[t]||null)?[2,null]:r.isFile?[4,Wv.fromCID(r.cid)]:[3,2];case 1:return i=o.sent(),[3,4];case 2:return[4,e.fromCID(r.cid)];case 3:i=o.sent(),o.label=4;case 4:return n=i,this.children[t]?[2,this.children[t]]:(this.children[t]=n,[2,n])}}))}))},e.prototype.get=function(t){return o(this,void 0,void 0,(function(){var r,n;return s(this,(function(i){switch(i.label){case 0:return t.length<1?[2,this]:null===(r=qv(this.header.skeleton,t))?[2,null]:[4,Bh(r.cid)];case 1:return n=i.sent(),[2,(o=n,Ah(o)&&Sh(o.userland)?Wv.fromInfo(n,r.cid):e.fromInfo(n,r.cid))]}var o}))}))},e.prototype.getLinks=function(){var t=this;return Object.values(this.links).reduce((function(e,r){var i,o;return n(n({},e),((i={})[r.name]=n(n({},r),{isFile:null===(o=t.header.skeleton[r.name])||void 0===o?void 0:o.isFile}),i))}),{})},e.prototype.updateLink=function(t,e){var r=e.cid,n=e.metadata,i=e.userland,o=e.size,s=e.isFile,u=e.skeleton;return this.links[t]=ah(t,r,!1,o),this.header.skeleton[t]={cid:r,metadata:n,userland:i,subSkeleton:u,isFile:s},this.header.metadata.unixMeta.mtime=Date.now(),this},e}(Dv),Yv=function(){function t(t){this.node=t}return t.prototype.back=function(t){var e;return void 0===t&&(t=-1),o(this,void 0,void 0,(function(){var r,n,i;return s(this,(function(o){switch(o.label){case 0:return r=Math.min(t,-1),n=null===(e=this.node.header)||void 0===e?void 0:e.revision,(i=n)?[4,this._getRevision(n+r)]:[3,2];case 1:i=o.sent(),o.label=2;case 2:return[2,i||null]}}))}))},t.prototype.prior=function(t){return o(this,void 0,void 0,(function(){return s(this,(function(e){return this.node.header.metadata.unixMeta.mtime<t?[2,this.node]:[2,this._prior(this.node.header.revision-1,t)]}))}))},t.prototype.list=function(t){return void 0===t&&(t=5),o(this,void 0,void 0,(function(){var e,r=this;return s(this,(function(n){return e=this.node.header.revision,[2,Promise.all(Array.from({length:t},(function(t,n){var i=n+1;return r._getRevisionInfoFromNumber(e-i).then((function(t){return{revisionInfo:t,delta:-i}}))}))).then((function(t){return t.filter((function(t){return!!t.revisionInfo}))})).then((function(t){return t.map((function(t){var e=t.revisionInfo.metadata.unixMeta.mtime;return{delta:t.delta,timestamp:e}}))}))]}))}))},t.prototype._getRevision=function(t){return o(this,void 0,void 0,(function(){var e,r;return s(this,(function(n){switch(n.label){case 0:return[4,this._getRevisionInfoFromNumber(t)];case 1:return e=n.sent(),(r=e)?[4,this.node.constructor.fromInfo(this.node.mmpt,this.node.key,e)]:[3,3];case 2:r=n.sent(),n.label=3;case 3:return[2,r]}}))}))},t.prototype._getRevisionInfo=function(t){return Ev(t.cid,this.node.key)},t.prototype._getRevisionInfoFromNumber=function(t){return o(this,void 0,void 0,(function(){var e,r,n,i,o;return s(this,(function(s){switch(s.label){case 0:return e=this.node,r=e.key,n=e.mmpt,i=this.node.header.bareNameFilter,[4,Ov(n,i,r,t)];case 1:return[2,(o=s.sent())&&this._getRevisionInfo(o)]}}))}))},t.prototype._prior=function(t,e){return o(this,void 0,void 0,(function(){var r;return s(this,(function(n){switch(n.label){case 0:return[4,this._getRevisionInfoFromNumber(t)];case 1:return(null==(r=n.sent())?void 0:r.revision)?r.metadata.unixMeta.mtime<e?[2,this._getRevision(r.revision)]:[2,this._prior(r.revision-1,e)]:[2,null]}}))}))},t}(),Jv=function(t){function e(e){var r=e.content,n=e.mmpt,i=e.key,o=e.header,s=t.call(this,r)||this;return s.header=o,s.history=new Yv(s),s.key=i,s.mmpt=n,s}return r(e,t),e.instanceOf=function(t){return Ur(t)&&void 0!==t.content&&void 0!==t.mmpt&&Rh(t.header)},e.create=function(t,r,n,i){return o(this,void 0,void 0,(function(){var o,u,a;return s(this,(function(s){switch(s.label){case 0:return[4,hv(n,i)];case 1:return o=s.sent(),[4,Vr.genKeyStr()];case 2:return u=s.sent(),[4,dh(r,u)];case 3:return a=s.sent(),[2,new e({content:r,mmpt:t,key:i,header:{bareNameFilter:o,key:u,revision:1,metadata:Gv(!0),content:a.cid}})]}}))}))},e.fromBareNameFilter=function(t,e,r){return o(this,void 0,void 0,(function(){var n;return s(this,(function(i){switch(i.label){case 0:return[4,Bv(t,e,r)];case 1:return n=i.sent(),[2,this.fromInfo(t,r,n)]}}))}))},e.fromLatestName=function(t,r,n){return o(this,void 0,void 0,(function(){var i;return s(this,(function(o){switch(o.label){case 0:return[4,Iv(t,r,n)];case 1:return i=o.sent(),[2,e.fromInfo(t,n,i)]}}))}))},e.fromName=function(t,r,n){return o(this,void 0,void 0,(function(){var i;return s(this,(function(o){switch(o.label){case 0:return[4,Av(t,r,n)];case 1:return i=o.sent(),[2,e.fromInfo(t,n,i)]}}))}))},e.fromInfo=function(t,r,n){return o(this,void 0,void 0,(function(){return s(this,(function(i){switch(i.label){case 0:if(!Rh(n))throw new Error("Could not parse a valid private file using the given key");return[4,hh(n.content,n.key)];case 1:return[2,new e({content:i.sent(),key:r,mmpt:t,header:n})]}}))}))},e.prototype.getName=function(){return o(this,void 0,void 0,(function(){var t,e,r,n;return s(this,(function(i){switch(i.label){case 0:return t=this.header,e=t.bareNameFilter,r=t.revision,[4,pv(e,this.key,r)];case 1:return n=i.sent(),[2,dv(n)]}}))}))},e.prototype.updateParentNameFilter=function(t){return o(this,void 0,void 0,(function(){var e;return s(this,(function(r){switch(r.label){case 0:return e=this.header,[4,hv(t,this.header.key)];case 1:return e.bareNameFilter=r.sent(),[2,this]}}))}))},e.prototype.updateContent=function(t){return o(this,void 0,void 0,(function(){var e;return s(this,(function(r){switch(r.label){case 0:return[4,dh(t,this.header.key)];case 1:return e=r.sent(),this.content=t,this.header=n(n({},this.header),{revision:this.header.revision+1,content:e.cid}),[2,this]}}))}))},e.prototype.putDetailed=function(){return o(this,void 0,void 0,(function(){return s(this,(function(t){return[2,kv(this.mmpt,n(n({},this.header),{metadata:$v(this.header.metadata)}),this.key)]}))}))},e}(Lv),Zv=function(t){function e(e){var r=e.mmpt,n=e.key,i=e.header,o=t.call(this,Uv)||this;return o.children={},o.header=i,o.history=new Yv(o),o.key=n,o.mmpt=r,o}return r(e,t),e.instanceOf=function(t){return Ur(t)&&void 0!==t.mmpt&&Uh(t.header)},e.create=function(t,r,n){return o(this,void 0,void 0,(function(){var i,o;return s(this,(function(s){switch(s.label){case 0:return n?[4,hv(n,r)]:[3,2];case 1:return o=s.sent(),[3,4];case 2:return[4,lv(r)];case 3:o=s.sent(),s.label=4;case 4:return i=o,[2,new e({mmpt:t,key:r,header:{metadata:Gv(!1),bareNameFilter:i,revision:1,links:{},skeleton:{}}})]}}))}))},e.fromBaseKey=function(t,e){return o(this,void 0,void 0,(function(){var r;return s(this,(function(n){switch(n.label){case 0:return[4,lv(e)];case 1:return r=n.sent(),[2,this.fromBareNameFilter(t,r,e)]}}))}))},e.fromBareNameFilter=function(t,e,r){return o(this,void 0,void 0,(function(){var n;return s(this,(function(i){switch(i.label){case 0:return[4,Bv(t,e,r)];case 1:return n=i.sent(),[2,this.fromInfo(t,r,n)]}}))}))},e.fromLatestName=function(t,e,r){return o(this,void 0,void 0,(function(){var n;return s(this,(function(i){switch(i.label){case 0:return[4,Iv(t,e,r)];case 1:return n=i.sent(),[2,this.fromInfo(t,r,n)]}}))}))},e.fromName=function(t,e,r){return o(this,void 0,void 0,(function(){var n;return s(this,(function(i){switch(i.label){case 0:return[4,Av(t,e,r)];case 1:return n=i.sent(),[2,this.fromInfo(t,r,n)]}}))}))},e.fromInfo=function(t,r,n){return o(this,void 0,void 0,(function(){return s(this,(function(i){if(!Uh(n))throw new Error("Could not parse a valid private tree using the given key");return[2,new e({mmpt:t,key:r,header:n})]}))}))},e.prototype.createChildTree=function(t,r){return o(this,void 0,void 0,(function(){var n,i,o;return s(this,(function(s){switch(s.label){case 0:return[4,Vr.genKeyStr()];case 1:return n=s.sent(),[4,e.create(this.mmpt,n,this.header.bareNameFilter)];case 2:if(i=s.sent(),o=this.children[t]){if(Jv.instanceOf(o))throw new Error("There is a file at the given path: "+t);return[2,o]}return[4,this.updateDirectChild(i,t,r)];case 3:return s.sent(),[2,i]}}))}))},e.prototype.createOrUpdateChildFile=function(t,e,r){return o(this,void 0,void 0,(function(){var n,i,o;return s(this,(function(s){switch(s.label){case 0:return[4,this.getDirectChild(e)];case 1:return null!==(n=s.sent())?[3,4]:[4,Vr.genKeyStr()];case 2:return o=s.sent(),[4,Jv.create(this.mmpt,t,this.header.bareNameFilter,o)];case 3:return i=s.sent(),[3,7];case 4:return Jv.instanceOf(n)?[4,n.updateContent(t)]:[3,6];case 5:return i=s.sent(),[3,7];case 6:throw new Error("There is already a directory with that name: "+e);case 7:return[4,this.updateDirectChild(i,e,r)];case 8:return s.sent(),[2,i]}}))}))},e.prototype.putDetailed=function(){return o(this,void 0,void 0,(function(){var t;return s(this,(function(e){return t=Object.assign({},this.header),[2,kv(this.mmpt,t,this.key)]}))}))},e.prototype.updateDirectChild=function(t,e,r){return o(this,void 0,void 0,(function(){var n;return s(this,(function(i){switch(i.label){case 0:return[4,t.updateParentNameFilter(this.header.bareNameFilter)];case 1:return i.sent(),this.children[e]=t,[4,t.putDetailed()];case 2:return n=i.sent(),this.updateLink(e,n),r?[4,r()]:[3,4];case 3:i.sent(),i.label=4;case 4:return[2,this]}}))}))},e.prototype.removeDirectChild=function(t){return this.header=n(n({},this.header),{revision:this.header.revision+1,links:Lr(this.header.links,t),skeleton:Lr(this.header.skeleton,t)}),this.children[t]&&delete this.children[t],this},e.prototype.getDirectChild=function(t){return o(this,void 0,void 0,(function(){var r,n,i;return s(this,(function(o){switch(o.label){case 0:return this.children[t]?[2,this.children[t]]:void 0===(r=this.header.links[t])?[2,null]:r.isFile?[4,Jv.fromLatestName(this.mmpt,r.pointer,r.key)]:[3,2];case 1:return i=o.sent(),[3,4];case 2:return[4,e.fromLatestName(this.mmpt,r.pointer,r.key)];case 3:i=o.sent(),o.label=4;case 4:return n=i,this.children[t]?[2,this.children[t]]:(this.children[t]=n,[2,n])}}))}))},e.prototype.getName=function(){return o(this,void 0,void 0,(function(){var t,e,r,n;return s(this,(function(i){switch(i.label){case 0:return t=this.header,e=t.bareNameFilter,r=t.revision,[4,pv(e,this.key,r)];case 1:return n=i.sent(),[2,dv(n)]}}))}))},e.prototype.updateParentNameFilter=function(t){return o(this,void 0,void 0,(function(){var e;return s(this,(function(r){switch(r.label){case 0:return e=this.header,[4,hv(t,this.key)];case 1:return e.bareNameFilter=r.sent(),[2,this]}}))}))},e.prototype.get=function(t){return o(this,void 0,void 0,(function(){var r,n,i,o;return s(this,(function(s){switch(s.label){case 0:return 0===t.length?[2,this]:(r=t[0],n=t.slice(1),void 0===(i=this.header.skeleton[r])?[2,null]:[4,this.getRecurse(i,n)]);case 1:return null===(o=s.sent())?[2,null]:[2,Rh(o.node)?Jv.fromInfo(this.mmpt,o.key,o.node):e.fromInfo(this.mmpt,o.key,o.node)]}}))}))},e.prototype.getRecurse=function(t,e){return o(this,void 0,void 0,(function(){var r,n,i,o,u,a;return s(this,(function(s){switch(s.label){case 0:return r=e[0],n=e.slice(1),void 0!==r?[3,2]:(a={key:t.key},[4,xv(this.mmpt,t.cid,t.key)]);case 1:return[2,(a.node=s.sent(),a)];case 2:return void 0!==(i=t.subSkeleton[r])?[2,this.getRecurse(i,n)]:[4,xv(this.mmpt,t.cid,t.key)];case 3:return o=s.sent(),Uh(o)?[2,void 0===(u=o.skeleton[r])?null:this.getRecurse(u,n)]:[2,null]}}))}))},e.prototype.getLinks=function(){return Pr(this.header.links,(function(t){t.key;var e=i(t,["key"]);return n({},e)}))},e.prototype.updateLink=function(t,e){var r=e.cid,n=e.size,i=e.key,o=e.isFile,s=e.skeleton,u=e.name;return this.header.links[t]={name:t,key:i,pointer:u,size:n,isFile:o,mtime:Date.now()},this.header.skeleton[t]={cid:r,key:i,subSkeleton:s},this.header.revision=this.header.revision+1,this.header.metadata.unixMeta.mtime=Date.now(),this},e}(Dv),Xv=function(){function t(t){var e=t.links,r=t.mmpt,n=t.privateLog,i=t.publicTree,o=t.prettyTree,s=t.privateNodes;this.links=e,this.mmpt=r,this.privateLog=n,this.publicTree=i,this.prettyTree=o,this.privateNodes=s}return t.empty=function(e){var r=e.rootKey;return o(this,void 0,void 0,(function(){var e,n,i,o,u,a,c;return s(this,(function(s){switch(s.label){case 0:return[4,Vv.empty()];case 1:return e=s.sent(),[4,Mv.empty()];case 2:return n=s.sent(),i=Fv.create(),o=nn(Qr(Kr.Private)),[4,Zv.create(i,r,null)];case 3:return[4,(u=s.sent()).put()];case 4:return s.sent(),a=new t({links:{},mmpt:i,privateLog:[],publicTree:e,prettyTree:n,privateNodes:(c={},c[o]=u,c)}),[4,t.storeRootKey(r)];case 5:return s.sent(),a.setVersion(Uv),[4,Promise.all([a.updatePuttable(Kr.Public,e),a.updatePuttable(Kr.Pretty,n),a.updatePuttable(Kr.Private,i)])];case 6:return s.sent(),[2,a]}}))}))},t.fromCID=function(e){var r,n,i,u=e.cid,a=e.permissions;return o(this,void 0,void 0,(function(){var e,o,c,f,l,h,p,d,y,v,g,m,b;return s(this,(function(s){switch(s.label){case 0:return[4,vh(u)];case 1:return e=s.sent(),a?[4,rg(a)]:[3,3];case 2:return c=s.sent(),[3,4];case 3:c=[],s.label=4;case 4:return o=c,null!==(f=(null===(r=e[Kr.Public])||void 0===r?void 0:r.cid)||null)?[3,6]:[4,Vv.empty()];case 5:return h=s.sent(),[3,8];case 6:return[4,Vv.fromCID(f)];case 7:h=s.sent(),s.label=8;case 8:return l=h,e[Kr.Pretty]?[4,Mv.fromCID(e[Kr.Pretty].cid)]:[3,10];case 9:return d=s.sent(),[3,12];case 10:return[4,Mv.empty()];case 11:d=s.sent(),s.label=12;case 12:return p=d,null!==(y=(null===(n=e[Kr.Private])||void 0===n?void 0:n.cid)||null)?[3,14]:[4,Fv.create()];case 13:return v=s.sent(),g={},[3,17];case 14:return[4,Fv.fromCID(y)];case 15:return v=s.sent(),[4,eg(o,v)];case 16:g=s.sent(),s.label=17;case 17:return(m=null===(i=e[Kr.PrivateLog])||void 0===i?void 0:i.cid)?[4,yf(m).then((function(t){return t.Links.map(uh)})).then((function(t){return t.sort((function(t,e){return parseInt(t.name,10)-parseInt(e.name,10)}))}))]:[3,19];case 18:return b=s.sent(),[3,20];case 19:b=[],s.label=20;case 20:return[2,new t({links:e,mmpt:v,privateLog:b,publicTree:l,prettyTree:p,privateNodes:g})]}}))}))},t.prototype.put=function(){return o(this,void 0,void 0,(function(){return s(this,(function(t){switch(t.label){case 0:return[4,this.putDetailed()];case 1:return[2,t.sent().cid]}}))}))},t.prototype.putDetailed=function(){return o(this,void 0,void 0,(function(){return s(this,(function(t){return[2,gh(this.links)]}))}))},t.prototype.updateLink=function(t,e){var r=e.cid,n=e.size,i=e.isFile;return this.links[t]=ah(t,r,i,n),this},t.prototype.updatePuttable=function(t,e){return o(this,void 0,void 0,(function(){var r,n;return s(this,(function(i){switch(i.label){case 0:return r=this.updateLink,n=[t],[4,e.putDetailed()];case 1:return[2,r.apply(this,n.concat([i.sent()]))]}}))}))},t.storeRootKey=function(t){return o(this,void 0,void 0,(function(){var e;return s(this,(function(r){switch(r.label){case 0:return[4,bn({path:Qr(Kr.Private)})];case 1:return e=r.sent(),[4,Zr.importSymmKey(t,e)];case 2:return r.sent(),[2]}}))}))},t.prototype.findPrivateNode=function(t){return tg(this.privateNodes,t)},t.prototype.addPrivateLogEntry=function(e){var r;return o(this,void 0,void 0,(function(){var n,i,o,u,c,f,l,h,p,d,y;return s(this,(function(s){switch(s.label){case 0:return n=a(this.privateLog),i=Math.max(0,n.length-1),(null===(r=n[i])||void 0===r?void 0:r.cid)?[4,pf(n[i].cid)]:[3,2];case 1:return u=s.sent().split(","),[3,3];case 2:u=[],s.label=3;case 3:return(o=u).length+1>t.LOG_CHUNK_SIZE&&(i+=1,o=[]),[4,qr.sha256Str(e)];case 4:return c=s.sent(),f=a(o,[c]),[4,ph(f.join(","))];case 5:return l=s.sent(),n[i]={name:i.toString(),cid:l.cid,size:l.size},[4,gf(n.map(oh))];case 6:return h=s.sent(),p=this.updateLink,d=[Kr.PrivateLog],y={cid:h.cid,isFile:!1},[4,mf(h.cid)];case 7:return p.apply(this,d.concat([(y.size=s.sent(),y)])),this.privateLog=n,[2]}}))}))},t.prototype.setVersion=function(t){return o(this,void 0,void 0,(function(){var e;return s(this,(function(r){switch(r.label){case 0:return[4,ph(Cv(t))];case 1:return e=r.sent(),[2,this.updateLink(Kr.Version,e)]}}))}))},t.LOG_CHUNK_SIZE=1020,t}();function Qv(t,e){return o(this,void 0,void 0,(function(){var r,n,i,o,u,a,c;return s(this,(function(s){switch(s.label){case 0:return[4,mn({path:e})];case 1:return r=s.sent(),[4,Ar(r)];case 2:return(n=s.sent())?[2,n]:(i=tg(t,e),o=i[0],(u=i[1])?(a=yn(e),c=a.slice(yn(o).length),Jv.instanceOf(u)?[2,0===c.length?u.header.bareNameFilter:null]:u.exists(c)?[3,6]:un(e)?[4,u.mkdir(c)]:[3,4]):[2,null]);case 3:return s.sent(),[3,6];case 4:return[4,u.add(c,"")];case 5:s.sent(),s.label=6;case 6:return[2,u.get(c).then((function(t){return t?t.header.bareNameFilter:null}))]}}))}))}function tg(t,e){var r=t[nn(e)];if(r)return[e,r];var n=dn(e);return n?tg(t,n):[e,null]}function eg(t,e){var r,i=this;return(r=t,r.sort((function(t,e){return nn(t.path).localeCompare(nn(e.path))}))).reduce((function(t,r){var u=r.path,a=r.key;return t.then((function(t){return o(i,void 0,void 0,(function(){var r,i,o,c,f;return s(this,(function(s){switch(s.label){case 0:return 1!==(i=yn(u)).length||i[0]!==Kr.Private?[3,2]:[4,Zv.fromBaseKey(e,a)];case 1:return r=s.sent(),[3,7];case 2:return[4,Qv(t,u)];case 3:if(!(o=s.sent()))throw new Error("Was trying to load the PrivateTree for the path `"+u+"`, but couldn't find the bare name filter for it.");return un(u)?[4,Zv.fromBareNameFilter(e,o,a)]:[3,5];case 4:return r=s.sent(),[3,7];case 5:return[4,Jv.fromBareNameFilter(e,o,a)];case 6:r=s.sent(),s.label=7;case 7:return c=nn(u),[2,n(n({},t),(f={},f[c]=r,f))]}}))}))}))}),Promise.resolve({}))}function rg(t){return o(this,void 0,void 0,(function(){var e=this;return s(this,(function(r){return[2,Al(t).reduce((function(t,r){return o(e,void 0,void 0,(function(){var e,n,i;return s(this,(function(o){switch(o.label){case 0:return sn(Kr.Public,r)?[2,t]:[4,bn({path:r})];case 1:return e=o.sent(),[4,Zr.exportSymmKey(e)];case 2:return n=o.sent(),i={path:r,key:n},[2,t.then((function(t){return a(t,[i])}))]}}))}))}),Promise.resolve([]))]}))}))}function ng(){return"webnative.wnfs_cid_log-"+k.endpoints.lobby}function ig(){return o(this,void 0,void 0,(function(){return s(this,(function(t){switch(t.label){case 0:return[4,Ar(ng())];case 1:return[2,t.sent()||[]]}}))}))}function og(t){return o(this,void 0,void 0,(function(){var e;return s(this,(function(r){switch(r.label){case 0:return[4,ig()];case 1:return[2,[(e=r.sent()).indexOf(t),e.length]]}}))}))}function sg(){return o(this,void 0,void 0,(function(){return s(this,(function(t){switch(t.label){case 0:return[4,ig()];case 1:return[2,t.sent()[0]]}}))}))}function ug(t){return o(this,void 0,void 0,(function(){var e,r;return s(this,(function(n){switch(n.label){case 0:return[4,ig()];case 1:return e=n.sent(),r=a([t],e).slice(0,1e3),[4,Sr(ng(),r)];case 2:return n.sent(),[2]}}))}))}function ag(){return o(this,void 0,void 0,(function(){return s(this,(function(t){switch(t.label){case 0:return[4,Ir(ng())];case 1:return t.sent(),[2]}}))}))}function cg(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];k.debug&&console.log.apply(console,t)}var fg="Qmc5m94Gu7z62RC8waSKkZUrCCBJPyHbkpmGzEePxy2oXJ";function lg(t){return o(this,void 0,void 0,(function(){var e,r,n;return s(this,(function(i){switch(i.label){case 0:return[4,hg(t)];case 1:if((e=i.sent())===fg)return[2,null];if(null!==e)return[2,e];i.label=2;case 2:return i.trys.push([2,4,,5]),[4,_(t+".files."+k.endpoints.user)];case 3:return[2,(r=i.sent())===fg?null:r];case 4:throw n=i.sent(),console.error(n),new Error("Could not locate user root in dns");case 5:return[2]}}))}))}function hg(t){return o(this,void 0,void 0,(function(){var e;return s(this,(function(r){switch(r.label){case 0:return r.trys.push([0,3,,4]),[4,fetch(k.endpoints.api+"/user/data/"+t,{cache:"reload"})];case 1:return[4,r.sent().json()];case 2:if(e=r.sent(),!Sh(e))throw new Error("Did not receive a CID");return[2,e];case 3:return cg("Could not locate user root on Fission server: ",r.sent().toString()),[2,null];case 4:return[2]}}))}))}function pg(t,e){return o(this,void 0,void 0,(function(){var r,n=this;return s(this,(function(i){switch(i.label){case 0:return r=k.endpoints.api,cg(" Updating your DNSLink:",t),[4,dg(r+"/user/data/"+t,{headers:function(){return o(n,void 0,void 0,(function(){var t,r,n,i,o;return s(this,(function(s){switch(s.label){case 0:return r=(t=Zl).encode,i=(n=Zl).build,o={},[4,A()];case 1:return o.audience=s.sent(),[4,jl()];case 2:return[4,i.apply(n,[(o.issuer=s.sent(),o.potency="APPEND",o.proof=e,o.resource=$l(e).payload.rsc,o)])];case 3:return[2,{authorization:"Bearer "+r.apply(t,[s.sent()])}]}}))}))},retries:100,retryDelay:5e3,retryOn:[502,503,504]},{method:"PATCH"}).then((function(e){return e.status<300?cg(" DNSLink updated:",t):cg(" Failed to update DNSLink for:",t),{success:e.status<300}})).catch((function(e){return cg(" Failed to update DNSLink for:",t),console.error(e),{success:!1}}))];case 1:return[2,i.sent()]}}))}))}function dg(t,e,r,i){return void 0===i&&(i=0),o(this,void 0,void 0,(function(){var o,u;return s(this,(function(s){switch(s.label){case 0:return[4,e.headers()];case 1:return o=s.sent(),[4,fetch(t,n(n({},r),{headers:n(n({},r.headers),o)}))];case 2:return u=s.sent(),e.retryOn.includes(u.status)?i<e.retries?[4,new Promise((function(n,o){return setTimeout((function(){return dg(t,e,r,i+1).then(n,o)}),e.retryDelay)}))]:[3,4]:[3,5];case 3:return[2,s.sent()];case 4:throw new Error("Too many retries for fetch");case 5:return[2,u]}}))}))}var yg=Object.freeze({__proto__:null,lookup:lg,lookupOnFisson:hg,update:pg}),vg=function(t){function e(e){var r=t.call(this,e)||this;return r.name="NoPermissionError",r}return r(e,t),e}(Error),gg=Object.freeze({__proto__:null,NoPermissionError:vg}),mg=function(){function t(t){var e=this,r=t.root,n=t.permissions,i=t.localOnly;this.localOnly=i||!1,this.proofs={},this.publishHooks=[],this.root=r,this._publishWhenOnline=[],this._publishing=!1,this._whenOnline=this._whenOnline.bind(this),this._beforeLeaving=this._beforeLeaving.bind(this);var o=globalThis;o.filesystems=o.filesystems||[],o.filesystems.push(this),n&&n.app&&n.app.creator&&n.app.name&&(this.appPath=function(t){if(!t.app)throw Error("Only works with app permissions");var e=El(t.app);return function(t){return t?on(e,t):e}}(n));var s=ih.throttle(3e3,!1,(function(t,r){if(globalThis.navigator.onLine)return e._publishing=[t,!0],pg(t,r).then((function(){e._publishing&&e._publishing[0]===t&&(e._publishing=!1)}));e._publishWhenOnline.push([t,r])}),!1);this.publishHooks.push((function(t){ug(t),cg(" Adding to the CID ledger:",t)})),this.publishHooks.push(s),globalThis.addEventListener("online",this._whenOnline),globalThis.addEventListener("beforeunload",this._beforeLeaving)}return t.empty=function(e){return void 0===e&&(e={}),o(this,void 0,void 0,(function(){var r,n,i,o,u;return s(this,(function(s){switch(s.label){case 0:return r=e.permissions,n=e.localOnly,(o=e.rootKey)?[3,2]:[4,Vr.genKeyStr()];case 1:o=s.sent(),s.label=2;case 2:return i=o,[4,Xv.empty({rootKey:i})];case 3:return u=s.sent(),[2,new t({root:u,permissions:r,localOnly:n})]}}))}))},t.fromCID=function(e,r){return void 0===r&&(r={}),o(this,void 0,void 0,(function(){var n,i,o;return s(this,(function(s){switch(s.label){case 0:return n=r.permissions,i=r.localOnly,[4,Xv.fromCID({cid:e,permissions:n})];case 1:return o=s.sent(),[2,new t({root:o,permissions:n,localOnly:i})]}}))}))},t.prototype.deactivate=function(){var t=this,e=globalThis;e.filesystems=e.filesystems.filter((function(e){return e!==t})),e.removeEventListener("online",this._whenOnline),e.removeEventListener("beforeunload",this._beforeLeaving)},t.prototype.ls=function(t){return o(this,void 0,void 0,(function(){return s(this,(function(e){if(an(t))throw new Error("`ls` only accepts directory paths");return[2,this.runOnNode(t,!1,(function(t,e){if(mh(t))throw new Error("Tried to `ls` a file");return t.ls(e)}))]}))}))},t.prototype.mkdir=function(t,e){return void 0===e&&(e={}),o(this,void 0,void 0,(function(){return s(this,(function(r){switch(r.label){case 0:if(an(t))throw new Error("`mkdir` only accepts directory paths");return[4,this.runOnNode(t,!0,(function(t,e){if(mh(t))throw new Error("Tried to `mkdir` a file");return t.mkdir(e)}))];case 1:return r.sent(),e.publish?[4,this.publish()]:[3,3];case 2:r.sent(),r.label=3;case 3:return[2,this]}}))}))},t.prototype.add=function(t,e,r){return void 0===r&&(r={}),o(this,void 0,void 0,(function(){var n=this;return s(this,(function(i){switch(i.label){case 0:if(un(t))throw new Error("`add` only accepts file paths");return[4,this.runOnNode(t,!0,(function(t,r){return o(n,void 0,void 0,(function(){return s(this,(function(n){return[2,mh(t)?t.updateContent(e):t.add(r,e)]}))}))}))];case 1:return i.sent(),r.publish?[4,this.publish()]:[3,3];case 2:i.sent(),i.label=3;case 3:return[2,this]}}))}))},t.prototype.cat=function(t){return o(this,void 0,void 0,(function(){var e=this;return s(this,(function(r){if(un(t))throw new Error("`cat` only accepts file paths");return[2,this.runOnNode(t,!1,(function(t,r){return o(e,void 0,void 0,(function(){return s(this,(function(e){return[2,mh(t)?t.content:t.cat(r)]}))}))}))]}))}))},t.prototype.read=function(t){return o(this,void 0,void 0,(function(){return s(this,(function(e){if(un(t))throw new Error("`read` only accepts file paths");return[2,this.cat(t)]}))}))},t.prototype.write=function(t,e,r){return void 0===r&&(r={}),o(this,void 0,void 0,(function(){return s(this,(function(n){if(un(t))throw new Error("`write` only accepts file paths");return[2,this.add(t,e,r)]}))}))},t.prototype.exists=function(t){return o(this,void 0,void 0,(function(){var e=this;return s(this,(function(r){return[2,this.runOnNode(t,!1,(function(t,r){return o(e,void 0,void 0,(function(){return s(this,(function(e){return[2,!!mh(t)||t.exists(r)]}))}))}))]}))}))},t.prototype.get=function(t){return o(this,void 0,void 0,(function(){var e=this;return s(this,(function(r){return[2,this.runOnNode(t,!1,(function(t,r){return o(e,void 0,void 0,(function(){return s(this,(function(e){return[2,mh(t)?t:t.get(r)]}))}))}))]}))}))},t.prototype.mv=function(t,e){return o(this,void 0,void 0,(function(){var r,n,i;return s(this,(function(o){switch(o.label){case 0:if(r=fn(t,e),!ln(t,e))throw n=hn(t),i=hn(e),new Error("Can't move to a different kind of path, from is a "+n+" and to is a "+i);if(!r)throw new Error("`mv` is only supported on the same tree for now");return[4,this.exists(e)];case 1:if(o.sent())throw new Error("Destination already exists");return[4,this.runOnNode(t,!0,(function(t,r){if(mh(t))throw new Error("Tried to `mv` within a file");var n=yn(e);n[0];var i=n.slice(1);return t.mv(r,i)}))];case 2:return o.sent(),[2,this]}}))}))},t.prototype.rm=function(t){return o(this,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return[4,this.runOnNode(t,!0,(function(t,e){if(mh(t))throw new Error("Cannot `rm` a file you've asked permission for");return t.rm(e)}))];case 1:return e.sent(),[2,this]}}))}))},t.prototype.publish=function(){return o(this,void 0,void 0,(function(){var t,e,r=this;return s(this,(function(n){switch(n.label){case 0:return t=Array.from(Object.entries(this.proofs)),this.proofs={},[4,this.root.put()];case 1:return e=n.sent(),t.forEach((function(t){t[0];var n=t[1];r.publishHooks.forEach((function(t){return t(e,n)}))})),[2,e]}}))}))},t.prototype.runOnNode=function(t,e,r){return o(this,void 0,void 0,(function(){var n,i,o,u,a,c,f,l,h,p,d,y;return s(this,(function(s){switch(s.label){case 0:return n=yn(t),i=n[0],o=n.slice(1),u=e?"make changes to":"query",this.localOnly?[3,2]:[4,eh(t)];case 1:if(a=s.sent(),c=a&&$l(a),!a||!c||Vl(c)||!c.signature)throw new vg("I don't have the necessary permissions to "+u+' the file system at "'+nn(t)+'"');this.proofs[c.signature]=a,s.label=2;case 2:return i!==Kr.Public?[3,7]:[4,r(this.root.publicTree,o)];case 3:return f=s.sent(),e&&Vv.instanceOf(f)?[4,r(this.root.prettyTree,o)]:[3,6];case 4:return l=s.sent(),this.root.publicTree=f,this.root.prettyTree=l,[4,Promise.all([this.root.updatePuttable(Kr.Public,this.root.publicTree),this.root.updatePuttable(Kr.Pretty,this.root.prettyTree)])];case 5:s.sent(),s.label=6;case 6:return[3,18];case 7:if(i!==Kr.Private)return[3,14];if(h=this.root.findPrivateNode(t),p=h[0],!(d=h[1]))throw new vg("I don't have the necessary permissions to "+u+' the file system at "'+nn(t)+'"');return[4,r(d,n.slice(yn(p).length))];case 8:return f=s.sent(),e&&(Zv.instanceOf(f)||Jv.instanceOf(f))?(this.root.privateNodes[nn(p)]=f,[4,f.put()]):[3,13];case 9:return s.sent(),[4,this.root.updatePuttable(Kr.Private,this.root.mmpt)];case 10:return s.sent(),[4,this.root.mmpt.put()];case 11:return y=s.sent(),[4,this.root.addPrivateLogEntry(y)];case 12:s.sent(),s.label=13;case 13:return[3,18];case 14:if(i!==Kr.Pretty||!e)return[3,15];throw new Error("The pretty path is read only");case 15:return i!==Kr.Pretty?[3,17]:[4,r(this.root.prettyTree,o)];case 16:return f=s.sent(),[3,18];case 17:throw new Error("Not a valid FileSystem path");case 18:return[2,f]}}))}))},t.prototype._whenOnline=function(){var t=this,e=a(this._publishWhenOnline);this._publishWhenOnline=[],e.forEach((function(e){var r=e[0],n=e[1];t.publishHooks.forEach((function(t){return t(r,n)}))}))},t.prototype._beforeLeaving=function(t){var e="Are you sure you want to leave? We don't control the browser so you may lose your data.";if(this._publishing||this._publishWhenOnline.length)return(t||globalThis.event).returnValue=e,e},t}();function bg(t,e,r){return o(this,void 0,void 0,(function(){var n,i,o,u,a,c,f,l,h,p;return s(this,(function(s){switch(s.label){case 0:return(o=e)?[3,2]:[4,Fr()];case 1:o=s.sent()||void 0,s.label=2;case 2:if(!(e=o))throw new Error("User hasn't authenticated yet");return[4,rh([])];case 3:return s.sent(),navigator.onLine?[4,lg(e)]:[3,5];case 4:return a=s.sent(),[3,6];case 5:a=null,s.label=6;case 6:return(u=a)?[4,og(u)]:[3,8];case 7:return l=s.sent(),[3,9];case 8:l=[-1,0],s.label=9;case 9:return f=(c=l)[0],c[1],navigator.onLine?[3,11]:[4,sg()];case 10:return n=s.sent(),[3,18];case 11:return u?[3,13]:[4,sg()];case 12:return(n=s.sent())?cg(" No DNSLink, using local CID:",n):cg(" Creating a new file system"),[3,18];case 13:return 0!==f?[3,14]:(cg(" DNSLink is up to date:",n=u),[3,18]);case 14:return f>0?[4,sg()]:[3,16];case 15:return n=s.sent(),cg(" DNSLink is outdated ("+(1===f?"1 newer local entry":f+" newer local entries")+"), using local CID:",n),[3,18];case 16:return[4,ug(n=u)];case 17:s.sent(),cg(" DNSLink is newer:",n),s.label=18;case 18:return h=t||void 0,n?[4,mg.fromCID(n,{permissions:h})]:[3,20];case 19:return p=s.sent(),[3,21];case 20:p=null,s.label=21;case 21:if(i=p)return[2,i];if(!r)throw new Error("Can't make new filesystem without a root AES key");return[4,mg.empty({permissions:h,rootKey:r})];case 22:return[4,_g(i=s.sent())];case 23:return s.sent(),[2,i]}}))}))}function _g(t){return o(this,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return[4,t.mkdir({directory:[Kr.Private,"Apps"]})];case 1:return e.sent(),[4,t.mkdir({directory:[Kr.Private,"Audio"]})];case 2:return e.sent(),[4,t.mkdir({directory:[Kr.Private,"Documents"]})];case 3:return e.sent(),[4,t.mkdir({directory:[Kr.Private,"Photos"]})];case 4:return e.sent(),[4,t.mkdir({directory:[Kr.Private,"Video"]})];case 5:return e.sent(),[4,t.publish()];case 6:return e.sent(),[2]}}))}))}var wg=Object.freeze({__proto__:null,index:function(){return o(this,void 0,void 0,(function(){var t,e,r,n,i,o,u,a,c;return s(this,(function(s){switch(s.label){case 0:return t=k.endpoints.api,[4,th("*")];case 1:if(null===(e=s.sent()))throw"Could not find your local UCAN";return i=(n=Zl).encode,u=(o=Zl).build,c={},[4,A()];case 2:return c.audience=s.sent(),[4,jl()];case 3:return[4,u.apply(o,[(c.issuer=s.sent(),c.proof=e,c.potency=null,c)])];case 4:return r=i.apply(n,[s.sent()]),[4,fetch(t+"/app",{method:"GET",headers:{authorization:"Bearer "+r}})];case 5:return[4,s.sent().json()];case 6:return a=s.sent(),[2,Object.values(a).filter((function(t){return t.length>0})).map((function(t){return{domain:t[0]}}))]}}))}))},create:function(t){return o(this,void 0,void 0,(function(){var e,r,n,i,o,u,a,c,f;return s(this,(function(s){switch(s.label){case 0:return e=k.endpoints.api,[4,th("*")];case 1:if(null===(r=s.sent()))throw"Could not find your local UCAN";return o=(i=Zl).encode,a=(u=Zl).build,f={},[4,A()];case 2:return f.audience=s.sent(),[4,jl()];case 3:return[4,a.apply(u,[(f.issuer=s.sent(),f.proof=r,f.potency=null,f)])];case 4:return n=o.apply(i,[s.sent()]),c=Rr(t)?e+"/app?subdomain="+encodeURIComponent(t):e+"/app",[4,fetch(c,{method:"POST",headers:{authorization:"Bearer "+n}})];case 5:return[4,s.sent().json()];case 6:return[2,{domain:s.sent()}]}}))}))},deleteByDomain:function(t){return o(this,void 0,void 0,(function(){var e,r,n,i,o,u,a,c,f,l;return s(this,(function(s){switch(s.label){case 0:return e=k.endpoints.api,[4,th(t)];case 1:if(null===(r=s.sent()))throw new Error("Could not find your local UCAN");return o=(i=Zl).encode,a=(u=Zl).build,l={},[4,A()];case 2:return l.audience=s.sent(),[4,jl()];case 3:return[4,a.apply(u,[(l.issuer=s.sent(),l.proof=r,l.potency=null,l)])];case 4:return n=o.apply(i,[s.sent()]),[4,fetch(e+"/app",{method:"GET",headers:{authorization:"Bearer "+n}})];case 5:return[4,s.sent().json()];case 6:if(c=s.sent(),null==(f=Object.entries(c).find((function(e){return e[0],e[1].includes(t)}))))throw new Error("Couldn't find an app with domain "+t);return[4,fetch(e+"/app/"+encodeURIComponent(f[0]),{method:"DELETE",headers:{authorization:"Bearer "+n}})];case 7:return s.sent(),[2]}}))}))},publish:function(t,e){return o(this,void 0,void 0,(function(){var r,n,i,o,u,a,c,f;return s(this,(function(s){switch(s.label){case 0:return r=k.endpoints.api,[4,th(t)];case 1:if(null===(n=s.sent()))throw"Could not find your local UCAN";return u=(o=Zl).encode,c=(a=Zl).build,f={},[4,A()];case 2:return f.audience=s.sent(),[4,jl()];case 3:return[4,c.apply(a,[(f.issuer=s.sent(),f.proof=n,f.potency=null,f)])];case 4:return i=u.apply(o,[s.sent()]),[4,fetch(r+"/app/"+t+"/"+e,{method:"PATCH",headers:{authorization:"Bearer "+i}})];case 5:return s.sent(),[2]}}))}))}}),kg=["fission","ipfs","ipns","did","id","identity",".htaccess","htaccess",".htpasswd","htpasswd",".well-known","well-known","400","401","403","404","405","406","407","408","409","410","411","412","413","414","415","416","417","421","422","423","424","426","428","429","431","500","501","502","503","504","505","506","507","508","509","510","511","_domainkey","about","about-us","abuse","access","account","accounts","ad","add","admin","administration","administrator","ads","ads.txt","advertise","advertising","aes128-ctr","aes128-gcm","aes192-ctr","aes256-ctr","aes256-gcm","affiliate","affiliates","ajax","alert","alerts","alpha","amp","analytics","api","app","app-ads.txt","apps","asc","assets","atom","auth","authentication","authorize","autoconfig","autodiscover","avatar","backup","banner","banners","bbs","beta","billing","billings","blog","blogs","board","bookmark","bookmarks","broadcasthost","business","buy","cache","calendar","campaign","captcha","careers","cart","cas","categories","category","cdn","cgi","cgi-bin","chacha20-poly1305","change","channel","channels","chart","chat","checkout","clear","client","close","cloud","cms","com","comment","comments","community","compare","compose","config","connect","contact","contest","cookies","copy","copyright","count","cp","cpanel","create","crossdomain.xml","css","curve25519-sha256","customer","customers","customize","dashboard","db","deals","debug","delete","desc","destroy","dev","developer","developers","diffie-hellman-group-exchange-sha256","diffie-hellman-group14-sha1","disconnect","discuss","dns","dns0","dns1","dns2","dns3","dns4","docs","documentation","domain","download","downloads","downvote","draft","drop","ecdh-sha2-nistp256","ecdh-sha2-nistp384","ecdh-sha2-nistp521","edit","editor","email","enterprise","error","errors","event","events","example","exception","exit","explore","export","extensions","false","family","faq","faqs","favicon.ico","features","feed","feedback","feeds","file","files","filter","follow","follower","followers","following","fonts","forgot","forgot-password","forgotpassword","form","forms","forum","forums","friend","friends","ftp","get","git","go","graphql","group","groups","guest","guidelines","guides","head","header","help","hide","hmac-sha","hmac-sha1","hmac-sha1-etm","hmac-sha2-256","hmac-sha2-256-etm","hmac-sha2-512","hmac-sha2-512-etm","home","host","hosting","hostmaster","htpasswd","http","httpd","https","humans.txt","icons","images","imap","img","import","index","info","insert","investors","invitations","invite","invites","invoice","is","isatap","issues","it","jobs","join","js","json","keybase.txt","learn","legal","license","licensing","like","limit","live","load","local","localdomain","localhost","lock","login","logout","lost-password","m","mail","mail0","mail1","mail2","mail3","mail4","mail5","mail6","mail7","mail8","mail9","mailer-daemon","mailerdaemon","map","marketing","marketplace","master","me","media","member","members","message","messages","metrics","mis","mobile","moderator","modify","more","mx","mx1","my","net","network","new","news","newsletter","newsletters","next","nil","no-reply","nobody","noc","none","noreply","notification","notifications","ns","ns0","ns1","ns2","ns3","ns4","ns5","ns6","ns7","ns8","ns9","null","oauth","oauth2","offer","offers","online","openid","order","orders","overview","owa","owner","page","pages","partners","passwd","password","pay","payment","payments","photo","photos","pixel","plans","plugins","policies","policy","pop","pop3","popular","portal","portfolio","post","postfix","postmaster","poweruser","preferences","premium","press","previous","pricing","print","privacy","privacy-policy","private","prod","product","production","profile","profiles","project","projects","public","purchase","put","quota","recover","recovery","redirect","reduce","refund","refunds","register","registration","remove","replies","reply","report","request","request-password","reset","reset-password","response","return","returns","review","reviews","robots.txt","root","rootuser","rsa-sha2-2","rsa-sha2-512","rss","rules","sales","save","script","sdk","search","secure","security","select","services","session","sessions","settings","setup","share","shift","shop","signin","signup","site","sitemap","sites","smtp","sort","source","sql","ssh","ssh-rsa","ssl","ssladmin","ssladministrator","sslwebmaster","stage","staging","stat","static","statistics","stats","status","store","style","styles","stylesheet","stylesheets","subdomain","subscribe","sudo","super","superuser","support","survey","sync","sysadmin","system","tablet","tag","tags","team","telnet","terms","terms-of-use","test","testimonials","theme","themes","today","tools","topic","topics","tour","training","translate","translations","trending","trial","true","umac-128","umac-128-etm","umac-64","umac-64-etm","undefined","unfollow","unlike","unsubscribe","update","upgrade","usenet","user","username","users","uucp","var","verify","video","view","void","vote","vpn","webmail","webmaster","website","widget","widgets","wiki","wpad","write","www","www-data","www1","www2","www3","www4","you","yourname","yourusername","zlib"];var Eg=Object.freeze({__proto__:null,createAccount:function(t){return o(this,void 0,void 0,(function(){var e,r,n,i,o,u,a;return s(this,(function(s){switch(s.label){case 0:return e=k.endpoints.api,i=(n=Zl).encode,u=(o=Zl).build,a={},[4,A()];case 1:return a.audience=s.sent(),[4,jl()];case 2:return[4,u.apply(o,[(a.issuer=s.sent(),a)])];case 3:return r=i.apply(n,[s.sent()]),[4,fetch(e+"/user",{method:"PUT",headers:{authorization:"Bearer "+r,"content-type":"application/json"},body:JSON.stringify(t)})];case 4:return[2,{success:s.sent().status<300}]}}))}))},resendVerificationEmail:function(){return o(this,void 0,void 0,(function(){var t,e,r,n,i,o;return s(this,(function(s){switch(s.label){case 0:return t=k.endpoints.api,[4,eh("*")];case 1:if(null===(e=s.sent()))throw"Could not find your local UCAN";return i=(n=Zl).build,o={},[4,A()];case 2:return o.audience=s.sent(),[4,jl()];case 3:return[4,i.apply(n,[(o.issuer=s.sent(),o.proof=e,o.potency=null,o)])];case 4:return r=s.sent(),[4,fetch(t+"/user/email/resend",{method:"POST",headers:{authorization:"Bearer "+r}})];case 5:return[2,{success:s.sent().status<300}]}}))}))},storeFileSystemRootKey:function(t){return Xv.storeRootKey(t)},isUsernameAvailable:function(t){return o(this,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return[4,fetch(k.endpoints.api+"/user/data/"+t)];case 1:return[2,!e.sent().ok]}}))}))},isUsernameValid:function(t){return!t.startsWith("-")&&!t.endsWith("-")&&!t.startsWith("_")&&/^[a-zA-Z0-9_-]+$/.test(t)&&!kg.includes(t.toLowerCase())}});var Ag,Sg,Ig=Object.freeze({__proto__:null,debug:function(t){var e=t.enabled;return k.debug=e,k.debug},endpoints:function(t){return k.endpoints=n(n({},k.endpoints),t),n({},k.endpoints)},setDependencies:function(t){return kr={hash:Er(kr.hash,t.hash),aes:Er(kr.aes,t.aes),rsa:Er(kr.rsa,t.rsa),ed25519:Er(kr.ed25519,t.ed25519),keystore:Er(kr.keystore,t.keystore),storage:Er(kr.storage,t.storage)}}});function xg(e){return o(this,void 0,void 0,(function(){var r,n,i,u,a,c,f,l,h,p,d,y,v,g,m,b,_,w,k,E,A,S,I,x,B=this;return s(this,(function(T){switch(T.label){case 0:if(r=(e=e||{}).permissions||null,n=e.autoRemoveUrlParams,i=void 0===n||n,u=e.rootKey,(a=r||{}).app,a.fs,c=function(t){return o(B,void 0,void 0,(function(){var n;return s(this,(function(i){switch(i.label){case 0:return!1!==e.loadFileSystem?[3,1]:(n=void 0,[3,3]);case 1:return[4,bg(r,t,u)];case 2:n=i.sent(),i.label=3;case 3:return[2,n]}}))}))},!1===globalThis.isSecureContext)throw t.InitialisationError.InsecureContext;return[4,Bg()];case 1:if(!1===T.sent())throw t.InitialisationError.UnsupportedBrowser;return f=new URL(window.location.href),l=f.searchParams.get("authorised"),h=f.searchParams.get("cancelled"),l?(p="t"===f.searchParams.get("newUser"),d=f.searchParams.get("username")||"",y=Ug,"via-postmessage"!==l?[3,3]:[4,jg()]):[3,11];case 2:return v=T.sent(),[3,5];case 3:return[4,pf(l)];case 4:v=T.sent(),T.label=5;case 5:return[4,y.apply(void 0,[v])];case 6:return T.sent(),[4,Sr(zr,d)];case 7:return T.sent(),i&&(f.searchParams.delete("authorised"),f.searchParams.delete("newUser"),f.searchParams.delete("username"),history.replaceState(null,document.title,f.toString())),(g=r)?[4,Lg(r)]:[3,9];case 8:g=!1===T.sent(),T.label=9;case 9:return g?(console.warn("Unable to validate filesystem secrets"),[2,Rg(r)]):r&&!1===nh(r)?(console.warn("Unable to validate UCAN permissions"),[2,Rg(r)]):(m=Og,b=[r,p,d],[4,c(d)]);case 10:return[2,m.apply(void 0,b.concat([T.sent()]))];case 11:if(h)return _=function(t){switch(h){case"DENIED":return"User denied authorisation";default:return"Unknown reason"}}(),[2,Ng(r,_)];rh([]),T.label=12;case 12:return[4,Fr()];case 13:return(w=T.sent())&&r?[4,Lg(r)]:[3,18];case 14:return k=T.sent(),E=nh(r),k&&E?(A=Cg,S=[r,w],[4,c(w)]):[3,16];case 15:return[2,A.apply(void 0,S.concat([T.sent()]))];case 16:return[2,Rg(r)];case 17:return[3,21];case 18:return w?(I=Cg,x=[r,w],[4,c(w)]):[3,20];case 19:return[2,I.apply(void 0,x.concat([T.sent()]))];case 20:return[2,Rg(r)];case 21:return[2]}}))}))}function Bg(){return o(this,void 0,void 0,(function(){var t;return s(this,(function(e){switch(e.label){case 0:return(t=y.supports(y.INDEXEDDB))?[4,new Promise((function(t){var e=indexedDB.open("testDatabase");e.onsuccess=function(){return t(!0)},e.onerror=function(){return t(!1)}}))]:[3,2];case 1:t=e.sent(),e.label=2;case 2:return[2,t]}}))}))}(Ag=t.Scenario||(t.Scenario={})).NotAuthorised="NOT_AUTHORISED",Ag.AuthSucceeded="AUTH_SUCCEEDED",Ag.AuthCancelled="AUTH_CANCELLED",Ag.Continuation="CONTINUATION",(Sg=t.InitialisationError||(t.InitialisationError={})).InsecureContext="INSECURE_CONTEXT",Sg.UnsupportedBrowser="UNSUPPORTED_BROWSER";var Tg=mg;function Og(e,r,n,i){return{scenario:t.Scenario.AuthSucceeded,permissions:e,authenticated:!0,throughLobby:!0,fs:i,newUser:r,username:n}}function Ng(e,r){return{scenario:t.Scenario.AuthCancelled,permissions:e,authenticated:!1,throughLobby:!0,cancellationReason:r}}function Cg(e,r,n){return{scenario:t.Scenario.Continuation,permissions:e,authenticated:!0,newUser:!1,throughLobby:!1,fs:n,username:r}}function Rg(e){return{scenario:t.Scenario.NotAuthorised,permissions:e,authenticated:!1}}function Ug(t){return o(this,void 0,void 0,(function(){var e,r,n,i,u,a,c=this;return s(this,(function(f){switch(f.label){case 0:return e=JSON.parse(t),[4,Zr.decrypt(e.sessionKey)];case 1:return r=f.sent(),[4,Vr.decryptGCM(e.secrets,r,e.iv)];case 2:return n=f.sent(),i=JSON.parse(n),u=i.fs,a=i.ucans,[4,Promise.all(Object.entries(u).map((function(t){var e=t[0],r=t[1],n=r.bareNameFilter,i=r.key;return o(c,void 0,void 0,(function(){var t,r,o;return s(this,(function(s){switch(s.label){case 0:return[4,bn({path:t=rn(e)})];case 1:return r=s.sent(),[4,mn({path:t})];case 2:return o=s.sent(),[4,Zr.importSymmKey(i,r)];case 3:return s.sent(),[4,Sr(o,n)];case 4:return s.sent(),[2]}}))}))})))];case 3:return f.sent(),[4,rh(a)];case 4:return f.sent(),[2]}}))}))}function jg(){return o(this,void 0,void 0,(function(){var t,e,r;return s(this,(function(n){switch(n.label){case 0:return[4,new Promise((function(t,e){var r=document.createElement("iframe");r.id="webnative-secret-exchange",r.style.width="0",r.style.height="0",r.style.border="none",r.style.display="none",document.body.appendChild(r),r.onload=function(){t(r)},r.src=k.endpoints.lobby+"/exchange.html"}))];case 1:t=n.sent(),n.label=2;case 2:if(n.trys.push([2,,4,5]),e=new Promise((function(t,e){window.addEventListener("message",(function r(n){window.removeEventListener("message",r),n.data?t(n.data):e(new Error("Can't import UCANs & readKey(s): Missing data"))}))})),null==t.contentWindow)throw new Error("Can't import UCANs & readKey(s): No access to its contentWindow");return r={webnative:"exchange-secrets"},t.contentWindow.postMessage(r,t.src),[4,e];case 3:return[2,n.sent()];case 4:return document.body.removeChild(t),[7];case 5:return[2]}}))}))}function Lg(t){return o(this,void 0,void 0,(function(){var e=this;return s(this,(function(r){return[2,Al(t).reduce((function(t,r){return t.then((function(t){return o(e,void 0,void 0,(function(){var e;return s(this,(function(n){switch(n.label){case 0:return!1===t||sn(Kr.Public,r)?[2,t]:[4,bn({path:r})];case 1:return e=n.sent(),[4,Zr.keyExists(e)];case 2:return[2,n.sent()]}}))}))}))}),Promise.resolve(!0))]}))}))}t.VERSION=Dr,t.apps=wg,t.authenticatedUsername=function(){return o(this,void 0,void 0,(function(){return s(this,(function(t){return[2,Fr()]}))}))},t.crypto=Xr,t.dataRoot=yg,t.did=Kl,t.dns=w,t.errors=gg,t.fs=Tg,t.initialise=xg,t.initialize=xg,t.ipfs=kl,t.isSupported=Bg,t.keystore=wr,t.leave=function(t){var e=(void 0===t?{}:t).withoutRedirect;return o(this,void 0,void 0,(function(){return s(this,(function(t){switch(t.label){case 0:return[4,Ir(zr)];case 1:return t.sent(),[4,Ql()];case 2:return t.sent(),[4,ag()];case 3:return t.sent(),[4,Zr.clear()];case 4:return t.sent(),(globalThis.filesystems||[]).forEach((function(t){return t.deactivate()})),!e&&globalThis.location&&(globalThis.location.href=k.endpoints.lobby),[2]}}))}))},t.loadFileSystem=bg,t.lobby=Eg,t.machinery=Gr,t.path=gn,t.redirectToLobby=function(t,e){return o(this,void 0,void 0,(function(){var r,n,i,o,u,a,c;return s(this,(function(s){switch(s.label){case 0:return r=null==t?void 0:t.app,n=null==t?void 0:t.fs,i=null==t?void 0:t.platform,[4,Ul()];case 1:return o=s.sent(),[4,jl()];case 2:return u=s.sent(),a=!!document.body.querySelector("iframe#webnative-ipfs")&&"function"==typeof SharedWorker,e=e||window.location.href,c=[["didExchange",o],["didWrite",u],["redirectTo",e],["sdk",Dr.toString()],["sharedRepo",a?"t":"f"]].concat(r?[["appFolder",r.creator+"/"+r.name]]:[],(null==n?void 0:n.private)?n.private.map((function(t){return["privatePath",nn(t,{absolute:!0})]})):[],(null==n?void 0:n.public)?n.public.map((function(t){return["publicPath",nn(t,{absolute:!0})]})):[]).concat(function(){var t=null==i?void 0:i.apps;switch(typeof t){case"string":return[["app",t]];case"object":return t.map((function(t){return["app",t]}));default:return[]}}()),window.location.href=k.endpoints.lobby+"?"+c.map((function(t){var e=t[0],r=t[1];return encodeURIComponent(e)+"="+encodeURIComponent(r)})).join("&"),[2]}}))}))},t.setup=Ig,t.ucan=Zl,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=index.umd.min.js.map
