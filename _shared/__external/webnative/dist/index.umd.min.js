!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).webnative={})}(this,(function(e){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,r)};function r(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}var n=function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function i(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r}function o(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{a(n.next(e))}catch(e){o(e)}}function u(e){try{a(n.throw(e))}catch(e){o(e)}}function a(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,u)}a((n=n.apply(e,t||[])).next())}))}function s(e,t){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}}function u(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function a(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),i=0;for(t=0;t<r;t++)for(var o=arguments[t],s=0,u=o.length;s<u;s++,i++)n[i]=o[s];return n}function c(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,r=e[Symbol.asyncIterator];return r?r.call(e):(e=u(e),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(r){t[r]=e[r]&&function(t){return new Promise((function(n,i){(function(e,t,r,n){Promise.resolve(n).then((function(t){e({value:t,done:r})}),t)})(n,i,(t=e[r](t)).done,t.value)}))}}}var f="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function l(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function h(e){if(e.__esModule)return e;var t=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(e).forEach((function(r){var n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,n.get?n:{enumerable:!0,get:function(){return e[r]}})})),t}function p(e){var t={exports:{}};return e(t,t.exports),t.exports}function d(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets option of @rollup/plugin-commonjs appropriately for this require call to behave properly.')}var y=p((function(e,t){var r,n,i,o,s,u,a,c;Object.defineProperty(t,"__esModule",{value:!0}),(r=t.CryptoSystem||(t.CryptoSystem={})).ECC="ecc",r.RSA="rsa",(n=t.EccCurve||(t.EccCurve={})).P_256="P-256",n.P_384="P-384",n.P_521="P-521",(i=t.RsaSize||(t.RsaSize={}))[i.B1024=1024]="B1024",i[i.B2048=2048]="B2048",i[i.B4096=4096]="B4096",(o=t.SymmAlg||(t.SymmAlg={})).AES_CTR="AES-CTR",o.AES_CBC="AES-CBC",(s=t.SymmKeyLength||(t.SymmKeyLength={}))[s.B128=128]="B128",s[s.B192=192]="B192",s[s.B256=256]="B256",(u=t.HashAlg||(t.HashAlg={})).SHA_1="SHA-1",u.SHA_256="SHA-256",u.SHA_384="SHA-384",u.SHA_512="SHA-512",(a=t.CharSize||(t.CharSize={}))[a.B8=8]="B8",a[a.B16=16]="B16",(c=t.KeyUse||(t.KeyUse={})).Read="read",c.Write="write"})),v=p((function(e,t){e.exports=function e(t,r,n){function i(s,u){if(!r[s]){if(!t[s]){if(!u&&d)return d(s);if(o)return o(s,!0);var a=new Error("Cannot find module '"+s+"'");throw a.code="MODULE_NOT_FOUND",a}var c=r[s]={exports:{}};t[s][0].call(c.exports,(function(e){var r=t[s][1][e];return i(r||e)}),c,c.exports,e,t,r,n)}return r[s].exports}for(var o=d,s=0;s<n.length;s++)i(n[s]);return i}({1:[function(e,t,r){(function(e){var r,n,i=e.MutationObserver||e.WebKitMutationObserver;if(i){var o=0,s=new i(f),u=e.document.createTextNode("");s.observe(u,{characterData:!0}),r=function(){u.data=o=++o%2}}else if(e.setImmediate||void 0===e.MessageChannel)r="document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var t=e.document.createElement("script");t.onreadystatechange=function(){f(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},e.document.documentElement.appendChild(t)}:function(){setTimeout(f,0)};else{var a=new e.MessageChannel;a.port1.onmessage=f,r=function(){a.port2.postMessage(0)}}var c=[];function f(){var e,t;n=!0;for(var r=c.length;r;){for(t=c,c=[],e=-1;++e<r;)t[e]();r=c.length}n=!1}function l(e){1!==c.push(e)||n||r()}t.exports=l}).call(this,void 0!==f?f:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(e,t,r){var n=e(1);function i(){}var o={},s=["REJECTED"],u=["FULFILLED"],a=["PENDING"];function c(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=a,this.queue=[],this.outcome=void 0,e!==i&&p(this,e)}function f(e,t,r){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof r&&(this.onRejected=r,this.callRejected=this.otherCallRejected)}function l(e,t,r){n((function(){var n;try{n=t(r)}catch(t){return o.reject(e,t)}n===e?o.reject(e,new TypeError("Cannot resolve promise with itself")):o.resolve(e,n)}))}function h(e){var t=e&&e.then;if(e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof t)return function(){t.apply(e,arguments)}}function p(e,t){var r=!1;function n(t){r||(r=!0,o.reject(e,t))}function i(t){r||(r=!0,o.resolve(e,t))}function s(){t(i,n)}var u=d(s);"error"===u.status&&n(u.value)}function d(e,t){var r={};try{r.value=e(t),r.status="success"}catch(e){r.status="error",r.value=e}return r}function y(e){return e instanceof this?e:o.resolve(new this(i),e)}function v(e){var t=new this(i);return o.reject(t,e)}function g(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var r=e.length,n=!1;if(!r)return this.resolve([]);for(var s=new Array(r),u=0,a=-1,c=new this(i);++a<r;)f(e[a],a);return c;function f(e,i){function a(e){s[i]=e,++u!==r||n||(n=!0,o.resolve(c,s))}t.resolve(e).then(a,(function(e){n||(n=!0,o.reject(c,e))}))}}function m(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var r=e.length,n=!1;if(!r)return this.resolve([]);for(var s=-1,u=new this(i);++s<r;)a(e[s]);return u;function a(e){t.resolve(e).then((function(e){n||(n=!0,o.resolve(u,e))}),(function(e){n||(n=!0,o.reject(u,e))}))}}t.exports=c,c.prototype.catch=function(e){return this.then(null,e)},c.prototype.then=function(e,t){if("function"!=typeof e&&this.state===u||"function"!=typeof t&&this.state===s)return this;var r=new this.constructor(i);return this.state!==a?l(r,this.state===u?e:t,this.outcome):this.queue.push(new f(r,e,t)),r},f.prototype.callFulfilled=function(e){o.resolve(this.promise,e)},f.prototype.otherCallFulfilled=function(e){l(this.promise,this.onFulfilled,e)},f.prototype.callRejected=function(e){o.reject(this.promise,e)},f.prototype.otherCallRejected=function(e){l(this.promise,this.onRejected,e)},o.resolve=function(e,t){var r=d(h,t);if("error"===r.status)return o.reject(e,r.value);var n=r.value;if(n)p(e,n);else{e.state=u,e.outcome=t;for(var i=-1,s=e.queue.length;++i<s;)e.queue[i].callFulfilled(t)}return e},o.reject=function(e,t){e.state=s,e.outcome=t;for(var r=-1,n=e.queue.length;++r<n;)e.queue[r].callRejected(t);return e},c.resolve=y,c.reject=v,c.all=g,c.race=m},{1:1}],3:[function(e,t,r){(function(t){"function"!=typeof t.Promise&&(t.Promise=e(2))}).call(this,void 0!==f?f:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{2:2}],4:[function(e,t,r){var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(){try{if("undefined"!=typeof indexedDB)return indexedDB;if("undefined"!=typeof webkitIndexedDB)return webkitIndexedDB;if("undefined"!=typeof mozIndexedDB)return mozIndexedDB;if("undefined"!=typeof OIndexedDB)return OIndexedDB;if("undefined"!=typeof msIndexedDB)return msIndexedDB}catch(e){return}}var s=o();function u(){try{if(!s||!s.open)return!1;var e="undefined"!=typeof openDatabase&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),t="function"==typeof fetch&&-1!==fetch.toString().indexOf("[native code");return(!e||t)&&"undefined"!=typeof indexedDB&&"undefined"!=typeof IDBKeyRange}catch(e){return!1}}function a(e,t){e=e||[],t=t||{};try{return new Blob(e,t)}catch(i){if("TypeError"!==i.name)throw i;for(var r=new("undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),n=0;n<e.length;n+=1)r.append(e[n]);return r.getBlob(t.type)}}"undefined"==typeof Promise&&e(3);var c=Promise;function f(e,t){t&&e.then((function(e){t(null,e)}),(function(e){t(e)}))}function l(e,t,r){"function"==typeof t&&e.then(t),"function"==typeof r&&e.catch(r)}function h(e){return"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e=String(e)),e}function p(){if(arguments.length&&"function"==typeof arguments[arguments.length-1])return arguments[arguments.length-1]}var d="local-forage-detect-blob-support",y=void 0,v={},g=Object.prototype.toString,m="readonly",b="readwrite";function _(e){for(var t=e.length,r=new ArrayBuffer(t),n=new Uint8Array(r),i=0;i<t;i++)n[i]=e.charCodeAt(i);return r}function w(e){return new c((function(t){var r=e.transaction(d,b),n=a([""]);r.objectStore(d).put(n,"key"),r.onabort=function(e){e.preventDefault(),e.stopPropagation(),t(!1)},r.oncomplete=function(){var e=navigator.userAgent.match(/Chrome\/(\d+)/),r=navigator.userAgent.match(/Edge\//);t(r||!e||parseInt(e[1],10)>=43)}})).catch((function(){return!1}))}function k(e){return"boolean"==typeof y?c.resolve(y):w(e).then((function(e){return y=e}))}function E(e){var t=v[e.name],r={};r.promise=new c((function(e,t){r.resolve=e,r.reject=t})),t.deferredOperations.push(r),t.dbReady?t.dbReady=t.dbReady.then((function(){return r.promise})):t.dbReady=r.promise}function A(e){var t=v[e.name].deferredOperations.pop();if(t)return t.resolve(),t.promise}function S(e,t){var r=v[e.name].deferredOperations.pop();if(r)return r.reject(t),r.promise}function x(e,t){return new c((function(r,n){if(v[e.name]=v[e.name]||L(),e.db){if(!t)return r(e.db);E(e),e.db.close()}var i=[e.name];t&&i.push(e.version);var o=s.open.apply(s,i);t&&(o.onupgradeneeded=function(t){var r=o.result;try{r.createObjectStore(e.storeName),t.oldVersion<=1&&r.createObjectStore(d)}catch(r){if("ConstraintError"!==r.name)throw r;console.warn('The database "'+e.name+'" has been upgraded from version '+t.oldVersion+" to version "+t.newVersion+', but the storage "'+e.storeName+'" already exists.')}}),o.onerror=function(e){e.preventDefault(),n(o.error)},o.onsuccess=function(){r(o.result),A(e)}}))}function I(e){return x(e,!1)}function T(e){return x(e,!0)}function O(e,t){if(!e.db)return!0;var r=!e.db.objectStoreNames.contains(e.storeName),n=e.version<e.db.version,i=e.version>e.db.version;if(n&&(e.version!==t&&console.warn('The database "'+e.name+"\" can't be downgraded from version "+e.db.version+" to version "+e.version+"."),e.version=e.db.version),i||r){if(r){var o=e.db.version+1;o>e.version&&(e.version=o)}return!0}return!1}function B(e){return new c((function(t,r){var n=new FileReader;n.onerror=r,n.onloadend=function(r){var n=btoa(r.target.result||"");t({__local_forage_encoded_blob:!0,data:n,type:e.type})},n.readAsBinaryString(e)}))}function N(e){return a([_(atob(e.data))],{type:e.type})}function C(e){return e&&e.__local_forage_encoded_blob}function R(e){var t=this,r=t._initReady().then((function(){var e=v[t._dbInfo.name];if(e&&e.dbReady)return e.dbReady}));return l(r,e,e),r}function U(e){E(e);for(var t=v[e.name],r=t.forages,n=0;n<r.length;n++){var i=r[n];i._dbInfo.db&&(i._dbInfo.db.close(),i._dbInfo.db=null)}return e.db=null,I(e).then((function(t){return e.db=t,O(e)?T(e):t})).then((function(n){e.db=t.db=n;for(var i=0;i<r.length;i++)r[i]._dbInfo.db=n})).catch((function(t){throw S(e,t),t}))}function j(e,t,r,n){void 0===n&&(n=1);try{var i=e.db.transaction(e.storeName,t);r(null,i)}catch(i){if(n>0&&(!e.db||"InvalidStateError"===i.name||"NotFoundError"===i.name))return c.resolve().then((function(){if(!e.db||"NotFoundError"===i.name&&!e.db.objectStoreNames.contains(e.storeName)&&e.version<=e.db.version)return e.db&&(e.version=e.db.version+1),T(e)})).then((function(){return U(e).then((function(){j(e,t,r,n-1)}))})).catch(r);r(i)}}function L(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function D(e){var t=this,r={db:null};if(e)for(var n in e)r[n]=e[n];var i=v[r.name];i||(i=L(),v[r.name]=i),i.forages.push(t),t._initReady||(t._initReady=t.ready,t.ready=R);var o=[];function s(){return c.resolve()}for(var u=0;u<i.forages.length;u++){var a=i.forages[u];a!==t&&o.push(a._initReady().catch(s))}var f=i.forages.slice(0);return c.all(o).then((function(){return r.db=i.db,I(r)})).then((function(e){return r.db=e,O(r,t._defaultConfig.version)?T(r):e})).then((function(e){r.db=i.db=e,t._dbInfo=r;for(var n=0;n<f.length;n++){var o=f[n];o!==t&&(o._dbInfo.db=r.db,o._dbInfo.version=r.version)}}))}function P(e,t){var r=this;e=h(e);var n=new c((function(t,n){r.ready().then((function(){j(r._dbInfo,m,(function(i,o){if(i)return n(i);try{var s=o.objectStore(r._dbInfo.storeName).get(e);s.onsuccess=function(){var e=s.result;void 0===e&&(e=null),C(e)&&(e=N(e)),t(e)},s.onerror=function(){n(s.error)}}catch(e){n(e)}}))})).catch(n)}));return f(n,t),n}function M(e,t){var r=this,n=new c((function(t,n){r.ready().then((function(){j(r._dbInfo,m,(function(i,o){if(i)return n(i);try{var s=o.objectStore(r._dbInfo.storeName).openCursor(),u=1;s.onsuccess=function(){var r=s.result;if(r){var n=r.value;C(n)&&(n=N(n));var i=e(n,r.key,u++);void 0!==i?t(i):r.continue()}else t()},s.onerror=function(){n(s.error)}}catch(e){n(e)}}))})).catch(n)}));return f(n,t),n}function z(e,t,r){var n=this;e=h(e);var i=new c((function(r,i){var o;n.ready().then((function(){return o=n._dbInfo,"[object Blob]"===g.call(t)?k(o.db).then((function(e){return e?t:B(t)})):t})).then((function(t){j(n._dbInfo,b,(function(o,s){if(o)return i(o);try{var u=s.objectStore(n._dbInfo.storeName);null===t&&(t=void 0);var a=u.put(t,e);s.oncomplete=function(){void 0===t&&(t=null),r(t)},s.onabort=s.onerror=function(){var e=a.error?a.error:a.transaction.error;i(e)}}catch(e){i(e)}}))})).catch(i)}));return f(i,r),i}function F(e,t){var r=this;e=h(e);var n=new c((function(t,n){r.ready().then((function(){j(r._dbInfo,b,(function(i,o){if(i)return n(i);try{var s=o.objectStore(r._dbInfo.storeName).delete(e);o.oncomplete=function(){t()},o.onerror=function(){n(s.error)},o.onabort=function(){var e=s.error?s.error:s.transaction.error;n(e)}}catch(e){n(e)}}))})).catch(n)}));return f(n,t),n}function K(e){var t=this,r=new c((function(e,r){t.ready().then((function(){j(t._dbInfo,b,(function(n,i){if(n)return r(n);try{var o=i.objectStore(t._dbInfo.storeName).clear();i.oncomplete=function(){e()},i.onabort=i.onerror=function(){var e=o.error?o.error:o.transaction.error;r(e)}}catch(e){r(e)}}))})).catch(r)}));return f(r,e),r}function H(e){var t=this,r=new c((function(e,r){t.ready().then((function(){j(t._dbInfo,m,(function(n,i){if(n)return r(n);try{var o=i.objectStore(t._dbInfo.storeName).count();o.onsuccess=function(){e(o.result)},o.onerror=function(){r(o.error)}}catch(e){r(e)}}))})).catch(r)}));return f(r,e),r}function G(e,t){var r=this,n=new c((function(t,n){e<0?t(null):r.ready().then((function(){j(r._dbInfo,m,(function(i,o){if(i)return n(i);try{var s=o.objectStore(r._dbInfo.storeName),u=!1,a=s.openKeyCursor();a.onsuccess=function(){var r=a.result;r?0===e||u?t(r.key):(u=!0,r.advance(e)):t(null)},a.onerror=function(){n(a.error)}}catch(e){n(e)}}))})).catch(n)}));return f(n,t),n}function $(e){var t=this,r=new c((function(e,r){t.ready().then((function(){j(t._dbInfo,m,(function(n,i){if(n)return r(n);try{var o=i.objectStore(t._dbInfo.storeName).openKeyCursor(),s=[];o.onsuccess=function(){var t=o.result;t?(s.push(t.key),t.continue()):e(s)},o.onerror=function(){r(o.error)}}catch(e){r(e)}}))})).catch(r)}));return f(r,e),r}function q(e,t){t=p.apply(this,arguments);var r=this.config();(e="function"!=typeof e&&e||{}).name||(e.name=e.name||r.name,e.storeName=e.storeName||r.storeName);var n,i=this;if(e.name){var o=e.name===r.name&&i._dbInfo.db?c.resolve(i._dbInfo.db):I(e).then((function(t){var r=v[e.name],n=r.forages;r.db=t;for(var i=0;i<n.length;i++)n[i]._dbInfo.db=t;return t}));n=e.storeName?o.then((function(t){if(t.objectStoreNames.contains(e.storeName)){var r=t.version+1;E(e);var n=v[e.name],i=n.forages;t.close();for(var o=0;o<i.length;o++){var u=i[o];u._dbInfo.db=null,u._dbInfo.version=r}return new c((function(t,n){var i=s.open(e.name,r);i.onerror=function(e){i.result.close(),n(e)},i.onupgradeneeded=function(){i.result.deleteObjectStore(e.storeName)},i.onsuccess=function(){var e=i.result;e.close(),t(e)}})).then((function(e){n.db=e;for(var t=0;t<i.length;t++){var r=i[t];r._dbInfo.db=e,A(r._dbInfo)}})).catch((function(t){throw(S(e,t)||c.resolve()).catch((function(){})),t}))}})):o.then((function(t){E(e);var r=v[e.name],n=r.forages;t.close();for(var i=0;i<n.length;i++)n[i]._dbInfo.db=null;return new c((function(t,r){var n=s.deleteDatabase(e.name);n.onerror=n.onblocked=function(e){var t=n.result;t&&t.close(),r(e)},n.onsuccess=function(){var e=n.result;e&&e.close(),t(e)}})).then((function(e){r.db=e;for(var t=0;t<n.length;t++)A(n[t]._dbInfo)})).catch((function(t){throw(S(e,t)||c.resolve()).catch((function(){})),t}))}))}else n=c.reject("Invalid arguments");return f(n,t),n}var W={_driver:"asyncStorage",_initStorage:D,_support:u(),iterate:M,getItem:P,setItem:z,removeItem:F,clear:K,length:H,key:G,keys:$,dropInstance:q};function V(){return"function"==typeof openDatabase}var Y="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",J="~~local_forage_type~",Z=/^~~local_forage_type~([^~]+)~/,X="__lfsc__:",Q=X.length,ee="arbf",te="blob",re="si08",ne="ui08",ie="uic8",oe="si16",se="si32",ue="ur16",ae="ui32",ce="fl32",fe="fl64",le=Q+ee.length,he=Object.prototype.toString;function pe(e){var t,r,n,i,o,s=.75*e.length,u=e.length,a=0;"="===e[e.length-1]&&(s--,"="===e[e.length-2]&&s--);var c=new ArrayBuffer(s),f=new Uint8Array(c);for(t=0;t<u;t+=4)r=Y.indexOf(e[t]),n=Y.indexOf(e[t+1]),i=Y.indexOf(e[t+2]),o=Y.indexOf(e[t+3]),f[a++]=r<<2|n>>4,f[a++]=(15&n)<<4|i>>2,f[a++]=(3&i)<<6|63&o;return c}function de(e){var t,r=new Uint8Array(e),n="";for(t=0;t<r.length;t+=3)n+=Y[r[t]>>2],n+=Y[(3&r[t])<<4|r[t+1]>>4],n+=Y[(15&r[t+1])<<2|r[t+2]>>6],n+=Y[63&r[t+2]];return r.length%3==2?n=n.substring(0,n.length-1)+"=":r.length%3==1&&(n=n.substring(0,n.length-2)+"=="),n}function ye(e,t){var r="";if(e&&(r=he.call(e)),e&&("[object ArrayBuffer]"===r||e.buffer&&"[object ArrayBuffer]"===he.call(e.buffer))){var n,i=X;e instanceof ArrayBuffer?(n=e,i+=ee):(n=e.buffer,"[object Int8Array]"===r?i+=re:"[object Uint8Array]"===r?i+=ne:"[object Uint8ClampedArray]"===r?i+=ie:"[object Int16Array]"===r?i+=oe:"[object Uint16Array]"===r?i+=ue:"[object Int32Array]"===r?i+=se:"[object Uint32Array]"===r?i+=ae:"[object Float32Array]"===r?i+=ce:"[object Float64Array]"===r?i+=fe:t(new Error("Failed to get type for BinaryArray"))),t(i+de(n))}else if("[object Blob]"===r){var o=new FileReader;o.onload=function(){var r=J+e.type+"~"+de(this.result);t(X+te+r)},o.readAsArrayBuffer(e)}else try{t(JSON.stringify(e))}catch(r){console.error("Couldn't convert value into a JSON string: ",e),t(null,r)}}function ve(e){if(e.substring(0,Q)!==X)return JSON.parse(e);var t,r=e.substring(le),n=e.substring(Q,le);if(n===te&&Z.test(r)){var i=r.match(Z);t=i[1],r=r.substring(i[0].length)}var o=pe(r);switch(n){case ee:return o;case te:return a([o],{type:t});case re:return new Int8Array(o);case ne:return new Uint8Array(o);case ie:return new Uint8ClampedArray(o);case oe:return new Int16Array(o);case ue:return new Uint16Array(o);case se:return new Int32Array(o);case ae:return new Uint32Array(o);case ce:return new Float32Array(o);case fe:return new Float64Array(o);default:throw new Error("Unkown type: "+n)}}var ge={serialize:ye,deserialize:ve,stringToBuffer:pe,bufferToString:de};function me(e,t,r,n){e.executeSql("CREATE TABLE IF NOT EXISTS "+t.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],r,n)}function be(e){var t=this,r={db:null};if(e)for(var n in e)r[n]="string"!=typeof e[n]?e[n].toString():e[n];var i=new c((function(e,n){try{r.db=openDatabase(r.name,String(r.version),r.description,r.size)}catch(e){return n(e)}r.db.transaction((function(i){me(i,r,(function(){t._dbInfo=r,e()}),(function(e,t){n(t)}))}),n)}));return r.serializer=ge,i}function _e(e,t,r,n,i,o){e.executeSql(r,n,i,(function(e,s){s.code===s.SYNTAX_ERR?e.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[t.storeName],(function(e,u){u.rows.length?o(e,s):me(e,t,(function(){e.executeSql(r,n,i,o)}),o)}),o):o(e,s)}),o)}function we(e,t){var r=this;e=h(e);var n=new c((function(t,n){r.ready().then((function(){var i=r._dbInfo;i.db.transaction((function(r){_e(r,i,"SELECT * FROM "+i.storeName+" WHERE key = ? LIMIT 1",[e],(function(e,r){var n=r.rows.length?r.rows.item(0).value:null;n&&(n=i.serializer.deserialize(n)),t(n)}),(function(e,t){n(t)}))}))})).catch(n)}));return f(n,t),n}function ke(e,t){var r=this,n=new c((function(t,n){r.ready().then((function(){var i=r._dbInfo;i.db.transaction((function(r){_e(r,i,"SELECT * FROM "+i.storeName,[],(function(r,n){for(var o=n.rows,s=o.length,u=0;u<s;u++){var a=o.item(u),c=a.value;if(c&&(c=i.serializer.deserialize(c)),void 0!==(c=e(c,a.key,u+1)))return void t(c)}t()}),(function(e,t){n(t)}))}))})).catch(n)}));return f(n,t),n}function Ee(e,t,r,n){var i=this;e=h(e);var o=new c((function(o,s){i.ready().then((function(){void 0===t&&(t=null);var u=t,a=i._dbInfo;a.serializer.serialize(t,(function(t,c){c?s(c):a.db.transaction((function(r){_e(r,a,"INSERT OR REPLACE INTO "+a.storeName+" (key, value) VALUES (?, ?)",[e,t],(function(){o(u)}),(function(e,t){s(t)}))}),(function(t){if(t.code===t.QUOTA_ERR){if(n>0)return void o(Ee.apply(i,[e,u,r,n-1]));s(t)}}))}))})).catch(s)}));return f(o,r),o}function Ae(e,t,r){return Ee.apply(this,[e,t,r,1])}function Se(e,t){var r=this;e=h(e);var n=new c((function(t,n){r.ready().then((function(){var i=r._dbInfo;i.db.transaction((function(r){_e(r,i,"DELETE FROM "+i.storeName+" WHERE key = ?",[e],(function(){t()}),(function(e,t){n(t)}))}))})).catch(n)}));return f(n,t),n}function xe(e){var t=this,r=new c((function(e,r){t.ready().then((function(){var n=t._dbInfo;n.db.transaction((function(t){_e(t,n,"DELETE FROM "+n.storeName,[],(function(){e()}),(function(e,t){r(t)}))}))})).catch(r)}));return f(r,e),r}function Ie(e){var t=this,r=new c((function(e,r){t.ready().then((function(){var n=t._dbInfo;n.db.transaction((function(t){_e(t,n,"SELECT COUNT(key) as c FROM "+n.storeName,[],(function(t,r){var n=r.rows.item(0).c;e(n)}),(function(e,t){r(t)}))}))})).catch(r)}));return f(r,e),r}function Te(e,t){var r=this,n=new c((function(t,n){r.ready().then((function(){var i=r._dbInfo;i.db.transaction((function(r){_e(r,i,"SELECT key FROM "+i.storeName+" WHERE id = ? LIMIT 1",[e+1],(function(e,r){var n=r.rows.length?r.rows.item(0).key:null;t(n)}),(function(e,t){n(t)}))}))})).catch(n)}));return f(n,t),n}function Oe(e){var t=this,r=new c((function(e,r){t.ready().then((function(){var n=t._dbInfo;n.db.transaction((function(t){_e(t,n,"SELECT key FROM "+n.storeName,[],(function(t,r){for(var n=[],i=0;i<r.rows.length;i++)n.push(r.rows.item(i).key);e(n)}),(function(e,t){r(t)}))}))})).catch(r)}));return f(r,e),r}function Be(e){return new c((function(t,r){e.transaction((function(n){n.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],(function(r,n){for(var i=[],o=0;o<n.rows.length;o++)i.push(n.rows.item(o).name);t({db:e,storeNames:i})}),(function(e,t){r(t)}))}),(function(e){r(e)}))}))}function Ne(e,t){t=p.apply(this,arguments);var r=this.config();(e="function"!=typeof e&&e||{}).name||(e.name=e.name||r.name,e.storeName=e.storeName||r.storeName);var n,i=this;return f(n=e.name?new c((function(t){var n;n=e.name===r.name?i._dbInfo.db:openDatabase(e.name,"","",0),e.storeName?t({db:n,storeNames:[e.storeName]}):t(Be(n))})).then((function(e){return new c((function(t,r){e.db.transaction((function(n){function i(e){return new c((function(t,r){n.executeSql("DROP TABLE IF EXISTS "+e,[],(function(){t()}),(function(e,t){r(t)}))}))}for(var o=[],s=0,u=e.storeNames.length;s<u;s++)o.push(i(e.storeNames[s]));c.all(o).then((function(){t()})).catch((function(e){r(e)}))}),(function(e){r(e)}))}))})):c.reject("Invalid arguments"),t),n}var Ce={_driver:"webSQLStorage",_initStorage:be,_support:V(),iterate:ke,getItem:we,setItem:Ae,removeItem:Se,clear:xe,length:Ie,key:Te,keys:Oe,dropInstance:Ne};function Re(){try{return"undefined"!=typeof localStorage&&"setItem"in localStorage&&!!localStorage.setItem}catch(e){return!1}}function Ue(e,t){var r=e.name+"/";return e.storeName!==t.storeName&&(r+=e.storeName+"/"),r}function je(){var e="_localforage_support_test";try{return localStorage.setItem(e,!0),localStorage.removeItem(e),!1}catch(e){return!0}}function Le(){return!je()||localStorage.length>0}function De(e){var t=this,r={};if(e)for(var n in e)r[n]=e[n];return r.keyPrefix=Ue(e,t._defaultConfig),Le()?(t._dbInfo=r,r.serializer=ge,c.resolve()):c.reject()}function Pe(e){var t=this,r=t.ready().then((function(){for(var e=t._dbInfo.keyPrefix,r=localStorage.length-1;r>=0;r--){var n=localStorage.key(r);0===n.indexOf(e)&&localStorage.removeItem(n)}}));return f(r,e),r}function Me(e,t){var r=this;e=h(e);var n=r.ready().then((function(){var t=r._dbInfo,n=localStorage.getItem(t.keyPrefix+e);return n&&(n=t.serializer.deserialize(n)),n}));return f(n,t),n}function ze(e,t){var r=this,n=r.ready().then((function(){for(var t=r._dbInfo,n=t.keyPrefix,i=n.length,o=localStorage.length,s=1,u=0;u<o;u++){var a=localStorage.key(u);if(0===a.indexOf(n)){var c=localStorage.getItem(a);if(c&&(c=t.serializer.deserialize(c)),void 0!==(c=e(c,a.substring(i),s++)))return c}}}));return f(n,t),n}function Fe(e,t){var r=this,n=r.ready().then((function(){var t,n=r._dbInfo;try{t=localStorage.key(e)}catch(e){t=null}return t&&(t=t.substring(n.keyPrefix.length)),t}));return f(n,t),n}function Ke(e){var t=this,r=t.ready().then((function(){for(var e=t._dbInfo,r=localStorage.length,n=[],i=0;i<r;i++){var o=localStorage.key(i);0===o.indexOf(e.keyPrefix)&&n.push(o.substring(e.keyPrefix.length))}return n}));return f(r,e),r}function He(e){var t=this.keys().then((function(e){return e.length}));return f(t,e),t}function Ge(e,t){var r=this;e=h(e);var n=r.ready().then((function(){var t=r._dbInfo;localStorage.removeItem(t.keyPrefix+e)}));return f(n,t),n}function $e(e,t,r){var n=this;e=h(e);var i=n.ready().then((function(){void 0===t&&(t=null);var r=t;return new c((function(i,o){var s=n._dbInfo;s.serializer.serialize(t,(function(t,n){if(n)o(n);else try{localStorage.setItem(s.keyPrefix+e,t),i(r)}catch(e){"QuotaExceededError"!==e.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==e.name||o(e),o(e)}}))}))}));return f(i,r),i}function qe(e,t){if(t=p.apply(this,arguments),!(e="function"!=typeof e&&e||{}).name){var r=this.config();e.name=e.name||r.name,e.storeName=e.storeName||r.storeName}var n,i=this;return f(n=e.name?new c((function(t){e.storeName?t(Ue(e,i._defaultConfig)):t(e.name+"/")})).then((function(e){for(var t=localStorage.length-1;t>=0;t--){var r=localStorage.key(t);0===r.indexOf(e)&&localStorage.removeItem(r)}})):c.reject("Invalid arguments"),t),n}var We={_driver:"localStorageWrapper",_initStorage:De,_support:Re(),iterate:ze,getItem:Me,setItem:$e,removeItem:Ge,clear:Pe,length:He,key:Fe,keys:Ke,dropInstance:qe},Ve=function(e,t){return e===t||"number"==typeof e&&"number"==typeof t&&isNaN(e)&&isNaN(t)},Ye=function(e,t){for(var r=e.length,n=0;n<r;){if(Ve(e[n],t))return!0;n++}return!1},Je=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},Ze={},Xe={},Qe={INDEXEDDB:W,WEBSQL:Ce,LOCALSTORAGE:We},et=[Qe.INDEXEDDB._driver,Qe.WEBSQL._driver,Qe.LOCALSTORAGE._driver],tt=["dropInstance"],rt=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(tt),nt={description:"",driver:et.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function it(e,t){e[t]=function(){var r=arguments;return e.ready().then((function(){return e[t].apply(e,r)}))}}function ot(){for(var e=1;e<arguments.length;e++){var t=arguments[e];if(t)for(var r in t)t.hasOwnProperty(r)&&(Je(t[r])?arguments[0][r]=t[r].slice():arguments[0][r]=t[r])}return arguments[0]}var st=new(function(){function e(t){for(var r in i(this,e),Qe)if(Qe.hasOwnProperty(r)){var n=Qe[r],o=n._driver;this[r]=o,Ze[o]||this.defineDriver(n)}this._defaultConfig=ot({},nt),this._config=ot({},this._defaultConfig,t),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch((function(){}))}return e.prototype.config=function(e){if("object"===(void 0===e?"undefined":n(e))){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var t in e){if("storeName"===t&&(e[t]=e[t].replace(/\W/g,"_")),"version"===t&&"number"!=typeof e[t])return new Error("Database version must be a number.");this._config[t]=e[t]}return!("driver"in e)||!e.driver||this.setDriver(this._config.driver)}return"string"==typeof e?this._config[e]:this._config},e.prototype.defineDriver=function(e,t,r){var n=new c((function(t,r){try{var n=e._driver,i=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!e._driver)return void r(i);for(var o=rt.concat("_initStorage"),s=0,u=o.length;s<u;s++){var a=o[s];if((!Ye(tt,a)||e[a])&&"function"!=typeof e[a])return void r(i)}!function(){for(var t=function(e){return function(){var t=new Error("Method "+e+" is not implemented by the current driver"),r=c.reject(t);return f(r,arguments[arguments.length-1]),r}},r=0,n=tt.length;r<n;r++){var i=tt[r];e[i]||(e[i]=t(i))}}();var l=function(r){Ze[n]&&console.info("Redefining LocalForage driver: "+n),Ze[n]=e,Xe[n]=r,t()};"_support"in e?e._support&&"function"==typeof e._support?e._support().then(l,r):l(!!e._support):l(!0)}catch(e){r(e)}}));return l(n,t,r),n},e.prototype.driver=function(){return this._driver||null},e.prototype.getDriver=function(e,t,r){var n=Ze[e]?c.resolve(Ze[e]):c.reject(new Error("Driver not found."));return l(n,t,r),n},e.prototype.getSerializer=function(e){var t=c.resolve(ge);return l(t,e),t},e.prototype.ready=function(e){var t=this,r=t._driverSet.then((function(){return null===t._ready&&(t._ready=t._initDriver()),t._ready}));return l(r,e,e),r},e.prototype.setDriver=function(e,t,r){var n=this;Je(e)||(e=[e]);var i=this._getSupportedDrivers(e);function o(){n._config.driver=n.driver()}function s(e){return n._extend(e),o(),n._ready=n._initStorage(n._config),n._ready}function u(e){return function(){var t=0;function r(){for(;t<e.length;){var i=e[t];return t++,n._dbInfo=null,n._ready=null,n.getDriver(i).then(s).catch(r)}o();var u=new Error("No available storage method found.");return n._driverSet=c.reject(u),n._driverSet}return r()}}var a=null!==this._driverSet?this._driverSet.catch((function(){return c.resolve()})):c.resolve();return this._driverSet=a.then((function(){var e=i[0];return n._dbInfo=null,n._ready=null,n.getDriver(e).then((function(e){n._driver=e._driver,o(),n._wrapLibraryMethodsWithReady(),n._initDriver=u(i)}))})).catch((function(){o();var e=new Error("No available storage method found.");return n._driverSet=c.reject(e),n._driverSet})),l(this._driverSet,t,r),this._driverSet},e.prototype.supports=function(e){return!!Xe[e]},e.prototype._extend=function(e){ot(this,e)},e.prototype._getSupportedDrivers=function(e){for(var t=[],r=0,n=e.length;r<n;r++){var i=e[r];this.supports(i)&&t.push(i)}return t},e.prototype._wrapLibraryMethodsWithReady=function(){for(var e=0,t=rt.length;e<t;e++)it(this,rt[e])},e.prototype.createInstance=function(t){return new e(t)},e}());t.exports=st},{3:3}]},{},[4])(4)})),g=p((function(e,t){var r=f&&f.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{a(n.next(e))}catch(e){o(e)}}function u(e){try{a(n.throw(e))}catch(e){o(e)}}function a(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,u)}a((n=n.apply(e,t||[])).next())}))},n=f&&f.__generator||function(e,t){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}};function i(e,t){var r=8===t?new Uint8Array(e):new Uint16Array(e);return Array.from(r).map((function(e){return String.fromCharCode(e)})).join("")}function o(e){var t=i(e,8);return globalThis.btoa(t)}function s(e,t){for(var r=8===t?new Uint8Array(e.length):new Uint16Array(e.length),n=0,i=e.length;n<i;n++)r[n]=e.charCodeAt(n);return r.buffer}function u(e){return s(globalThis.atob(e),8)}function a(){return new Uint8Array([1,0,1])}function c(e){var t=new Uint8Array(e);return globalThis.crypto.getRandomValues(t),t.buffer}function l(e,t){var r=new Uint8Array(e),n=new Uint8Array(t),i=new Uint8Array(r.length+n.length);return i.set(r),i.set(n,r.length),i.buffer}function h(e){return r(this,void 0,void 0,(function(){return n(this,(function(t){return[2,new Promise((function(t){var r=new MessageChannel,n=r.port1;r.port2.onmessage=function(e){return t(e.data)},n.postMessage(e)}))]}))}))}Object.defineProperty(t,"__esModule",{value:!0}),t.arrBufToStr=i,t.arrBufToBase64=o,t.strToArrBuf=s,t.base64ToArrBuf=u,t.publicExponent=a,t.randomBuf=c,t.joinBufs=l,t.normalizeUtf8ToBuf=function(e){return t.normalizeToBuf(e,(function(e){return s(e,y.CharSize.B8)}))},t.normalizeUtf16ToBuf=function(e){return t.normalizeToBuf(e,(function(e){return s(e,y.CharSize.B16)}))},t.normalizeBase64ToBuf=function(e){return t.normalizeToBuf(e,u)},t.normalizeUnicodeToBuf=function(e,r){switch(r){case 8:return t.normalizeUtf8ToBuf(e);default:return t.normalizeUtf16ToBuf(e)}},t.normalizeToBuf=function(e,t){if("string"==typeof e)return t(e);if("object"==typeof e&&void 0!==e.byteLength)return new Uint8Array(e).buffer;throw new Error("Improper value. Must be a string, ArrayBuffer, Uint8Array")},t.structuralClone=h,t.default={arrBufToStr:i,arrBufToBase64:o,strToArrBuf:s,base64ToArrBuf:u,publicExponent:a,randomBuf:c,joinBufs:l,normalizeUtf8ToBuf:t.normalizeUtf8ToBuf,normalizeUtf16ToBuf:t.normalizeUtf16ToBuf,normalizeBase64ToBuf:t.normalizeBase64ToBuf,normalizeToBuf:t.normalizeToBuf,structuralClone:h}})),m=l(g);
/*!
        localForage -- Offline Storage, Improved
        Version 1.9.0
        https://localforage.github.io/localForage
        (c) 2013-2017 Mozilla, Apache License 2.0
    */function b(e){return o(this,void 0,void 0,(function(){return s(this,(function(t){return[2,(r=[_(e),w(e)],new Promise((function(e,t){for(var n=0,i=r;n<i.length;n++)i[n].then(e,t)})))];var r}))}))}function _(e){return o(this,void 0,void 0,(function(){return s(this,(function(t){return[2,k("https://dns.google/resolve?name="+e+"&type=txt")]}))}))}function w(e){return k("https://cloudflare-dns.com/dns-query?name="+e+"&type=txt")}function k(e){return fetch(e,{headers:{accept:"application/dns-json"}}).then((function(e){return e.json()})).then((function(e){if(e.Answer){var t=e.Answer.map((function(e){return(e.data||"").replace(/^"+|"+$/g,"")}));return";"===t[0][3]?t.sort((function(e,t){return e.slice(0,4).localeCompare(t.slice(0,4))})).map((function(e){return e.slice(4)})).join(""):t.join("")}return null}))}function E(e){return o(this,void 0,void 0,(function(){var t;return s(this,(function(r){switch(r.label){case 0:return[4,b(e.startsWith("_dnslink.")?e:"_dnslink."+e)];case 1:return[2,(t=r.sent())&&!t.includes("/ipns/")?t.replace(/^dnslink=/,"").replace(/^\/ipfs\//,""):null]}}))}))}var A=Object.freeze({__proto__:null,lookupTxtRecord:b,googleLookup:_,cloudflareLookup:w,dnsOverHttps:k,lookupDnsLink:E}),S={debug:!1,endpoints:{api:"https://runfission.com",lobby:"https://auth.fission.codes",user:"fission.name"}},x={did:null,host:null,lastFetched:0};function I(){return o(this,void 0,void 0,(function(){var e,t,r;return s(this,(function(n){switch(n.label){case 0:return e=S.endpoints.api.replace(/^https?:\/\//,"").replace(/\/$/,""),t=Date.now(),x.host!==e||x.lastFetched+108e5<=t?(r=x,[4,b("_did."+e)]):[3,2];case 1:r.did=n.sent(),x.host=e,x.lastFetched=t,n.label=2;case 2:if(!x.did)throw new Error("Couldn't get the Fission API DID");return[2,x.did]}}))}))}function T(e){return atob(N(e))}function O(e){return B(btoa(e))}function B(e){return e.replace(/\//g,"_").replace(/\+/g,"-").replace(/=+$/,"")}function N(e){return e.replace(/_/g,"/").replace(/-/g,"+")}for(var C=Object.freeze({__proto__:null,urlDecode:T,urlEncode:O,makeUrlSafe:B,makeUrlUnsafe:N}),R=function(e){var t=K(e),r=t[0],n=t[1];return 3*(r+n)/4-n},U=function(e){var t,r,n=K(e),i=n[0],o=n[1],s=new P(function(e,t,r){return 3*(t+r)/4-r}(0,i,o)),u=0,a=o>0?i-4:i;for(r=0;r<a;r+=4)t=D[e.charCodeAt(r)]<<18|D[e.charCodeAt(r+1)]<<12|D[e.charCodeAt(r+2)]<<6|D[e.charCodeAt(r+3)],s[u++]=t>>16&255,s[u++]=t>>8&255,s[u++]=255&t;2===o&&(t=D[e.charCodeAt(r)]<<2|D[e.charCodeAt(r+1)]>>4,s[u++]=255&t);1===o&&(t=D[e.charCodeAt(r)]<<10|D[e.charCodeAt(r+1)]<<4|D[e.charCodeAt(r+2)]>>2,s[u++]=t>>8&255,s[u++]=255&t);return s},j=function(e){for(var t,r=e.length,n=r%3,i=[],o=16383,s=0,u=r-n;s<u;s+=o)i.push(H(e,s,s+o>u?u:s+o));1===n?(t=e[r-1],i.push(L[t>>2]+L[t<<4&63]+"==")):2===n&&(t=(e[r-2]<<8)+e[r-1],i.push(L[t>>10]+L[t>>4&63]+L[t<<2&63]+"="));return i.join("")},L=[],D=[],P="undefined"!=typeof Uint8Array?Uint8Array:Array,M="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",z=0,F=M.length;z<F;++z)L[z]=M[z],D[M.charCodeAt(z)]=z;function K(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return-1===r&&(r=t),[r,r===t?0:4-r%4]}function H(e,t,r){for(var n,i,o=[],s=t;s<r;s+=3)n=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),o.push(L[(i=n)>>18&63]+L[i>>12&63]+L[i>>6&63]+L[63&i]);return o.join("")}D["-".charCodeAt(0)]=62,D["_".charCodeAt(0)]=63;var G={byteLength:R,toByteArray:U,fromByteArray:j},$=function(e,t,r,n,i){var o,s,u=8*i-n-1,a=(1<<u)-1,c=a>>1,f=-7,l=r?i-1:0,h=r?-1:1,p=e[t+l];for(l+=h,o=p&(1<<-f)-1,p>>=-f,f+=u;f>0;o=256*o+e[t+l],l+=h,f-=8);for(s=o&(1<<-f)-1,o>>=-f,f+=n;f>0;s=256*s+e[t+l],l+=h,f-=8);if(0===o)o=1-c;else{if(o===a)return s?NaN:1/0*(p?-1:1);s+=Math.pow(2,n),o-=c}return(p?-1:1)*s*Math.pow(2,o-n)},q=function(e,t,r,n,i,o){var s,u,a,c=8*o-i-1,f=(1<<c)-1,l=f>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:o-1,d=n?1:-1,y=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(u=isNaN(t)?1:0,s=f):(s=Math.floor(Math.log(t)/Math.LN2),t*(a=Math.pow(2,-s))<1&&(s--,a*=2),(t+=s+l>=1?h/a:h*Math.pow(2,1-l))*a>=2&&(s++,a/=2),s+l>=f?(u=0,s=f):s+l>=1?(u=(t*a-1)*Math.pow(2,i),s+=l):(u=t*Math.pow(2,l-1)*Math.pow(2,i),s=0));i>=8;e[r+p]=255&u,p+=d,u/=256,i-=8);for(s=s<<i|u,c+=i;c>0;e[r+p]=255&s,p+=d,s/=256,c-=8);e[r+p-d]|=128*y},W=p((function(e,t){const r="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=o,t.SlowBuffer=function(e){+e!=e&&(e=0);return o.alloc(+e)},t.INSPECT_MAX_BYTES=50;const n=2147483647;function i(e){if(e>n)throw new RangeError('The value "'+e+'" is invalid for option "size"');const t=new Uint8Array(e);return Object.setPrototypeOf(t,o.prototype),t}function o(e,t,r){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return a(e)}return s(e,t,r)}function s(e,t,r){if("string"==typeof e)return function(e,t){"string"==typeof t&&""!==t||(t="utf8");if(!o.isEncoding(t))throw new TypeError("Unknown encoding: "+t);const r=0|h(e,t);let n=i(r);const s=n.write(e,t);s!==r&&(n=n.slice(0,s));return n}(e,t);if(ArrayBuffer.isView(e))return function(e){if(Y(e,Uint8Array)){const t=new Uint8Array(e);return f(t.buffer,t.byteOffset,t.byteLength)}return c(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(Y(e,ArrayBuffer)||e&&Y(e.buffer,ArrayBuffer))return f(e,t,r);if("undefined"!=typeof SharedArrayBuffer&&(Y(e,SharedArrayBuffer)||e&&Y(e.buffer,SharedArrayBuffer)))return f(e,t,r);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');const n=e.valueOf&&e.valueOf();if(null!=n&&n!==e)return o.from(n,t,r);const s=function(e){if(o.isBuffer(e)){const t=0|l(e.length),r=i(t);return 0===r.length||e.copy(r,0,0,t),r}if(void 0!==e.length)return"number"!=typeof e.length||J(e.length)?i(0):c(e);if("Buffer"===e.type&&Array.isArray(e.data))return c(e.data)}(e);if(s)return s;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return o.from(e[Symbol.toPrimitive]("string"),t,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function u(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function a(e){return u(e),i(e<0?0:0|l(e))}function c(e){const t=e.length<0?0:0|l(e.length),r=i(t);for(let n=0;n<t;n+=1)r[n]=255&e[n];return r}function f(e,t,r){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw new RangeError('"length" is outside of buffer bounds');let n;return n=void 0===t&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,t):new Uint8Array(e,t,r),Object.setPrototypeOf(n,o.prototype),n}function l(e){if(e>=n)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+n.toString(16)+" bytes");return 0|e}function h(e,t){if(o.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||Y(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);const r=e.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;let i=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return H(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return W(e).length;default:if(i)return n?-1:H(e).length;t=(""+t).toLowerCase(),i=!0}}function p(e,t,r){let n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return I(this,t,r);case"utf8":case"utf-8":return E(this,t,r);case"ascii":return S(this,t,r);case"latin1":case"binary":return x(this,t,r);case"base64":return k(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function d(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function y(e,t,r,n,i){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),J(r=+r)&&(r=i?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(i)return-1;r=e.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof t&&(t=o.from(t,n)),o.isBuffer(t))return 0===t.length?-1:v(e,t,r,n,i);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):v(e,[t],r,n,i);throw new TypeError("val must be string, number or Buffer")}function v(e,t,r,n,i){let o,s=1,u=e.length,a=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;s=2,u/=2,a/=2,r/=2}function c(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}if(i){let n=-1;for(o=r;o<u;o++)if(c(e,o)===c(t,-1===n?0:o-n)){if(-1===n&&(n=o),o-n+1===a)return n*s}else-1!==n&&(o-=o-n),n=-1}else for(r+a>u&&(r=u-a),o=r;o>=0;o--){let r=!0;for(let n=0;n<a;n++)if(c(e,o+n)!==c(t,n)){r=!1;break}if(r)return o}return-1}function g(e,t,r,n){r=Number(r)||0;const i=e.length-r;n?(n=Number(n))>i&&(n=i):n=i;const o=t.length;let s;for(n>o/2&&(n=o/2),s=0;s<n;++s){const n=parseInt(t.substr(2*s,2),16);if(J(n))return s;e[r+s]=n}return s}function m(e,t,r,n){return V(H(t,e.length-r),e,r,n)}function b(e,t,r,n){return V(function(e){const t=[];for(let r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,n)}function _(e,t,r,n){return V(W(t),e,r,n)}function w(e,t,r,n){return V(function(e,t){let r,n,i;const o=[];for(let s=0;s<e.length&&!((t-=2)<0);++s)r=e.charCodeAt(s),n=r>>8,i=r%256,o.push(i),o.push(n);return o}(t,e.length-r),e,r,n)}function k(e,t,r){return 0===t&&r===e.length?G.fromByteArray(e):G.fromByteArray(e.slice(t,r))}function E(e,t,r){r=Math.min(e.length,r);const n=[];let i=t;for(;i<r;){const t=e[i];let o=null,s=t>239?4:t>223?3:t>191?2:1;if(i+s<=r){let r,n,u,a;switch(s){case 1:t<128&&(o=t);break;case 2:r=e[i+1],128==(192&r)&&(a=(31&t)<<6|63&r,a>127&&(o=a));break;case 3:r=e[i+1],n=e[i+2],128==(192&r)&&128==(192&n)&&(a=(15&t)<<12|(63&r)<<6|63&n,a>2047&&(a<55296||a>57343)&&(o=a));break;case 4:r=e[i+1],n=e[i+2],u=e[i+3],128==(192&r)&&128==(192&n)&&128==(192&u)&&(a=(15&t)<<18|(63&r)<<12|(63&n)<<6|63&u,a>65535&&a<1114112&&(o=a))}}null===o?(o=65533,s=1):o>65535&&(o-=65536,n.push(o>>>10&1023|55296),o=56320|1023&o),n.push(o),i+=s}return function(e){const t=e.length;if(t<=A)return String.fromCharCode.apply(String,e);let r="",n=0;for(;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=A));return r}(n)}t.kMaxLength=n,o.TYPED_ARRAY_SUPPORT=function(){try{const e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),o.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(o.prototype,"parent",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.buffer}}),Object.defineProperty(o.prototype,"offset",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.byteOffset}}),o.poolSize=8192,o.from=function(e,t,r){return s(e,t,r)},Object.setPrototypeOf(o.prototype,Uint8Array.prototype),Object.setPrototypeOf(o,Uint8Array),o.alloc=function(e,t,r){return function(e,t,r){return u(e),e<=0?i(e):void 0!==t?"string"==typeof r?i(e).fill(t,r):i(e).fill(t):i(e)}(e,t,r)},o.allocUnsafe=function(e){return a(e)},o.allocUnsafeSlow=function(e){return a(e)},o.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==o.prototype},o.compare=function(e,t){if(Y(e,Uint8Array)&&(e=o.from(e,e.offset,e.byteLength)),Y(t,Uint8Array)&&(t=o.from(t,t.offset,t.byteLength)),!o.isBuffer(e)||!o.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let r=e.length,n=t.length;for(let i=0,o=Math.min(r,n);i<o;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:n<r?1:0},o.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return o.alloc(0);let r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;const n=o.allocUnsafe(t);let i=0;for(r=0;r<e.length;++r){let t=e[r];if(Y(t,Uint8Array))i+t.length>n.length?(o.isBuffer(t)||(t=o.from(t)),t.copy(n,i)):Uint8Array.prototype.set.call(n,t,i);else{if(!o.isBuffer(t))throw new TypeError('"list" argument must be an Array of Buffers');t.copy(n,i)}i+=t.length}return n},o.byteLength=h,o.prototype._isBuffer=!0,o.prototype.swap16=function(){const e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)d(this,t,t+1);return this},o.prototype.swap32=function(){const e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)d(this,t,t+3),d(this,t+1,t+2);return this},o.prototype.swap64=function(){const e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)d(this,t,t+7),d(this,t+1,t+6),d(this,t+2,t+5),d(this,t+3,t+4);return this},o.prototype.toString=function(){const e=this.length;return 0===e?"":0===arguments.length?E(this,0,e):p.apply(this,arguments)},o.prototype.toLocaleString=o.prototype.toString,o.prototype.equals=function(e){if(!o.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===o.compare(this,e)},o.prototype.inspect=function(){let e="";const r=t.INSPECT_MAX_BYTES;return e=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(e+=" ... "),"<Buffer "+e+">"},r&&(o.prototype[r]=o.prototype.inspect),o.prototype.compare=function(e,t,r,n,i){if(Y(e,Uint8Array)&&(e=o.from(e,e.offset,e.byteLength)),!o.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),t<0||r>e.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&t>=r)return 0;if(n>=i)return-1;if(t>=r)return 1;if(this===e)return 0;let s=(i>>>=0)-(n>>>=0),u=(r>>>=0)-(t>>>=0);const a=Math.min(s,u),c=this.slice(n,i),f=e.slice(t,r);for(let e=0;e<a;++e)if(c[e]!==f[e]){s=c[e],u=f[e];break}return s<u?-1:u<s?1:0},o.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},o.prototype.indexOf=function(e,t,r){return y(this,e,t,r,!0)},o.prototype.lastIndexOf=function(e,t,r){return y(this,e,t,r,!1)},o.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}const i=this.length-t;if((void 0===r||r>i)&&(r=i),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");let o=!1;for(;;)switch(n){case"hex":return g(this,e,t,r);case"utf8":case"utf-8":return m(this,e,t,r);case"ascii":case"latin1":case"binary":return b(this,e,t,r);case"base64":return _(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return w(this,e,t,r);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const A=4096;function S(e,t,r){let n="";r=Math.min(e.length,r);for(let i=t;i<r;++i)n+=String.fromCharCode(127&e[i]);return n}function x(e,t,r){let n="";r=Math.min(e.length,r);for(let i=t;i<r;++i)n+=String.fromCharCode(e[i]);return n}function I(e,t,r){const n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);let i="";for(let n=t;n<r;++n)i+=Z[e[n]];return i}function T(e,t,r){const n=e.slice(t,r);let i="";for(let e=0;e<n.length-1;e+=2)i+=String.fromCharCode(n[e]+256*n[e+1]);return i}function O(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function B(e,t,r,n,i,s){if(!o.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<s)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function N(e,t,r,n,i){M(t,n,i,e,r,7);let o=Number(t&BigInt(4294967295));e[r++]=o,o>>=8,e[r++]=o,o>>=8,e[r++]=o,o>>=8,e[r++]=o;let s=Number(t>>BigInt(32)&BigInt(4294967295));return e[r++]=s,s>>=8,e[r++]=s,s>>=8,e[r++]=s,s>>=8,e[r++]=s,r}function C(e,t,r,n,i){M(t,n,i,e,r,7);let o=Number(t&BigInt(4294967295));e[r+7]=o,o>>=8,e[r+6]=o,o>>=8,e[r+5]=o,o>>=8,e[r+4]=o;let s=Number(t>>BigInt(32)&BigInt(4294967295));return e[r+3]=s,s>>=8,e[r+2]=s,s>>=8,e[r+1]=s,s>>=8,e[r]=s,r+8}function R(e,t,r,n,i,o){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function U(e,t,r,n,i){return t=+t,r>>>=0,i||R(e,0,r,4),q(e,t,r,n,23,4),r+4}function j(e,t,r,n,i){return t=+t,r>>>=0,i||R(e,0,r,8),q(e,t,r,n,52,8),r+8}o.prototype.slice=function(e,t){const r=this.length;(e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e);const n=this.subarray(e,t);return Object.setPrototypeOf(n,o.prototype),n},o.prototype.readUintLE=o.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||O(e,t,this.length);let n=this[e],i=1,o=0;for(;++o<t&&(i*=256);)n+=this[e+o]*i;return n},o.prototype.readUintBE=o.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||O(e,t,this.length);let n=this[e+--t],i=1;for(;t>0&&(i*=256);)n+=this[e+--t]*i;return n},o.prototype.readUint8=o.prototype.readUInt8=function(e,t){return e>>>=0,t||O(e,1,this.length),this[e]},o.prototype.readUint16LE=o.prototype.readUInt16LE=function(e,t){return e>>>=0,t||O(e,2,this.length),this[e]|this[e+1]<<8},o.prototype.readUint16BE=o.prototype.readUInt16BE=function(e,t){return e>>>=0,t||O(e,2,this.length),this[e]<<8|this[e+1]},o.prototype.readUint32LE=o.prototype.readUInt32LE=function(e,t){return e>>>=0,t||O(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},o.prototype.readUint32BE=o.prototype.readUInt32BE=function(e,t){return e>>>=0,t||O(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},o.prototype.readBigUInt64LE=X((function(e){z(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||F(e,this.length-8);const n=t+256*this[++e]+65536*this[++e]+this[++e]*2**24,i=this[++e]+256*this[++e]+65536*this[++e]+r*2**24;return BigInt(n)+(BigInt(i)<<BigInt(32))})),o.prototype.readBigUInt64BE=X((function(e){z(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||F(e,this.length-8);const n=t*2**24+65536*this[++e]+256*this[++e]+this[++e],i=this[++e]*2**24+65536*this[++e]+256*this[++e]+r;return(BigInt(n)<<BigInt(32))+BigInt(i)})),o.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||O(e,t,this.length);let n=this[e],i=1,o=0;for(;++o<t&&(i*=256);)n+=this[e+o]*i;return i*=128,n>=i&&(n-=Math.pow(2,8*t)),n},o.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||O(e,t,this.length);let n=t,i=1,o=this[e+--n];for(;n>0&&(i*=256);)o+=this[e+--n]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*t)),o},o.prototype.readInt8=function(e,t){return e>>>=0,t||O(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},o.prototype.readInt16LE=function(e,t){e>>>=0,t||O(e,2,this.length);const r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},o.prototype.readInt16BE=function(e,t){e>>>=0,t||O(e,2,this.length);const r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},o.prototype.readInt32LE=function(e,t){return e>>>=0,t||O(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},o.prototype.readInt32BE=function(e,t){return e>>>=0,t||O(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},o.prototype.readBigInt64LE=X((function(e){z(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||F(e,this.length-8);const n=this[e+4]+256*this[e+5]+65536*this[e+6]+(r<<24);return(BigInt(n)<<BigInt(32))+BigInt(t+256*this[++e]+65536*this[++e]+this[++e]*2**24)})),o.prototype.readBigInt64BE=X((function(e){z(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||F(e,this.length-8);const n=(t<<24)+65536*this[++e]+256*this[++e]+this[++e];return(BigInt(n)<<BigInt(32))+BigInt(this[++e]*2**24+65536*this[++e]+256*this[++e]+r)})),o.prototype.readFloatLE=function(e,t){return e>>>=0,t||O(e,4,this.length),$(this,e,!0,23,4)},o.prototype.readFloatBE=function(e,t){return e>>>=0,t||O(e,4,this.length),$(this,e,!1,23,4)},o.prototype.readDoubleLE=function(e,t){return e>>>=0,t||O(e,8,this.length),$(this,e,!0,52,8)},o.prototype.readDoubleBE=function(e,t){return e>>>=0,t||O(e,8,this.length),$(this,e,!1,52,8)},o.prototype.writeUintLE=o.prototype.writeUIntLE=function(e,t,r,n){if(e=+e,t>>>=0,r>>>=0,!n){B(this,e,t,r,Math.pow(2,8*r)-1,0)}let i=1,o=0;for(this[t]=255&e;++o<r&&(i*=256);)this[t+o]=e/i&255;return t+r},o.prototype.writeUintBE=o.prototype.writeUIntBE=function(e,t,r,n){if(e=+e,t>>>=0,r>>>=0,!n){B(this,e,t,r,Math.pow(2,8*r)-1,0)}let i=r-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+r},o.prototype.writeUint8=o.prototype.writeUInt8=function(e,t,r){return e=+e,t>>>=0,r||B(this,e,t,1,255,0),this[t]=255&e,t+1},o.prototype.writeUint16LE=o.prototype.writeUInt16LE=function(e,t,r){return e=+e,t>>>=0,r||B(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},o.prototype.writeUint16BE=o.prototype.writeUInt16BE=function(e,t,r){return e=+e,t>>>=0,r||B(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},o.prototype.writeUint32LE=o.prototype.writeUInt32LE=function(e,t,r){return e=+e,t>>>=0,r||B(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},o.prototype.writeUint32BE=o.prototype.writeUInt32BE=function(e,t,r){return e=+e,t>>>=0,r||B(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},o.prototype.writeBigUInt64LE=X((function(e,t=0){return N(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),o.prototype.writeBigUInt64BE=X((function(e,t=0){return C(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),o.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t>>>=0,!n){const n=Math.pow(2,8*r-1);B(this,e,t,r,n-1,-n)}let i=0,o=1,s=0;for(this[t]=255&e;++i<r&&(o*=256);)e<0&&0===s&&0!==this[t+i-1]&&(s=1),this[t+i]=(e/o>>0)-s&255;return t+r},o.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t>>>=0,!n){const n=Math.pow(2,8*r-1);B(this,e,t,r,n-1,-n)}let i=r-1,o=1,s=0;for(this[t+i]=255&e;--i>=0&&(o*=256);)e<0&&0===s&&0!==this[t+i+1]&&(s=1),this[t+i]=(e/o>>0)-s&255;return t+r},o.prototype.writeInt8=function(e,t,r){return e=+e,t>>>=0,r||B(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},o.prototype.writeInt16LE=function(e,t,r){return e=+e,t>>>=0,r||B(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},o.prototype.writeInt16BE=function(e,t,r){return e=+e,t>>>=0,r||B(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},o.prototype.writeInt32LE=function(e,t,r){return e=+e,t>>>=0,r||B(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},o.prototype.writeInt32BE=function(e,t,r){return e=+e,t>>>=0,r||B(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},o.prototype.writeBigInt64LE=X((function(e,t=0){return N(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),o.prototype.writeBigInt64BE=X((function(e,t=0){return C(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),o.prototype.writeFloatLE=function(e,t,r){return U(this,e,t,!0,r)},o.prototype.writeFloatBE=function(e,t,r){return U(this,e,t,!1,r)},o.prototype.writeDoubleLE=function(e,t,r){return j(this,e,t,!0,r)},o.prototype.writeDoubleBE=function(e,t,r){return j(this,e,t,!1,r)},o.prototype.copy=function(e,t,r,n){if(!o.isBuffer(e))throw new TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);const i=n-r;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,r,n):Uint8Array.prototype.set.call(e,this.subarray(r,n),t),i},o.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!o.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(1===e.length){const t=e.charCodeAt(0);("utf8"===n&&t<128||"latin1"===n)&&(e=t)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;let i;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(i=t;i<r;++i)this[i]=e;else{const s=o.isBuffer(e)?e:o.from(e,n),u=s.length;if(0===u)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(i=0;i<r-t;++i)this[i+t]=s[i%u]}return this};const L={};function D(e,t,r){L[e]=class extends r{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}}}function P(e){let t="",r=e.length;const n="-"===e[0]?1:0;for(;r>=n+4;r-=3)t=`_${e.slice(r-3,r)}${t}`;return`${e.slice(0,r)}${t}`}function M(e,t,r,n,i,o){if(e>r||e<t){const n="bigint"==typeof t?"n":"";let i;throw i=o>3?0===t||t===BigInt(0)?`>= 0${n} and < 2${n} ** ${8*(o+1)}${n}`:`>= -(2${n} ** ${8*(o+1)-1}${n}) and < 2 ** ${8*(o+1)-1}${n}`:`>= ${t}${n} and <= ${r}${n}`,new L.ERR_OUT_OF_RANGE("value",i,e)}!function(e,t,r){z(t,"offset"),void 0!==e[t]&&void 0!==e[t+r]||F(t,e.length-(r+1))}(n,i,o)}function z(e,t){if("number"!=typeof e)throw new L.ERR_INVALID_ARG_TYPE(t,"number",e)}function F(e,t,r){if(Math.floor(e)!==e)throw z(e,r),new L.ERR_OUT_OF_RANGE(r||"offset","an integer",e);if(t<0)throw new L.ERR_BUFFER_OUT_OF_BOUNDS;throw new L.ERR_OUT_OF_RANGE(r||"offset",`>= ${r?1:0} and <= ${t}`,e)}D("ERR_BUFFER_OUT_OF_BOUNDS",(function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"}),RangeError),D("ERR_INVALID_ARG_TYPE",(function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`}),TypeError),D("ERR_OUT_OF_RANGE",(function(e,t,r){let n=`The value of "${e}" is out of range.`,i=r;return Number.isInteger(r)&&Math.abs(r)>2**32?i=P(String(r)):"bigint"==typeof r&&(i=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(i=P(i)),i+="n"),n+=` It must be ${t}. Received ${i}`,n}),RangeError);const K=/[^+/0-9A-Za-z-_]/g;function H(e,t){let r;t=t||1/0;const n=e.length;let i=null;const o=[];for(let s=0;s<n;++s){if(r=e.charCodeAt(s),r>55295&&r<57344){if(!i){if(r>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(s+1===n){(t-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(t-=3)>-1&&o.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;o.push(r)}else if(r<2048){if((t-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function W(e){return G.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(K,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function V(e,t,r,n){let i;for(i=0;i<n&&!(i+r>=t.length||i>=e.length);++i)t[i+r]=e[i];return i}function Y(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function J(e){return e!=e}const Z=function(){const e="0123456789abcdef",t=new Array(256);for(let r=0;r<16;++r){const n=16*r;for(let i=0;i<16;++i)t[n+i]=e[r]+e[i]}return t}();function X(e){return"undefined"==typeof BigInt?Q:e}function Q(){throw new Error("BigInt not supported")}})),V=function(e){return null!==e},Y=V,J=function(e){return"boolean"==typeof e},Z=function(e){return"number"==typeof e},X=function(e){return"string"==typeof e},Q=function(e){return null!==e&&"object"==typeof e},ee=function(e,t){var r=e,n=t;return r[n],i(r,["symbol"==typeof n?n:n+""])},te="0.23.0",re="webnative.auth_ucans",ne="webnative.auth_username";
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */function ie(){return o(this,void 0,void 0,(function(){return s(this,(function(e){return[2,v.getItem(ne).then((function(e){return e||null}))]}))}))}var oe=p((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.ECC_READ_ALG="ECDH",t.ECC_WRITE_ALG="ECDSA",t.RSA_READ_ALG="RSA-OAEP",t.RSA_WRITE_ALG="RSASSA-PKCS1-v1_5",t.SALT_LENGTH=128,t.DEFAULT_CRYPTOSYSTEM="ecc",t.DEFAULT_ECC_CURVE=y.EccCurve.P_256,t.DEFAULT_RSA_SIZE=y.RsaSize.B2048,t.DEFAULT_SYMM_ALG=y.SymmAlg.AES_CTR,t.DEFAULT_SYMM_LEN=y.SymmKeyLength.B256,t.DEFAULT_CTR_LEN=64,t.DEFAULT_HASH_ALG=y.HashAlg.SHA_256,t.DEFAULT_CHAR_SIZE=y.CharSize.B16,t.DEFAULT_STORE_NAME="keystore",t.DEFAULT_READ_KEY_NAME="read-key",t.DEFAULT_WRITE_KEY_NAME="write-key",t.default={ECC_READ_ALG:t.ECC_READ_ALG,ECC_WRITE_ALG:t.ECC_WRITE_ALG,RSA_READ_ALG:t.RSA_READ_ALG,RSA_WRITE_ALG:t.RSA_WRITE_ALG,SALT_LENGTH:t.SALT_LENGTH,DEFAULT_CRYPTOSYSTEM:t.DEFAULT_CRYPTOSYSTEM,DEFAULT_ECC_CURVE:t.DEFAULT_ECC_CURVE,DEFAULT_RSA_SIZE:t.DEFAULT_RSA_SIZE,DEFAULT_SYMM_ALG:t.DEFAULT_SYMM_ALG,DEFAULT_CTR_LEN:t.DEFAULT_CTR_LEN,DEFAULT_HASH_ALG:t.DEFAULT_HASH_ALG,DEFAULT_CHAR_SIZE:t.DEFAULT_CHAR_SIZE,DEFAULT_STORE_NAME:t.DEFAULT_STORE_NAME,DEFAULT_READ_KEY_NAME:t.DEFAULT_READ_KEY_NAME,DEFAULT_WRITE_KEY_NAME:t.DEFAULT_WRITE_KEY_NAME}})),se=f&&f.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{a(n.next(e))}catch(e){o(e)}}function u(e){try{a(n.throw(e))}catch(e){o(e)}}function a(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,u)}a((n=n.apply(e,t||[])).next())}))},ue=f&&f.__generator||function(e,t){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}};function ae(e){return se(this,void 0,void 0,(function(){return ue(this,(function(t){return[2,globalThis.crypto.subtle.generateKey({name:(null==e?void 0:e.alg)||oe.DEFAULT_SYMM_ALG,length:(null==e?void 0:e.length)||oe.DEFAULT_SYMM_LEN},!0,["encrypt","decrypt"])]}))}))}var ce=ae;function fe(e,t){return se(this,void 0,void 0,(function(){var r;return ue(this,(function(n){return r=g.default.base64ToArrBuf(e),[2,globalThis.crypto.subtle.importKey("raw",r,{name:(null==t?void 0:t.alg)||oe.DEFAULT_SYMM_ALG,length:(null==t?void 0:t.length)||oe.DEFAULT_SYMM_LEN},!0,["encrypt","decrypt"])]}))}))}var le=fe,he={makeKey:ae,importKey:fe},pe=Object.defineProperty({makeKey:ce,importKey:le,default:he},"__esModule",{value:!0}),de=f&&f.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{a(n.next(e))}catch(e){o(e)}}function u(e){try{a(n.throw(e))}catch(e){o(e)}}function a(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,u)}a((n=n.apply(e,t||[])).next())}))},ye=f&&f.__generator||function(e,t){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}};function ve(e,t,r){return de(this,void 0,void 0,(function(){var n,i,o,s,u,a;return ye(this,(function(c){switch(c.label){case 0:return n=g.default.normalizeUtf16ToBuf(e),"string"!=typeof t?[3,2]:[4,pe.default.importKey(t,r)];case 1:return o=c.sent(),[3,3];case 2:o=t,c.label=3;case 3:return i=o,s=(null==r?void 0:r.alg)||oe.DEFAULT_SYMM_ALG,u=(null==r?void 0:r.iv)||g.default.randomBuf(16),[4,globalThis.crypto.subtle.encrypt({name:s,iv:s===y.SymmAlg.AES_CTR?void 0:u,counter:s===y.SymmAlg.AES_CTR?new Uint8Array(u):void 0,length:s===y.SymmAlg.AES_CTR?oe.DEFAULT_CTR_LEN:void 0},i,n)];case 4:return a=c.sent(),[2,g.default.joinBufs(u,a)]}}))}))}var ge=ve;function me(e,t,r){return de(this,void 0,void 0,(function(){var n,i,o,s,u,a;return ye(this,(function(c){switch(c.label){case 0:return n=g.default.normalizeBase64ToBuf(e),"string"!=typeof t?[3,2]:[4,pe.default.importKey(t,r)];case 1:return o=c.sent(),[3,3];case 2:o=t,c.label=3;case 3:return i=o,s=(null==r?void 0:r.alg)||oe.DEFAULT_SYMM_ALG,u=n.slice(0,16),a=n.slice(16),[4,globalThis.crypto.subtle.decrypt({name:s,iv:s===y.SymmAlg.AES_CTR?void 0:u,counter:s===y.SymmAlg.AES_CTR?new Uint8Array(u):void 0,length:s===y.SymmAlg.AES_CTR?oe.DEFAULT_CTR_LEN:void 0},i,a)];case 4:return[2,c.sent()]}}))}))}var be=me;function _e(e,t,r){return de(this,void 0,void 0,(function(){var n;return ye(this,(function(i){switch(i.label){case 0:return[4,ve(e,t,r)];case 1:return n=i.sent(),[2,g.default.arrBufToBase64(n)]}}))}))}var we=_e;function ke(e,t,r){return de(this,void 0,void 0,(function(){var n;return ye(this,(function(i){switch(i.label){case 0:return[4,me(e,t,r)];case 1:return n=i.sent(),[2,g.default.arrBufToStr(n,16)]}}))}))}var Ee=ke;function Ae(e){return de(this,void 0,void 0,(function(){var t;return ye(this,(function(r){switch(r.label){case 0:return[4,globalThis.crypto.subtle.exportKey("raw",e)];case 1:return t=r.sent(),[2,g.default.arrBufToBase64(t)]}}))}))}var Se=Ae,xe={encryptBytes:ve,decryptBytes:me,encrypt:_e,decrypt:ke,exportKey:Ae},Ie=Object.defineProperty({encryptBytes:ge,decryptBytes:be,encrypt:we,decrypt:Ee,exportKey:Se,default:xe},"__esModule",{value:!0}),Te=p((function(e,t){var r=f&&f.__assign||function(){return(r=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),n(pe),n(Ie),t.default=r(r({},pe.default),Ie.default)})),Oe=l(Te),Be=p((function(e,t){e.exports=function(){
/*! *****************************************************************************
        Copyright (c) Microsoft Corporation. All rights reserved.
        Licensed under the Apache License, Version 2.0 (the "License"); you may not use
        this file except in compliance with the License. You may obtain a copy of the
        License at http://www.apache.org/licenses/LICENSE-2.0

        THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
        KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
        WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
        MERCHANTABLITY OR NON-INFRINGEMENT.

        See the Apache Version 2.0 License for specific language governing permissions
        and limitations under the License.
        ***************************************************************************** */
var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};function t(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}var r=function(){return(r=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function n(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{a(n.next(e))}catch(e){o(e)}}function u(e){try{a(n.throw(e))}catch(e){o(e)}}function a(e){e.done?i(e.value):new r((function(t){t(e.value)})).then(s,u)}a((n=n.apply(e,t||[])).next())}))}function i(e,t){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(e){return function(t){return a([e,t])}}function a(o){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}}!function(e){function t(){var t=this||self;t.globalThis=t,delete e.prototype._T_}"object"!=typeof globalThis&&(this?t():(e.defineProperty(e.prototype,"_T_",{configurable:!0,get:t}),_T_))}(Object);var o="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==f?f:"undefined"!=typeof self?self:{};function s(){throw new Error("Dynamic requires are not currently supported by rollup-plugin-commonjs")}function u(e,t){return e(t={exports:{}},t.exports),t.exports}var a,c,l,h,p,d,y,v,g=u((function(e,t){
/*!
            localForage -- Offline Storage, Improved
            Version 1.7.3
            https://localforage.github.io/localForage
            (c) 2013-2017 Mozilla, Apache License 2.0
        */
var r;r=function(){return function e(t,r,n){function i(u,a){if(!r[u]){if(!t[u]){var c="function"==typeof s&&s;if(!a&&c)return c(u,!0);if(o)return o(u,!0);var f=new Error("Cannot find module '"+u+"'");throw f.code="MODULE_NOT_FOUND",f}var l=r[u]={exports:{}};t[u][0].call(l.exports,(function(e){var r=t[u][1][e];return i(r||e)}),l,l.exports,e,t,r,n)}return r[u].exports}for(var o="function"==typeof s&&s,u=0;u<n.length;u++)i(n[u]);return i}({1:[function(e,t,r){(function(e){var r,n,i=e.MutationObserver||e.WebKitMutationObserver;if(i){var o=0,s=new i(f),u=e.document.createTextNode("");s.observe(u,{characterData:!0}),r=function(){u.data=o=++o%2}}else if(e.setImmediate||void 0===e.MessageChannel)r="document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var t=e.document.createElement("script");t.onreadystatechange=function(){f(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},e.document.documentElement.appendChild(t)}:function(){setTimeout(f,0)};else{var a=new e.MessageChannel;a.port1.onmessage=f,r=function(){a.port2.postMessage(0)}}var c=[];function f(){var e,t;n=!0;for(var r=c.length;r;){for(t=c,c=[],e=-1;++e<r;)t[e]();r=c.length}n=!1}function l(e){1!==c.push(e)||n||r()}t.exports=l}).call(this,void 0!==o?o:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(e,t,r){var n=e(1);function i(){}var o={},s=["REJECTED"],u=["FULFILLED"],a=["PENDING"];function c(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=a,this.queue=[],this.outcome=void 0,e!==i&&p(this,e)}function f(e,t,r){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof r&&(this.onRejected=r,this.callRejected=this.otherCallRejected)}function l(e,t,r){n((function(){var n;try{n=t(r)}catch(t){return o.reject(e,t)}n===e?o.reject(e,new TypeError("Cannot resolve promise with itself")):o.resolve(e,n)}))}function h(e){var t=e&&e.then;if(e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof t)return function(){t.apply(e,arguments)}}function p(e,t){var r=!1;function n(t){r||(r=!0,o.reject(e,t))}function i(t){r||(r=!0,o.resolve(e,t))}function s(){t(i,n)}var u=d(s);"error"===u.status&&n(u.value)}function d(e,t){var r={};try{r.value=e(t),r.status="success"}catch(e){r.status="error",r.value=e}return r}function y(e){return e instanceof this?e:o.resolve(new this(i),e)}function v(e){var t=new this(i);return o.reject(t,e)}function g(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var r=e.length,n=!1;if(!r)return this.resolve([]);for(var s=new Array(r),u=0,a=-1,c=new this(i);++a<r;)f(e[a],a);return c;function f(e,i){function a(e){s[i]=e,++u!==r||n||(n=!0,o.resolve(c,s))}t.resolve(e).then(a,(function(e){n||(n=!0,o.reject(c,e))}))}}function m(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var r=e.length,n=!1;if(!r)return this.resolve([]);for(var s=-1,u=new this(i);++s<r;)a(e[s]);return u;function a(e){t.resolve(e).then((function(e){n||(n=!0,o.resolve(u,e))}),(function(e){n||(n=!0,o.reject(u,e))}))}}t.exports=c,c.prototype.catch=function(e){return this.then(null,e)},c.prototype.then=function(e,t){if("function"!=typeof e&&this.state===u||"function"!=typeof t&&this.state===s)return this;var r=new this.constructor(i);return this.state!==a?l(r,this.state===u?e:t,this.outcome):this.queue.push(new f(r,e,t)),r},f.prototype.callFulfilled=function(e){o.resolve(this.promise,e)},f.prototype.otherCallFulfilled=function(e){l(this.promise,this.onFulfilled,e)},f.prototype.callRejected=function(e){o.reject(this.promise,e)},f.prototype.otherCallRejected=function(e){l(this.promise,this.onRejected,e)},o.resolve=function(e,t){var r=d(h,t);if("error"===r.status)return o.reject(e,r.value);var n=r.value;if(n)p(e,n);else{e.state=u,e.outcome=t;for(var i=-1,s=e.queue.length;++i<s;)e.queue[i].callFulfilled(t)}return e},o.reject=function(e,t){e.state=s,e.outcome=t;for(var r=-1,n=e.queue.length;++r<n;)e.queue[r].callRejected(t);return e},c.resolve=y,c.reject=v,c.all=g,c.race=m},{1:1}],3:[function(e,t,r){(function(t){"function"!=typeof t.Promise&&(t.Promise=e(2))}).call(this,void 0!==o?o:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{2:2}],4:[function(e,t,r){var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(){try{if("undefined"!=typeof indexedDB)return indexedDB;if("undefined"!=typeof webkitIndexedDB)return webkitIndexedDB;if("undefined"!=typeof mozIndexedDB)return mozIndexedDB;if("undefined"!=typeof OIndexedDB)return OIndexedDB;if("undefined"!=typeof msIndexedDB)return msIndexedDB}catch(e){return}}var s=o();function u(){try{if(!s)return!1;var e="undefined"!=typeof openDatabase&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),t="function"==typeof fetch&&-1!==fetch.toString().indexOf("[native code");return(!e||t)&&"undefined"!=typeof indexedDB&&"undefined"!=typeof IDBKeyRange}catch(e){return!1}}function a(e,t){e=e||[],t=t||{};try{return new Blob(e,t)}catch(i){if("TypeError"!==i.name)throw i;for(var r=new("undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),n=0;n<e.length;n+=1)r.append(e[n]);return r.getBlob(t.type)}}"undefined"==typeof Promise&&e(3);var c=Promise;function f(e,t){t&&e.then((function(e){t(null,e)}),(function(e){t(e)}))}function l(e,t,r){"function"==typeof t&&e.then(t),"function"==typeof r&&e.catch(r)}function h(e){return"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e=String(e)),e}function p(){if(arguments.length&&"function"==typeof arguments[arguments.length-1])return arguments[arguments.length-1]}var d="local-forage-detect-blob-support",y=void 0,v={},g=Object.prototype.toString,m="readonly",b="readwrite";function _(e){for(var t=e.length,r=new ArrayBuffer(t),n=new Uint8Array(r),i=0;i<t;i++)n[i]=e.charCodeAt(i);return r}function w(e){return new c((function(t){var r=e.transaction(d,b),n=a([""]);r.objectStore(d).put(n,"key"),r.onabort=function(e){e.preventDefault(),e.stopPropagation(),t(!1)},r.oncomplete=function(){var e=navigator.userAgent.match(/Chrome\/(\d+)/),r=navigator.userAgent.match(/Edge\//);t(r||!e||parseInt(e[1],10)>=43)}})).catch((function(){return!1}))}function k(e){return"boolean"==typeof y?c.resolve(y):w(e).then((function(e){return y=e}))}function E(e){var t=v[e.name],r={};r.promise=new c((function(e,t){r.resolve=e,r.reject=t})),t.deferredOperations.push(r),t.dbReady?t.dbReady=t.dbReady.then((function(){return r.promise})):t.dbReady=r.promise}function A(e){var t=v[e.name].deferredOperations.pop();if(t)return t.resolve(),t.promise}function S(e,t){var r=v[e.name].deferredOperations.pop();if(r)return r.reject(t),r.promise}function x(e,t){return new c((function(r,n){if(v[e.name]=v[e.name]||L(),e.db){if(!t)return r(e.db);E(e),e.db.close()}var i=[e.name];t&&i.push(e.version);var o=s.open.apply(s,i);t&&(o.onupgradeneeded=function(t){var r=o.result;try{r.createObjectStore(e.storeName),t.oldVersion<=1&&r.createObjectStore(d)}catch(r){if("ConstraintError"!==r.name)throw r;console.warn('The database "'+e.name+'" has been upgraded from version '+t.oldVersion+" to version "+t.newVersion+', but the storage "'+e.storeName+'" already exists.')}}),o.onerror=function(e){e.preventDefault(),n(o.error)},o.onsuccess=function(){r(o.result),A(e)}}))}function I(e){return x(e,!1)}function T(e){return x(e,!0)}function O(e,t){if(!e.db)return!0;var r=!e.db.objectStoreNames.contains(e.storeName),n=e.version<e.db.version,i=e.version>e.db.version;if(n&&(e.version!==t&&console.warn('The database "'+e.name+"\" can't be downgraded from version "+e.db.version+" to version "+e.version+"."),e.version=e.db.version),i||r){if(r){var o=e.db.version+1;o>e.version&&(e.version=o)}return!0}return!1}function B(e){return new c((function(t,r){var n=new FileReader;n.onerror=r,n.onloadend=function(r){var n=btoa(r.target.result||"");t({__local_forage_encoded_blob:!0,data:n,type:e.type})},n.readAsBinaryString(e)}))}function N(e){return a([_(atob(e.data))],{type:e.type})}function C(e){return e&&e.__local_forage_encoded_blob}function R(e){var t=this,r=t._initReady().then((function(){var e=v[t._dbInfo.name];if(e&&e.dbReady)return e.dbReady}));return l(r,e,e),r}function U(e){E(e);for(var t=v[e.name],r=t.forages,n=0;n<r.length;n++){var i=r[n];i._dbInfo.db&&(i._dbInfo.db.close(),i._dbInfo.db=null)}return e.db=null,I(e).then((function(t){return e.db=t,O(e)?T(e):t})).then((function(n){e.db=t.db=n;for(var i=0;i<r.length;i++)r[i]._dbInfo.db=n})).catch((function(t){throw S(e,t),t}))}function j(e,t,r,n){void 0===n&&(n=1);try{var i=e.db.transaction(e.storeName,t);r(null,i)}catch(i){if(n>0&&(!e.db||"InvalidStateError"===i.name||"NotFoundError"===i.name))return c.resolve().then((function(){if(!e.db||"NotFoundError"===i.name&&!e.db.objectStoreNames.contains(e.storeName)&&e.version<=e.db.version)return e.db&&(e.version=e.db.version+1),T(e)})).then((function(){return U(e).then((function(){j(e,t,r,n-1)}))})).catch(r);r(i)}}function L(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function D(e){var t=this,r={db:null};if(e)for(var n in e)r[n]=e[n];var i=v[r.name];i||(i=L(),v[r.name]=i),i.forages.push(t),t._initReady||(t._initReady=t.ready,t.ready=R);var o=[];function s(){return c.resolve()}for(var u=0;u<i.forages.length;u++){var a=i.forages[u];a!==t&&o.push(a._initReady().catch(s))}var f=i.forages.slice(0);return c.all(o).then((function(){return r.db=i.db,I(r)})).then((function(e){return r.db=e,O(r,t._defaultConfig.version)?T(r):e})).then((function(e){r.db=i.db=e,t._dbInfo=r;for(var n=0;n<f.length;n++){var o=f[n];o!==t&&(o._dbInfo.db=r.db,o._dbInfo.version=r.version)}}))}function P(e,t){var r=this;e=h(e);var n=new c((function(t,n){r.ready().then((function(){j(r._dbInfo,m,(function(i,o){if(i)return n(i);try{var s=o.objectStore(r._dbInfo.storeName).get(e);s.onsuccess=function(){var e=s.result;void 0===e&&(e=null),C(e)&&(e=N(e)),t(e)},s.onerror=function(){n(s.error)}}catch(e){n(e)}}))})).catch(n)}));return f(n,t),n}function M(e,t){var r=this,n=new c((function(t,n){r.ready().then((function(){j(r._dbInfo,m,(function(i,o){if(i)return n(i);try{var s=o.objectStore(r._dbInfo.storeName).openCursor(),u=1;s.onsuccess=function(){var r=s.result;if(r){var n=r.value;C(n)&&(n=N(n));var i=e(n,r.key,u++);void 0!==i?t(i):r.continue()}else t()},s.onerror=function(){n(s.error)}}catch(e){n(e)}}))})).catch(n)}));return f(n,t),n}function z(e,t,r){var n=this;e=h(e);var i=new c((function(r,i){var o;n.ready().then((function(){return o=n._dbInfo,"[object Blob]"===g.call(t)?k(o.db).then((function(e){return e?t:B(t)})):t})).then((function(t){j(n._dbInfo,b,(function(o,s){if(o)return i(o);try{var u=s.objectStore(n._dbInfo.storeName);null===t&&(t=void 0);var a=u.put(t,e);s.oncomplete=function(){void 0===t&&(t=null),r(t)},s.onabort=s.onerror=function(){var e=a.error?a.error:a.transaction.error;i(e)}}catch(e){i(e)}}))})).catch(i)}));return f(i,r),i}function F(e,t){var r=this;e=h(e);var n=new c((function(t,n){r.ready().then((function(){j(r._dbInfo,b,(function(i,o){if(i)return n(i);try{var s=o.objectStore(r._dbInfo.storeName).delete(e);o.oncomplete=function(){t()},o.onerror=function(){n(s.error)},o.onabort=function(){var e=s.error?s.error:s.transaction.error;n(e)}}catch(e){n(e)}}))})).catch(n)}));return f(n,t),n}function K(e){var t=this,r=new c((function(e,r){t.ready().then((function(){j(t._dbInfo,b,(function(n,i){if(n)return r(n);try{var o=i.objectStore(t._dbInfo.storeName).clear();i.oncomplete=function(){e()},i.onabort=i.onerror=function(){var e=o.error?o.error:o.transaction.error;r(e)}}catch(e){r(e)}}))})).catch(r)}));return f(r,e),r}function H(e){var t=this,r=new c((function(e,r){t.ready().then((function(){j(t._dbInfo,m,(function(n,i){if(n)return r(n);try{var o=i.objectStore(t._dbInfo.storeName).count();o.onsuccess=function(){e(o.result)},o.onerror=function(){r(o.error)}}catch(e){r(e)}}))})).catch(r)}));return f(r,e),r}function G(e,t){var r=this,n=new c((function(t,n){e<0?t(null):r.ready().then((function(){j(r._dbInfo,m,(function(i,o){if(i)return n(i);try{var s=o.objectStore(r._dbInfo.storeName),u=!1,a=s.openCursor();a.onsuccess=function(){var r=a.result;r?0===e||u?t(r.key):(u=!0,r.advance(e)):t(null)},a.onerror=function(){n(a.error)}}catch(e){n(e)}}))})).catch(n)}));return f(n,t),n}function $(e){var t=this,r=new c((function(e,r){t.ready().then((function(){j(t._dbInfo,m,(function(n,i){if(n)return r(n);try{var o=i.objectStore(t._dbInfo.storeName).openCursor(),s=[];o.onsuccess=function(){var t=o.result;t?(s.push(t.key),t.continue()):e(s)},o.onerror=function(){r(o.error)}}catch(e){r(e)}}))})).catch(r)}));return f(r,e),r}function q(e,t){t=p.apply(this,arguments);var r=this.config();(e="function"!=typeof e&&e||{}).name||(e.name=e.name||r.name,e.storeName=e.storeName||r.storeName);var n,i=this;if(e.name){var o=e.name===r.name&&i._dbInfo.db?c.resolve(i._dbInfo.db):I(e).then((function(t){var r=v[e.name],n=r.forages;r.db=t;for(var i=0;i<n.length;i++)n[i]._dbInfo.db=t;return t}));n=e.storeName?o.then((function(t){if(t.objectStoreNames.contains(e.storeName)){var r=t.version+1;E(e);var n=v[e.name],i=n.forages;t.close();for(var o=0;o<i.length;o++){var u=i[o];u._dbInfo.db=null,u._dbInfo.version=r}return new c((function(t,n){var i=s.open(e.name,r);i.onerror=function(e){i.result.close(),n(e)},i.onupgradeneeded=function(){i.result.deleteObjectStore(e.storeName)},i.onsuccess=function(){var e=i.result;e.close(),t(e)}})).then((function(e){n.db=e;for(var t=0;t<i.length;t++){var r=i[t];r._dbInfo.db=e,A(r._dbInfo)}})).catch((function(t){throw(S(e,t)||c.resolve()).catch((function(){})),t}))}})):o.then((function(t){E(e);var r=v[e.name],n=r.forages;t.close();for(var i=0;i<n.length;i++)n[i]._dbInfo.db=null;return new c((function(t,r){var n=s.deleteDatabase(e.name);n.onerror=n.onblocked=function(e){var t=n.result;t&&t.close(),r(e)},n.onsuccess=function(){var e=n.result;e&&e.close(),t(e)}})).then((function(e){r.db=e;for(var t=0;t<n.length;t++)A(n[t]._dbInfo)})).catch((function(t){throw(S(e,t)||c.resolve()).catch((function(){})),t}))}))}else n=c.reject("Invalid arguments");return f(n,t),n}var W={_driver:"asyncStorage",_initStorage:D,_support:u(),iterate:M,getItem:P,setItem:z,removeItem:F,clear:K,length:H,key:G,keys:$,dropInstance:q};function V(){return"function"==typeof openDatabase}var Y="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",J="~~local_forage_type~",Z=/^~~local_forage_type~([^~]+)~/,X="__lfsc__:",Q=X.length,ee="arbf",te="blob",re="si08",ne="ui08",ie="uic8",oe="si16",se="si32",ue="ur16",ae="ui32",ce="fl32",fe="fl64",le=Q+ee.length,he=Object.prototype.toString;function pe(e){var t,r,n,i,o,s=.75*e.length,u=e.length,a=0;"="===e[e.length-1]&&(s--,"="===e[e.length-2]&&s--);var c=new ArrayBuffer(s),f=new Uint8Array(c);for(t=0;t<u;t+=4)r=Y.indexOf(e[t]),n=Y.indexOf(e[t+1]),i=Y.indexOf(e[t+2]),o=Y.indexOf(e[t+3]),f[a++]=r<<2|n>>4,f[a++]=(15&n)<<4|i>>2,f[a++]=(3&i)<<6|63&o;return c}function de(e){var t,r=new Uint8Array(e),n="";for(t=0;t<r.length;t+=3)n+=Y[r[t]>>2],n+=Y[(3&r[t])<<4|r[t+1]>>4],n+=Y[(15&r[t+1])<<2|r[t+2]>>6],n+=Y[63&r[t+2]];return r.length%3==2?n=n.substring(0,n.length-1)+"=":r.length%3==1&&(n=n.substring(0,n.length-2)+"=="),n}function ye(e,t){var r="";if(e&&(r=he.call(e)),e&&("[object ArrayBuffer]"===r||e.buffer&&"[object ArrayBuffer]"===he.call(e.buffer))){var n,i=X;e instanceof ArrayBuffer?(n=e,i+=ee):(n=e.buffer,"[object Int8Array]"===r?i+=re:"[object Uint8Array]"===r?i+=ne:"[object Uint8ClampedArray]"===r?i+=ie:"[object Int16Array]"===r?i+=oe:"[object Uint16Array]"===r?i+=ue:"[object Int32Array]"===r?i+=se:"[object Uint32Array]"===r?i+=ae:"[object Float32Array]"===r?i+=ce:"[object Float64Array]"===r?i+=fe:t(new Error("Failed to get type for BinaryArray"))),t(i+de(n))}else if("[object Blob]"===r){var o=new FileReader;o.onload=function(){var r=J+e.type+"~"+de(this.result);t(X+te+r)},o.readAsArrayBuffer(e)}else try{t(JSON.stringify(e))}catch(r){console.error("Couldn't convert value into a JSON string: ",e),t(null,r)}}function ve(e){if(e.substring(0,Q)!==X)return JSON.parse(e);var t,r=e.substring(le),n=e.substring(Q,le);if(n===te&&Z.test(r)){var i=r.match(Z);t=i[1],r=r.substring(i[0].length)}var o=pe(r);switch(n){case ee:return o;case te:return a([o],{type:t});case re:return new Int8Array(o);case ne:return new Uint8Array(o);case ie:return new Uint8ClampedArray(o);case oe:return new Int16Array(o);case ue:return new Uint16Array(o);case se:return new Int32Array(o);case ae:return new Uint32Array(o);case ce:return new Float32Array(o);case fe:return new Float64Array(o);default:throw new Error("Unkown type: "+n)}}var ge={serialize:ye,deserialize:ve,stringToBuffer:pe,bufferToString:de};function me(e,t,r,n){e.executeSql("CREATE TABLE IF NOT EXISTS "+t.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],r,n)}function be(e){var t=this,r={db:null};if(e)for(var n in e)r[n]="string"!=typeof e[n]?e[n].toString():e[n];var i=new c((function(e,n){try{r.db=openDatabase(r.name,String(r.version),r.description,r.size)}catch(e){return n(e)}r.db.transaction((function(i){me(i,r,(function(){t._dbInfo=r,e()}),(function(e,t){n(t)}))}),n)}));return r.serializer=ge,i}function _e(e,t,r,n,i,o){e.executeSql(r,n,i,(function(e,s){s.code===s.SYNTAX_ERR?e.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[t.storeName],(function(e,u){u.rows.length?o(e,s):me(e,t,(function(){e.executeSql(r,n,i,o)}),o)}),o):o(e,s)}),o)}function we(e,t){var r=this;e=h(e);var n=new c((function(t,n){r.ready().then((function(){var i=r._dbInfo;i.db.transaction((function(r){_e(r,i,"SELECT * FROM "+i.storeName+" WHERE key = ? LIMIT 1",[e],(function(e,r){var n=r.rows.length?r.rows.item(0).value:null;n&&(n=i.serializer.deserialize(n)),t(n)}),(function(e,t){n(t)}))}))})).catch(n)}));return f(n,t),n}function ke(e,t){var r=this,n=new c((function(t,n){r.ready().then((function(){var i=r._dbInfo;i.db.transaction((function(r){_e(r,i,"SELECT * FROM "+i.storeName,[],(function(r,n){for(var o=n.rows,s=o.length,u=0;u<s;u++){var a=o.item(u),c=a.value;if(c&&(c=i.serializer.deserialize(c)),void 0!==(c=e(c,a.key,u+1)))return void t(c)}t()}),(function(e,t){n(t)}))}))})).catch(n)}));return f(n,t),n}function Ee(e,t,r,n){var i=this;e=h(e);var o=new c((function(o,s){i.ready().then((function(){void 0===t&&(t=null);var u=t,a=i._dbInfo;a.serializer.serialize(t,(function(t,c){c?s(c):a.db.transaction((function(r){_e(r,a,"INSERT OR REPLACE INTO "+a.storeName+" (key, value) VALUES (?, ?)",[e,t],(function(){o(u)}),(function(e,t){s(t)}))}),(function(t){if(t.code===t.QUOTA_ERR){if(n>0)return void o(Ee.apply(i,[e,u,r,n-1]));s(t)}}))}))})).catch(s)}));return f(o,r),o}function Ae(e,t,r){return Ee.apply(this,[e,t,r,1])}function Se(e,t){var r=this;e=h(e);var n=new c((function(t,n){r.ready().then((function(){var i=r._dbInfo;i.db.transaction((function(r){_e(r,i,"DELETE FROM "+i.storeName+" WHERE key = ?",[e],(function(){t()}),(function(e,t){n(t)}))}))})).catch(n)}));return f(n,t),n}function xe(e){var t=this,r=new c((function(e,r){t.ready().then((function(){var n=t._dbInfo;n.db.transaction((function(t){_e(t,n,"DELETE FROM "+n.storeName,[],(function(){e()}),(function(e,t){r(t)}))}))})).catch(r)}));return f(r,e),r}function Ie(e){var t=this,r=new c((function(e,r){t.ready().then((function(){var n=t._dbInfo;n.db.transaction((function(t){_e(t,n,"SELECT COUNT(key) as c FROM "+n.storeName,[],(function(t,r){var n=r.rows.item(0).c;e(n)}),(function(e,t){r(t)}))}))})).catch(r)}));return f(r,e),r}function Te(e,t){var r=this,n=new c((function(t,n){r.ready().then((function(){var i=r._dbInfo;i.db.transaction((function(r){_e(r,i,"SELECT key FROM "+i.storeName+" WHERE id = ? LIMIT 1",[e+1],(function(e,r){var n=r.rows.length?r.rows.item(0).key:null;t(n)}),(function(e,t){n(t)}))}))})).catch(n)}));return f(n,t),n}function Oe(e){var t=this,r=new c((function(e,r){t.ready().then((function(){var n=t._dbInfo;n.db.transaction((function(t){_e(t,n,"SELECT key FROM "+n.storeName,[],(function(t,r){for(var n=[],i=0;i<r.rows.length;i++)n.push(r.rows.item(i).key);e(n)}),(function(e,t){r(t)}))}))})).catch(r)}));return f(r,e),r}function Be(e){return new c((function(t,r){e.transaction((function(n){n.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],(function(r,n){for(var i=[],o=0;o<n.rows.length;o++)i.push(n.rows.item(o).name);t({db:e,storeNames:i})}),(function(e,t){r(t)}))}),(function(e){r(e)}))}))}function Ne(e,t){t=p.apply(this,arguments);var r=this.config();(e="function"!=typeof e&&e||{}).name||(e.name=e.name||r.name,e.storeName=e.storeName||r.storeName);var n,i=this;return f(n=e.name?new c((function(t){var n;n=e.name===r.name?i._dbInfo.db:openDatabase(e.name,"","",0),e.storeName?t({db:n,storeNames:[e.storeName]}):t(Be(n))})).then((function(e){return new c((function(t,r){e.db.transaction((function(n){function i(e){return new c((function(t,r){n.executeSql("DROP TABLE IF EXISTS "+e,[],(function(){t()}),(function(e,t){r(t)}))}))}for(var o=[],s=0,u=e.storeNames.length;s<u;s++)o.push(i(e.storeNames[s]));c.all(o).then((function(){t()})).catch((function(e){r(e)}))}),(function(e){r(e)}))}))})):c.reject("Invalid arguments"),t),n}var Ce={_driver:"webSQLStorage",_initStorage:be,_support:V(),iterate:ke,getItem:we,setItem:Ae,removeItem:Se,clear:xe,length:Ie,key:Te,keys:Oe,dropInstance:Ne};function Re(){try{return"undefined"!=typeof localStorage&&"setItem"in localStorage&&!!localStorage.setItem}catch(e){return!1}}function Ue(e,t){var r=e.name+"/";return e.storeName!==t.storeName&&(r+=e.storeName+"/"),r}function je(){var e="_localforage_support_test";try{return localStorage.setItem(e,!0),localStorage.removeItem(e),!1}catch(e){return!0}}function Le(){return!je()||localStorage.length>0}function De(e){var t=this,r={};if(e)for(var n in e)r[n]=e[n];return r.keyPrefix=Ue(e,t._defaultConfig),Le()?(t._dbInfo=r,r.serializer=ge,c.resolve()):c.reject()}function Pe(e){var t=this,r=t.ready().then((function(){for(var e=t._dbInfo.keyPrefix,r=localStorage.length-1;r>=0;r--){var n=localStorage.key(r);0===n.indexOf(e)&&localStorage.removeItem(n)}}));return f(r,e),r}function Me(e,t){var r=this;e=h(e);var n=r.ready().then((function(){var t=r._dbInfo,n=localStorage.getItem(t.keyPrefix+e);return n&&(n=t.serializer.deserialize(n)),n}));return f(n,t),n}function ze(e,t){var r=this,n=r.ready().then((function(){for(var t=r._dbInfo,n=t.keyPrefix,i=n.length,o=localStorage.length,s=1,u=0;u<o;u++){var a=localStorage.key(u);if(0===a.indexOf(n)){var c=localStorage.getItem(a);if(c&&(c=t.serializer.deserialize(c)),void 0!==(c=e(c,a.substring(i),s++)))return c}}}));return f(n,t),n}function Fe(e,t){var r=this,n=r.ready().then((function(){var t,n=r._dbInfo;try{t=localStorage.key(e)}catch(e){t=null}return t&&(t=t.substring(n.keyPrefix.length)),t}));return f(n,t),n}function Ke(e){var t=this,r=t.ready().then((function(){for(var e=t._dbInfo,r=localStorage.length,n=[],i=0;i<r;i++){var o=localStorage.key(i);0===o.indexOf(e.keyPrefix)&&n.push(o.substring(e.keyPrefix.length))}return n}));return f(r,e),r}function He(e){var t=this.keys().then((function(e){return e.length}));return f(t,e),t}function Ge(e,t){var r=this;e=h(e);var n=r.ready().then((function(){var t=r._dbInfo;localStorage.removeItem(t.keyPrefix+e)}));return f(n,t),n}function $e(e,t,r){var n=this;e=h(e);var i=n.ready().then((function(){void 0===t&&(t=null);var r=t;return new c((function(i,o){var s=n._dbInfo;s.serializer.serialize(t,(function(t,n){if(n)o(n);else try{localStorage.setItem(s.keyPrefix+e,t),i(r)}catch(e){"QuotaExceededError"!==e.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==e.name||o(e),o(e)}}))}))}));return f(i,r),i}function qe(e,t){if(t=p.apply(this,arguments),!(e="function"!=typeof e&&e||{}).name){var r=this.config();e.name=e.name||r.name,e.storeName=e.storeName||r.storeName}var n,i=this;return f(n=e.name?new c((function(t){e.storeName?t(Ue(e,i._defaultConfig)):t(e.name+"/")})).then((function(e){for(var t=localStorage.length-1;t>=0;t--){var r=localStorage.key(t);0===r.indexOf(e)&&localStorage.removeItem(r)}})):c.reject("Invalid arguments"),t),n}var We={_driver:"localStorageWrapper",_initStorage:De,_support:Re(),iterate:ze,getItem:Me,setItem:$e,removeItem:Ge,clear:Pe,length:He,key:Fe,keys:Ke,dropInstance:qe},Ve=function(e,t){return e===t||"number"==typeof e&&"number"==typeof t&&isNaN(e)&&isNaN(t)},Ye=function(e,t){for(var r=e.length,n=0;n<r;){if(Ve(e[n],t))return!0;n++}return!1},Je=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},Ze={},Xe={},Qe={INDEXEDDB:W,WEBSQL:Ce,LOCALSTORAGE:We},et=[Qe.INDEXEDDB._driver,Qe.WEBSQL._driver,Qe.LOCALSTORAGE._driver],tt=["dropInstance"],rt=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(tt),nt={description:"",driver:et.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function it(e,t){e[t]=function(){var r=arguments;return e.ready().then((function(){return e[t].apply(e,r)}))}}function ot(){for(var e=1;e<arguments.length;e++){var t=arguments[e];if(t)for(var r in t)t.hasOwnProperty(r)&&(Je(t[r])?arguments[0][r]=t[r].slice():arguments[0][r]=t[r])}return arguments[0]}var st=new(function(){function e(t){for(var r in i(this,e),Qe)if(Qe.hasOwnProperty(r)){var n=Qe[r],o=n._driver;this[r]=o,Ze[o]||this.defineDriver(n)}this._defaultConfig=ot({},nt),this._config=ot({},this._defaultConfig,t),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch((function(){}))}return e.prototype.config=function(e){if("object"===(void 0===e?"undefined":n(e))){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var t in e){if("storeName"===t&&(e[t]=e[t].replace(/\W/g,"_")),"version"===t&&"number"!=typeof e[t])return new Error("Database version must be a number.");this._config[t]=e[t]}return!("driver"in e)||!e.driver||this.setDriver(this._config.driver)}return"string"==typeof e?this._config[e]:this._config},e.prototype.defineDriver=function(e,t,r){var n=new c((function(t,r){try{var n=e._driver,i=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!e._driver)return void r(i);for(var o=rt.concat("_initStorage"),s=0,u=o.length;s<u;s++){var a=o[s];if((!Ye(tt,a)||e[a])&&"function"!=typeof e[a])return void r(i)}!function(){for(var t=function(e){return function(){var t=new Error("Method "+e+" is not implemented by the current driver"),r=c.reject(t);return f(r,arguments[arguments.length-1]),r}},r=0,n=tt.length;r<n;r++){var i=tt[r];e[i]||(e[i]=t(i))}}();var l=function(r){Ze[n]&&console.info("Redefining LocalForage driver: "+n),Ze[n]=e,Xe[n]=r,t()};"_support"in e?e._support&&"function"==typeof e._support?e._support().then(l,r):l(!!e._support):l(!0)}catch(e){r(e)}}));return l(n,t,r),n},e.prototype.driver=function(){return this._driver||null},e.prototype.getDriver=function(e,t,r){var n=Ze[e]?c.resolve(Ze[e]):c.reject(new Error("Driver not found."));return l(n,t,r),n},e.prototype.getSerializer=function(e){var t=c.resolve(ge);return l(t,e),t},e.prototype.ready=function(e){var t=this,r=t._driverSet.then((function(){return null===t._ready&&(t._ready=t._initDriver()),t._ready}));return l(r,e,e),r},e.prototype.setDriver=function(e,t,r){var n=this;Je(e)||(e=[e]);var i=this._getSupportedDrivers(e);function o(){n._config.driver=n.driver()}function s(e){return n._extend(e),o(),n._ready=n._initStorage(n._config),n._ready}function u(e){return function(){var t=0;function r(){for(;t<e.length;){var i=e[t];return t++,n._dbInfo=null,n._ready=null,n.getDriver(i).then(s).catch(r)}o();var u=new Error("No available storage method found.");return n._driverSet=c.reject(u),n._driverSet}return r()}}var a=null!==this._driverSet?this._driverSet.catch((function(){return c.resolve()})):c.resolve();return this._driverSet=a.then((function(){var e=i[0];return n._dbInfo=null,n._ready=null,n.getDriver(e).then((function(e){n._driver=e._driver,o(),n._wrapLibraryMethodsWithReady(),n._initDriver=u(i)}))})).catch((function(){o();var e=new Error("No available storage method found.");return n._driverSet=c.reject(e),n._driverSet})),l(this._driverSet,t,r),this._driverSet},e.prototype.supports=function(e){return!!Xe[e]},e.prototype._extend=function(e){ot(this,e)},e.prototype._getSupportedDrivers=function(e){for(var t=[],r=0,n=e.length;r<n;r++){var i=e[r];this.supports(i)&&t.push(i)}return t},e.prototype._wrapLibraryMethodsWithReady=function(){for(var e=0,t=rt.length;e<t;e++)it(this,rt[e])},e.prototype.createInstance=function(t){return new e(t)},e}());t.exports=st},{3:3}]},{},[4])(4)},e.exports=r()}));(function(e){e.ECC="ecc",e.RSA="rsa"})(a||(a={})),function(e){e.P_256="P-256",e.P_384="P-384",e.P_521="P-521"}(c||(c={})),function(e){e[e.B1024=1024]="B1024",e[e.B2048=2048]="B2048",e[e.B4096=4096]="B4096"}(l||(l={})),function(e){e.AES_CTR="AES-CTR",e.AES_CBC="AES-CBC"}(h||(h={})),function(e){e[e.B128=128]="B128",e[e.B192=192]="B192",e[e.B256=256]="B256"}(p||(p={})),function(e){e.SHA_1="SHA-1",e.SHA_256="SHA-256",e.SHA_384="SHA-384",e.SHA_512="SHA-512"}(d||(d={})),function(e){e[e.B8=8]="B8",e[e.B16=16]="B16"}(y||(y={})),function(e){e.Read="read",e.Write="write"}(v||(v={}));var m=Object.freeze({__proto__:null,get CryptoSystem(){return a},get EccCurve(){return c},get RsaSize(){return l},get SymmAlg(){return h},get SymmKeyLength(){return p},get HashAlg(){return d},get CharSize(){return y},get KeyUse(){return v}}),b=new Error("Key does not exist. Make sure you properly instantiated the keystore."),_=new Error("Retrieved a symmetric key when an asymmetric keypair was expected. Please use a different key name."),w=new Error("Retrieved an asymmetric keypair when an symmetric key was expected. Please use a different key name."),k=new Error("ECC is not enabled for this browser. Please use RSA instead."),E=new Error("Cryptosystem not supported. Please use ECC or RSA"),A=new Error("Invalid key use. Please use 'read' or 'write");function S(e){if(!e||null===e)throw b;if(void 0===e.privateKey)throw _;return e}function x(e){if(!e||null===e)throw b;if(void 0!==e.privateKey||void 0===e.algorithm)throw w;return e}function I(e){O(e,[a.ECC,a.RSA],E)}function T(e){O(e,[v.Read,v.Write],A)}function O(e,t,r){if(!t.some((function(t){return t===e})))throw r}function B(e){return g.createInstance({name:e})}function N(e,t,r){return void 0===r&&(r=g),n(this,void 0,void 0,(function(){var n;return i(this,(function(i){switch(i.label){case 0:return[4,L(e,r)];case 1:return i.sent()?[2]:[4,t()];case 2:return n=i.sent(),[4,C(e,n,r)];case 3:return i.sent(),[2]}}))}))}function C(e,t,r){return void 0===r&&(r=g),n(this,void 0,void 0,(function(){return i(this,(function(n){return[2,r.setItem(e,t)]}))}))}function R(e,t){return void 0===t&&(t=g),n(this,void 0,void 0,(function(){return i(this,(function(r){return[2,j(e,S,t)]}))}))}function U(e,t){return void 0===t&&(t=g),n(this,void 0,void 0,(function(){return i(this,(function(r){return[2,j(e,x,t)]}))}))}function j(e,t,r){return void 0===r&&(r=g),n(this,void 0,void 0,(function(){var n;return i(this,(function(i){switch(i.label){case 0:return[4,r.getItem(e)];case 1:return[2,null===(n=i.sent())?null:t(n)]}}))}))}function L(e,t){return void 0===t&&(t=g),n(this,void 0,void 0,(function(){return i(this,(function(r){switch(r.label){case 0:return[4,t.getItem(e)];case 1:return[2,null!==r.sent()]}}))}))}function D(e,t){return void 0===t&&(t=g),n(this,void 0,void 0,(function(){return i(this,(function(r){return[2,t.removeItem(e)]}))}))}function P(e){return n(this,void 0,void 0,(function(){return i(this,(function(t){return[2,e.dropInstance()]}))}))}function M(e){return n(this,void 0,void 0,(function(){return i(this,(function(t){return e?[2,P(e)]:[2,g.clear()]}))}))}var z={createStore:B,createIfDoesNotExist:N,put:C,getKeypair:R,getKey:U,exists:L,rm:D,dropStore:P,clear:M},F=Object.freeze({__proto__:null,createStore:B,createIfDoesNotExist:N,put:C,getKeypair:R,getKey:U,get:j,exists:L,rm:D,dropStore:P,clear:M,default:z});function K(e,t){var r=8===t?new Uint8Array(e):new Uint16Array(e);return Array.from(r).map((function(e){return String.fromCharCode(e)})).join("")}function H(e){var t=K(e,8);return globalThis.btoa(t)}function G(e,t){for(var r=8===t?new Uint8Array(e.length):new Uint16Array(e.length),n=0,i=e.length;n<i;n++)r[n]=e.charCodeAt(n);return r.buffer}function $(e){return G(globalThis.atob(e),8)}function q(){return new Uint8Array([1,0,1])}function W(e){var t=new Uint8Array(e);return globalThis.crypto.getRandomValues(t),t.buffer}function V(e,t){var r=new Uint8Array(e),n=new Uint8Array(t),i=new Uint8Array(r.length+n.length);return i.set(r),i.set(n,r.length),i.buffer}var Y=function(e){return Q(e,(function(e){return G(e,y.B8)}))},J=function(e){return Q(e,(function(e){return G(e,y.B16)}))},Z=function(e){return Q(e,$)},X=function(e,t){switch(t){case 8:return Y(e);default:return J(e)}},Q=function(e,t){if("string"==typeof e)return t(e);if("object"==typeof e&&void 0!==e.byteLength)return new Uint8Array(e).buffer;throw new Error("Improper value. Must be a string, ArrayBuffer, Uint8Array")};function ee(e){return n(this,void 0,void 0,(function(){return i(this,(function(t){return[2,new Promise((function(t){var r=new MessageChannel,n=r.port1;r.port2.onmessage=function(e){return t(e.data)},n.postMessage(e)}))]}))}))}var te={arrBufToStr:K,arrBufToBase64:H,strToArrBuf:G,base64ToArrBuf:$,publicExponent:q,randomBuf:W,joinBufs:V,normalizeUtf8ToBuf:Y,normalizeUtf16ToBuf:J,normalizeBase64ToBuf:Z,normalizeToBuf:Q,structuralClone:ee},re=Object.freeze({__proto__:null,arrBufToStr:K,arrBufToBase64:H,strToArrBuf:G,base64ToArrBuf:$,publicExponent:q,randomBuf:W,joinBufs:V,normalizeUtf8ToBuf:Y,normalizeUtf16ToBuf:J,normalizeBase64ToBuf:Z,normalizeUnicodeToBuf:X,normalizeToBuf:Q,structuralClone:ee,default:te}),ne="ECDH",ie="ECDSA",oe="RSA-OAEP",se="RSASSA-PKCS1-v1_5",ue=128,ae="ecc",ce=c.P_256,fe=l.B2048,le=h.AES_CTR,he=p.B256,pe=64,de=d.SHA_256,ye=y.B16,ve="keystore",ge="read-key",me="write-key",be={ECC_READ_ALG:ne,ECC_WRITE_ALG:ie,RSA_READ_ALG:oe,RSA_WRITE_ALG:se,SALT_LENGTH:ue,DEFAULT_CRYPTOSYSTEM:ae,DEFAULT_ECC_CURVE:ce,DEFAULT_RSA_SIZE:fe,DEFAULT_SYMM_ALG:le,DEFAULT_CTR_LEN:pe,DEFAULT_HASH_ALG:de,DEFAULT_CHAR_SIZE:ye,DEFAULT_STORE_NAME:ve,DEFAULT_READ_KEY_NAME:ge,DEFAULT_WRITE_KEY_NAME:me},_e=Object.freeze({__proto__:null,ECC_READ_ALG:ne,ECC_WRITE_ALG:ie,RSA_READ_ALG:oe,RSA_WRITE_ALG:se,SALT_LENGTH:ue,DEFAULT_CRYPTOSYSTEM:ae,DEFAULT_ECC_CURVE:ce,DEFAULT_RSA_SIZE:fe,DEFAULT_SYMM_ALG:le,DEFAULT_SYMM_LEN:he,DEFAULT_CTR_LEN:pe,DEFAULT_HASH_ALG:de,DEFAULT_CHAR_SIZE:ye,DEFAULT_STORE_NAME:ve,DEFAULT_READ_KEY_NAME:ge,DEFAULT_WRITE_KEY_NAME:me,default:be});function we(e,t){return n(this,void 0,void 0,(function(){var r,n;return i(this,(function(i){return T(t),r=t===v.Read?ne:ie,n=t===v.Read?["deriveKey","deriveBits"]:["sign","verify"],[2,globalThis.crypto.subtle.generateKey({name:r,namedCurve:e},!1,n)]}))}))}function ke(e,t,r){return n(this,void 0,void 0,(function(){var n,o,s;return i(this,(function(i){return T(r),n=r===v.Read?ne:ie,o=r===v.Read?[]:["verify"],s=te.base64ToArrBuf(e),[2,globalThis.crypto.subtle.importKey("raw",s,{name:n,namedCurve:t},!0,o)]}))}))}var Ee={makeKeypair:we,importPublicKey:ke};function Ae(e){return n(this,void 0,void 0,(function(){return i(this,(function(t){return[2,globalThis.crypto.subtle.generateKey({name:(null==e?void 0:e.alg)||le,length:(null==e?void 0:e.length)||he},!0,["encrypt","decrypt"])]}))}))}function Se(e,t){return n(this,void 0,void 0,(function(){var r;return i(this,(function(n){return r=te.base64ToArrBuf(e),[2,globalThis.crypto.subtle.importKey("raw",r,{name:(null==t?void 0:t.alg)||le,length:(null==t?void 0:t.length)||he},!0,["encrypt","decrypt"])]}))}))}var xe={makeKey:Ae,importKey:Se};function Ie(e,t,r){return n(this,void 0,void 0,(function(){var n,o,s,u,a,c;return i(this,(function(i){switch(i.label){case 0:return n=te.normalizeUtf16ToBuf(e),"string"!=typeof t?[3,2]:[4,xe.importKey(t,r)];case 1:return s=i.sent(),[3,3];case 2:s=t,i.label=3;case 3:return o=s,u=(null==r?void 0:r.alg)||le,a=(null==r?void 0:r.iv)||te.randomBuf(16),[4,globalThis.crypto.subtle.encrypt({name:u,iv:u===h.AES_CTR?void 0:a,counter:u===h.AES_CTR?new Uint8Array(a):void 0,length:u===h.AES_CTR?pe:void 0},o,n)];case 4:return c=i.sent(),[2,te.joinBufs(a,c)]}}))}))}function Te(e,t,r){return n(this,void 0,void 0,(function(){var n,o,s,u,a,c;return i(this,(function(i){switch(i.label){case 0:return n=te.normalizeBase64ToBuf(e),"string"!=typeof t?[3,2]:[4,xe.importKey(t,r)];case 1:return s=i.sent(),[3,3];case 2:s=t,i.label=3;case 3:return o=s,u=(null==r?void 0:r.alg)||le,a=n.slice(0,16),c=n.slice(16),[4,globalThis.crypto.subtle.decrypt({name:u,iv:u===h.AES_CTR?void 0:a,counter:u===h.AES_CTR?new Uint8Array(a):void 0,length:u===h.AES_CTR?pe:void 0},o,c)];case 4:return[2,i.sent()]}}))}))}function Oe(e,t,r){return n(this,void 0,void 0,(function(){var n;return i(this,(function(i){switch(i.label){case 0:return[4,Ie(e,t,r)];case 1:return n=i.sent(),[2,te.arrBufToBase64(n)]}}))}))}function Be(e,t,r){return n(this,void 0,void 0,(function(){var n;return i(this,(function(i){switch(i.label){case 0:return[4,Te(e,t,r)];case 1:return n=i.sent(),[2,te.arrBufToStr(n,16)]}}))}))}function Ne(e){return n(this,void 0,void 0,(function(){var t;return i(this,(function(r){switch(r.label){case 0:return[4,globalThis.crypto.subtle.exportKey("raw",e)];case 1:return t=r.sent(),[2,te.arrBufToBase64(t)]}}))}))}var Ce={encryptBytes:Ie,decryptBytes:Te,encrypt:Oe,decrypt:Be,exportKey:Ne},Re=r(r({},xe),Ce);function Ue(e,t,r,o){return void 0===r&&(r=ye),void 0===o&&(o=de),n(this,void 0,void 0,(function(){return i(this,(function(n){return[2,globalThis.crypto.subtle.sign({name:ie,hash:{name:o}},t,X(e,r))]}))}))}function je(e,t,r,o,s,u){return void 0===o&&(o=ye),void 0===s&&(s=ce),void 0===u&&(u=de),n(this,void 0,void 0,(function(){var n,a,c,f;return i(this,(function(i){switch(i.label){case 0:return a=(n=globalThis.crypto.subtle).verify,c=[{name:ie,hash:{name:u}}],"string"!=typeof r?[3,2]:[4,Ee.importPublicKey(r,s,v.Write)];case 1:return f=i.sent(),[3,3];case 2:f=r,i.label=3;case 3:return[2,a.apply(n,c.concat([f,Z(t),X(e,o)]))]}}))}))}function Le(e,t,r,o,s,u){return void 0===o&&(o=ye),void 0===s&&(s=ce),n(this,void 0,void 0,(function(){var n,a;return i(this,(function(i){switch(i.label){case 0:return"string"!=typeof r?[3,2]:[4,Ee.importPublicKey(r,s,v.Read)];case 1:return n=i.sent(),[3,3];case 2:n=r,i.label=3;case 3:return[4,Me(t,n,u)];case 4:return a=i.sent(),[2,Re.encryptBytes(X(e,o),a,u)]}}))}))}function De(e,t,r,o,s){return void 0===o&&(o=ce),n(this,void 0,void 0,(function(){var n,u;return i(this,(function(i){switch(i.label){case 0:return"string"!=typeof r?[3,2]:[4,Ee.importPublicKey(r,o,v.Read)];case 1:return n=i.sent(),[3,3];case 2:n=r,i.label=3;case 3:return[4,Me(t,n,s)];case 4:return u=i.sent(),[2,Re.decryptBytes(Z(e),u,s)]}}))}))}function Pe(e){return n(this,void 0,void 0,(function(){var t;return i(this,(function(r){switch(r.label){case 0:return[4,globalThis.crypto.subtle.exportKey("raw",e.publicKey)];case 1:return t=r.sent(),[2,te.arrBufToBase64(t)]}}))}))}function Me(e,t,r){return n(this,void 0,void 0,(function(){return i(this,(function(n){return[2,globalThis.crypto.subtle.deriveKey({name:ne,public:t},e,{name:(null==r?void 0:r.alg)||le,length:(null==r?void 0:r.length)||he},!1,["encrypt","decrypt"])]}))}))}var ze={sign:Ue,verify:je,encrypt:Le,decrypt:De,getPublicKey:Pe,getSharedKey:Me},Fe={type:ae,curve:ce,rsaSize:fe,symmAlg:le,symmLen:he,hashAlg:de,charSize:ye,storeName:ve,readKeyName:ge,writeKeyName:me};function Ke(e,t){var n;return void 0===t&&(t=!0),n=e?r(r({},Fe),e):Fe,(null==e?void 0:e.type)||(n.type=t?a.ECC:a.RSA),n}function He(){return n(this,void 0,void 0,(function(){var e;return i(this,(function(t){switch(t.label){case 0:return[4,Ee.makeKeypair(ce,v.Read)];case 1:e=t.sent(),t.label=2;case 2:return t.trys.push([2,4,,5]),[4,te.structuralClone(e)];case 3:return t.sent(),[3,5];case 4:return t.sent(),[2,!1];case 5:return[2,!0]}}))}))}function Ge(e,t){return void 0===t&&(t={}),r(r({},e),t)}function $e(e){return{alg:e.symmAlg,length:e.symmLen}}var qe={defaultConfig:Fe,normalize:Ke,eccEnabled:He,merge:Ge,symmKeyOpts:$e},We=Object.freeze({__proto__:null,defaultConfig:Fe,normalize:Ke,eccEnabled:He,merge:Ge,symmKeyOpts:$e,default:qe}),Ve=function(){function e(e,t){this.cfg=e,this.store=t}return e.prototype.writeKey=function(){return n(this,void 0,void 0,(function(){return i(this,(function(e){switch(e.label){case 0:return[4,z.getKeypair(this.cfg.writeKeyName,this.store)];case 1:return[2,S(e.sent())]}}))}))},e.prototype.readKey=function(){return n(this,void 0,void 0,(function(){return i(this,(function(e){switch(e.label){case 0:return[4,z.getKeypair(this.cfg.readKeyName,this.store)];case 1:return[2,S(e.sent())]}}))}))},e.prototype.getSymmKey=function(e,t){return n(this,void 0,void 0,(function(){var r,n,o;return i(this,(function(i){switch(i.label){case 0:return r=qe.merge(this.cfg,t),[4,z.getKey(e,this.store)];case 1:return null!==(n=i.sent())?[2,n]:[4,Re.makeKey(qe.symmKeyOpts(r))];case 2:return o=i.sent(),[4,z.put(e,o,this.store)];case 3:return i.sent(),[2,o]}}))}))},e.prototype.keyExists=function(e){return n(this,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return[4,z.getKey(e,this.store)];case 1:return[2,null!==t.sent()]}}))}))},e.prototype.deleteKey=function(e){return n(this,void 0,void 0,(function(){return i(this,(function(t){return[2,z.rm(e,this.store)]}))}))},e.prototype.destroy=function(){return n(this,void 0,void 0,(function(){return i(this,(function(e){return[2,z.dropStore(this.store)]}))}))},e.prototype.importSymmKey=function(e,t,r){return n(this,void 0,void 0,(function(){var n,o;return i(this,(function(i){switch(i.label){case 0:return n=qe.merge(this.cfg,r),[4,Re.importKey(e,qe.symmKeyOpts(n))];case 1:return o=i.sent(),[4,z.put(t,o,this.store)];case 2:return i.sent(),[2]}}))}))},e.prototype.exportSymmKey=function(e,t){return n(this,void 0,void 0,(function(){var r;return i(this,(function(n){switch(n.label){case 0:return[4,this.getSymmKey(e,t)];case 1:return r=n.sent(),[2,Re.exportKey(r)]}}))}))},e.prototype.encryptWithSymmKey=function(e,t,r){return n(this,void 0,void 0,(function(){var n,o,s;return i(this,(function(i){switch(i.label){case 0:return n=qe.merge(this.cfg,r),[4,this.getSymmKey(t,r)];case 1:return o=i.sent(),[4,Re.encryptBytes(te.strToArrBuf(e,n.charSize),o,qe.symmKeyOpts(n))];case 2:return s=i.sent(),[2,te.arrBufToBase64(s)]}}))}))},e.prototype.decryptWithSymmKey=function(e,t,r){return n(this,void 0,void 0,(function(){var n,o,s;return i(this,(function(i){switch(i.label){case 0:return n=qe.merge(this.cfg,r),[4,this.getSymmKey(t,r)];case 1:return o=i.sent(),[4,Re.decryptBytes(te.base64ToArrBuf(e),o,qe.symmKeyOpts(n))];case 2:return s=i.sent(),[2,te.arrBufToStr(s,n.charSize)]}}))}))},e}(),Ye=function(e){function o(){return null!==e&&e.apply(this,arguments)||this}return t(o,e),o.init=function(e){return n(this,void 0,void 0,(function(){var t,n,s,u,c,f;return i(this,(function(i){switch(i.label){case 0:return t=qe.normalize(r(r({},e||{}),{type:a.ECC})),n=t.curve,s=t.storeName,u=t.readKeyName,c=t.writeKeyName,f=z.createStore(s),[4,z.createIfDoesNotExist(u,(function(){return Ee.makeKeypair(n,v.Read)}),f)];case 1:return i.sent(),[4,z.createIfDoesNotExist(c,(function(){return Ee.makeKeypair(n,v.Write)}),f)];case 2:return i.sent(),[2,new o(t,f)]}}))}))},o.prototype.sign=function(e,t){return n(this,void 0,void 0,(function(){var r,n,o,s;return i(this,(function(i){switch(i.label){case 0:return r=qe.merge(this.cfg,t),[4,this.writeKey()];case 1:return n=i.sent(),s=(o=te).arrBufToBase64,[4,ze.sign(e,n.privateKey,r.charSize,r.hashAlg)];case 2:return[2,s.apply(o,[i.sent()])]}}))}))},o.prototype.verify=function(e,t,r,o){return n(this,void 0,void 0,(function(){var n;return i(this,(function(i){return n=qe.merge(this.cfg,o),[2,ze.verify(e,t,r,n.charSize,n.curve,n.hashAlg)]}))}))},o.prototype.encrypt=function(e,t,r){return n(this,void 0,void 0,(function(){var n,o,s,u;return i(this,(function(i){switch(i.label){case 0:return n=qe.merge(this.cfg,r),[4,this.readKey()];case 1:return o=i.sent(),u=(s=te).arrBufToBase64,[4,ze.encrypt(e,o.privateKey,t,n.charSize,n.curve)];case 2:return[2,u.apply(s,[i.sent()])]}}))}))},o.prototype.decrypt=function(e,t,r){return n(this,void 0,void 0,(function(){var n,o,s,u;return i(this,(function(i){switch(i.label){case 0:return n=qe.merge(this.cfg,r),[4,this.readKey()];case 1:return o=i.sent(),u=(s=te).arrBufToStr,[4,ze.decrypt(e,o.privateKey,t,n.curve)];case 2:return[2,u.apply(s,[i.sent(),n.charSize])]}}))}))},o.prototype.publicReadKey=function(){return n(this,void 0,void 0,(function(){var e;return i(this,(function(t){switch(t.label){case 0:return[4,this.readKey()];case 1:return e=t.sent(),[2,ze.getPublicKey(e)]}}))}))},o.prototype.publicWriteKey=function(){return n(this,void 0,void 0,(function(){var e;return i(this,(function(t){switch(t.label){case 0:return[4,this.writeKey()];case 1:return e=t.sent(),[2,ze.getPublicKey(e)]}}))}))},o}(Ve);function Je(e,t,r){return n(this,void 0,void 0,(function(){var n,o;return i(this,(function(i){return T(r),n=r===v.Read?oe:se,o=r===v.Read?["encrypt","decrypt"]:["sign","verify"],[2,globalThis.crypto.subtle.generateKey({name:n,modulusLength:e,publicExponent:te.publicExponent(),hash:{name:t}},!1,o)]}))}))}function Ze(e){return e.replace("-----BEGIN PUBLIC KEY-----\n","").replace("\n-----END PUBLIC KEY-----","")}function Xe(e,t,r){return n(this,void 0,void 0,(function(){var n,o,s;return i(this,(function(i){return T(r),n=r===v.Read?oe:se,o=r===v.Read?["encrypt"]:["verify"],s=te.base64ToArrBuf(Ze(e)),[2,globalThis.crypto.subtle.importKey("spki",s,{name:n,hash:{name:t}},!0,o)]}))}))}var Qe={makeKeypair:Je,importPublicKey:Xe};function et(e,t,r){return void 0===r&&(r=ye),n(this,void 0,void 0,(function(){return i(this,(function(n){return[2,globalThis.crypto.subtle.sign({name:se,saltLength:ue},t,X(e,r))]}))}))}function tt(e,t,r,o,s){return void 0===o&&(o=ye),void 0===s&&(s=de),n(this,void 0,void 0,(function(){var n,u,a,c;return i(this,(function(i){switch(i.label){case 0:return u=(n=globalThis.crypto.subtle).verify,a=[{name:se,saltLength:ue}],"string"!=typeof r?[3,2]:[4,Qe.importPublicKey(r,s,v.Write)];case 1:return c=i.sent(),[3,3];case 2:c=r,i.label=3;case 3:return[2,u.apply(n,a.concat([c,Z(t),X(e,o)]))]}}))}))}function rt(e,t,r,o){return void 0===r&&(r=ye),void 0===o&&(o=de),n(this,void 0,void 0,(function(){var n,s,u,a;return i(this,(function(i){switch(i.label){case 0:return s=(n=globalThis.crypto.subtle).encrypt,u=[{name:oe}],"string"!=typeof t?[3,2]:[4,Qe.importPublicKey(t,o,v.Read)];case 1:return a=i.sent(),[3,3];case 2:a=t,i.label=3;case 3:return[2,s.apply(n,u.concat([a,X(e,r)]))]}}))}))}function nt(e,t){return n(this,void 0,void 0,(function(){var r;return i(this,(function(n){return r=Z(e),[2,globalThis.crypto.subtle.decrypt({name:oe},t,r)]}))}))}function it(e){return n(this,void 0,void 0,(function(){var t;return i(this,(function(r){switch(r.label){case 0:return[4,globalThis.crypto.subtle.exportKey("spki",e.publicKey)];case 1:return t=r.sent(),[2,te.arrBufToBase64(t)]}}))}))}var ot={sign:et,verify:tt,encrypt:rt,decrypt:nt,getPublicKey:it},st=function(e){function o(){return null!==e&&e.apply(this,arguments)||this}return t(o,e),o.init=function(e){return n(this,void 0,void 0,(function(){var t,n,s,u,c,f,l;return i(this,(function(i){switch(i.label){case 0:return t=qe.normalize(r(r({},e||{}),{type:a.RSA})),n=t.rsaSize,s=t.hashAlg,u=t.storeName,c=t.readKeyName,f=t.writeKeyName,l=z.createStore(u),[4,z.createIfDoesNotExist(c,(function(){return Qe.makeKeypair(n,s,v.Read)}),l)];case 1:return i.sent(),[4,z.createIfDoesNotExist(f,(function(){return Qe.makeKeypair(n,s,v.Write)}),l)];case 2:return i.sent(),[2,new o(t,l)]}}))}))},o.prototype.sign=function(e,t){return n(this,void 0,void 0,(function(){var r,n,o,s;return i(this,(function(i){switch(i.label){case 0:return r=qe.merge(this.cfg,t),[4,this.writeKey()];case 1:return n=i.sent(),s=(o=te).arrBufToBase64,[4,ot.sign(e,n.privateKey,r.charSize)];case 2:return[2,s.apply(o,[i.sent()])]}}))}))},o.prototype.verify=function(e,t,r,o){return n(this,void 0,void 0,(function(){var n;return i(this,(function(i){return n=qe.merge(this.cfg,o),[2,ot.verify(e,t,r,n.charSize,n.hashAlg)]}))}))},o.prototype.encrypt=function(e,t,r){return n(this,void 0,void 0,(function(){var n,o,s;return i(this,(function(i){switch(i.label){case 0:return n=qe.merge(this.cfg,r),s=(o=te).arrBufToBase64,[4,ot.encrypt(e,t,n.charSize,n.hashAlg)];case 1:return[2,s.apply(o,[i.sent()])]}}))}))},o.prototype.decrypt=function(e,t,r){return n(this,void 0,void 0,(function(){var t,n,o,s;return i(this,(function(i){switch(i.label){case 0:return[4,this.readKey()];case 1:return t=i.sent(),n=qe.merge(this.cfg,r),s=(o=te).arrBufToStr,[4,ot.decrypt(e,t.privateKey)];case 2:return[2,s.apply(o,[i.sent(),n.charSize])]}}))}))},o.prototype.publicReadKey=function(){return n(this,void 0,void 0,(function(){var e;return i(this,(function(t){switch(t.label){case 0:return[4,this.readKey()];case 1:return e=t.sent(),[2,ot.getPublicKey(e)]}}))}))},o.prototype.publicWriteKey=function(){return n(this,void 0,void 0,(function(){var e;return i(this,(function(t){switch(t.label){case 0:return[4,this.writeKey()];case 1:return e=t.sent(),[2,ot.getPublicKey(e)]}}))}))},o}(Ve);function ut(e){return n(this,void 0,void 0,(function(){var t,r;return i(this,(function(n){switch(n.label){case 0:return[4,qe.eccEnabled()];case 1:if(!(t=n.sent())&&"ecc"===(null==e?void 0:e.type))throw k;return I((r=qe.normalize(e,t)).type),"ecc"===r.type?[2,Ye.init(r)]:[2,st.init(r)]}}))}))}function at(){return n(this,void 0,void 0,(function(){return i(this,(function(e){return[2,z.clear()]}))}))}var ct=r(r(r({},Ee),ze),Ye),ft=Object.freeze({__proto__:null,default:ct,makeKeypair:we,importPublicKey:ke,sign:Ue,verify:je,encrypt:Le,decrypt:De,getPublicKey:Pe,getSharedKey:Me,ECCKeyStore:Ye}),lt=r(r(r({},Qe),ot),st),ht=Object.freeze({__proto__:null,default:lt,makeKeypair:Je,importPublicKey:Xe,sign:et,verify:tt,encrypt:rt,decrypt:nt,getPublicKey:it,RSAKeyStore:st});return r(r(r(r(r({init:ut,clear:at},m),_e),We),re),{ecc:ft,rsa:ht,idb:F})}()})),Ne={type:y.CryptoSystem.RSA},Ce=null,Re=function(){return o(void 0,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return Ce?[4,Ce.destroy()]:[3,2];case 1:e.sent(),Ce=null,e.label=2;case 2:return[2]}}))}))},Ue=function(){return o(void 0,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return Ce?[2,Ce]:[4,Be.init(Ne)];case 1:return[2,Ce=e.sent()]}}))}))},je=function(e){return Array.prototype.map.call(new Uint8Array(e),(function(e){return("00"+e.toString(16)).slice(-2)})).join("")},Le=function(e){return o(void 0,void 0,void 0,(function(){return s(this,(function(t){switch(t.label){case 0:return[4,Ue()];case 1:return[2,t.sent().exportSymmKey(e)]}}))}))},De=function(e,t){return o(void 0,void 0,void 0,(function(){var r,n;return s(this,(function(i){switch(i.label){case 0:return[4,Oe.importKey(t,{length:y.SymmKeyLength.B256})];case 1:return r=i.sent(),[4,Oe.encryptBytes(e.buffer,r)];case 2:return n=i.sent(),[2,new Uint8Array(n)]}}))}))},Pe=function(e,t){return o(void 0,void 0,void 0,(function(){var r,n;return s(this,(function(i){switch(i.label){case 0:return[4,Oe.importKey(t,{length:y.SymmKeyLength.B256})];case 1:return r=i.sent(),[4,Oe.decryptBytes(e.buffer,r)];case 2:return n=i.sent(),[2,new Uint8Array(n)]}}))}))},Me=function(){return o(void 0,void 0,void 0,(function(){var e;return s(this,(function(t){switch(t.label){case 0:return[4,Oe.makeKey({length:y.SymmKeyLength.B256})];case 1:return e=t.sent(),[2,Oe.exportKey(e)]}}))}))},ze=function(e){return o(void 0,void 0,void 0,(function(){var t,r;return s(this,(function(n){switch(n.label){case 0:return t=g.strToArrBuf(e,8),[4,Fe(t)];case 1:return r=n.sent(),[2,je(r)]}}))}))},Fe=function(e){return o(void 0,void 0,void 0,(function(){return s(this,(function(t){return[2,crypto.subtle.digest("SHA-256",e)]}))}))};function Ke(e){var t=e.path;return o(this,void 0,void 0,(function(){var e;return s(this,(function(r){switch(r.label){case 0:return e="wnfs__bareNameFilter__",[4,ze(t)];case 1:return[2,e+r.sent()]}}))}))}function He(e){var t=e.path;return o(this,void 0,void 0,(function(){var e;return s(this,(function(r){switch(r.label){case 0:return e="wnfs__readKey__",[4,ze(t)];case 1:return[2,e+r.sent()]}}))}))}var Ge=e=>{if(e instanceof Error)return e;{const{name:t,message:r,stack:n,code:i}=e;return Object.assign($e(t,r),{name:t,stack:n,code:i})}};const $e=(e,t)=>{switch(e){case"RangeError":return new RangeError(t);case"ReferenceError":return ReferenceError(t);case"SyntaxError":return new SyntaxError(t);case"TypeError":return new TypeError(t);case"URIError":return new URIError(t);default:return new Error(t)}};var qe={encodeError:e=>{const{name:t,message:r,stack:n,code:i,detail:o}=e;return{name:t,message:r,stack:n,code:i,detail:o}},decodeError:Ge};var We={ensureUniqueBuffers:e=>new Set(e)},Ve={TimeoutError:class extends Error{get name(){return this.constructor.name}},AbortError:class extends Error{get name(){return this.constructor.name}},DisconnectError:class extends Error{get name(){return this.constructor.name}}};const{decodeError:Ye}=qe,{ensureUniqueBuffers:Je}=We,{DisconnectError:Ze,TimeoutError:Xe,AbortError:Qe}=Ve;var et=class e{constructor(e){this.port=null,this.id=Math.random().toString(32).slice(2),this.nextID=0,this.queries=Object.create(null),e&&this.connect(e)}execute(t){const r=`${this.id}@${this.nextID++}`;return this.queries[r]=t,t.timeout>0&&t.timeout<1/0&&(t.timerID=setTimeout(e.timeout,t.timeout,this,r)),t.signal&&t.signal.addEventListener("abort",(()=>this.abort(r)),{once:!0}),this.port&&e.postQuery(this.port,r,t),t.result}connect(t){if(this.port)throw new Error("Transport is already open");this.port=t,this.port.addEventListener("message",this),this.port.start();for(const[r,n]of Object.entries(this.queries))e.postQuery(t,r,n)}disconnect(){const e=new Ze;for(const[t,r]of Object.entries(this.queries))r.fail(e),this.abort(t);this.port&&(this.port.removeEventListener("message",this),this.port.close())}static timeout(e,t){const{queries:r}=e,n=r[t];n&&(delete r[t],n.fail(new Xe("request timed out")),e.port&&e.port.postMessage({type:"abort",id:t}))}abort(e){const{queries:t}=this,r=t[e];r&&(delete t[e],r.fail(new Qe),this.port&&this.port.postMessage({type:"abort",id:e}),null!=r.timerID&&clearTimeout(r.timerID))}static postQuery(e,t,r){e.postMessage({type:"query",namespace:r.namespace,method:r.method,id:t,input:r.toJSON()},Je(r.transfer()||[]))}handleEvent(e){const{id:t,result:r}=e.data,n=this.queries[t];n&&(delete this.queries[t],r.ok?n.succeed(r.value):n.fail(Ye(r.error)),null!=n.timerID&&clearTimeout(n.timerID))}},tt=class{constructor(e,t,r){this.result=new Promise(((n,i)=>{this.succeed=n,this.fail=i,this.signal=r.signal,this.input=r,this.namespace=e,this.method=t,this.timeout=null==r.timeout?1/0:r.timeout,this.timerID=null}))}toJSON(){return this.input}transfer(){return this.input.transfer}},rt=class{constructor(e,t,r){this.remote=new class{constructor(e,t,r){this.transport=r;const n=this;for(const r of t)n[r]=t=>this.transport.execute(new tt(e,r.toString(),t))}}(e,t,r)}};var nt=function(e){if(e.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),r=0;r<t.length;r++)t[r]=255;for(var n=0;n<e.length;n++){var i=e.charAt(n),o=i.charCodeAt(0);if(255!==t[o])throw new TypeError(i+" is ambiguous");t[o]=n}var s=e.length,u=e.charAt(0),a=Math.log(s)/Math.log(256),c=Math.log(256)/Math.log(s);function f(e){if("string"!=typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;var r=0;if(" "!==e[r]){for(var n=0,i=0;e[r]===u;)n++,r++;for(var o=(e.length-r)*a+1>>>0,c=new Uint8Array(o);e[r];){var f=t[e.charCodeAt(r)];if(255===f)return;for(var l=0,h=o-1;(0!==f||l<i)&&-1!==h;h--,l++)f+=s*c[h]>>>0,c[h]=f%256>>>0,f=f/256>>>0;if(0!==f)throw new Error("Non-zero carry");i=l,r++}if(" "!==e[r]){for(var p=o-i;p!==o&&0===c[p];)p++;for(var d=new Uint8Array(n+(o-p)),y=n;p!==o;)d[y++]=c[p++];return d}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";for(var r=0,n=0,i=0,o=t.length;i!==o&&0===t[i];)i++,r++;for(var a=(o-i)*c+1>>>0,f=new Uint8Array(a);i!==o;){for(var l=t[i],h=0,p=a-1;(0!==l||h<n)&&-1!==p;p--,h++)l+=256*f[p]>>>0,f[p]=l%s>>>0,l=l/s>>>0;if(0!==l)throw new Error("Non-zero carry");n=h,i++}for(var d=a-n;d!==a&&0===f[d];)d++;for(var y=u.repeat(r);d<a;++d)y+=e.charAt(f[d]);return y},decodeUnsafe:f,decode:function(e){var t=f(e);if(t)return t;throw new Error("Non-base"+s+" character")}}},it="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{};function ot(){throw new Error("setTimeout has not been defined")}function st(){throw new Error("clearTimeout has not been defined")}var ut=ot,at=st;function ct(e){if(ut===setTimeout)return setTimeout(e,0);if((ut===ot||!ut)&&setTimeout)return ut=setTimeout,setTimeout(e,0);try{return ut(e,0)}catch(t){try{return ut.call(null,e,0)}catch(t){return ut.call(this,e,0)}}}"function"==typeof it.setTimeout&&(ut=setTimeout),"function"==typeof it.clearTimeout&&(at=clearTimeout);var ft,lt=[],ht=!1,pt=-1;function dt(){ht&&ft&&(ht=!1,ft.length?lt=ft.concat(lt):pt=-1,lt.length&&yt())}function yt(){if(!ht){var e=ct(dt);ht=!0;for(var t=lt.length;t;){for(ft=lt,lt=[];++pt<t;)ft&&ft[pt].run();pt=-1,t=lt.length}ft=null,ht=!1,function(e){if(at===clearTimeout)return clearTimeout(e);if((at===st||!at)&&clearTimeout)return at=clearTimeout,clearTimeout(e);try{at(e)}catch(t){try{return at.call(null,e)}catch(t){return at.call(this,e)}}}(e)}}function vt(e,t){this.fun=e,this.array=t}vt.prototype.run=function(){this.fun.apply(null,this.array)};function gt(){}var mt=gt,bt=gt,_t=gt,wt=gt,kt=gt,Et=gt,At=gt;var St=it.performance||{},xt=St.now||St.mozNow||St.msNow||St.oNow||St.webkitNow||function(){return(new Date).getTime()};var It=new Date;var Tt={nextTick:function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];lt.push(new vt(e,t)),1!==lt.length||ht||ct(yt)},title:"browser",browser:!0,env:{},argv:[],version:"",versions:{},on:mt,addListener:bt,once:_t,off:wt,removeListener:kt,removeAllListeners:Et,emit:At,binding:function(e){throw new Error("process.binding is not supported")},cwd:function(){return"/"},chdir:function(e){throw new Error("process.chdir is not supported")},umask:function(){return 0},hrtime:function(e){var t=.001*xt.call(St),r=Math.floor(t),n=Math.floor(t%1*1e9);return e&&(r-=e[0],(n-=e[1])<0&&(r--,n+=1e9)),[r,n]},platform:"browser",release:{},config:{},uptime:function(){return(new Date-It)/1e3}},Ot="function"==typeof Object.create?function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:function(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e},Bt=/%[sdj%]/g;function Nt(e){if(!Wt(e)){for(var t=[],r=0;r<arguments.length;r++)t.push(Lt(arguments[r]));return t.join(" ")}r=1;for(var n=arguments,i=n.length,o=String(e).replace(Bt,(function(e){if("%%"===e)return"%";if(r>=i)return e;switch(e){case"%s":return String(n[r++]);case"%d":return Number(n[r++]);case"%j":try{return JSON.stringify(n[r++])}catch(e){return"[Circular]"}default:return e}})),s=n[r];r<i;s=n[++r])Gt(s)||!Zt(s)?o+=" "+s:o+=" "+Lt(s);return o}function Ct(e,t){if(Yt(it.process))return function(){return Ct(e,t).apply(this,arguments)};var r=!1;return function(){return r||(console.error(t),r=!0),e.apply(this,arguments)}}var Rt,Ut={};function jt(e){if(Yt(Rt)&&(Rt=""),e=e.toUpperCase(),!Ut[e])if(new RegExp("\\b"+e+"\\b","i").test(Rt)){Ut[e]=function(){var t=Nt.apply(null,arguments);console.error("%s %d: %s",e,0,t)}}else Ut[e]=function(){};return Ut[e]}function Lt(e,t){var r={seen:[],stylize:Pt};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),Ht(t)?r.showHidden=t:t&&ar(r,t),Yt(r.showHidden)&&(r.showHidden=!1),Yt(r.depth)&&(r.depth=2),Yt(r.colors)&&(r.colors=!1),Yt(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=Dt),Mt(r,e,r.depth)}function Dt(e,t){var r=Lt.styles[t];return r?"["+Lt.colors[r][0]+"m"+e+"["+Lt.colors[r][1]+"m":e}function Pt(e,t){return e}function Mt(e,t,r){if(e.customInspect&&t&&er(t.inspect)&&t.inspect!==Lt&&(!t.constructor||t.constructor.prototype!==t)){var n=t.inspect(r,e);return Wt(n)||(n=Mt(e,n,r)),n}var i=function(e,t){if(Yt(t))return e.stylize("undefined","undefined");if(Wt(t)){var r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(r,"string")}if(qt(t))return e.stylize(""+t,"number");if(Ht(t))return e.stylize(""+t,"boolean");if(Gt(t))return e.stylize("null","null")}(e,t);if(i)return i;var o=Object.keys(t),s=function(e){var t={};return e.forEach((function(e,r){t[e]=!0})),t}(o);if(e.showHidden&&(o=Object.getOwnPropertyNames(t)),Qt(t)&&(o.indexOf("message")>=0||o.indexOf("description")>=0))return zt(t);if(0===o.length){if(er(t)){var u=t.name?": "+t.name:"";return e.stylize("[Function"+u+"]","special")}if(Jt(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(Xt(t))return e.stylize(Date.prototype.toString.call(t),"date");if(Qt(t))return zt(t)}var a,c="",f=!1,l=["{","}"];(Kt(t)&&(f=!0,l=["[","]"]),er(t))&&(c=" [Function"+(t.name?": "+t.name:"")+"]");return Jt(t)&&(c=" "+RegExp.prototype.toString.call(t)),Xt(t)&&(c=" "+Date.prototype.toUTCString.call(t)),Qt(t)&&(c=" "+zt(t)),0!==o.length||f&&0!=t.length?r<0?Jt(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special"):(e.seen.push(t),a=f?function(e,t,r,n,i){for(var o=[],s=0,u=t.length;s<u;++s)cr(t,String(s))?o.push(Ft(e,t,r,n,String(s),!0)):o.push("");return i.forEach((function(i){i.match(/^\d+$/)||o.push(Ft(e,t,r,n,i,!0))})),o}(e,t,r,s,o):o.map((function(n){return Ft(e,t,r,s,n,f)})),e.seen.pop(),function(e,t,r){if(e.reduce((function(e,t){return t.indexOf("\n"),e+t.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60)return r[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+r[1];return r[0]+t+" "+e.join(", ")+" "+r[1]}(a,c,l)):l[0]+c+l[1]}function zt(e){return"["+Error.prototype.toString.call(e)+"]"}function Ft(e,t,r,n,i,o){var s,u,a;if((a=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]}).get?u=a.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):a.set&&(u=e.stylize("[Setter]","special")),cr(n,i)||(s="["+i+"]"),u||(e.seen.indexOf(a.value)<0?(u=Gt(r)?Mt(e,a.value,null):Mt(e,a.value,r-1)).indexOf("\n")>-1&&(u=o?u.split("\n").map((function(e){return"  "+e})).join("\n").substr(2):"\n"+u.split("\n").map((function(e){return"   "+e})).join("\n")):u=e.stylize("[Circular]","special")),Yt(s)){if(o&&i.match(/^\d+$/))return u;(s=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=e.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=e.stylize(s,"string"))}return s+": "+u}function Kt(e){return Array.isArray(e)}function Ht(e){return"boolean"==typeof e}function Gt(e){return null===e}function $t(e){return null==e}function qt(e){return"number"==typeof e}function Wt(e){return"string"==typeof e}function Vt(e){return"symbol"==typeof e}function Yt(e){return void 0===e}function Jt(e){return Zt(e)&&"[object RegExp]"===nr(e)}function Zt(e){return"object"==typeof e&&null!==e}function Xt(e){return Zt(e)&&"[object Date]"===nr(e)}function Qt(e){return Zt(e)&&("[object Error]"===nr(e)||e instanceof Error)}function er(e){return"function"==typeof e}function tr(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e}function rr(e){return W.Buffer.isBuffer(e)}function nr(e){return Object.prototype.toString.call(e)}function ir(e){return e<10?"0"+e.toString(10):e.toString(10)}Lt.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},Lt.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};var or=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function sr(){var e=new Date,t=[ir(e.getHours()),ir(e.getMinutes()),ir(e.getSeconds())].join(":");return[e.getDate(),or[e.getMonth()],t].join(" ")}function ur(){console.log("%s - %s",sr(),Nt.apply(null,arguments))}function ar(e,t){if(!t||!Zt(t))return e;for(var r=Object.keys(t),n=r.length;n--;)e[r[n]]=t[r[n]];return e}function cr(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var fr={inherits:Ot,_extend:ar,log:ur,isBuffer:rr,isPrimitive:tr,isFunction:er,isError:Qt,isDate:Xt,isObject:Zt,isRegExp:Jt,isUndefined:Yt,isSymbol:Vt,isString:Wt,isNumber:qt,isNullOrUndefined:$t,isNull:Gt,isBoolean:Ht,isArray:Kt,inspect:Lt,deprecate:Ct,format:Nt,debuglog:jt},lr=h(Object.freeze({__proto__:null,format:Nt,deprecate:Ct,debuglog:jt,inspect:Lt,isArray:Kt,isBoolean:Ht,isNull:Gt,isNullOrUndefined:$t,isNumber:qt,isString:Wt,isSymbol:Vt,isUndefined:Yt,isRegExp:Jt,isObject:Zt,isDate:Xt,isError:Qt,isFunction:er,isPrimitive:tr,isBuffer:rr,log:ur,inherits:Ot,_extend:ar,default:fr})),hr={TextEncoder:"undefined"!=typeof TextEncoder?TextEncoder:lr.TextEncoder,TextDecoder:"undefined"!=typeof TextDecoder?TextDecoder:lr.TextDecoder};const{TextEncoder:pr,TextDecoder:dr}=hr,yr=new dr,vr=new pr;var gr={decodeText:e=>yr.decode(e),encodeText:e=>vr.encode(e),concat:function(e,t){const r=new Uint8Array(t);let n=0;for(const t of e)r.set(t,n),n+=t.length;return r}};const{encodeText:mr}=gr;var br=class{constructor(e,t,r,n){this.name=e,this.code=t,this.codeBuf=mr(this.code),this.alphabet=n,this.codec=r(n)}encode(e){return this.codec.encode(e)}decode(e){for(const t of e)if(this.alphabet&&this.alphabet.indexOf(t)<0)throw new Error(`invalid character '${t}' in '${e}'`);return this.codec.decode(e)}};var _r={rfc4648:e=>t=>({encode:r=>((e,t,r)=>{const n="="===t[t.length-1],i=(1<<r)-1;let o="",s=0,u=0;for(let n=0;n<e.length;++n)for(u=u<<8|e[n],s+=8;s>r;)s-=r,o+=t[i&u>>s];if(s&&(o+=t[i&u<<r-s]),n)for(;o.length*r&7;)o+="=";return o})(r,t,e),decode:r=>((e,t,r)=>{const n={};for(let e=0;e<t.length;++e)n[t[e]]=e;let i=e.length;for(;"="===e[i-1];)--i;const o=new Uint8Array(i*r/8|0);let s=0,u=0,a=0;for(let t=0;t<i;++t){const i=n[e[t]];if(void 0===i)throw new SyntaxError("Invalid character "+e[t]);u=u<<r|i,s+=r,s>=8&&(s-=8,o[a++]=255&u>>s)}if(s>=r||255&u<<8-s)throw new SyntaxError("Unexpected end of data");return o})(r,t,e)})};const{rfc4648:wr}=_r,{decodeText:kr,encodeText:Er}=gr,Ar=[["identity","\0",()=>({encode:kr,decode:Er}),""],["base2","0",wr(1),"01"],["base8","7",wr(3),"01234567"],["base10","9",nt,"0123456789"],["base16","f",wr(4),"0123456789abcdef"],["base16upper","F",wr(4),"0123456789ABCDEF"],["base32hex","v",wr(5),"0123456789abcdefghijklmnopqrstuv"],["base32hexupper","V",wr(5),"0123456789ABCDEFGHIJKLMNOPQRSTUV"],["base32hexpad","t",wr(5),"0123456789abcdefghijklmnopqrstuv="],["base32hexpadupper","T",wr(5),"0123456789ABCDEFGHIJKLMNOPQRSTUV="],["base32","b",wr(5),"abcdefghijklmnopqrstuvwxyz234567"],["base32upper","B",wr(5),"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"],["base32pad","c",wr(5),"abcdefghijklmnopqrstuvwxyz234567="],["base32padupper","C",wr(5),"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567="],["base32z","h",wr(5),"ybndrfg8ejkmcpqxot1uwisza345h769"],["base36","k",nt,"0123456789abcdefghijklmnopqrstuvwxyz"],["base36upper","K",nt,"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"],["base58btc","z",nt,"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"],["base58flickr","Z",nt,"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"],["base64","m",wr(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"],["base64pad","M",wr(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="],["base64url","u",wr(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"],["base64urlpad","U",wr(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_="]],Sr=Ar.reduce(((e,t)=>(e[t[0]]=new br(t[0],t[1],t[2],t[3]),e)),{}),xr=Ar.reduce(((e,t)=>(e[t[1]]=Sr[t[0]],e)),{});var Ir={names:Sr,codes:xr},Tr=p((function(e,t){const{encodeText:r,decodeText:n,concat:i}=gr;function o(e){if(Ir.names[e])return Ir.names[e];if(Ir.codes[e])return Ir.codes[e];throw new Error(`Unsupported encoding: ${e}`)}(t=e.exports=function(e,t){if(!t)throw new Error("requires an encoded Uint8Array");const{name:r,codeBuf:s}=o(e);return function(e,t){o(e).decode(n(t))}(r,t),i([s,t],s.length+t.length)}).encode=function(e,t){const n=o(e),s=r(n.encode(t));return i([n.codeBuf,s],n.codeBuf.length+s.length)},t.decode=function(e){e instanceof Uint8Array&&(e=n(e));const t=e[0];return["f","F","v","V","t","T","b","B","c","C","h","k","K"].includes(t)&&(e=e.toLowerCase()),o(e[0]).decode(e.substring(1))},t.isEncoded=function(e){if(e instanceof Uint8Array&&(e=n(e)),"[object String]"!==Object.prototype.toString.call(e))return!1;try{return o(e[0]).name}catch(e){return!1}},t.encoding=o,t.encodingFromData=function(e){return e instanceof Uint8Array&&(e=n(e)),o(e[0])},t.names=Object.freeze(Ir.names),t.codes=Object.freeze(Ir.codes)})),Or=function e(t,r,n){if(Number.MAX_SAFE_INTEGER&&t>Number.MAX_SAFE_INTEGER)throw e.bytes=0,new RangeError("Could not encode varint");r=r||[];var i=n=n||0;for(;t>=Br;)r[n++]=255&t|128,t/=128;for(;-128&t;)r[n++]=255&t|128,t>>>=7;return r[n]=0|t,e.bytes=n-i+1,r},Br=Math.pow(2,31);var Nr=function e(t,r){var n,i=0,o=0,s=r=r||0,u=t.length;do{if(s>=u||o>49)throw e.bytes=0,new RangeError("Could not decode varint");n=t[s++],i+=o<28?(127&n)<<o:(127&n)*Math.pow(2,o),o+=7}while(n>=128);return e.bytes=s-r,i};var Cr=Math.pow(2,7),Rr=Math.pow(2,14),Ur=Math.pow(2,21),jr=Math.pow(2,28),Lr=Math.pow(2,35),Dr=Math.pow(2,42),Pr=Math.pow(2,49),Mr=Math.pow(2,56),zr=Math.pow(2,63),Fr={encode:Or,decode:Nr,encodingLength:function(e){return e<Cr?1:e<Rr?2:e<Ur?3:e<jr?4:e<Lr?5:e<Dr?6:e<Pr?7:e<Mr?8:e<zr?9:10}};var Kr={names:Object.freeze({identity:0,sha1:17,"sha2-256":18,"sha2-512":19,"sha3-512":20,"sha3-384":21,"sha3-256":22,"sha3-224":23,"shake-128":24,"shake-256":25,"keccak-224":26,"keccak-256":27,"keccak-384":28,"keccak-512":29,blake3:30,"murmur3-128":34,"murmur3-32":35,"dbl-sha2-256":86,md4:212,md5:213,bmt:214,"sha2-256-trunc254-padded":4114,"ripemd-128":4178,"ripemd-160":4179,"ripemd-256":4180,"ripemd-320":4181,x11:4352,kangarootwelve:7425,"sm3-256":21325,"blake2b-8":45569,"blake2b-16":45570,"blake2b-24":45571,"blake2b-32":45572,"blake2b-40":45573,"blake2b-48":45574,"blake2b-56":45575,"blake2b-64":45576,"blake2b-72":45577,"blake2b-80":45578,"blake2b-88":45579,"blake2b-96":45580,"blake2b-104":45581,"blake2b-112":45582,"blake2b-120":45583,"blake2b-128":45584,"blake2b-136":45585,"blake2b-144":45586,"blake2b-152":45587,"blake2b-160":45588,"blake2b-168":45589,"blake2b-176":45590,"blake2b-184":45591,"blake2b-192":45592,"blake2b-200":45593,"blake2b-208":45594,"blake2b-216":45595,"blake2b-224":45596,"blake2b-232":45597,"blake2b-240":45598,"blake2b-248":45599,"blake2b-256":45600,"blake2b-264":45601,"blake2b-272":45602,"blake2b-280":45603,"blake2b-288":45604,"blake2b-296":45605,"blake2b-304":45606,"blake2b-312":45607,"blake2b-320":45608,"blake2b-328":45609,"blake2b-336":45610,"blake2b-344":45611,"blake2b-352":45612,"blake2b-360":45613,"blake2b-368":45614,"blake2b-376":45615,"blake2b-384":45616,"blake2b-392":45617,"blake2b-400":45618,"blake2b-408":45619,"blake2b-416":45620,"blake2b-424":45621,"blake2b-432":45622,"blake2b-440":45623,"blake2b-448":45624,"blake2b-456":45625,"blake2b-464":45626,"blake2b-472":45627,"blake2b-480":45628,"blake2b-488":45629,"blake2b-496":45630,"blake2b-504":45631,"blake2b-512":45632,"blake2s-8":45633,"blake2s-16":45634,"blake2s-24":45635,"blake2s-32":45636,"blake2s-40":45637,"blake2s-48":45638,"blake2s-56":45639,"blake2s-64":45640,"blake2s-72":45641,"blake2s-80":45642,"blake2s-88":45643,"blake2s-96":45644,"blake2s-104":45645,"blake2s-112":45646,"blake2s-120":45647,"blake2s-128":45648,"blake2s-136":45649,"blake2s-144":45650,"blake2s-152":45651,"blake2s-160":45652,"blake2s-168":45653,"blake2s-176":45654,"blake2s-184":45655,"blake2s-192":45656,"blake2s-200":45657,"blake2s-208":45658,"blake2s-216":45659,"blake2s-224":45660,"blake2s-232":45661,"blake2s-240":45662,"blake2s-248":45663,"blake2s-256":45664,"skein256-8":45825,"skein256-16":45826,"skein256-24":45827,"skein256-32":45828,"skein256-40":45829,"skein256-48":45830,"skein256-56":45831,"skein256-64":45832,"skein256-72":45833,"skein256-80":45834,"skein256-88":45835,"skein256-96":45836,"skein256-104":45837,"skein256-112":45838,"skein256-120":45839,"skein256-128":45840,"skein256-136":45841,"skein256-144":45842,"skein256-152":45843,"skein256-160":45844,"skein256-168":45845,"skein256-176":45846,"skein256-184":45847,"skein256-192":45848,"skein256-200":45849,"skein256-208":45850,"skein256-216":45851,"skein256-224":45852,"skein256-232":45853,"skein256-240":45854,"skein256-248":45855,"skein256-256":45856,"skein512-8":45857,"skein512-16":45858,"skein512-24":45859,"skein512-32":45860,"skein512-40":45861,"skein512-48":45862,"skein512-56":45863,"skein512-64":45864,"skein512-72":45865,"skein512-80":45866,"skein512-88":45867,"skein512-96":45868,"skein512-104":45869,"skein512-112":45870,"skein512-120":45871,"skein512-128":45872,"skein512-136":45873,"skein512-144":45874,"skein512-152":45875,"skein512-160":45876,"skein512-168":45877,"skein512-176":45878,"skein512-184":45879,"skein512-192":45880,"skein512-200":45881,"skein512-208":45882,"skein512-216":45883,"skein512-224":45884,"skein512-232":45885,"skein512-240":45886,"skein512-248":45887,"skein512-256":45888,"skein512-264":45889,"skein512-272":45890,"skein512-280":45891,"skein512-288":45892,"skein512-296":45893,"skein512-304":45894,"skein512-312":45895,"skein512-320":45896,"skein512-328":45897,"skein512-336":45898,"skein512-344":45899,"skein512-352":45900,"skein512-360":45901,"skein512-368":45902,"skein512-376":45903,"skein512-384":45904,"skein512-392":45905,"skein512-400":45906,"skein512-408":45907,"skein512-416":45908,"skein512-424":45909,"skein512-432":45910,"skein512-440":45911,"skein512-448":45912,"skein512-456":45913,"skein512-464":45914,"skein512-472":45915,"skein512-480":45916,"skein512-488":45917,"skein512-496":45918,"skein512-504":45919,"skein512-512":45920,"skein1024-8":45921,"skein1024-16":45922,"skein1024-24":45923,"skein1024-32":45924,"skein1024-40":45925,"skein1024-48":45926,"skein1024-56":45927,"skein1024-64":45928,"skein1024-72":45929,"skein1024-80":45930,"skein1024-88":45931,"skein1024-96":45932,"skein1024-104":45933,"skein1024-112":45934,"skein1024-120":45935,"skein1024-128":45936,"skein1024-136":45937,"skein1024-144":45938,"skein1024-152":45939,"skein1024-160":45940,"skein1024-168":45941,"skein1024-176":45942,"skein1024-184":45943,"skein1024-192":45944,"skein1024-200":45945,"skein1024-208":45946,"skein1024-216":45947,"skein1024-224":45948,"skein1024-232":45949,"skein1024-240":45950,"skein1024-248":45951,"skein1024-256":45952,"skein1024-264":45953,"skein1024-272":45954,"skein1024-280":45955,"skein1024-288":45956,"skein1024-296":45957,"skein1024-304":45958,"skein1024-312":45959,"skein1024-320":45960,"skein1024-328":45961,"skein1024-336":45962,"skein1024-344":45963,"skein1024-352":45964,"skein1024-360":45965,"skein1024-368":45966,"skein1024-376":45967,"skein1024-384":45968,"skein1024-392":45969,"skein1024-400":45970,"skein1024-408":45971,"skein1024-416":45972,"skein1024-424":45973,"skein1024-432":45974,"skein1024-440":45975,"skein1024-448":45976,"skein1024-456":45977,"skein1024-464":45978,"skein1024-472":45979,"skein1024-480":45980,"skein1024-488":45981,"skein1024-496":45982,"skein1024-504":45983,"skein1024-512":45984,"skein1024-520":45985,"skein1024-528":45986,"skein1024-536":45987,"skein1024-544":45988,"skein1024-552":45989,"skein1024-560":45990,"skein1024-568":45991,"skein1024-576":45992,"skein1024-584":45993,"skein1024-592":45994,"skein1024-600":45995,"skein1024-608":45996,"skein1024-616":45997,"skein1024-624":45998,"skein1024-632":45999,"skein1024-640":46e3,"skein1024-648":46001,"skein1024-656":46002,"skein1024-664":46003,"skein1024-672":46004,"skein1024-680":46005,"skein1024-688":46006,"skein1024-696":46007,"skein1024-704":46008,"skein1024-712":46009,"skein1024-720":46010,"skein1024-728":46011,"skein1024-736":46012,"skein1024-744":46013,"skein1024-752":46014,"skein1024-760":46015,"skein1024-768":46016,"skein1024-776":46017,"skein1024-784":46018,"skein1024-792":46019,"skein1024-800":46020,"skein1024-808":46021,"skein1024-816":46022,"skein1024-824":46023,"skein1024-832":46024,"skein1024-840":46025,"skein1024-848":46026,"skein1024-856":46027,"skein1024-864":46028,"skein1024-872":46029,"skein1024-880":46030,"skein1024-888":46031,"skein1024-896":46032,"skein1024-904":46033,"skein1024-912":46034,"skein1024-920":46035,"skein1024-928":46036,"skein1024-936":46037,"skein1024-944":46038,"skein1024-952":46039,"skein1024-960":46040,"skein1024-968":46041,"skein1024-976":46042,"skein1024-984":46043,"skein1024-992":46044,"skein1024-1000":46045,"skein1024-1008":46046,"skein1024-1016":46047,"skein1024-1024":46048,"poseidon-bls12_381-a2-fc1":46081,"poseidon-bls12_381-a2-fc1-sc":46082})};const{encoding:Hr}=Tr,{TextDecoder:Gr}=hr,$r=new Gr("utf8");var qr=function(e,t="utf8"){return"utf8"===t||"utf-8"===t?$r.decode(e):"ascii"===t?function(e){let t="";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t}(e):Hr(t).encode(e)};const{encoding:Wr}=Tr,{TextEncoder:Vr}=hr,Yr=new Vr;var Jr=function(e,t="utf8"){return"utf8"===t||"utf-8"===t?Yr.encode(e):"ascii"===t?function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(e):Wr(t).decode(e)};var Zr=function(e,t){t||(t=e.reduce(((e,t)=>e+t.length),0));const r=new Uint8Array(t);let n=0;for(const t of e)r.set(t,n),n+=t.length;return r};const{names:Xr}=Kr,Qr={};for(const e in Xr){const t=e;Qr[Xr[t]]=t}function en(e){if(!(e instanceof Uint8Array))throw new Error("multihash must be a Uint8Array");if(e.length<2)throw new Error("multihash too short. must be > 2 bytes.");const t=Fr.decode(e);if(!nn(t))throw new Error(`multihash unknown function code: 0x${t.toString(16)}`);e=e.slice(Fr.decode.bytes);const r=Fr.decode(e);if(r<0)throw new Error(`multihash invalid length: ${r}`);if((e=e.slice(Fr.decode.bytes)).length!==r)throw new Error(`multihash length inconsistent: 0x${qr(e,"base16")}`);return{code:t,name:Qr[t],length:r,digest:e}}function tn(e){let t=e;if("string"==typeof e){if(void 0===Xr[e])throw new Error(`Unrecognized hash function named: ${e}`);t=Xr[e]}if("number"!=typeof t)throw new Error(`Hash function code should be a number. Got: ${t}`);if(void 0===Qr[t]&&!rn(t))throw new Error(`Unrecognized function code: ${t}`);return t}function rn(e){return e>0&&e<16}function nn(e){return!!rn(e)||!!Qr[e]}function on(e){en(e)}var sn={names:Xr,codes:Object.freeze(Qr),toHexString:function(e){if(!(e instanceof Uint8Array))throw new Error("must be passed a Uint8Array");return qr(e,"base16")},fromHexString:function(e){return Jr(e,"base16")},toB58String:function(e){if(!(e instanceof Uint8Array))throw new Error("must be passed a Uint8Array");return qr(Tr.encode("base58btc",e)).slice(1)},fromB58String:function(e){const t=e instanceof Uint8Array?qr(e):e;return Tr.decode("z"+t)},decode:en,encode:function(e,t,r){if(!e||void 0===t)throw new Error("multihash encode requires at least two args: digest, code");const n=tn(t);if(!(e instanceof Uint8Array))throw new Error("digest should be a Uint8Array");if(null==r&&(r=e.length),r&&e.length!==r)throw new Error("digest length should be equal to specified length.");const i=Fr.encode(n),o=Fr.encode(r);return Zr([i,o,e],i.length+o.length+e.length)},coerceCode:tn,isAppCode:rn,validate:on,prefix:function(e){return on(e),e.subarray(0,2)},isValidCode:nn},un=function e(t,r,n){if(Number.MAX_SAFE_INTEGER&&t>Number.MAX_SAFE_INTEGER)throw e.bytes=0,new RangeError("Could not encode varint");r=r||[];var i=n=n||0;for(;t>=an;)r[n++]=255&t|128,t/=128;for(;-128&t;)r[n++]=255&t|128,t>>>=7;return r[n]=0|t,e.bytes=n-i+1,r},an=Math.pow(2,31);var cn=function e(t,r){var n,i=0,o=0,s=r=r||0,u=t.length;do{if(s>=u||o>49)throw e.bytes=0,new RangeError("Could not decode varint");n=t[s++],i+=o<28?(127&n)<<o:(127&n)*Math.pow(2,o),o+=7}while(n>=128);return e.bytes=s-r,i};var fn=Math.pow(2,7),ln=Math.pow(2,14),hn=Math.pow(2,21),pn=Math.pow(2,28),dn=Math.pow(2,35),yn=Math.pow(2,42),vn=Math.pow(2,49),gn=Math.pow(2,56),mn=Math.pow(2,63),bn={encode:un,decode:cn,encodingLength:function(e){return e<fn?1:e<ln?2:e<hn?3:e<pn?4:e<dn?5:e<yn?6:e<vn?7:e<gn?8:e<mn?9:10}};var _n={baseTable:Object.freeze({identity:0,cidv1:1,cidv2:2,cidv3:3,ip4:4,tcp:6,sha1:17,"sha2-256":18,"sha2-512":19,"sha3-512":20,"sha3-384":21,"sha3-256":22,"sha3-224":23,"shake-128":24,"shake-256":25,"keccak-224":26,"keccak-256":27,"keccak-384":28,"keccak-512":29,blake3:30,dccp:33,"murmur3-128":34,"murmur3-32":35,ip6:41,ip6zone:42,path:47,multicodec:48,multihash:49,multiaddr:50,multibase:51,dns:53,dns4:54,dns6:55,dnsaddr:56,protobuf:80,cbor:81,raw:85,"dbl-sha2-256":86,rlp:96,bencode:99,"dag-pb":112,"dag-cbor":113,"libp2p-key":114,"git-raw":120,"torrent-info":123,"torrent-file":124,"leofcoin-block":129,"leofcoin-tx":130,"leofcoin-pr":131,sctp:132,"dag-jose":133,"dag-cose":134,"eth-block":144,"eth-block-list":145,"eth-tx-trie":146,"eth-tx":147,"eth-tx-receipt-trie":148,"eth-tx-receipt":149,"eth-state-trie":150,"eth-account-snapshot":151,"eth-storage-trie":152,"bitcoin-block":176,"bitcoin-tx":177,"bitcoin-witness-commitment":178,"zcash-block":192,"zcash-tx":193,docid:206,"stellar-block":208,"stellar-tx":209,md4:212,md5:213,bmt:214,"decred-block":224,"decred-tx":225,"ipld-ns":226,"ipfs-ns":227,"swarm-ns":228,"ipns-ns":229,zeronet:230,"secp256k1-pub":231,"bls12_381-g1-pub":234,"bls12_381-g2-pub":235,"x25519-pub":236,"ed25519-pub":237,"bls12_381-g1g2-pub":238,"dash-block":240,"dash-tx":241,"swarm-manifest":250,"swarm-feed":251,udp:273,"p2p-webrtc-star":275,"p2p-webrtc-direct":276,"p2p-stardust":277,"p2p-circuit":290,"dag-json":297,udt:301,utp:302,unix:400,p2p:421,ipfs:421,https:443,onion:444,onion3:445,garlic64:446,garlic32:447,tls:448,quic:460,ws:477,wss:478,"p2p-websocket-star":479,http:480,json:512,messagepack:513,"libp2p-peer-record":769,"sha2-256-trunc254-padded":4114,"ripemd-128":4178,"ripemd-160":4179,"ripemd-256":4180,"ripemd-320":4181,x11:4352,"p256-pub":4608,"p384-pub":4609,"p521-pub":4610,"ed448-pub":4611,"x448-pub":4612,"ed25519-priv":4864,kangarootwelve:7425,"sm3-256":21325,"blake2b-8":45569,"blake2b-16":45570,"blake2b-24":45571,"blake2b-32":45572,"blake2b-40":45573,"blake2b-48":45574,"blake2b-56":45575,"blake2b-64":45576,"blake2b-72":45577,"blake2b-80":45578,"blake2b-88":45579,"blake2b-96":45580,"blake2b-104":45581,"blake2b-112":45582,"blake2b-120":45583,"blake2b-128":45584,"blake2b-136":45585,"blake2b-144":45586,"blake2b-152":45587,"blake2b-160":45588,"blake2b-168":45589,"blake2b-176":45590,"blake2b-184":45591,"blake2b-192":45592,"blake2b-200":45593,"blake2b-208":45594,"blake2b-216":45595,"blake2b-224":45596,"blake2b-232":45597,"blake2b-240":45598,"blake2b-248":45599,"blake2b-256":45600,"blake2b-264":45601,"blake2b-272":45602,"blake2b-280":45603,"blake2b-288":45604,"blake2b-296":45605,"blake2b-304":45606,"blake2b-312":45607,"blake2b-320":45608,"blake2b-328":45609,"blake2b-336":45610,"blake2b-344":45611,"blake2b-352":45612,"blake2b-360":45613,"blake2b-368":45614,"blake2b-376":45615,"blake2b-384":45616,"blake2b-392":45617,"blake2b-400":45618,"blake2b-408":45619,"blake2b-416":45620,"blake2b-424":45621,"blake2b-432":45622,"blake2b-440":45623,"blake2b-448":45624,"blake2b-456":45625,"blake2b-464":45626,"blake2b-472":45627,"blake2b-480":45628,"blake2b-488":45629,"blake2b-496":45630,"blake2b-504":45631,"blake2b-512":45632,"blake2s-8":45633,"blake2s-16":45634,"blake2s-24":45635,"blake2s-32":45636,"blake2s-40":45637,"blake2s-48":45638,"blake2s-56":45639,"blake2s-64":45640,"blake2s-72":45641,"blake2s-80":45642,"blake2s-88":45643,"blake2s-96":45644,"blake2s-104":45645,"blake2s-112":45646,"blake2s-120":45647,"blake2s-128":45648,"blake2s-136":45649,"blake2s-144":45650,"blake2s-152":45651,"blake2s-160":45652,"blake2s-168":45653,"blake2s-176":45654,"blake2s-184":45655,"blake2s-192":45656,"blake2s-200":45657,"blake2s-208":45658,"blake2s-216":45659,"blake2s-224":45660,"blake2s-232":45661,"blake2s-240":45662,"blake2s-248":45663,"blake2s-256":45664,"skein256-8":45825,"skein256-16":45826,"skein256-24":45827,"skein256-32":45828,"skein256-40":45829,"skein256-48":45830,"skein256-56":45831,"skein256-64":45832,"skein256-72":45833,"skein256-80":45834,"skein256-88":45835,"skein256-96":45836,"skein256-104":45837,"skein256-112":45838,"skein256-120":45839,"skein256-128":45840,"skein256-136":45841,"skein256-144":45842,"skein256-152":45843,"skein256-160":45844,"skein256-168":45845,"skein256-176":45846,"skein256-184":45847,"skein256-192":45848,"skein256-200":45849,"skein256-208":45850,"skein256-216":45851,"skein256-224":45852,"skein256-232":45853,"skein256-240":45854,"skein256-248":45855,"skein256-256":45856,"skein512-8":45857,"skein512-16":45858,"skein512-24":45859,"skein512-32":45860,"skein512-40":45861,"skein512-48":45862,"skein512-56":45863,"skein512-64":45864,"skein512-72":45865,"skein512-80":45866,"skein512-88":45867,"skein512-96":45868,"skein512-104":45869,"skein512-112":45870,"skein512-120":45871,"skein512-128":45872,"skein512-136":45873,"skein512-144":45874,"skein512-152":45875,"skein512-160":45876,"skein512-168":45877,"skein512-176":45878,"skein512-184":45879,"skein512-192":45880,"skein512-200":45881,"skein512-208":45882,"skein512-216":45883,"skein512-224":45884,"skein512-232":45885,"skein512-240":45886,"skein512-248":45887,"skein512-256":45888,"skein512-264":45889,"skein512-272":45890,"skein512-280":45891,"skein512-288":45892,"skein512-296":45893,"skein512-304":45894,"skein512-312":45895,"skein512-320":45896,"skein512-328":45897,"skein512-336":45898,"skein512-344":45899,"skein512-352":45900,"skein512-360":45901,"skein512-368":45902,"skein512-376":45903,"skein512-384":45904,"skein512-392":45905,"skein512-400":45906,"skein512-408":45907,"skein512-416":45908,"skein512-424":45909,"skein512-432":45910,"skein512-440":45911,"skein512-448":45912,"skein512-456":45913,"skein512-464":45914,"skein512-472":45915,"skein512-480":45916,"skein512-488":45917,"skein512-496":45918,"skein512-504":45919,"skein512-512":45920,"skein1024-8":45921,"skein1024-16":45922,"skein1024-24":45923,"skein1024-32":45924,"skein1024-40":45925,"skein1024-48":45926,"skein1024-56":45927,"skein1024-64":45928,"skein1024-72":45929,"skein1024-80":45930,"skein1024-88":45931,"skein1024-96":45932,"skein1024-104":45933,"skein1024-112":45934,"skein1024-120":45935,"skein1024-128":45936,"skein1024-136":45937,"skein1024-144":45938,"skein1024-152":45939,"skein1024-160":45940,"skein1024-168":45941,"skein1024-176":45942,"skein1024-184":45943,"skein1024-192":45944,"skein1024-200":45945,"skein1024-208":45946,"skein1024-216":45947,"skein1024-224":45948,"skein1024-232":45949,"skein1024-240":45950,"skein1024-248":45951,"skein1024-256":45952,"skein1024-264":45953,"skein1024-272":45954,"skein1024-280":45955,"skein1024-288":45956,"skein1024-296":45957,"skein1024-304":45958,"skein1024-312":45959,"skein1024-320":45960,"skein1024-328":45961,"skein1024-336":45962,"skein1024-344":45963,"skein1024-352":45964,"skein1024-360":45965,"skein1024-368":45966,"skein1024-376":45967,"skein1024-384":45968,"skein1024-392":45969,"skein1024-400":45970,"skein1024-408":45971,"skein1024-416":45972,"skein1024-424":45973,"skein1024-432":45974,"skein1024-440":45975,"skein1024-448":45976,"skein1024-456":45977,"skein1024-464":45978,"skein1024-472":45979,"skein1024-480":45980,"skein1024-488":45981,"skein1024-496":45982,"skein1024-504":45983,"skein1024-512":45984,"skein1024-520":45985,"skein1024-528":45986,"skein1024-536":45987,"skein1024-544":45988,"skein1024-552":45989,"skein1024-560":45990,"skein1024-568":45991,"skein1024-576":45992,"skein1024-584":45993,"skein1024-592":45994,"skein1024-600":45995,"skein1024-608":45996,"skein1024-616":45997,"skein1024-624":45998,"skein1024-632":45999,"skein1024-640":46e3,"skein1024-648":46001,"skein1024-656":46002,"skein1024-664":46003,"skein1024-672":46004,"skein1024-680":46005,"skein1024-688":46006,"skein1024-696":46007,"skein1024-704":46008,"skein1024-712":46009,"skein1024-720":46010,"skein1024-728":46011,"skein1024-736":46012,"skein1024-744":46013,"skein1024-752":46014,"skein1024-760":46015,"skein1024-768":46016,"skein1024-776":46017,"skein1024-784":46018,"skein1024-792":46019,"skein1024-800":46020,"skein1024-808":46021,"skein1024-816":46022,"skein1024-824":46023,"skein1024-832":46024,"skein1024-840":46025,"skein1024-848":46026,"skein1024-856":46027,"skein1024-864":46028,"skein1024-872":46029,"skein1024-880":46030,"skein1024-888":46031,"skein1024-896":46032,"skein1024-904":46033,"skein1024-912":46034,"skein1024-920":46035,"skein1024-928":46036,"skein1024-936":46037,"skein1024-944":46038,"skein1024-952":46039,"skein1024-960":46040,"skein1024-968":46041,"skein1024-976":46042,"skein1024-984":46043,"skein1024-992":46044,"skein1024-1000":46045,"skein1024-1008":46046,"skein1024-1016":46047,"skein1024-1024":46048,"poseidon-bls12_381-a2-fc1":46081,"poseidon-bls12_381-a2-fc1-sc":46082,"zeroxcert-imprint-256":52753,"fil-commitment-unsealed":61697,"fil-commitment-sealed":61698,"holochain-adr-v0":8417572,"holochain-adr-v1":8483108,"holochain-key-v0":9728292,"holochain-key-v1":9793828,"holochain-sig-v0":10645796,"holochain-sig-v1":10711332,"skynet-ns":11639056})};const{baseTable:wn}=_n,kn=new Map;for(const e in wn){const t=wn[e];kn.set(t,e)}var En=Object.freeze(kn);const{names:An}=Ir,{TextDecoder:Sn}=hr,xn=new Sn("utf8");var In=function(e,t="utf8"){if("utf8"===t||"utf-8"===t)return xn.decode(e);if("ascii"===t)return function(e){let t="";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t}(e);const r=An[t];if(!r)throw new Error("Unknown base");return r.encode(e)};const{names:Tn}=Ir,{TextEncoder:On}=hr,Bn=new On;var Nn=function(e,t="utf8"){if("utf8"===t||"utf-8"===t)return Bn.encode(e);if("ascii"===t)return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(e);const r=Tn[t];if(!r)throw new Error("Unknown base");return r.decode(e)},Cn={numberToUint8Array:function(e){let t=e.toString(16);t.length%2==1&&(t="0"+t);return Nn(t,"base16")},uint8ArrayToNumber:Rn,varintUint8ArrayEncode:function(e){return Uint8Array.from(bn.encode(Rn(e)))},varintEncode:function(e){return Uint8Array.from(bn.encode(e))}};function Rn(e){return parseInt(In(e,"base16"),16)}const{baseTable:Un}=_n,jn=Cn.varintEncode,Ln={};for(const e in Un){const t=Un[e];Ln[e]=jn(t)}var Dn=Object.freeze(Ln);var Pn=function(e,t){t||(t=e.reduce(((e,t)=>e+t.length),0));const r=new Uint8Array(t);let n=0;for(const t of e)r.set(t,n),n+=t.length;return r};const{baseTable:Mn}=_n,zn={};for(const[e,t]of Object.entries(Mn)){zn[e.toUpperCase().replace(/-/g,"_")]=t}var Fn=Object.freeze(zn);const{baseTable:Kn}=_n,Hn={};for(const[e,t]of Object.entries(Kn))void 0===Hn[t]&&(Hn[t]=e);var Gn={addPrefix:function(e,t){let r;if(e instanceof Uint8Array)r=Cn.varintUint8ArrayEncode(e);else{if(!Dn[e])throw new Error("multicodec not recognized");r=Dn[e]}return Pn([r,t],r.length+t.length)},rmPrefix:function(e){return bn.decode(e),e.slice(bn.decode.bytes)},getCodec:function(e){const t=bn.decode(e),r=En.get(t);if(void 0===r)throw new Error(`Code ${t} not found`);return r},getName:function(e){return En.get(e)},getNumber:function(e){const t=Dn[e];if(void 0===t)throw new Error("Codec `"+e+"` not found");return bn.decode(t)},getCode:function(e){return bn.decode(e)},getCodeVarint:function(e){const t=Dn[e];if(void 0===t)throw new Error("Codec `"+e+"` not found");return t},getVarint:function(e){return bn.encode(e)},print:Object.freeze(Hn),...Fn};var $n={checkCIDComponents:function(e){if(null==e)return"null values are not valid CIDs";if(0!==e.version&&1!==e.version)return"Invalid version, must be a number equal to 1 or 0";if("string"!=typeof e.codec)return"codec must be string";if(0===e.version){if("dag-pb"!==e.codec)return"codec must be 'dag-pb' for CIDv0";if("base58btc"!==e.multibaseName)return"multibaseName must be 'base58btc' for CIDv0"}if(!(e.multihash instanceof Uint8Array))return"multihash must be a Uint8Array";try{sn.validate(e.multihash)}catch(e){let t=e.message;return t||(t="Multihash validation failed"),t}}};var qn=function(e,t){t||(t=e.reduce(((e,t)=>e+t.length),0));const r=new Uint8Array(t);let n=0;for(const t of e)r.set(t,n),n+=t.length;return r};const{encoding:Wn}=Tr,{TextDecoder:Vn}=hr,Yn=new Vn("utf8");var Jn=function(e,t="utf8"){return"utf8"===t||"utf-8"===t?Yn.decode(e):"ascii"===t?function(e){let t="";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t}(e):Wn(t).encode(e)};var Zn=function(e,t){if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(let r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0};const{baseTable:Xn}=_n,Qn=Object.keys(Xn).reduce(((e,t)=>(e[Xn[t]]=t,e)),{}),ei=Symbol.for("@ipld/js-cid/CID");class ti{constructor(e,t,r,n){if(this.version,this.codec,this.multihash,Object.defineProperty(this,ei,{value:!0}),ti.isCID(e)){const t=e;return this.version=t.version,this.codec=t.codec,this.multihash=t.multihash,void(this.multibaseName=t.multibaseName||(0===t.version?"base58btc":"base32"))}if("string"==typeof e){const t=Tr.isEncoded(e);if(t){const r=Tr.decode(e);this.version=parseInt(r[0].toString(),16),this.codec=Gn.getCodec(r.slice(1)),this.multihash=Gn.rmPrefix(r.slice(1)),this.multibaseName=t}else this.version=0,this.codec="dag-pb",this.multihash=sn.fromB58String(e),this.multibaseName="base58btc";return ti.validateCID(this),void Object.defineProperty(this,"string",{value:e})}if(e instanceof Uint8Array){const t=parseInt(e[0].toString(),16);if(1===t){const r=e;this.version=t,this.codec=Gn.getCodec(r.slice(1)),this.multihash=Gn.rmPrefix(r.slice(1)),this.multibaseName="base32"}else this.version=0,this.codec="dag-pb",this.multihash=e,this.multibaseName="base58btc";ti.validateCID(this)}else this.version=e,"number"==typeof t&&(t=Qn[t]),this.codec=t,this.multihash=r,this.multibaseName=n||(0===e?"base58btc":"base32"),ti.validateCID(this)}get bytes(){let e=this._bytes;if(!e){if(0===this.version)e=this.multihash;else{if(1!==this.version)throw new Error("unsupported version");{const t=Gn.getCodeVarint(this.codec);e=qn([[1],t,this.multihash],1+t.byteLength+this.multihash.byteLength)}}Object.defineProperty(this,"_bytes",{value:e})}return e}get prefix(){const e=Gn.getCodeVarint(this.codec),t=sn.prefix(this.multihash);return qn([[this.version],e,t],1+e.byteLength+t.byteLength)}get code(){return Xn[this.codec]}toV0(){if("dag-pb"!==this.codec)throw new Error("Cannot convert a non dag-pb CID to CIDv0");const{name:e,length:t}=sn.decode(this.multihash);if("sha2-256"!==e)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");if(32!==t)throw new Error("Cannot convert non 32 byte multihash CID to CIDv0");return new ti(0,this.codec,this.multihash)}toV1(){return new ti(1,this.codec,this.multihash)}toBaseEncodedString(e=this.multibaseName){if(this.string&&0!==this.string.length&&e===this.multibaseName)return this.string;let t;if(0===this.version){if("base58btc"!==e)throw new Error("not supported with CIDv0, to support different bases, please migrate the instance do CIDv1, you can do that through cid.toV1()");t=sn.toB58String(this.multihash)}else{if(1!==this.version)throw new Error("unsupported version");t=Jn(Tr.encode(e,this.bytes))}return e===this.multibaseName&&Object.defineProperty(this,"string",{value:t}),t}[Symbol.for("nodejs.util.inspect.custom")](){return"CID("+this.toString()+")"}toString(e){return this.toBaseEncodedString(e)}toJSON(){return{codec:this.codec,version:this.version,hash:this.multihash}}equals(e){return this.codec===e.codec&&this.version===e.version&&Zn(this.multihash,e.multihash)}static validateCID(e){const t=$n.checkCIDComponents(e);if(t)throw new Error(t)}static isCID(e){return e instanceof ti||Boolean(e&&e[ei])}}ti.codecs=Xn;var ri=ti;var ni={encodeCID:(e,t)=>(t&&t.push(e.multihash.buffer),e),decodeCID:e=>{const t=e;return Object.setPrototypeOf(t.multihash,Uint8Array.prototype),Object.setPrototypeOf(t,ri.prototype),Object.defineProperty(t,Symbol.for("@ipld/js-cid/CID"),{value:!0}),t},CID:ri},ii={name:"ipld-block",version:"0.11.0",description:"JavaScript Implementation of IPLD Block",leadMaintainer:"Volker Mische <volker.mische@gmail.com>",main:"src/index.js",scripts:{lint:"aegir lint",check:"tsc --noEmit --noErrorTruncation",build:"npm run build:js && npm run build:types","build:js":"aegir build","build:types":"tsc --emitDeclarationOnly --declarationDir dist",test:"aegir test","test:node":"aegir test --target node","test:browser":"aegir test --target browser",release:"aegir release --docs","release-minor":"aegir release --type minor --docs","release-major":"aegir release --type major --docs",coverage:"aegir coverage","coverage-publish":"aegir coverage --provider coveralls",docs:"aegir docs",prepare:"npm run build:types"},"pre-push":["lint","test"],repository:{type:"git",url:"git+https://github.com/ipld/js-ipld-block.git"},keywords:["IPLD"],license:"MIT",bugs:{url:"https://github.com/ipld/js-ipld-block/issues"},homepage:"https://github.com/ipld/js-ipld-block#readme",devDependencies:{aegir:"^27.0.0",uint8arrays:"^1.0.0",typescript:"^4.0.3"},dependencies:{cids:"^1.0.0"},engines:{node:">=6.0.0",npm:">=3.0.0"},typesVersions:{"*":{"*":["dist/*"]}},contributors:["David Dias <daviddias.p@gmail.com>","Volker Mische <volker.mische@gmail.com>","Friedel Ziegelmayer <dignifiedquire@gmail.com>","Irakli Gozalishvili <contact@gozala.io>","achingbrain <alex@achingbrain.net>","  <victorbjelkholm@gmail.com>","Alan Shaw <alan.shaw@protocol.ai>","Charlie <the_charlie_daly@hotmail.co.uk>","Diogo Silva <fsdiogo@gmail.com>","Hugo Dias <hugomrdias@gmail.com>","Mikeal Rogers <mikeal.rogers@gmail.com>","Richard Littauer <richard.littauer@gmail.com>","Richard Schneider <makaretu@gmail.com>","Xmader <xmader@outlook.com>"]};const{version:oi}=ii,si=Symbol.for("@ipld/js-ipld-block/block"),ui={writable:!1,configurable:!1,enumerable:!0};class ai{constructor(e,t){if(!(e&&e instanceof Uint8Array))throw new Error("first argument  must be a Uint8Array");if(!t||!ri.isCID(t))throw new Error("second argument must be a CID");this.data=e,this.cid=t,Object.defineProperties(this,{data:ui,cid:ui})}get _data(){return li(),this.data}get _cid(){return fi(),this.cid}get[Symbol.toStringTag](){return"Block"}get[si](){return!0}static isBlock(e){return Boolean(e&&e[si])}}const ci=(e,t)=>{let r=!1;return()=>{if(!e.test(oi))throw new Error(t);r||(r=!0,console.warn(t))}},fi=ci(/^0\.10|^0\.11/,"block._cid is deprecated and will be removed in 0.12 release. Please use block.cid instead"),li=ci(/^0\.10|^0.11/,"block._data is deprecated and will be removed in 0.12 release. Please use block.data instead");var hi=ai;const{encodeCID:pi,decodeCID:di}=ni;var yi={encodeBlock:({cid:e,data:t},r)=>(r&&r.push(t.buffer),{cid:pi(e,r),data:t}),decodeBlock:({cid:e,data:t})=>new hi(t,di(e)),Block:hi};const{encodeCID:vi,decodeCID:gi}=ni,{decodeError:mi}=qe,{encodeBlock:bi,decodeBlock:_i}=yi;const wi=e=>{const t=gi(e.cid);return e.error?{cid:t,error:mi(e.error)}:{cid:t}};var ki=class extends rt{constructor(e){super("block",["put","get","rm","stat"],e)}async get(e,t={}){const{transfer:r}=t,{block:n}=await this.remote.get({...t,cid:vi(e,r)});return _i(n)}async put(e,t={}){const{transfer:r}=t;delete t.progress;const n=await this.remote.put({...t,cid:null==t.cid?void 0:vi(t.cid,r),block:e instanceof Uint8Array?e:bi(e,r)});return _i(n.block)}async*rm(e,t={}){const{transfer:r}=t,n=await this.remote.rm({...t,cids:Array.isArray(e)?e.map((e=>vi(e,r))):[vi(e,r)]});yield*n.map(wi)}async stat(e,t={}){const{transfer:r}=t,n=await this.remote.stat({...t,cid:vi(e,r)});return{...n,cid:gi(n.cid)}}};const{encodeCID:Ei,decodeCID:Ai,CID:Si}=ni;var xi=(e,t)=>{const r=[];return Ii(e,r,t),{dagNode:e,cids:r}};const Ii=(e,t,r)=>{if(null!=e&&"object"==typeof e)if(Si.isCID(e))t.push(e),Ei(e,r);else if(e instanceof ArrayBuffer)r&&r.push(e);else if(ArrayBuffer.isView(e))r&&r.push(e.buffer);else if(Array.isArray(e))for(const n of e)Ii(n,t,r);else for(const n of Object.values(e))Ii(n,t,r)};var Ti={decodeNode:({dagNode:e,cids:t})=>{for(const e of t)Ai(e);return e},encodeNode:xi};const{encodeCID:Oi,decodeCID:Bi}=ni,{encodeNode:Ni,decodeNode:Ci}=Ti;const Ri=(e,t)=>"string"==typeof e?e:Oi(e,t);var Ui=class extends rt{constructor(e){super("dag",["put","get","resolve","tree"],e)}async put(e,t={}){const{cid:r}=t,n=await this.remote.put({...t,cid:null!=r?Oi(r):void 0,dagNode:Ni(e,t.transfer)});return Bi(n)}async get(e,t={}){const{value:r,remainderPath:n}=await this.remote.get({...t,cid:Oi(e,t.transfer)});return{value:Ci(r),remainderPath:n}}async resolve(e,t={}){const{cid:r,remainderPath:n}=await this.remote.resolve({...t,cid:Ri(e,t.transfer)});return{cid:Bi(r),remainderPath:n}}async*tree(e,t={}){const r=await this.remote.tree({...t,cid:Oi(e,t.transfer)});yield*r}};const{encodeError:ji,decodeError:Li}=qe,{ensureUniqueBuffers:Di}=We;var Pi=(e,t,r)=>{const{port1:n,port2:i}=new MessageChannel,o=Mi(e);return n.onmessage=async({data:{method:e}})=>{switch(e){case"next":try{const{done:e,value:r}=await o.next();if(e)n.postMessage({type:"next",done:!0}),n.close();else{const e=[],i=t(r,e);n.postMessage({type:"next",done:!1,value:i},Di(e))}}catch(e){n.postMessage({type:"throw",error:ji(e)}),n.close()}break;case"return":n.close(),o.return&&o.return()}},n.start(),r.push(i),{type:"RemoteIterable",port:i}};const Mi=e=>{if(null!=e){if("function"==typeof e[Symbol.asyncIterator])return e[Symbol.asyncIterator]();if("function"==typeof e[Symbol.iterator])return e[Symbol.iterator]()}throw TypeError("Value must be async or sync iterable")};var zi={decodeIterable:async function*({port:e},t){let r=e=>{};const n=()=>(e.postMessage({method:"next"}),new Promise((e=>r=e)));e.onmessage=e=>r(e.data);let i=!1;try{for(;!i;){const{done:e,value:r,error:o}=await n();if(i=e,null!=o)throw Li(o);null!=r&&(yield t(r))}}finally{i||e.postMessage({method:"return"}),e.close()}},encodeIterable:Pi,encodeCallback:(e,t)=>{const{port1:r,port2:n}=new MessageChannel;return r.onmessage=({data:t})=>e.apply(null,t),t.push(n),{type:"RemoteCallback",port:n}},decodeCallback:({port:e})=>(t,r=[])=>{e.postMessage(t,new Set(r))}};var Fi=async function*(e,t={}){const r=e.getReader();try{for(;;){const e=await r.read();if(e.done)return;yield e.value}}finally{!0!==t.preventCancel&&r.cancel(),r.releaseLock()}};const{encodeCID:Ki,decodeCID:Hi,CID:Gi}=ni,{decodeIterable:$i,encodeIterable:qi,encodeCallback:Wi}=zi;const Vi=({path:e,cid:t,mode:r,mtime:n,size:i})=>({path:e,cid:Hi(t),mode:r,mtime:n,size:i}),Yi=({depth:e,name:t,path:r,size:n,cid:i,type:o,mode:s,mtime:u})=>({cid:Hi(i),type:o,name:t,path:r,mode:s,mtime:u,size:n,depth:e}),Ji=e=>e,Zi=(e,t)=>{if(e instanceof Blob)return e;if("string"==typeof e)return e;if(e instanceof ArrayBuffer)return e;if(ArrayBuffer.isView(e))return e;{const r=no(e);if(r)return qi(r,eo,t);const n=io(e);if(n)return qi(n,Qi,t);const i=oo(e);if(i)return qi(Fi(i),Qi,t);const o=so(e);if(o)return to(o,t);throw TypeError("Unexpected input: "+typeof e)}},Xi=(e,t)=>{const r=no(e);if(r)return qi(r,eo,t);const n=io(e);if(n)return qi(n,Qi,t);const i=oo(e);if(i)return qi(Fi(i),Qi,t);throw TypeError("Unexpected input: "+typeof e)},Qi=(e,t)=>{if(e instanceof ArrayBuffer)return e;if(ArrayBuffer.isView(e))return e;if(e instanceof Blob)return{path:"",content:e};if("string"==typeof e)return{path:"",content:e};{const r=so(e);if(r)return to(r,t);throw TypeError("Unexpected input: "+typeof e)}},eo=(e,t)=>{if("number"==typeof e)throw TypeError("Iterable of numbers is not supported");if(e instanceof ArrayBuffer)return e;if(ArrayBuffer.isView(e))return e;if(e instanceof Blob)return{path:"",content:e};if("string"==typeof e)return{path:"",content:e};{const r=so(e);if(r)return to(r,t);throw TypeError("Unexpected input: "+typeof e)}},to=({path:e,mode:t,mtime:r,content:n},i)=>({path:e,mode:t,mtime:r,content:n?ro(n,i):void 0}),ro=(e,t)=>{if(null==e)return"";if(e instanceof ArrayBuffer||ArrayBuffer.isView(e))return e;if(e instanceof Blob)return e;if("string"==typeof e)return e;{const r=no(e);if(r)return qi(r,eo,t);const n=io(e);if(n)return qi(n,Qi,t);const i=oo(e);if(i)return qi(Fi(i),Qi,t);throw TypeError("Unexpected input: "+typeof e)}},no=e=>{const t=e;return t&&"function"==typeof t[Symbol.iterator]?t:null},io=e=>{const t=e;return t&&"function"==typeof t[Symbol.asyncIterator]?t:null},oo=e=>e&&"function"==typeof e.getReader?e:null,so=e=>"object"==typeof e&&(e.path||e.content)?e:null;var uo=class extends rt{constructor(e){super("core",["add","addAll","cat","ls"],e)}async*addAll(e,t={}){const{timeout:r,signal:n}=t,i=[...t.transfer||[]],o=t.progress?Wi(t.progress,i):void 0,s=await this.remote.addAll({...t,input:Xi(e,i),progress:o,transfer:i,timeout:r,signal:n});yield*$i(s.data,Vi)}async add(e,t={}){const{timeout:r,signal:n}=t,i=[...t.transfer||[]],o=t.progress?Wi(t.progress,i):void 0,s=await this.remote.add({...t,input:Zi(e,i),progress:o,transfer:i,timeout:r,signal:n});return Vi(s.data)}async*cat(e,t={}){const r=Gi.isCID(e)?Ki(e):e,n=await this.remote.cat({...t,path:r});yield*$i(n.data,Ji)}async*ls(e,t={}){const r=Gi.isCID(e)?Ki(e):e,n=await this.remote.ls({...t,path:r});yield*$i(n.data,Yi)}};const{decodeCID:ao,CID:co}=ni;var fo=class extends rt{constructor(e){super("files",["stat"],e)}async stat(e,t={}){const{size:r,hash:n,withLocal:i,timeout:o,signal:s}=t,{stat:u}=await this.remote.stat({path:lo(e),size:r,hash:n,withLocal:i,timeout:o,signal:s});return ho(u)}};const lo=e=>co.isCID(e)?`/ipfs/${e.toString()}`:e,ho=e=>({...e,cid:ao(e.cid)}),{decodeCID:po,CID:yo}=ni;var vo=class extends rt{constructor(e){super("pin",["add"],e)}async add(e,t={}){const{recursive:r,timeout:n,signal:i}=t,{cid:o}=await this.remote.add({path:go(e),recursive:r,timeout:n,signal:i});return po(o)}};const go=e=>yo.isCID(e)?`/ipfs/${e.toString()}`:`${e}`;class mo extends uo{constructor(e){super(e),this.transport=e,this.block=new ki(this.transport),this.dag=new Ui(this.transport),this.files=new fo(this.transport),this.pin=new vo(this.transport)}static attach(e,t){e.transport.connect(t)}static detached(){return new mo(new et(void 0))}static from(e){return new mo(new et(e))}}var bo=mo,_o=null,wo=function(){return o(void 0,void 0,void 0,(function(){var e;return s(this,(function(t){switch(t.label){case 0:return _o?[3,2]:[4,ko()];case 1:e=t.sent(),_o=bo.from(e),t.label=2;case 2:return[2,_o]}}))}))};function ko(){return new Promise((function(e,t){var r=document.createElement("iframe");r.style.width="0",r.style.height="0",r.style.border="none",r.style.display="none",document.body.appendChild(r),r.onload=function(){var n=new MessageChannel;n.port1.onmessage=function(t){var r=t.ports;return e(r[0])},r.contentWindow?r.contentWindow.postMessage("connect","*",[n.port2]):t(new Error("Don't have access to iframe.contentWindow"))},r.src=S.endpoints.lobby+"/ipfs.html"}))}var Eo=function(e,{className:t,symbolName:r}){const n=Symbol.for(r),i={[t]:class extends e{constructor(...e){super(...e),Object.defineProperty(this,n,{value:!0})}get[Symbol.toStringTag](){return t}}}[t];return i[`is${t}`]=e=>!(!e||!e[n]),i},Ao=function(e,{className:t,symbolName:r,withoutNew:n}){const i=Symbol.for(r),o={[t]:function(...t){if(n&&!(this instanceof o))return new o(...t);const r=e.call(this,...t)||this;return r&&!r[i]&&Object.defineProperty(r,i,{value:!0}),r}}[t];return o.prototype=Object.create(e.prototype),o.prototype.constructor=o,Object.defineProperty(o.prototype,Symbol.toStringTag,{get:()=>t}),o[`is${t}`]=e=>!(!e||!e[i]),o};Eo.proto=Ao;var So=p((function(e,t){
//! stable.js 0.1.8, https://github.com/Two-Screen/stable
//!  2018 Angry Bytes and contributors. MIT licensed.
e.exports=function(){var e=function(e,r){return t(e.slice(),r)};function t(e,t){"function"!=typeof t&&(t=function(e,t){return String(e).localeCompare(t)});var n=e.length;if(n<=1)return e;for(var i=new Array(n),o=1;o<n;o*=2){r(e,t,o,i);var s=e;e=i,i=s}return e}e.inplace=function(e,n){var i=t(e,n);return i!==e&&r(i,null,e.length,e),e};var r=function(e,t,r,n){var i,o,s,u,a,c=e.length,f=0,l=2*r;for(i=0;i<c;i+=l)for(s=(o=i+r)+r,o>c&&(o=c),s>c&&(s=c),u=i,a=o;;)if(u<o&&a<s)t(e[u],e[a])<=0?n[f++]=e[u++]:n[f++]=e[a++];else if(u<o)n[f++]=e[u++];else{if(!(a<s))break;n[f++]=e[a++]}};return e}()}));var xo=function(e,t){for(let r=0;r<e.byteLength;r++){if(e[r]<t[r])return-1;if(e[r]>t[r])return 1}return e.byteLength>t.byteLength?1:e.byteLength<t.byteLength?-1:0};const Io=(e,t)=>{const r=e.nameAsBuffer,n=t.nameAsBuffer;return xo(r,n)};var To=e=>{So.inplace(e,Io)},Oo=p((function(e,t){e.exports=Eo(class{constructor(e,t,r){if(!r)throw new Error("A link requires a cid to point to");Object.defineProperties(this,{Name:{value:e||"",writable:!1,enumerable:!0},Tsize:{value:t,writable:!1,enumerable:!0},Hash:{value:new ri(r),writable:!1,enumerable:!0},_nameBuf:{value:null,writable:!0,enumerable:!1}})}toString(){return`DAGLink <${this.Hash.toBaseEncodedString()} - name: "${this.Name}", size: ${this.Tsize}>`}toJSON(){return this._json||(this._json=Object.freeze({name:this.Name,size:this.Tsize,cid:this.Hash.toBaseEncodedString()})),Object.assign({},this._json)}get nameAsBuffer(){return null!==this._nameBuf||(this._nameBuf=Nn(this.Name)),this._nameBuf}},{className:"DAGLink",symbolName:"@ipld/js-ipld-dag-pb/daglink"})})),Bo=["int32","int64","uint32","uint64","sint32","sint64","bool","fixed64","sfixed64","double","fixed32","sfixed32","float"],No=function(e){var t=e.shift();if("{"!==t)return t;t={};for(var r="";e.length;)switch(e[0]){case"}":return e.shift(),t;case":":e.shift(),t[r]=No(e);break;default:r=e.shift()}},Co=function(e){for(var t={};e.length;)switch(e[0]){case"[":case",":e.shift();var r=e.shift();"("===r&&(r=e.shift(),e.shift());var n=[];if("."===e[0][0]&&(n=e[0].substr(1).split("."),e.shift()),"="!==e[0])throw new Error("Unexpected token in field options: "+e[0]);if(e.shift(),"]"===e[0])throw new Error("Unexpected ] in field option");var i=[r].concat(n),o=i.pop();i.reduce((function(e,t,r){return null==e[t]&&(e[t]={}),e[t]}),t)[o]=No(e);break;case"]":return e.shift(),t;default:throw new Error("Unexpected token in field options: "+e[0])}throw new Error("No closing tag for field options")},Ro=function(e){for(var t={name:null,type:null,tag:-1,map:null,oneof:null,required:!1,repeated:!1,options:{}};e.length;)switch(e[0]){case"=":e.shift(),t.tag=Number(e.shift());break;case"map":if(t.type="map",t.map={from:null,to:null},e.shift(),"<"!==e[0])throw new Error("Unexpected token in map type: "+e[0]);if(e.shift(),t.map.from=e.shift(),","!==e[0])throw new Error("Unexpected token in map type: "+e[0]);if(e.shift(),t.map.to=e.shift(),">"!==e[0])throw new Error("Unexpected token in map type: "+e[0]);e.shift(),t.name=e.shift();break;case"repeated":case"required":case"optional":var r=e.shift();t.required="required"===r,t.repeated="repeated"===r,t.type=e.shift(),t.name=e.shift();break;case"[":t.options=Co(e);break;case";":if(null===t.name)throw new Error("Missing field name");if(null===t.type)throw new Error("Missing type in message field: "+t.name);if(-1===t.tag)throw new Error("Missing tag number in message field: "+t.name);return e.shift(),t;default:throw new Error("Unexpected token in message field: "+e[0])}throw new Error("No ; found for message field")},Uo=function(e){for(var t={enums:[],options:{},messages:[],fields:[],extends:[],extensions:null};e.length;)switch(e[0]){case"map":case"repeated":case"optional":case"required":t.fields.push(Ro(e));break;case"enum":t.enums.push(Fo(e));break;case"message":t.messages.push(Do(e));break;case"extensions":t.extensions=Lo(e);break;case"oneof":e.shift();var r=e.shift();if("{"!==e[0])throw new Error("Unexpected token in oneof: "+e[0]);for(e.shift();"}"!==e[0];){e.unshift("optional");var n=Ro(e);n.oneof=r,t.fields.push(n)}e.shift();break;case"extend":t.extends.push(jo(e));break;case";":e.shift();break;case"reserved":for(e.shift();";"!==e[0];)e.shift();break;case"option":var i=Ko(e);if(void 0!==t.options[i.name])throw new Error("Duplicate option "+i.name);t.options[i.name]=i.value;break;default:e.unshift("optional"),t.fields.push(Ro(e))}return t},jo=function(e){return{name:e[1],message:Do(e)}},Lo=function(e){e.shift();var t=Number(e.shift());if(isNaN(t))throw new Error("Invalid from in extensions definition");if("to"!==e.shift())throw new Error("Expected keyword 'to' in extensions definition");var r=e.shift();if("max"===r&&(r=536870911),r=Number(r),isNaN(r))throw new Error("Invalid to in extensions definition");if(";"!==e.shift())throw new Error("Missing ; in extensions definition");return{from:t,to:r}},Do=function(e){e.shift();var t=1,r=[],n={name:e.shift(),options:{},enums:[],extends:[],messages:[],fields:[]};if("{"!==e[0])throw new Error("Expected { but found "+e[0]);for(e.shift();e.length;){if("{"===e[0]?t++:"}"===e[0]&&t--,!t)return e.shift(),r=Uo(r),n.enums=r.enums,n.messages=r.messages,n.fields=r.fields,n.extends=r.extends,n.extensions=r.extensions,n.options=r.options,n;r.push(e.shift())}if(t)throw new Error("No closing tag for message")},Po=function(e){e.shift();var t=e.shift();if(";"!==e[0])throw new Error("Expected ; but found "+e[0]);return e.shift(),t},Mo=function(e){if(e.shift(),"="!==e[0])throw new Error("Expected = but found "+e[0]);e.shift();var t=e.shift();switch(t){case'"proto2"':t=2;break;case'"proto3"':t=3;break;default:throw new Error("Expected protobuf syntax version but found "+t)}if(";"!==e[0])throw new Error("Expected ; but found "+e[0]);return e.shift(),t},zo=function(e){if(e.length<4)throw new Error("Invalid enum value: "+e.slice(0,3).join(" "));if("="!==e[1])throw new Error("Expected = but found "+e[1]);if(";"!==e[3]&&"["!==e[3])throw new Error("Expected ; or [ but found "+e[1]);var t=e.shift();e.shift();var r={value:null,options:{}};return r.value=Number(e.shift()),"["===e[0]&&(r.options=Co(e)),e.shift(),{name:t,val:r}},Fo=function(e){e.shift();var t={},r={name:e.shift(),values:{},options:{}};if("{"!==e[0])throw new Error("Expected { but found "+e[0]);for(e.shift();e.length;){if("}"===e[0])return e.shift(),";"===e[0]&&e.shift(),r;if("option"!==e[0]){var n=zo(e);r.values[n.name]=n.val}else t=Ko(e),r.options[t.name]=t.value}throw new Error("No closing tag for enum")},Ko=function(e){for(var t=null,r=null,n=function(e){return"true"===e||"false"!==e&&e.replace(/^"+|"+$/gm,"")};e.length;){if(";"===e[0])return e.shift(),{name:t,value:r};switch(e[0]){case"option":e.shift();var i="("===e[0];if(i&&e.shift(),t=e.shift(),i){if(")"!==e[0])throw new Error("Expected ) but found "+e[0]);e.shift()}"."===e[0][0]&&(t+=e.shift());break;case"=":if(e.shift(),null===t)throw new Error("Expected key for option with value: "+e[0]);if(r=n(e.shift()),"optimize_for"===t&&!/^(SPEED|CODE_SIZE|LITE_RUNTIME)$/.test(r))throw new Error("Unexpected value for option optimize_for: "+r);"{"===r&&(r=Ho(e));break;default:throw new Error("Unexpected token in option: "+e[0])}}},Ho=function(e){for(var t=function(e){return"true"===e||"false"!==e&&e.replace(/^"+|"+$/gm,"")},r={};e.length;){if("}"===e[0])return e.shift(),r;var n="("===e[0];n&&e.shift();var i=e.shift();if(n){if(")"!==e[0])throw new Error("Expected ) but found "+e[0]);e.shift()}var o=null;switch(e[0]){case":":if(void 0!==r[i])throw new Error("Duplicate option map key "+i);e.shift(),"{"===(o=t(e.shift()))&&(o=Ho(e)),r[i]=o,";"===e[0]&&e.shift();break;case"{":if(e.shift(),o=Ho(e),void 0===r[i]&&(r[i]=[]),!Array.isArray(r[i]))throw new Error("Duplicate option map key "+i);r[i].push(o);break;default:throw new Error("Unexpected token in option map: "+e[0])}}throw new Error("No closing tag for option map")},Go=function(e){e.shift();var t=e.shift().replace(/^"+|"+$/gm,"");if(";"!==e[0])throw new Error("Unexpected token: "+e[0]+'. Expected ";"');return e.shift(),t},$o=function(e){e.shift();var t={name:e.shift(),methods:[],options:{}};if("{"!==e[0])throw new Error("Expected { but found "+e[0]);for(e.shift();e.length;){if("}"===e[0])return e.shift(),";"===e[0]&&e.shift(),t;switch(e[0]){case"option":var r=Ko(e);if(void 0!==t.options[r.name])throw new Error("Duplicate option "+r.name);t.options[r.name]=r.value;break;case"rpc":t.methods.push(qo(e));break;default:throw new Error("Unexpected token in service: "+e[0])}}throw new Error("No closing tag for service")},qo=function(e){e.shift();var t={name:e.shift(),input_type:null,output_type:null,client_streaming:!1,server_streaming:!1,options:{}};if("("!==e[0])throw new Error("Expected ( but found "+e[0]);if(e.shift(),"stream"===e[0]&&(e.shift(),t.client_streaming=!0),t.input_type=e.shift(),")"!==e[0])throw new Error("Expected ) but found "+e[0]);if(e.shift(),"returns"!==e[0])throw new Error("Expected returns but found "+e[0]);if(e.shift(),"("!==e[0])throw new Error("Expected ( but found "+e[0]);if(e.shift(),"stream"===e[0]&&(e.shift(),t.server_streaming=!0),t.output_type=e.shift(),")"!==e[0])throw new Error("Expected ) but found "+e[0]);if(e.shift(),";"===e[0])return e.shift(),t;if("{"!==e[0])throw new Error("Expected { but found "+e[0]);for(e.shift();e.length;){if("}"===e[0])return e.shift(),";"===e[0]&&e.shift(),t;if("option"!==e[0])throw new Error("Unexpected token in rpc options: "+e[0]);var r=Ko(e);if(void 0!==t.options[r.name])throw new Error("Duplicate option "+r.name);t.options[r.name]=r.value}throw new Error("No closing tag for rpc")},Wo=function(e){for(var t,r,n,i,o,s=(t=e.toString(),i=function(e){return e.trim()},o=[],t.replace(/"(\\"|[^"\n])*?"|'(\\'|[^'\n])*?'/gm,(n=o,function(e){var t="$"+n.length+"$";return n.push(e),t})).replace(/([;,{}()=:[\]<>]|\/\*|\*\/)/g," $1 ").split(/\n/).map(i).filter(Boolean).map((function(e){var t=e.indexOf("//");return t>-1?e.slice(0,t):e})).map(i).filter(Boolean).join("\n").split(/\s+|\n+/gm).filter((r=!1,function(e){return"/*"===e?(r=!0,!1):"*/"===e?(r=!1,!1):!r})).map(function(e){var t=/^\$(\d+)\$$/;return function(r){var n=r.match(t);return n?e[+n[1]]:r}}(o))),u=0;u<s.length;u++){var a;if(/^("|')([^'"]*)$/.test(s[u]))for(a=1===s[u].length?u+1:u;a<s.length;a++)if(/^[^'"\\]*(?:\\.[^'"\\]*)*("|')$/.test(s[a])){s=s.slice(0,u).concat(s.slice(u,a+1).join("")).concat(s.slice(a+1));break}}for(var c={syntax:3,package:null,imports:[],enums:[],messages:[],options:{},extends:[]},f=!0;s.length;){switch(s[0]){case"package":c.package=Po(s);break;case"syntax":if(!f)throw new Error("Protobuf syntax version should be first thing in file");c.syntax=Mo(s);break;case"message":c.messages.push(Do(s));break;case"enum":c.enums.push(Fo(s));break;case"option":var l=Ko(s);if(c.options[l.name])throw new Error("Duplicate option "+l.name);c.options[l.name]=l.value;break;case"import":c.imports.push(Go(s));break;case"extend":c.extends.push(jo(s));break;case"service":c.services||(c.services=[]),c.services.push($o(s));break;default:throw new Error("Unexpected token: "+s[0])}f=!1}return c.extends.forEach((function(e){c.messages.forEach((function(t){t.name===e.name&&e.message.fields.forEach((function(e){if(!t.extensions||e.tag<t.extensions.from||e.tag>t.extensions.to)throw new Error(t.name+" does not declare "+e.tag+" as an extension number");t.fields.push(e)}))}))})),c.messages.forEach((function(e){e.fields.forEach((function(t){var r,n,i,o;if(t.options&&"true"===t.options.packed&&-1===Bo.indexOf(t.type)){if(-1===t.type.indexOf(".")){if(e.enums&&e.enums.some((function(e){return e.name===t.type})))return}else{if((r=t.type.split(".")).length>2)throw new Error("what is this?");if(n=r[0],i=r[1],c.messages.some((function(e){if(e.name===n)return o=e,e})),o&&o.enums&&o.enums.some((function(e){return e.name===i})))return}throw new Error("Fields of type "+t.type+' cannot be declared [packed=true]. Only repeated fields of primitive numeric types (types which use the varint, 32-bit, or 64-bit wire types) can be declared "packed". See https://developers.google.com/protocol-buffers/docs/encoding#optional')}}))})),c},Vo=function(e,t){var r=e.repeated?"repeated":e.required?"required":"optional";"map"===e.type&&(r="map<"+e.map.from+","+e.map.to+">"),e.oneof&&(r="");var n=Object.keys(e.options||{}).map((function(t){return t+" = "+e.options[t]})).join(",");return n&&(n=" ["+n+"]"),t.push((r?r+" ":"")+("map"===e.map?"":e.type+" ")+e.name+" = "+e.tag+n+";"),t},Yo=function(e,t){t.push("message "+e.name+" {"),e.options||(e.options={}),Xo(e.options,t),e.enums||(e.enums=[]),e.enums.forEach((function(e){t.push(Jo(e,[]))})),e.messages||(e.messages=[]),e.messages.forEach((function(e){t.push(Yo(e,[]))}));var r={};return e.fields||(e.fields=[]),e.fields.forEach((function(e){e.oneof?(r[e.oneof]||(r[e.oneof]=[]),r[e.oneof].push(Vo(e,[]))):t.push(Vo(e,[]))})),Object.keys(r).forEach((function(e){r[e].unshift("oneof "+e+" {"),r[e].push("}"),t.push(r[e])})),t.push("}",""),t},Jo=function(e,t){t.push("enum "+e.name+" {"),e.options||(e.options={});var r=Xo(e.options,[]);return r.length>1&&t.push(r.slice(0,-1)),Object.keys(e.values).map((function(r){var n=Zo(e.values[r]);t.push([r+" = "+n+";"])})),t.push("}",""),t},Zo=function(e,t){var r=Object.keys(e.options||{}).map((function(t){return t+" = "+e.options[t]})).join(",");return r&&(r=" ["+r+"]"),e.value+r},Xo=function(e,t){var r=Object.keys(e);return r.forEach((function(r){var n=e[r];~r.indexOf(".")&&(r="("+r+")");var i=typeof n;"object"===i?(n=Qo(n,[])).length&&t.push("option "+r+" = {",n,"};"):("string"===i&&"optimize_for"!==r&&(n='"'+n+'"'),t.push("option "+r+" = "+n+";"))})),r.length>0&&t.push(""),t},Qo=function(e,t){return Object.keys(e).forEach((function(r){var n=e[r],i=typeof n;"object"===i?Array.isArray(n)?n.forEach((function(e){(e=Qo(e,[])).length&&t.push(r+" {",e,"}")})):(n=Qo(n,[])).length&&t.push(r+" {",n,"}"):("string"===i&&(n='"'+n+'"'),t.push(r+": "+n))})),t},es=function(e,t){var r="rpc "+e.name+"(";e.client_streaming&&(r+="stream "),r+=e.input_type+") returns (",e.server_streaming&&(r+="stream "),r+=e.output_type+")",e.options||(e.options={});var n=Xo(e.options,[]);return n.length>1?t.push(r+" {",n.slice(0,-1),"}"):t.push(r+";"),t},ts=function(e){return function(t){return Array.isArray(t)?t.map(ts(e+"  ")).join("\n"):e+t}},rs=Wo,ns=Wo,is=function(e){var t=[];return t.push('syntax = "proto'+e.syntax+'";',""),e.package&&t.push("package "+e.package+";",""),e.options||(e.options={}),Xo(e.options,t),e.enums||(e.enums=[]),e.enums.forEach((function(e){Jo(e,t)})),e.messages||(e.messages=[]),e.messages.forEach((function(e){Yo(e,t)})),e.services&&e.services.forEach((function(e){!function(e,t){t.push("service "+e.name+" {"),e.options||(e.options={}),Xo(e.options,t),e.methods||(e.methods=[]),e.methods.forEach((function(e){t.push(es(e,[]))})),t.push("}","")}(e,t)})),t.map(ts("")).join("\n")};rs.parse=ns,rs.stringify=is;var os=function(e,t,r,n){return t.bytes=r.bytes=0,{type:e,encode:t,decode:r,encodingLength:n}},ss=function e(t,r,n){r=r||[];var i=n=n||0;for(;t>=us;)r[n++]=255&t|128,t/=128;for(;-128&t;)r[n++]=255&t|128,t>>>=7;return r[n]=0|t,e.bytes=n-i+1,r},us=Math.pow(2,31);var as=function e(t,r){var n,i=0,o=0,s=r=r||0,u=t.length;do{if(s>=u)throw e.bytes=0,new RangeError("Could not decode varint");n=t[s++],i+=o<28?(127&n)<<o:(127&n)*Math.pow(2,o),o+=7}while(n>=128);return e.bytes=s-r,i};var cs=Math.pow(2,7),fs=Math.pow(2,14),ls=Math.pow(2,21),hs=Math.pow(2,28),ps=Math.pow(2,35),ds=Math.pow(2,42),ys=Math.pow(2,49),vs=Math.pow(2,56),gs=Math.pow(2,63),ms={encode:ss,decode:as,encodingLength:function(e){return e<cs?1:e<fs?2:e<ls?3:e<hs?4:e<ps?5:e<ds?6:e<ys?7:e<vs?8:e<gs?9:10}};function bs(e){return e.byteLength}var _s=os(2,(function e(t,r,n,i){const o=i,s=bs(t);ms.encode(s,r,i),i+=ms.encode.bytes,r.set(t,i),e.bytes=(i+=s)-o}),(function e(t,r,n){const i=n,o=ms.decode(t,n);n+=ms.decode.bytes;const s=t.slice(n,n+o);return n+=s.length,e.bytes=n-i,s}),(function(e){const t=bs(e);return ms.encodingLength(t)+t}));var ws=os(2,(function e(t,r,n,i){const o=i,s=Nn(t).byteLength;ms.encode(s,r,i,"utf-8"),i+=ms.encode.bytes;const u=Nn(t);r.set(u,i),i+=u.length,e.bytes=i-o}),(function e(t,r,n){const i=n,o=ms.decode(t,n);n+=ms.decode.bytes;const s=In(t.subarray(n,n+o));return e.bytes=(n+=o)-i,s}),(function(e){const t=Nn(e).byteLength;return ms.encodingLength(t)+t}));var ks=os(0,(function e(t,r,n,i){r[i]=t?1:0,e.bytes=1}),(function e(t,r,n){const i=t[n]>0;return e.bytes=1,i}),(function(){return 1}));var Es=os(0,(function e(t,r,n,i){ms.encode(t<0?t+4294967296:t,r,i),e.bytes=ms.encode.bytes}),(function e(t,r,n){const i=ms.decode(t,n);return e.bytes=ms.decode.bytes,i>2147483647?i-4294967296:i}),(function(e){return ms.encodingLength(e<0?e+4294967296:e)}));var As=os(0,(function e(t,r,n,i){if(t<0){const n=i+9;for(ms.encode(-1*t,r,i),r[i+=ms.encode.bytes-1]=128|r[i];i<n-1;)r[++i]=255;r[n]=1,e.bytes=10}else ms.encode(t,r,i),e.bytes=ms.encode.bytes}),(function e(t,r,n){let i=ms.decode(t,n);if(i>=Math.pow(2,63)){let r=9;for(;255===t[n+r-1];)r--;r=r||9;const o=t.subarray(n,n+r);o[r-1]=127&o[r-1],i=-1*ms.decode(o,0),e.bytes=10}else e.bytes=ms.decode.bytes;return i}),(function(e){return e<0?10:ms.encodingLength(e)})),Ss={encode:function e(t,r,n){t=t>=0?2*t:-2*t-1;var i=ms.encode(t,r,n);return e.bytes=ms.encode.bytes,i},decode:function e(t,r){var n=ms.decode(t,r);return e.bytes=ms.decode.bytes,1&n?(n+1)/-2:n/2},encodingLength:function(e){return ms.encodingLength(e>=0?2*e:-2*e-1)}};var xs=os(0,(function e(t,r,n,i){Ss.encode(t,r,i),e.bytes=Ss.encode.bytes}),(function e(t,r,n){const i=Ss.decode(t,n);return e.bytes=Ss.decode.bytes,i}),Ss.encodingLength);var Is=os(0,(function e(t,r,n,i){ms.encode(t,r,i),e.bytes=ms.encode.bytes}),(function e(t,r,n){const i=ms.decode(t,n);return e.bytes=ms.decode.bytes,i}),ms.encodingLength);var Ts=os(1,(function e(t,r,n,i){for(const e of t)r[i]=e,i++;e.bytes=8}),(function e(t,r,n){const i=t.slice(n,n+8);return e.bytes=8,i}),(function(){return 8}));var Os=os(1,(function e(t,r,n,i){n.setFloat64(i,t,!0),e.bytes=8}),(function e(t,r,n){const i=r.getFloat64(n,!0);return e.bytes=8,i}),(function(){return 8}));var Bs=os(5,(function e(t,r,n,i){n.setUint32(i,t,!0),e.bytes=4}),(function e(t,r,n){const i=r.getUint32(n,!0);return e.bytes=4,i}),(function(e){return 4}));var Ns=os(5,(function e(t,r,n,i){n.setInt32(i,t,!0),e.bytes=4}),(function e(t,r,n){const i=r.getInt32(n,!0);return e.bytes=4,i}),(function(e){return 4}));var Cs=os(5,(function e(t,r,n,i){n.setFloat32(i,t,!0),e.bytes=4}),(function e(t,r,n){const i=r.getFloat32(n,!0);return e.bytes=4,i}),(function(){return 4})),Rs=p((function(e,t){t.make=os,t.bytes=_s,t.string=ws,t.bool=ks,t.int32=Es,t.int64=As,t.sint32=t.sint64=xs,t.uint32=t.uint64=t.enum=t.varint=Is,t.fixed64=t.sfixed64=Ts,t.double=Os,t.fixed32=Bs,t.sfixed32=Ns,t.float=Cs})),Us=function(e){return null!=e&&("number"!=typeof e||!isNaN(e))};const js=Us;function Ls(e){return`${e.substring(0,1).toUpperCase()}${e.substring(1)}`}function Ds(e,t,r,n){if(Object.prototype.hasOwnProperty.call(e,t))return;const i=Ls(t);Object.defineProperties(e,{[t]:{enumerable:!0,configurable:!0,set:e=>{r=e},get:()=>void 0===r?n:r},[`has${i}`]:{configurable:!0,value:()=>void 0!==r},[`set${i}`]:{configurable:!0,value:e=>{r=e}},[`get${i}`]:{configurable:!0,value:()=>r},[`clear${i}`]:{configurable:!0,value:()=>{r=void 0,e[t]=void 0}}})}var Ps=function(e,t,r,n){switch(e){case 0:return ms.decode(t,n),n+ms.decode.bytes;case 1:return n+8;case 2:var i=ms.decode(t,n);return n+ms.decode.bytes+i;case 3:case 4:throw new Error("Groups are not supported");case 5:return n+4;default:throw new Error("Unknown wire type: "+e)}},Ms=function(e){if(e.map)return{};if(e.repeated)return[];switch(e.type){case"string":return"";case"bool":return!1;case"float":case"double":case"sfixed32":case"fixed32":case"varint":case"enum":case"uint64":case"uint32":case"int64":case"int32":case"sint64":case"sint32":return 0;default:return null}},zs=function(e,t){if(void 0===t)return t;switch(e.type){case"bool":return"true"===t;case"float":case"double":case"sfixed32":case"fixed32":case"varint":case"enum":case"uint64":case"uint32":case"int64":case"int32":case"sint64":case"sint32":return parseInt(t,10);default:return t}},Fs=function(e,t,r){const n=[],i={},o=[],s=[];for(var u=0;u<r.length;u++){const r=e.fields[u];i[r.tag]=u;const a=r.options&&r.options.default,c=t(r.type,e.id,!1);s[u]=[a,c&&c.values],e.fields[u].packed=r.repeated&&r.options&&r.options.packed&&"false"!==r.options.packed,r.required&&n.push(r.name),r.oneof&&o.push(r.name)}function a(e,t,r,n,i,s,u){const a=t.name;if(t.oneof){const e=Object.keys(r);for(var c=0;c<e.length;c++)if(o.indexOf(e[c])>-1){const t=Ls(e[c]);delete r[`has${t}`],delete r[`get${t}`],delete r[`set${t}`],delete r[`clear${t}`],delete r[e[c]]}}let f;if(e.message){const o=ms.decode(n,s);s+=ms.decode.bytes;const u=e.decode(n,i,s,s+o);t.map?(f=r[a]||{},f[u.key]=u.value):t.repeated?(f=r[a]||[],f.push(u)):f=u}else t.repeated?(f=r[a]||[],f.push(e.decode(n,i,s))):f=e.decode(n,i,s);return Ds(r,a,f),s+=e.decode.bytes}return function t(u,c,f,l){if(null==f&&(f=0),null==l&&(l=u.length),!(l<=u.length&&f<=u.length))throw new Error("Decoded message is not valid");c||(c=new DataView(u.buffer,u.byteOffset,u.byteLength));for(var h,p=f,d={};;){if(l<=f){var y,v,g="",m=0;for(m=0;m<n.length;m++)if(g=n[m],!js(d[g]))throw new Error("Decoded message is not valid, missing required field: "+g);for(m=0;m<r.length;m++){let t;if(h=e.fields[m],v=s[m][0],y=s[m][1],g=h.name,!Object.prototype.hasOwnProperty.call(d,g)){var b=!1;if(h.oneof)for(var _=Object.keys(d),w=0;w<_.length;w++)if(o.indexOf(_[w])>-1){b=!0;break}b||(y?h.repeated?v=[]:(v=v&&y[v]?y[v].value:y[Object.keys(y)[0]].value,v=parseInt(v||0,10)):(t=Ms(h),v=zs(h,v)),Ds(d,g,v,t))}}return t.bytes=f-p,d}var k=ms.decode(u,f);f+=ms.decode.bytes;var E=i[k>>3];if(null!=E){var A=r[E];if((h=e.fields[E]).packed){var S=ms.decode(u,f);for(S+=f+=ms.decode.bytes;f<S;)f=a(A,h,d,u,c,f)}else f=a(A,h,d,u,c,f)}else f=Ps(7&k,u,c,f)}}},Ks=Us;var Hs=function(e,t,r,n,i){const o=Object.keys(n),s=r.length,u={};for(let t=0;t<s;t++){u[t]={p:ms.encode(e.fields[t].tag<<3|2),h:ms.encode(e.fields[t].tag<<3|r[t].type)};const n=e.fields[t];e.fields[t].packed=n.repeated&&n.options&&n.options.packed&&"false"!==n.options.packed}function a(e,t,r,n,i,o,s){let u=0;if(!o)for(u=0;u<n.length;u++)e[r++]=n[u];return i.message&&(ms.encode(i.encodingLength(s),e,r),r+=ms.encode.bytes),i.encode(s,e,t,r),r+i.encode.bytes}return function t(c,f,l,h=0){null==f&&(f=new Uint8Array(i(c))),null==l&&(l=new DataView(f.buffer,f.byteOffset,f.byteLength));const p=h,d=Object.keys(c);let y=0,v=!1;for(y=0;y<o.length;y++){const e=o[y],t=n[y];if(d.indexOf(t)>-1){if(v)throw new Error("only one of the properties defined in oneof "+e+" can be set");v=!0}}for(y=0;y<s;y++){const t=r[y],n=e.fields[y];let i=c[n.name],o=0;if(!Ks(i)){if(n.required)throw new Error(n.name+" is required");continue}const s=u[y].p,p=u[y].h,d=n.packed;if(n.map){const e=Object.keys(i);for(o=0;o<e.length;o++)e[o]={key:e[o],value:i[e[o]]};i=e}if(d){let e=0;for(o=0;o<i.length;o++)Object.prototype.hasOwnProperty.call(i,o)&&(e+=t.encodingLength(i[o]));if(e){for(o=0;o<p.length;o++)f[h++]=s[o];ms.encode(e,f,h),h+=ms.encode.bytes}}if(n.repeated){let e;for(o=0;o<i.length;o++)e=i[o],Ks(e)&&(h=a(f,l,h,p,t,d,e))}else h=a(f,l,h,p,t,d,i)}return t.bytes=h-p,f}},Gs=Us;var $s=function(e,t,r){const n=Object.keys(r),i=t.length,o=new Array(i);for(let r=0;r<e.fields.length;r++){o[r]=ms.encodingLength(e.fields[r].tag<<3|t[r].type);const n=e.fields[r];e.fields[r].packed=n.repeated&&n.options&&n.options.packed&&"false"!==n.options.packed}return function(s){let u=0,a=0,c=0;for(a=0;a<n.length;a++){const e=n[a],t=r[e];let i=!1;for(c=0;c<t.length;c++)if(Gs(s[t[c]])){if(i)throw new Error("only one of the properties defined in oneof "+e+" can be set");i=!0}}for(a=0;a<i;a++){const r=t[a],n=e.fields[a];let i=s[n.name];const f=o[a];let l;if(Gs(i)){if(n.map){const e=Object.keys(i);for(c=0;c<e.length;c++)e[c]={key:e[c],value:i[e[c]]};i=e}if(n.packed){let e=0;for(c=0;c<i.length;c++)Gs(i[c])&&(l=r.encodingLength(i[c]),e+=l,r.message&&(e+=ms.encodingLength(l)));e&&(u+=f+e+ms.encodingLength(e))}else if(n.repeated)for(c=0;c<i.length;c++)Gs(i[c])&&(l=r.encodingLength(i[c]),u+=f+l+(r.message?ms.encodingLength(l):0));else l=r.encodingLength(i),u+=f+l+(r.message?ms.encodingLength(l):0)}else if(n.required)throw new Error(n.name+" is required")}return u}};var qs=function(e,t){const r={},n={},i={},o=function(e,t){e.enums&&e.enums.forEach((function(e){e.id=t+(t?".":"")+e.name,n[e.id]=e,o(e,e.id)})),e.messages&&e.messages.forEach((function(n){n.id=t+(t?".":"")+n.name,r[n.id]=n,n.fields.forEach((function(n){if(!n.map)return;const i="Map_"+n.map.from+"_"+n.map.to,o={name:i,enums:[],messages:[],fields:[{name:"key",type:n.map.from,tag:1,repeated:!1,required:!0},{name:"value",type:n.map.to,tag:2,repeated:!1,required:!1}],extensions:null,id:t+(t?".":"")+i};r[o.id]||(r[o.id]=o,e.messages.push(o)),n.type=i,n.repeated=!0})),o(n,n.id)}))};o(e,"");const s=function(e,t){e.messages.forEach((function(r){t[r.name]=u(r.name,e.id)})),e.enums.forEach((function(e){t[e.name]=function(e){if(!e)return null;const t={};return Object.keys(e).forEach((function(r){t[r]=e[r].value})),t}(e.values)})),t.type=2,t.message=!0,t.name=e.name;const r={};e.fields.forEach((function(e){e.oneof&&(r[e.oneof]||(r[e.oneof]=[]),r[e.oneof].push(e.name))}));const n=e.fields.map((function(t){return u(t.type,e.id)})),i=$s(e,n,r),o=Hs(e,u,n,r,i),s=Fs(e,u,n);return o.bytes=s.bytes=0,t.buffer=!0,t.encode=o,t.decode=s,t.encodingLength=i,t},u=function(e,o,u){if(t&&t[e])return t[e];if(Rs[e])return Rs[e];const a=(o?o+"."+e:e).split(".").map((function(t,r,n){return n.slice(0,r).concat(e).join(".")})).reverse().reduce((function(e,t){return e||r[t]||n[t]}),null);if(!1===u)return a;if(!a)throw new Error("Could not resolve "+e);if(a.values)return function(e){const t=Object.keys(e.values||[]).map((function(t){return parseInt(e.values[t].value,10)}));return Rs.make(0,(function e(r,n,i,o){if(!t.length||-1===t.indexOf(r))throw new Error("Invalid enum value: "+r);return ms.encode(r,n,o),e.bytes=ms.encode.bytes,n}),(function e(r,n,i){var o=ms.decode(r,i);if(!t.length||-1===t.indexOf(o))throw new Error("Invalid enum value: "+o);return e.bytes=ms.decode.bytes,o}),ms.encodingLength)}(a);return i[a.id]||s(a,i[a.id]={})};return(e.enums||[]).concat((e.messages||[]).map((function(e){return u(e.id)})))},Ws=function(e,t){if(t||(t={}),!e)throw new Error("Pass in a .proto string or a protobuf-schema parsed object");var r="object"!=typeof e||e instanceof Uint8Array?rs.parse(e):e,n=function(){var e=this;qs(r,t.encodings||{}).forEach((function(t){e[t.name]=function(e){if(!e)return null;var t={};return Object.keys(e).forEach((function(r){t[r]=e[r].value})),t}(t.values)||t}))};return n.prototype.toString=function(){return rs.stringify(r)},n.prototype.toJSON=function(){return r},new n},Vs="// An IPFS MerkleDAG Link\nmessage PBLink {\n\n  // multihash of the target object\n  optional bytes Hash = 1;\n\n  // utf string name. should be unique per object\n  optional string Name = 2;\n\n  // cumulative size of target object\n  optional uint64 Tsize = 3;\n}\n\n// An IPFS MerkleDAG Node\nmessage PBNode {\n\n  // refs to other objects\n  repeated PBLink Links = 2;\n\n  // opaque user data\n  optional bytes Data = 1;\n}",Ys=p((function(e,t){const r=Ws(Vs);t=e.exports;const n=e=>{const t=e.Data,n=e.Links||[];return r.PBNode.encode((e=>{const t={};return e.Data&&e.Data.byteLength>0?t.Data=e.Data:t.Data=null,e.Links&&e.Links.length>0?t.Links=e.Links.map((e=>({Hash:e.Hash.bytes,Name:e.Name,Tsize:e.Tsize}))):t.Links=null,t})({Data:t,Links:n}))};t.serializeDAGNode=n,t.serializeDAGNodeLike=(e,t=[])=>{const r={Data:e};return r.Links=t.map((e=>Oo.isDAGLink(e)?e:Oo.util.createDagLinkFromB58EncodedHash(e))),n(r)}}));function Js(e,t){for(const r in t)Object.defineProperty(e,r,{value:t[r],enumerable:!0,configurable:!0});return e}var Zs=function(e,t,r){if(!e||"string"==typeof e)throw new TypeError("Please pass an Error to err-code");r||(r={}),"object"==typeof t&&(r=t,t=void 0),null!=t&&(r.code=t);try{return Js(e,r)}catch(t){r.message=e.message,r.stack=e.stack;const n=function(){};return n.prototype=Object.create(Object.getPrototypeOf(e)),Js(new n,r)}},Xs=p((function(e){!function(){var t="input is invalid type",r="object"==typeof window,n=r?window:{};n.JS_SHA3_NO_WINDOW&&(r=!1);var i=!r&&"object"==typeof self;!n.JS_SHA3_NO_NODE_JS&&"object"==typeof Tt&&Tt.versions&&Tt.versions.node?n=f:i&&(n=self);var o=!n.JS_SHA3_NO_COMMON_JS&&e.exports,s=!n.JS_SHA3_NO_ARRAY_BUFFER&&"undefined"!=typeof ArrayBuffer,u="0123456789abcdef".split(""),a=[4,1024,262144,67108864],c=[0,8,16,24],l=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648],h=[224,256,384,512],p=[128,256],d=["hex","buffer","arrayBuffer","array","digest"],y={128:168,256:136};!n.JS_SHA3_NO_NODE_JS&&Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),!s||!n.JS_SHA3_NO_ARRAY_BUFFER_IS_VIEW&&ArrayBuffer.isView||(ArrayBuffer.isView=function(e){return"object"==typeof e&&e.buffer&&e.buffer.constructor===ArrayBuffer});for(var v=function(e,t,r){return function(n){return new N(e,t,e).update(n)[r]()}},g=function(e,t,r){return function(n,i){return new N(e,t,i).update(n)[r]()}},m=function(e,t,r){return function(t,n,i,o){return E["cshake"+e].update(t,n,i,o)[r]()}},b=function(e,t,r){return function(t,n,i,o){return E["kmac"+e].update(t,n,i,o)[r]()}},_=function(e,t,r,n){for(var i=0;i<d.length;++i){var o=d[i];e[o]=t(r,n,o)}return e},w=function(e,t){var r=v(e,t,"hex");return r.create=function(){return new N(e,t,e)},r.update=function(e){return r.create().update(e)},_(r,v,e,t)},k=[{name:"keccak",padding:[1,256,65536,16777216],bits:h,createMethod:w},{name:"sha3",padding:[6,1536,393216,100663296],bits:h,createMethod:w},{name:"shake",padding:[31,7936,2031616,520093696],bits:p,createMethod:function(e,t){var r=g(e,t,"hex");return r.create=function(r){return new N(e,t,r)},r.update=function(e,t){return r.create(t).update(e)},_(r,g,e,t)}},{name:"cshake",padding:a,bits:p,createMethod:function(e,t){var r=y[e],n=m(e,0,"hex");return n.create=function(n,i,o){return i||o?new N(e,t,n).bytepad([i,o],r):E["shake"+e].create(n)},n.update=function(e,t,r,i){return n.create(t,r,i).update(e)},_(n,m,e,t)}},{name:"kmac",padding:a,bits:p,createMethod:function(e,t){var r=y[e],n=b(e,0,"hex");return n.create=function(n,i,o){return new C(e,t,i).bytepad(["KMAC",o],r).bytepad([n],r)},n.update=function(e,t,r,i){return n.create(e,r,i).update(t)},_(n,b,e,t)}}],E={},A=[],S=0;S<k.length;++S)for(var x=k[S],I=x.bits,T=0;T<I.length;++T){var O=x.name+"_"+I[T];if(A.push(O),E[O]=x.createMethod(I[T],x.padding),"sha3"!==x.name){var B=x.name+I[T];A.push(B),E[B]=E[O]}}function N(e,t,r){this.blocks=[],this.s=[],this.padding=t,this.outputBits=r,this.reset=!0,this.finalized=!1,this.block=0,this.start=0,this.blockCount=1600-(e<<1)>>5,this.byteCount=this.blockCount<<2,this.outputBlocks=r>>5,this.extraBytes=(31&r)>>3;for(var n=0;n<50;++n)this.s[n]=0}function C(e,t,r){N.call(this,e,t,r)}N.prototype.update=function(e){if(this.finalized)throw new Error("finalize already called");var r,n=typeof e;if("string"!==n){if("object"!==n)throw new Error(t);if(null===e)throw new Error(t);if(s&&e.constructor===ArrayBuffer)e=new Uint8Array(e);else if(!(Array.isArray(e)||s&&ArrayBuffer.isView(e)))throw new Error(t);r=!0}for(var i,o,u=this.blocks,a=this.byteCount,f=e.length,l=this.blockCount,h=0,p=this.s;h<f;){if(this.reset)for(this.reset=!1,u[0]=this.block,i=1;i<l+1;++i)u[i]=0;if(r)for(i=this.start;h<f&&i<a;++h)u[i>>2]|=e[h]<<c[3&i++];else for(i=this.start;h<f&&i<a;++h)(o=e.charCodeAt(h))<128?u[i>>2]|=o<<c[3&i++]:o<2048?(u[i>>2]|=(192|o>>6)<<c[3&i++],u[i>>2]|=(128|63&o)<<c[3&i++]):o<55296||o>=57344?(u[i>>2]|=(224|o>>12)<<c[3&i++],u[i>>2]|=(128|o>>6&63)<<c[3&i++],u[i>>2]|=(128|63&o)<<c[3&i++]):(o=65536+((1023&o)<<10|1023&e.charCodeAt(++h)),u[i>>2]|=(240|o>>18)<<c[3&i++],u[i>>2]|=(128|o>>12&63)<<c[3&i++],u[i>>2]|=(128|o>>6&63)<<c[3&i++],u[i>>2]|=(128|63&o)<<c[3&i++]);if(this.lastByteIndex=i,i>=a){for(this.start=i-a,this.block=u[l],i=0;i<l;++i)p[i]^=u[i];R(p),this.reset=!0}else this.start=i}return this},N.prototype.encode=function(e,t){var r=255&e,n=1,i=[r];for(r=255&(e>>=8);r>0;)i.unshift(r),r=255&(e>>=8),++n;return t?i.push(n):i.unshift(n),this.update(i),i.length},N.prototype.encodeString=function(e){var r,n=typeof e;if("string"!==n){if("object"!==n)throw new Error(t);if(null===e)throw new Error(t);if(s&&e.constructor===ArrayBuffer)e=new Uint8Array(e);else if(!(Array.isArray(e)||s&&ArrayBuffer.isView(e)))throw new Error(t);r=!0}var i=0,o=e.length;if(r)i=o;else for(var u=0;u<e.length;++u){var a=e.charCodeAt(u);a<128?i+=1:a<2048?i+=2:a<55296||a>=57344?i+=3:(a=65536+((1023&a)<<10|1023&e.charCodeAt(++u)),i+=4)}return i+=this.encode(8*i),this.update(e),i},N.prototype.bytepad=function(e,t){for(var r=this.encode(t),n=0;n<e.length;++n)r+=this.encodeString(e[n]);var i=t-r%t,o=[];return o.length=i,this.update(o),this},N.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var e=this.blocks,t=this.lastByteIndex,r=this.blockCount,n=this.s;if(e[t>>2]|=this.padding[3&t],this.lastByteIndex===this.byteCount)for(e[0]=e[r],t=1;t<r+1;++t)e[t]=0;for(e[r-1]|=2147483648,t=0;t<r;++t)n[t]^=e[t];R(n)}},N.prototype.toString=N.prototype.hex=function(){this.finalize();for(var e,t=this.blockCount,r=this.s,n=this.outputBlocks,i=this.extraBytes,o=0,s=0,a="";s<n;){for(o=0;o<t&&s<n;++o,++s)e=r[o],a+=u[e>>4&15]+u[15&e]+u[e>>12&15]+u[e>>8&15]+u[e>>20&15]+u[e>>16&15]+u[e>>28&15]+u[e>>24&15];s%t==0&&(R(r),o=0)}return i&&(e=r[o],a+=u[e>>4&15]+u[15&e],i>1&&(a+=u[e>>12&15]+u[e>>8&15]),i>2&&(a+=u[e>>20&15]+u[e>>16&15])),a},N.prototype.arrayBuffer=function(){this.finalize();var e,t=this.blockCount,r=this.s,n=this.outputBlocks,i=this.extraBytes,o=0,s=0,u=this.outputBits>>3;e=i?new ArrayBuffer(n+1<<2):new ArrayBuffer(u);for(var a=new Uint32Array(e);s<n;){for(o=0;o<t&&s<n;++o,++s)a[s]=r[o];s%t==0&&R(r)}return i&&(a[o]=r[o],e=e.slice(0,u)),e},N.prototype.buffer=N.prototype.arrayBuffer,N.prototype.digest=N.prototype.array=function(){this.finalize();for(var e,t,r=this.blockCount,n=this.s,i=this.outputBlocks,o=this.extraBytes,s=0,u=0,a=[];u<i;){for(s=0;s<r&&u<i;++s,++u)e=u<<2,t=n[s],a[e]=255&t,a[e+1]=t>>8&255,a[e+2]=t>>16&255,a[e+3]=t>>24&255;u%r==0&&R(n)}return o&&(e=u<<2,t=n[s],a[e]=255&t,o>1&&(a[e+1]=t>>8&255),o>2&&(a[e+2]=t>>16&255)),a},C.prototype=new N,C.prototype.finalize=function(){return this.encode(this.outputBits,!0),N.prototype.finalize.call(this)};var R=function(e){var t,r,n,i,o,s,u,a,c,f,h,p,d,y,v,g,m,b,_,w,k,E,A,S,x,I,T,O,B,N,C,R,U,j,L,D,P,M,z,F,K,H,G,$,q,W,V,Y,J,Z,X,Q,ee,te,re,ne,ie,oe,se,ue,ae,ce,fe;for(n=0;n<48;n+=2)i=e[0]^e[10]^e[20]^e[30]^e[40],o=e[1]^e[11]^e[21]^e[31]^e[41],s=e[2]^e[12]^e[22]^e[32]^e[42],u=e[3]^e[13]^e[23]^e[33]^e[43],a=e[4]^e[14]^e[24]^e[34]^e[44],c=e[5]^e[15]^e[25]^e[35]^e[45],f=e[6]^e[16]^e[26]^e[36]^e[46],h=e[7]^e[17]^e[27]^e[37]^e[47],t=(p=e[8]^e[18]^e[28]^e[38]^e[48])^(s<<1|u>>>31),r=(d=e[9]^e[19]^e[29]^e[39]^e[49])^(u<<1|s>>>31),e[0]^=t,e[1]^=r,e[10]^=t,e[11]^=r,e[20]^=t,e[21]^=r,e[30]^=t,e[31]^=r,e[40]^=t,e[41]^=r,t=i^(a<<1|c>>>31),r=o^(c<<1|a>>>31),e[2]^=t,e[3]^=r,e[12]^=t,e[13]^=r,e[22]^=t,e[23]^=r,e[32]^=t,e[33]^=r,e[42]^=t,e[43]^=r,t=s^(f<<1|h>>>31),r=u^(h<<1|f>>>31),e[4]^=t,e[5]^=r,e[14]^=t,e[15]^=r,e[24]^=t,e[25]^=r,e[34]^=t,e[35]^=r,e[44]^=t,e[45]^=r,t=a^(p<<1|d>>>31),r=c^(d<<1|p>>>31),e[6]^=t,e[7]^=r,e[16]^=t,e[17]^=r,e[26]^=t,e[27]^=r,e[36]^=t,e[37]^=r,e[46]^=t,e[47]^=r,t=f^(i<<1|o>>>31),r=h^(o<<1|i>>>31),e[8]^=t,e[9]^=r,e[18]^=t,e[19]^=r,e[28]^=t,e[29]^=r,e[38]^=t,e[39]^=r,e[48]^=t,e[49]^=r,y=e[0],v=e[1],W=e[11]<<4|e[10]>>>28,V=e[10]<<4|e[11]>>>28,O=e[20]<<3|e[21]>>>29,B=e[21]<<3|e[20]>>>29,ue=e[31]<<9|e[30]>>>23,ae=e[30]<<9|e[31]>>>23,H=e[40]<<18|e[41]>>>14,G=e[41]<<18|e[40]>>>14,j=e[2]<<1|e[3]>>>31,L=e[3]<<1|e[2]>>>31,g=e[13]<<12|e[12]>>>20,m=e[12]<<12|e[13]>>>20,Y=e[22]<<10|e[23]>>>22,J=e[23]<<10|e[22]>>>22,N=e[33]<<13|e[32]>>>19,C=e[32]<<13|e[33]>>>19,ce=e[42]<<2|e[43]>>>30,fe=e[43]<<2|e[42]>>>30,te=e[5]<<30|e[4]>>>2,re=e[4]<<30|e[5]>>>2,D=e[14]<<6|e[15]>>>26,P=e[15]<<6|e[14]>>>26,b=e[25]<<11|e[24]>>>21,_=e[24]<<11|e[25]>>>21,Z=e[34]<<15|e[35]>>>17,X=e[35]<<15|e[34]>>>17,R=e[45]<<29|e[44]>>>3,U=e[44]<<29|e[45]>>>3,S=e[6]<<28|e[7]>>>4,x=e[7]<<28|e[6]>>>4,ne=e[17]<<23|e[16]>>>9,ie=e[16]<<23|e[17]>>>9,M=e[26]<<25|e[27]>>>7,z=e[27]<<25|e[26]>>>7,w=e[36]<<21|e[37]>>>11,k=e[37]<<21|e[36]>>>11,Q=e[47]<<24|e[46]>>>8,ee=e[46]<<24|e[47]>>>8,$=e[8]<<27|e[9]>>>5,q=e[9]<<27|e[8]>>>5,I=e[18]<<20|e[19]>>>12,T=e[19]<<20|e[18]>>>12,oe=e[29]<<7|e[28]>>>25,se=e[28]<<7|e[29]>>>25,F=e[38]<<8|e[39]>>>24,K=e[39]<<8|e[38]>>>24,E=e[48]<<14|e[49]>>>18,A=e[49]<<14|e[48]>>>18,e[0]=y^~g&b,e[1]=v^~m&_,e[10]=S^~I&O,e[11]=x^~T&B,e[20]=j^~D&M,e[21]=L^~P&z,e[30]=$^~W&Y,e[31]=q^~V&J,e[40]=te^~ne&oe,e[41]=re^~ie&se,e[2]=g^~b&w,e[3]=m^~_&k,e[12]=I^~O&N,e[13]=T^~B&C,e[22]=D^~M&F,e[23]=P^~z&K,e[32]=W^~Y&Z,e[33]=V^~J&X,e[42]=ne^~oe&ue,e[43]=ie^~se&ae,e[4]=b^~w&E,e[5]=_^~k&A,e[14]=O^~N&R,e[15]=B^~C&U,e[24]=M^~F&H,e[25]=z^~K&G,e[34]=Y^~Z&Q,e[35]=J^~X&ee,e[44]=oe^~ue&ce,e[45]=se^~ae&fe,e[6]=w^~E&y,e[7]=k^~A&v,e[16]=N^~R&S,e[17]=C^~U&x,e[26]=F^~H&j,e[27]=K^~G&L,e[36]=Z^~Q&$,e[37]=X^~ee&q,e[46]=ue^~ce&te,e[47]=ae^~fe&re,e[8]=E^~y&g,e[9]=A^~v&m,e[18]=R^~S&I,e[19]=U^~x&T,e[28]=H^~j&D,e[29]=G^~L&P,e[38]=Q^~$&W,e[39]=ee^~q&V,e[48]=ce^~te&ne,e[49]=fe^~re&ie,e[0]^=l[n],e[1]^=l[n+1]};if(o)e.exports=E;else for(S=0;S<A.length;++S)n[A[S]]=E[A[S]]}()})),Qs=p((function(e,t){!function(r,n){var i={version:"3.0.0",x86:{},x64:{},inputValidation:!0};function o(e){if(!Array.isArray(e)&&!ArrayBuffer.isView(e))return!1;for(var t=0;t<e.length;t++)if(!Number.isInteger(e[t])||e[t]<0||e[t]>255)return!1;return!0}function s(e,t){return(65535&e)*t+(((e>>>16)*t&65535)<<16)}function u(e,t){return e<<t|e>>>32-t}function a(e){return e=s(e^=e>>>16,2246822507),e=s(e^=e>>>13,3266489909),e^=e>>>16}function c(e,t){e=[e[0]>>>16,65535&e[0],e[1]>>>16,65535&e[1]],t=[t[0]>>>16,65535&t[0],t[1]>>>16,65535&t[1]];var r=[0,0,0,0];return r[3]+=e[3]+t[3],r[2]+=r[3]>>>16,r[3]&=65535,r[2]+=e[2]+t[2],r[1]+=r[2]>>>16,r[2]&=65535,r[1]+=e[1]+t[1],r[0]+=r[1]>>>16,r[1]&=65535,r[0]+=e[0]+t[0],r[0]&=65535,[r[0]<<16|r[1],r[2]<<16|r[3]]}function f(e,t){e=[e[0]>>>16,65535&e[0],e[1]>>>16,65535&e[1]],t=[t[0]>>>16,65535&t[0],t[1]>>>16,65535&t[1]];var r=[0,0,0,0];return r[3]+=e[3]*t[3],r[2]+=r[3]>>>16,r[3]&=65535,r[2]+=e[2]*t[3],r[1]+=r[2]>>>16,r[2]&=65535,r[2]+=e[3]*t[2],r[1]+=r[2]>>>16,r[2]&=65535,r[1]+=e[1]*t[3],r[0]+=r[1]>>>16,r[1]&=65535,r[1]+=e[2]*t[2],r[0]+=r[1]>>>16,r[1]&=65535,r[1]+=e[3]*t[1],r[0]+=r[1]>>>16,r[1]&=65535,r[0]+=e[0]*t[3]+e[1]*t[2]+e[2]*t[1]+e[3]*t[0],r[0]&=65535,[r[0]<<16|r[1],r[2]<<16|r[3]]}function l(e,t){return 32===(t%=64)?[e[1],e[0]]:t<32?[e[0]<<t|e[1]>>>32-t,e[1]<<t|e[0]>>>32-t]:(t-=32,[e[1]<<t|e[0]>>>32-t,e[0]<<t|e[1]>>>32-t])}function h(e,t){return 0===(t%=64)?e:t<32?[e[0]<<t|e[1]>>>32-t,e[1]<<t]:[e[1]<<t-32,0]}function p(e,t){return[e[0]^t[0],e[1]^t[1]]}function d(e){return e=p(e,[0,e[0]>>>1]),e=p(e=f(e,[4283543511,3981806797]),[0,e[0]>>>1]),e=p(e=f(e,[3301882366,444984403]),[0,e[0]>>>1])}i.x86.hash32=function(e,t){if(i.inputValidation&&!o(e))return n;t=t||0;for(var r=e.length%4,c=e.length-r,f=t,l=0,h=3432918353,p=461845907,d=0;d<c;d+=4)l=s(l=e[d]|e[d+1]<<8|e[d+2]<<16|e[d+3]<<24,h),l=s(l=u(l,15),p),f=s(f=u(f^=l,13),5)+3864292196;switch(l=0,r){case 3:l^=e[d+2]<<16;case 2:l^=e[d+1]<<8;case 1:l=s(l^=e[d],h),f^=l=s(l=u(l,15),p)}return(f=a(f^=e.length))>>>0},i.x86.hash128=function(e,t){if(i.inputValidation&&!o(e))return n;t=t||0;for(var r=e.length%16,c=e.length-r,f=t,l=t,h=t,p=t,d=0,y=0,v=0,g=0,m=597399067,b=2869860233,_=951274213,w=2716044179,k=0;k<c;k+=16)d=e[k]|e[k+1]<<8|e[k+2]<<16|e[k+3]<<24,y=e[k+4]|e[k+5]<<8|e[k+6]<<16|e[k+7]<<24,v=e[k+8]|e[k+9]<<8|e[k+10]<<16|e[k+11]<<24,g=e[k+12]|e[k+13]<<8|e[k+14]<<16|e[k+15]<<24,d=u(d=s(d,m),15),f=u(f^=d=s(d,b),19),f=s(f+=l,5)+1444728091,y=u(y=s(y,b),16),l=u(l^=y=s(y,_),17),l=s(l+=h,5)+197830471,v=u(v=s(v,_),17),h=u(h^=v=s(v,w),15),h=s(h+=p,5)+2530024501,g=u(g=s(g,w),18),p=u(p^=g=s(g,m),13),p=s(p+=f,5)+850148119;switch(d=0,y=0,v=0,g=0,r){case 15:g^=e[k+14]<<16;case 14:g^=e[k+13]<<8;case 13:g=s(g^=e[k+12],w),p^=g=s(g=u(g,18),m);case 12:v^=e[k+11]<<24;case 11:v^=e[k+10]<<16;case 10:v^=e[k+9]<<8;case 9:v=s(v^=e[k+8],_),h^=v=s(v=u(v,17),w);case 8:y^=e[k+7]<<24;case 7:y^=e[k+6]<<16;case 6:y^=e[k+5]<<8;case 5:y=s(y^=e[k+4],b),l^=y=s(y=u(y,16),_);case 4:d^=e[k+3]<<24;case 3:d^=e[k+2]<<16;case 2:d^=e[k+1]<<8;case 1:d=s(d^=e[k],m),f^=d=s(d=u(d,15),b)}return f^=e.length,f+=l^=e.length,f+=h^=e.length,l+=f+=p^=e.length,h+=f,p+=f,f=a(f),f+=l=a(l),f+=h=a(h),l+=f+=p=a(p),h+=f,p+=f,("00000000"+(f>>>0).toString(16)).slice(-8)+("00000000"+(l>>>0).toString(16)).slice(-8)+("00000000"+(h>>>0).toString(16)).slice(-8)+("00000000"+(p>>>0).toString(16)).slice(-8)},i.x64.hash128=function(e,t){if(i.inputValidation&&!o(e))return n;t=t||0;for(var r=e.length%16,s=e.length-r,u=[0,t],a=[0,t],y=[0,0],v=[0,0],g=[2277735313,289559509],m=[1291169091,658871167],b=0;b<s;b+=16)y=[e[b+4]|e[b+5]<<8|e[b+6]<<16|e[b+7]<<24,e[b]|e[b+1]<<8|e[b+2]<<16|e[b+3]<<24],v=[e[b+12]|e[b+13]<<8|e[b+14]<<16|e[b+15]<<24,e[b+8]|e[b+9]<<8|e[b+10]<<16|e[b+11]<<24],y=l(y=f(y,g),31),u=c(u=l(u=p(u,y=f(y,m)),27),a),u=c(f(u,[0,5]),[0,1390208809]),v=l(v=f(v,m),33),a=c(a=l(a=p(a,v=f(v,g)),31),u),a=c(f(a,[0,5]),[0,944331445]);switch(y=[0,0],v=[0,0],r){case 15:v=p(v,h([0,e[b+14]],48));case 14:v=p(v,h([0,e[b+13]],40));case 13:v=p(v,h([0,e[b+12]],32));case 12:v=p(v,h([0,e[b+11]],24));case 11:v=p(v,h([0,e[b+10]],16));case 10:v=p(v,h([0,e[b+9]],8));case 9:v=f(v=p(v,[0,e[b+8]]),m),a=p(a,v=f(v=l(v,33),g));case 8:y=p(y,h([0,e[b+7]],56));case 7:y=p(y,h([0,e[b+6]],48));case 6:y=p(y,h([0,e[b+5]],40));case 5:y=p(y,h([0,e[b+4]],32));case 4:y=p(y,h([0,e[b+3]],24));case 3:y=p(y,h([0,e[b+2]],16));case 2:y=p(y,h([0,e[b+1]],8));case 1:y=f(y=p(y,[0,e[b]]),g),u=p(u,y=f(y=l(y,31),m))}return u=c(u=p(u,[0,e.length]),a=p(a,[0,e.length])),a=c(a,u),u=c(u=d(u),a=d(a)),a=c(a,u),("00000000"+(u[0]>>>0).toString(16)).slice(-8)+("00000000"+(u[1]>>>0).toString(16)).slice(-8)+("00000000"+(a[0]>>>0).toString(16)).slice(-8)+("00000000"+(a[1]>>>0).toString(16)).slice(-8)},e.exports&&(t=e.exports=i),t.murmurHash3=i}()}));const eu=self.crypto||self.msCrypto,tu=async(e,t)=>{if("undefined"==typeof self||!self.crypto&&!self.msCrypto)throw new Error("Please use a browser with webcrypto support and ensure the code has been delivered securely via HTTPS/TLS and run within a Secure Context");switch(t){case"sha1":return new Uint8Array(await eu.subtle.digest({name:"SHA-1"},e));case"sha2-256":return new Uint8Array(await eu.subtle.digest({name:"SHA-256"},e));case"sha2-512":return new Uint8Array(await eu.subtle.digest({name:"SHA-512"},e));case"dbl-sha2-256":{const t=await eu.subtle.digest({name:"SHA-256"},e);return new Uint8Array(await eu.subtle.digest({name:"SHA-256"},t))}default:throw new Error(`${t} is not a supported algorithm`)}};var ru={factory:e=>async t=>tu(t,e),digest:tu,multihashing:async(e,t,r)=>{const n=await tu(e,t);return sn.encode(n,t,r)}};var nu={fromNumberTo32BitBuf:e=>{const t=new Uint8Array(4);for(let r=0;r<4;r++)t[r]=255&e,e>>=8;return t}};function iu(e){return(4294967296+e).toString(16).substring(1)}var ou={normalizeInput:function(e){var t;if(e instanceof Uint8Array)t=e;else if(e instanceof W.Buffer)t=new Uint8Array(e);else{if("string"!=typeof e)throw new Error("Input must be an string, Buffer or Uint8Array");t=new Uint8Array(W.Buffer.from(e,"utf8"))}return t},toHex:function(e){return Array.prototype.map.call(e,(function(e){return(e<16?"0":"")+e.toString(16)})).join("")},debugPrint:function(e,t,r){for(var n="\n"+e+" = ",i=0;i<t.length;i+=2){if(32===r)n+=iu(t[i]).toUpperCase(),n+=" ",n+=iu(t[i+1]).toUpperCase();else{if(64!==r)throw new Error("Invalid size "+r);n+=iu(t[i+1]).toUpperCase(),n+=iu(t[i]).toUpperCase()}i%6==4?n+="\n"+new Array(e.length+4).join(" "):i<t.length-2&&(n+=" ")}console.log(n)},testSpeed:function(e,t,r){for(var n=(new Date).getTime(),i=new Uint8Array(t),o=0;o<t;o++)i[o]=o%256;var s=(new Date).getTime();for(console.log("Generated random input in "+(s-n)+"ms"),n=s,o=0;o<r;o++){var u=e(i),a=(new Date).getTime(),c=a-n;n=a,console.log("Hashed in "+c+"ms: "+u.substring(0,20)+"..."),console.log(Math.round(t/(1<<20)/(c/1e3)*100)/100+" MB PER SECOND")}}};function su(e,t,r){var n=e[t]+e[r],i=e[t+1]+e[r+1];n>=4294967296&&i++,e[t]=n,e[t+1]=i}function uu(e,t,r,n){var i=e[t]+r;r<0&&(i+=4294967296);var o=e[t+1]+n;i>=4294967296&&o++,e[t]=i,e[t+1]=o}function au(e,t){return e[t]^e[t+1]<<8^e[t+2]<<16^e[t+3]<<24}function cu(e,t,r,n,i,o){var s=pu[i],u=pu[i+1],a=pu[o],c=pu[o+1];su(hu,e,t),uu(hu,e,s,u);var f=hu[n]^hu[e],l=hu[n+1]^hu[e+1];hu[n]=l,hu[n+1]=f,su(hu,r,n),f=hu[t]^hu[r],l=hu[t+1]^hu[r+1],hu[t]=f>>>24^l<<8,hu[t+1]=l>>>24^f<<8,su(hu,e,t),uu(hu,e,a,c),f=hu[n]^hu[e],l=hu[n+1]^hu[e+1],hu[n]=f>>>16^l<<16,hu[n+1]=l>>>16^f<<16,su(hu,r,n),f=hu[t]^hu[r],l=hu[t+1]^hu[r+1],hu[t]=l>>>31^f<<1,hu[t+1]=f>>>31^l<<1}var fu=new Uint32Array([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),lu=new Uint8Array([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3].map((function(e){return 2*e}))),hu=new Uint32Array(32),pu=new Uint32Array(32);function du(e,t){var r=0;for(r=0;r<16;r++)hu[r]=e.h[r],hu[r+16]=fu[r];for(hu[24]=hu[24]^e.t,hu[25]=hu[25]^e.t/4294967296,t&&(hu[28]=~hu[28],hu[29]=~hu[29]),r=0;r<32;r++)pu[r]=au(e.b,4*r);for(r=0;r<12;r++)cu(0,8,16,24,lu[16*r+0],lu[16*r+1]),cu(2,10,18,26,lu[16*r+2],lu[16*r+3]),cu(4,12,20,28,lu[16*r+4],lu[16*r+5]),cu(6,14,22,30,lu[16*r+6],lu[16*r+7]),cu(0,10,20,30,lu[16*r+8],lu[16*r+9]),cu(2,12,22,24,lu[16*r+10],lu[16*r+11]),cu(4,14,16,26,lu[16*r+12],lu[16*r+13]),cu(6,8,18,28,lu[16*r+14],lu[16*r+15]);for(r=0;r<16;r++)e.h[r]=e.h[r]^hu[r]^hu[r+16]}function yu(e,t){if(0===e||e>64)throw new Error("Illegal output length, expected 0 < length <= 64");if(t&&t.length>64)throw new Error("Illegal key, expected Uint8Array with 0 < length <= 64");for(var r={b:new Uint8Array(128),h:new Uint32Array(16),t:0,c:0,outlen:e},n=0;n<16;n++)r.h[n]=fu[n];var i=t?t.length:0;return r.h[0]^=16842752^i<<8^e,t&&(vu(r,t),r.c=128),r}function vu(e,t){for(var r=0;r<t.length;r++)128===e.c&&(e.t+=e.c,du(e,!1),e.c=0),e.b[e.c++]=t[r]}function gu(e){for(e.t+=e.c;e.c<128;)e.b[e.c++]=0;du(e,!0);for(var t=new Uint8Array(e.outlen),r=0;r<e.outlen;r++)t[r]=e.h[r>>2]>>8*(3&r);return t}function mu(e,t,r){r=r||64,e=ou.normalizeInput(e);var n=yu(r,t);return vu(n,e),gu(n)}var bu={blake2b:mu,blake2bHex:function(e,t,r){var n=mu(e,t,r);return ou.toHex(n)},blake2bInit:yu,blake2bUpdate:vu,blake2bFinal:gu};function _u(e,t){return e[t]^e[t+1]<<8^e[t+2]<<16^e[t+3]<<24}function wu(e,t,r,n,i,o){Su[e]=Su[e]+Su[t]+i,Su[n]=ku(Su[n]^Su[e],16),Su[r]=Su[r]+Su[n],Su[t]=ku(Su[t]^Su[r],12),Su[e]=Su[e]+Su[t]+o,Su[n]=ku(Su[n]^Su[e],8),Su[r]=Su[r]+Su[n],Su[t]=ku(Su[t]^Su[r],7)}function ku(e,t){return e>>>t^e<<32-t}var Eu=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Au=new Uint8Array([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0]),Su=new Uint32Array(16),xu=new Uint32Array(16);function Iu(e,t){var r=0;for(r=0;r<8;r++)Su[r]=e.h[r],Su[r+8]=Eu[r];for(Su[12]^=e.t,Su[13]^=e.t/4294967296,t&&(Su[14]=~Su[14]),r=0;r<16;r++)xu[r]=_u(e.b,4*r);for(r=0;r<10;r++)wu(0,4,8,12,xu[Au[16*r+0]],xu[Au[16*r+1]]),wu(1,5,9,13,xu[Au[16*r+2]],xu[Au[16*r+3]]),wu(2,6,10,14,xu[Au[16*r+4]],xu[Au[16*r+5]]),wu(3,7,11,15,xu[Au[16*r+6]],xu[Au[16*r+7]]),wu(0,5,10,15,xu[Au[16*r+8]],xu[Au[16*r+9]]),wu(1,6,11,12,xu[Au[16*r+10]],xu[Au[16*r+11]]),wu(2,7,8,13,xu[Au[16*r+12]],xu[Au[16*r+13]]),wu(3,4,9,14,xu[Au[16*r+14]],xu[Au[16*r+15]]);for(r=0;r<8;r++)e.h[r]^=Su[r]^Su[r+8]}function Tu(e,t){if(!(e>0&&e<=32))throw new Error("Incorrect output length, should be in [1, 32]");var r=t?t.length:0;if(t&&!(r>0&&r<=32))throw new Error("Incorrect key length, should be in [1, 32]");var n={h:new Uint32Array(Eu),b:new Uint32Array(64),c:0,t:0,outlen:e};return n.h[0]^=16842752^r<<8^e,r>0&&(Ou(n,t),n.c=64),n}function Ou(e,t){for(var r=0;r<t.length;r++)64===e.c&&(e.t+=e.c,Iu(e,!1),e.c=0),e.b[e.c++]=t[r]}function Bu(e){for(e.t+=e.c;e.c<64;)e.b[e.c++]=0;Iu(e,!0);for(var t=new Uint8Array(e.outlen),r=0;r<e.outlen;r++)t[r]=e.h[r>>2]>>8*(3&r)&255;return t}function Nu(e,t,r){r=r||32,e=ou.normalizeInput(e);var n=Tu(r,t);return Ou(n,e),Bu(n)}var Cu={blake2s:Nu,blake2sHex:function(e,t,r){var n=Nu(e,t,r);return ou.toHex(n)},blake2sInit:Tu,blake2sUpdate:Ou,blake2sFinal:Bu},Ru={blake2b:bu.blake2b,blake2bHex:bu.blake2bHex,blake2bInit:bu.blake2bInit,blake2bUpdate:bu.blake2bUpdate,blake2bFinal:bu.blake2bFinal,blake2s:Cu.blake2s,blake2sHex:Cu.blake2sHex,blake2sInit:Cu.blake2sInit,blake2sUpdate:Cu.blake2sUpdate,blake2sFinal:Cu.blake2sFinal};const Uu={init:Ru.blake2bInit,update:Ru.blake2bUpdate,digest:Ru.blake2bFinal},ju={init:Ru.blake2sInit,update:Ru.blake2sUpdate,digest:Ru.blake2sFinal},Lu=(e,t)=>async r=>{const n=t.init(e,null);return t.update(n,r),t.digest(n)};const{factory:Du}=ru,{fromNumberTo32BitBuf:Pu}=nu,Mu=e=>async t=>{switch(e){case"sha3-224":return new Uint8Array(Xs.sha3_224.arrayBuffer(t));case"sha3-256":return new Uint8Array(Xs.sha3_256.arrayBuffer(t));case"sha3-384":return new Uint8Array(Xs.sha3_384.arrayBuffer(t));case"sha3-512":return new Uint8Array(Xs.sha3_512.arrayBuffer(t));case"shake-128":return new Uint8Array(Xs.shake128.create(128).update(t).arrayBuffer());case"shake-256":return new Uint8Array(Xs.shake256.create(256).update(t).arrayBuffer());case"keccak-224":return new Uint8Array(Xs.keccak224.arrayBuffer(t));case"keccak-256":return new Uint8Array(Xs.keccak256.arrayBuffer(t));case"keccak-384":return new Uint8Array(Xs.keccak384.arrayBuffer(t));case"keccak-512":return new Uint8Array(Xs.keccak512.arrayBuffer(t));case"murmur3-128":return Nn(Qs.x64.hash128(t),"base16");case"murmur3-32":return Pu(Qs.x86.hash32(t));default:throw new TypeError(`${e} is not a supported algorithm`)}};var zu={identity:e=>e,sha1:Du("sha1"),sha2256:Du("sha2-256"),sha2512:Du("sha2-512"),dblSha2256:Du("dbl-sha2-256"),sha3224:Mu("sha3-224"),sha3256:Mu("sha3-256"),sha3384:Mu("sha3-384"),sha3512:Mu("sha3-512"),shake128:Mu("shake-128"),shake256:Mu("shake-256"),keccak224:Mu("keccak-224"),keccak256:Mu("keccak-256"),keccak384:Mu("keccak-384"),keccak512:Mu("keccak-512"),murmur3128:Mu("murmur3-128"),murmur332:Mu("murmur3-32"),addBlake:e=>{for(let t=0;t<64;t++)e[45569+t]=Lu(t+1,Uu);for(let t=0;t<32;t++)e[45633+t]=Lu(t+1,ju)}};var Fu=function(e,t){if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(let r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0};async function Ku(e,t,r){const n=await Ku.digest(e,t,r);return sn.encode(n,t,r)}Ku.multihash=sn,Ku.digest=async(e,t,r)=>{const n=Ku.createHash(t),i=await n(e);return r?i.slice(0,r):i},Ku.createHash=function(e){if(!e)throw Zs(new Error("hash algorithm must be specified"),"ERR_HASH_ALGORITHM_NOT_SPECIFIED");if(e=sn.coerceCode(e),!Ku.functions[e])throw Zs(new Error(`multihash function '${e}' not yet supported`),"ERR_HASH_ALGORITHM_NOT_SUPPORTED");return Ku.functions[e]},Ku.functions={0:zu.identity,17:zu.sha1,18:zu.sha2256,19:zu.sha2512,20:zu.sha3512,21:zu.sha3384,22:zu.sha3256,23:zu.sha3224,24:zu.shake128,25:zu.shake256,26:zu.keccak224,27:zu.keccak256,28:zu.keccak384,29:zu.keccak512,34:zu.murmur3128,35:zu.murmur332,86:zu.dblSha2256},zu.addBlake(Ku.functions),Ku.validate=async(e,t)=>{const r=await Ku(e,sn.decode(t).name);return Fu(t,r)};var Hu=Ku,Gu=p((function(e,t){(t=e.exports).codec=Gn.DAG_PB,t.defaultHashAlg=Gn.SHA2_256;t.cid=async(e,r)=>{const n={cidVersion:1,hashAlg:t.defaultHashAlg},i=Object.assign(n,r),o=await Hu(e,i.hashAlg),s=Gn.print[t.codec];return new ri(i.cidVersion,s,o)}}));var $u=async(e,t={})=>{const r=await Gu.cid(e.serialize(),t);return new Oo(t.name||"",e.size,r)},qu=p((function(e,t){e.exports.createDagLinkFromB58EncodedHash=function(e){return new Oo(e.Name||e.name||"",e.Tsize||e.Size||e.size||0,e.Hash||e.hash||e.multihash||e.cid)}})),Wu=p((function(e,t){(e.exports=Oo).util=qu}));var Vu=(e,t)=>{const r=(e=>{if(Wu.isDAGLink(e))return e;if(!("cid"in e||"hash"in e||"Hash"in e||"multihash"in e))throw new Error("Link must be a DAGLink or DAGLink-like. Convert the DAGNode into a DAGLink via `node.toDAGLink()`.");return new Wu(e.Name||e.name,e.Tsize||e.size,e.Hash||e.multihash||e.hash||e.cid)})(t);e.Links.push(r),To(e.Links)};var Yu=(e,t)=>{let r=null;if("string"==typeof t?r=e=>e.Name===t:(t instanceof Uint8Array||ri.isCID(t))&&(r=e=>Fu(e.Hash,t)),!r)throw new Error("second arg needs to be a name or CID");{const t=e.Links;let n=0;for(;n<t.length;){r(t[n])?t.splice(n,1):n++}}},Ju=p((function(e,t){const{serializeDAGNode:r}=Ys;e.exports=Eo(class{constructor(e,t=[],r=null){if(e||(e=new Uint8Array(0)),"string"==typeof e&&(e=Nn(e)),!(e instanceof Uint8Array))throw new Error("Passed 'data' is not a Uint8Array or a String!");if(null!==r&&"number"!=typeof r)throw new Error("Passed 'serializedSize' must be a number!");t=t.map((e=>Oo.isDAGLink(e)?e:Oo.util.createDagLinkFromB58EncodedHash(e))),To(t),Object.defineProperties(this,{Data:{value:e,writable:!1,enumerable:!0},Links:{value:t,writable:!1,enumerable:!0},_serializedSize:{value:r,writable:!0,enumerable:!1},_size:{value:null,writable:!0,enumerable:!1}})}toJSON(){return this._json||(this._json=Object.freeze({data:this.Data,links:this.Links.map((e=>e.toJSON())),size:this.size})),Object.assign({},this._json)}toString(){return`DAGNode <data: "${In(this.Data,"base64urlpad")}", links: ${this.Links.length}, size: ${this.size}>`}_invalidateCached(){this._serializedSize=null,this._size=null}addLink(e){return this._invalidateCached(),Vu(this,e)}rmLink(e){return this._invalidateCached(),Yu(this,e)}toDAGLink(e){return $u(this,e)}serialize(){return r(this)}get size(){return null===this._size&&(null===this._serializedSize&&(this._serializedSize=this.serialize().length),this._size=this.Links.reduce(((e,t)=>e+t.Tsize),this._serializedSize)),this._size}set size(e){throw new Error("Can't set property: 'size' is immutable")}},{className:"DAGNode",symbolName:"@ipld/js-ipld-dag-pb/dagnode"})})),Zu=p((function(e,t){e.exports=Ju})),Xu=p((function(e,t){const r=Ws(Vs),{serializeDAGNodeLike:n}=Ys;(t=e.exports).codec=Gu.codec,t.defaultHashAlg=Gu.defaultHashAlg;t.serialize=e=>Ju.isDAGNode(e)?e.serialize():n(e.Data,e.Links),t.deserialize=e=>{const t=r.PBNode.decode(e),n=t.Links.map((e=>new Oo(e.Name,e.Tsize,e.Hash))),i=null==t.Data?new Uint8Array(0):t.Data;return new Ju(i,n,e.byteLength)},t.cid=(e,t)=>Gu.cid(e,t)})),Qu={resolve:(e,t)=>{let r=Xu.deserialize(e);const n=t.split("/").filter(Boolean);for(;n.length;){const e=n.shift();if(void 0===r[e]){for(const t of r.Links)if(t.Name===e)return{value:t.Hash,remainderPath:n.join("/")};throw new Error(`Object has no property '${e}'`)}if(r=r[e],ri.isCID(r))return{value:r,remainderPath:n.join("/")}}return{value:r,remainderPath:""}},tree:function*(e){const t=Xu.deserialize(e);yield"Data",yield"Links";for(let e=0;e<t.Links.length;e++)yield`Links/${e}`,yield`Links/${e}/Name`,yield`Links/${e}/Tsize`,yield`Links/${e}/Hash`}},ea=p((function(e,t){t.DAGNode=Zu,t.DAGLink=Wu,t.resolver=Qu,t.util=Xu,t.codec=t.util.codec,t.defaultHashAlg=t.util.defaultHashAlg})),ta=function(e){return new ea.DAGLink(e.Name,e.Tsize,e.Hash)},ra=function(e){var t,r,n,i=null===(t=null==e?void 0:e.value)||void 0===t?void 0:t.Data,o=null===(n=null===(r=null==e?void 0:e.value)||void 0===r?void 0:r.Links)||void 0===n?void 0:n.map(ta);return new ea.DAGNode(i,o)},na=W.Buffer.from([8,1]),ia=function(e){return o(void 0,void 0,void 0,(function(){var t;return s(this,(function(r){switch(r.label){case 0:return[4,wo()];case 1:return[4,r.sent().add(e,{cidVersion:1,pin:!0})];case 2:return[2,{cid:(t=r.sent()).cid.toString(),size:t.size,isFile:!0}]}}))}))},oa=function(e){return o(void 0,void 0,void 0,(function(){var t,r,n,i,o,u,a,f;return s(this,(function(s){switch(s.label){case 0:return[4,wo()];case 1:return t=s.sent(),r=[],[4,pa(e)];case 2:s.sent(),s.label=3;case 3:s.trys.push([3,8,9,14]),n=c(t.cat(e)),s.label=4;case 4:return[4,n.next()];case 5:if((i=s.sent()).done)return[3,7];o=i.value,r.push(o),s.label=6;case 6:return[3,4];case 7:return[3,14];case 8:return u=s.sent(),a={error:u},[3,14];case 9:return s.trys.push([9,,12,13]),i&&!i.done&&(f=n.return)?[4,f.call(n)]:[3,11];case 10:s.sent(),s.label=11;case 11:return[3,13];case 12:if(a)throw a.error;return[7];case 13:return[7];case 14:return[2,r]}}))}))},sa=function(e){return o(void 0,void 0,void 0,(function(){var t;return s(this,(function(r){switch(r.label){case 0:return[4,oa(e)];case 1:return t=r.sent(),[2,W.Buffer.concat(t)]}}))}))},ua=function(e){return o(void 0,void 0,void 0,(function(){return s(this,(function(t){switch(t.label){case 0:return[4,sa(e)];case 1:return[2,t.sent().toString()]}}))}))},aa=function(e){return o(void 0,void 0,void 0,(function(){var t,r,n,i,o,u,a,f;return s(this,(function(s){switch(s.label){case 0:return[4,wo()];case 1:t=s.sent(),r=[],s.label=2;case 2:s.trys.push([2,7,8,13]),n=c(t.ls(e)),s.label=3;case 3:return[4,n.next()];case 4:if((i=s.sent()).done)return[3,6];o=i.value,r.push(o),s.label=5;case 5:return[3,3];case 6:return[3,13];case 7:return u=s.sent(),a={error:u},[3,13];case 8:return s.trys.push([8,,11,12]),i&&!i.done&&(f=n.return)?[4,f.call(n)]:[3,10];case 9:s.sent(),s.label=10;case 10:return[3,12];case 11:if(a)throw a.error;return[7];case 12:return[7];case 13:return[2,r]}}))}))},ca=function(e){return o(void 0,void 0,void 0,(function(){var t,r;return s(this,(function(n){switch(n.label){case 0:return[4,wo()];case 1:return t=n.sent(),[4,pa(e)];case 2:return n.sent(),[4,t.dag.get(new ri(e))];case 3:return r=n.sent(),[2,ra(r)]}}))}))},fa=function(e){return o(void 0,void 0,void 0,(function(){var t,r,n;return s(this,(function(i){switch(i.label){case 0:return[4,wo()];case 1:return[4,i.sent().dag.put(e,{format:"dag-pb",hashAlg:"sha2-256"})];case 2:return t=i.sent(),r=t.toV1().toString(),[4,pa(r)];case 3:return i.sent(),[4,ha(r)];case 4:return n=i.sent(),[2,{cid:r,size:n,isFile:!1}]}}))}))},la=function(e){return o(void 0,void 0,void 0,(function(){var t;return s(this,(function(r){return t=new ea.DAGNode(na,e),[2,fa(t)]}))}))},ha=function(e){return o(void 0,void 0,void 0,(function(){return s(this,(function(t){switch(t.label){case 0:return[4,wo()];case 1:return[4,t.sent().files.stat("/ipfs/"+e)];case 2:return[2,t.sent().cumulativeSize]}}))}))},pa=function(e){return o(void 0,void 0,void 0,(function(){var t,r;return s(this,(function(n){switch(n.label){case 0:return[4,wo()];case 1:t=n.sent(),n.label=2;case 2:return n.trys.push([2,4,,5]),[4,t.pin.add(e,{recursive:!1})];case 3:return n.sent(),[3,5];case 4:if(!(r=n.sent()).message||!r.message.includes("already pinned recursively"))throw new Error(r);return[3,5];case 5:return[2]}}))}))},da=p((function(e,t){var r="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=o,t.SlowBuffer=function(e){+e!=e&&(e=0);return o.alloc(+e)},t.INSPECT_MAX_BYTES=50;var n=2147483647;function i(e){if(e>n)throw new RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return Object.setPrototypeOf(t,o.prototype),t}function o(e,t,r){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return a(e)}return s(e,t,r)}function s(e,t,r){if("string"==typeof e)return function(e,t){"string"==typeof t&&""!==t||(t="utf8");if(!o.isEncoding(t))throw new TypeError("Unknown encoding: "+t);var r=0|h(e,t),n=i(r),s=n.write(e,t);s!==r&&(n=n.slice(0,s));return n}(e,t);if(ArrayBuffer.isView(e))return function(e){if(P(e,Uint8Array)){var t=new Uint8Array(e);return f(t.buffer,t.byteOffset,t.byteLength)}return c(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(P(e,ArrayBuffer)||e&&P(e.buffer,ArrayBuffer))return f(e,t,r);if("undefined"!=typeof SharedArrayBuffer&&(P(e,SharedArrayBuffer)||e&&P(e.buffer,SharedArrayBuffer)))return f(e,t,r);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');var n=e.valueOf&&e.valueOf();if(null!=n&&n!==e)return o.from(n,t,r);var s=function(e){if(o.isBuffer(e)){var t=0|l(e.length),r=i(t);return 0===r.length||e.copy(r,0,0,t),r}if(void 0!==e.length)return"number"!=typeof e.length||M(e.length)?i(0):c(e);if("Buffer"===e.type&&Array.isArray(e.data))return c(e.data)}(e);if(s)return s;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return o.from(e[Symbol.toPrimitive]("string"),t,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function u(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function a(e){return u(e),i(e<0?0:0|l(e))}function c(e){for(var t=e.length<0?0:0|l(e.length),r=i(t),n=0;n<t;n+=1)r[n]=255&e[n];return r}function f(e,t,r){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw new RangeError('"length" is outside of buffer bounds');var n;return n=void 0===t&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,t):new Uint8Array(e,t,r),Object.setPrototypeOf(n,o.prototype),n}function l(e){if(e>=n)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+n.toString(16)+" bytes");return 0|e}function h(e,t){if(o.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||P(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var r=e.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;for(var i=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return j(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return L(e).length;default:if(i)return n?-1:j(e).length;t=(""+t).toLowerCase(),i=!0}}function p(e,t,r){var n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return I(this,t,r);case"utf8":case"utf-8":return E(this,t,r);case"ascii":return S(this,t,r);case"latin1":case"binary":return x(this,t,r);case"base64":return k(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function d(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function y(e,t,r,n,i){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),M(r=+r)&&(r=i?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(i)return-1;r=e.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof t&&(t=o.from(t,n)),o.isBuffer(t))return 0===t.length?-1:v(e,t,r,n,i);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):v(e,[t],r,n,i);throw new TypeError("val must be string, number or Buffer")}function v(e,t,r,n,i){var o,s=1,u=e.length,a=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;s=2,u/=2,a/=2,r/=2}function c(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}if(i){var f=-1;for(o=r;o<u;o++)if(c(e,o)===c(t,-1===f?0:o-f)){if(-1===f&&(f=o),o-f+1===a)return f*s}else-1!==f&&(o-=o-f),f=-1}else for(r+a>u&&(r=u-a),o=r;o>=0;o--){for(var l=!0,h=0;h<a;h++)if(c(e,o+h)!==c(t,h)){l=!1;break}if(l)return o}return-1}function g(e,t,r,n){r=Number(r)||0;var i=e.length-r;n?(n=Number(n))>i&&(n=i):n=i;var o=t.length;n>o/2&&(n=o/2);for(var s=0;s<n;++s){var u=parseInt(t.substr(2*s,2),16);if(M(u))return s;e[r+s]=u}return s}function m(e,t,r,n){return D(j(t,e.length-r),e,r,n)}function b(e,t,r,n){return D(function(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,n)}function _(e,t,r,n){return D(L(t),e,r,n)}function w(e,t,r,n){return D(function(e,t){for(var r,n,i,o=[],s=0;s<e.length&&!((t-=2)<0);++s)n=(r=e.charCodeAt(s))>>8,i=r%256,o.push(i),o.push(n);return o}(t,e.length-r),e,r,n)}function k(e,t,r){return 0===t&&r===e.length?G.fromByteArray(e):G.fromByteArray(e.slice(t,r))}function E(e,t,r){r=Math.min(e.length,r);for(var n=[],i=t;i<r;){var o,s,u,a,c=e[i],f=null,l=c>239?4:c>223?3:c>191?2:1;if(i+l<=r)switch(l){case 1:c<128&&(f=c);break;case 2:128==(192&(o=e[i+1]))&&(a=(31&c)<<6|63&o)>127&&(f=a);break;case 3:o=e[i+1],s=e[i+2],128==(192&o)&&128==(192&s)&&(a=(15&c)<<12|(63&o)<<6|63&s)>2047&&(a<55296||a>57343)&&(f=a);break;case 4:o=e[i+1],s=e[i+2],u=e[i+3],128==(192&o)&&128==(192&s)&&128==(192&u)&&(a=(15&c)<<18|(63&o)<<12|(63&s)<<6|63&u)>65535&&a<1114112&&(f=a)}null===f?(f=65533,l=1):f>65535&&(f-=65536,n.push(f>>>10&1023|55296),f=56320|1023&f),n.push(f),i+=l}return function(e){var t=e.length;if(t<=A)return String.fromCharCode.apply(String,e);var r="",n=0;for(;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=A));return r}(n)}t.kMaxLength=n,o.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),o.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(o.prototype,"parent",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.buffer}}),Object.defineProperty(o.prototype,"offset",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.byteOffset}}),o.poolSize=8192,o.from=function(e,t,r){return s(e,t,r)},Object.setPrototypeOf(o.prototype,Uint8Array.prototype),Object.setPrototypeOf(o,Uint8Array),o.alloc=function(e,t,r){return function(e,t,r){return u(e),e<=0?i(e):void 0!==t?"string"==typeof r?i(e).fill(t,r):i(e).fill(t):i(e)}(e,t,r)},o.allocUnsafe=function(e){return a(e)},o.allocUnsafeSlow=function(e){return a(e)},o.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==o.prototype},o.compare=function(e,t){if(P(e,Uint8Array)&&(e=o.from(e,e.offset,e.byteLength)),P(t,Uint8Array)&&(t=o.from(t,t.offset,t.byteLength)),!o.isBuffer(e)||!o.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var r=e.length,n=t.length,i=0,s=Math.min(r,n);i<s;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:n<r?1:0},o.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return o.alloc(0);var r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;var n=o.allocUnsafe(t),i=0;for(r=0;r<e.length;++r){var s=e[r];if(P(s,Uint8Array))i+s.length>n.length?o.from(s).copy(n,i):Uint8Array.prototype.set.call(n,s,i);else{if(!o.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(n,i)}i+=s.length}return n},o.byteLength=h,o.prototype._isBuffer=!0,o.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)d(this,t,t+1);return this},o.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)d(this,t,t+3),d(this,t+1,t+2);return this},o.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)d(this,t,t+7),d(this,t+1,t+6),d(this,t+2,t+5),d(this,t+3,t+4);return this},o.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?E(this,0,e):p.apply(this,arguments)},o.prototype.toLocaleString=o.prototype.toString,o.prototype.equals=function(e){if(!o.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===o.compare(this,e)},o.prototype.inspect=function(){var e="",r=t.INSPECT_MAX_BYTES;return e=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(e+=" ... "),"<Buffer "+e+">"},r&&(o.prototype[r]=o.prototype.inspect),o.prototype.compare=function(e,t,r,n,i){if(P(e,Uint8Array)&&(e=o.from(e,e.offset,e.byteLength)),!o.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),t<0||r>e.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&t>=r)return 0;if(n>=i)return-1;if(t>=r)return 1;if(this===e)return 0;for(var s=(i>>>=0)-(n>>>=0),u=(r>>>=0)-(t>>>=0),a=Math.min(s,u),c=this.slice(n,i),f=e.slice(t,r),l=0;l<a;++l)if(c[l]!==f[l]){s=c[l],u=f[l];break}return s<u?-1:u<s?1:0},o.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},o.prototype.indexOf=function(e,t,r){return y(this,e,t,r,!0)},o.prototype.lastIndexOf=function(e,t,r){return y(this,e,t,r,!1)},o.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var i=this.length-t;if((void 0===r||r>i)&&(r=i),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return g(this,e,t,r);case"utf8":case"utf-8":return m(this,e,t,r);case"ascii":case"latin1":case"binary":return b(this,e,t,r);case"base64":return _(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return w(this,e,t,r);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var A=4096;function S(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(127&e[i]);return n}function x(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(e[i]);return n}function I(e,t,r){var n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);for(var i="",o=t;o<r;++o)i+=z[e[o]];return i}function T(e,t,r){for(var n=e.slice(t,r),i="",o=0;o<n.length-1;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function O(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function B(e,t,r,n,i,s){if(!o.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<s)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function N(e,t,r,n,i,o){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function C(e,t,r,n,i){return t=+t,r>>>=0,i||N(e,0,r,4),q(e,t,r,n,23,4),r+4}function R(e,t,r,n,i){return t=+t,r>>>=0,i||N(e,0,r,8),q(e,t,r,n,52,8),r+8}o.prototype.slice=function(e,t){var r=this.length;(e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e);var n=this.subarray(e,t);return Object.setPrototypeOf(n,o.prototype),n},o.prototype.readUintLE=o.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||O(e,t,this.length);for(var n=this[e],i=1,o=0;++o<t&&(i*=256);)n+=this[e+o]*i;return n},o.prototype.readUintBE=o.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||O(e,t,this.length);for(var n=this[e+--t],i=1;t>0&&(i*=256);)n+=this[e+--t]*i;return n},o.prototype.readUint8=o.prototype.readUInt8=function(e,t){return e>>>=0,t||O(e,1,this.length),this[e]},o.prototype.readUint16LE=o.prototype.readUInt16LE=function(e,t){return e>>>=0,t||O(e,2,this.length),this[e]|this[e+1]<<8},o.prototype.readUint16BE=o.prototype.readUInt16BE=function(e,t){return e>>>=0,t||O(e,2,this.length),this[e]<<8|this[e+1]},o.prototype.readUint32LE=o.prototype.readUInt32LE=function(e,t){return e>>>=0,t||O(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},o.prototype.readUint32BE=o.prototype.readUInt32BE=function(e,t){return e>>>=0,t||O(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},o.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||O(e,t,this.length);for(var n=this[e],i=1,o=0;++o<t&&(i*=256);)n+=this[e+o]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*t)),n},o.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||O(e,t,this.length);for(var n=t,i=1,o=this[e+--n];n>0&&(i*=256);)o+=this[e+--n]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*t)),o},o.prototype.readInt8=function(e,t){return e>>>=0,t||O(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},o.prototype.readInt16LE=function(e,t){e>>>=0,t||O(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},o.prototype.readInt16BE=function(e,t){e>>>=0,t||O(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},o.prototype.readInt32LE=function(e,t){return e>>>=0,t||O(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},o.prototype.readInt32BE=function(e,t){return e>>>=0,t||O(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},o.prototype.readFloatLE=function(e,t){return e>>>=0,t||O(e,4,this.length),$(this,e,!0,23,4)},o.prototype.readFloatBE=function(e,t){return e>>>=0,t||O(e,4,this.length),$(this,e,!1,23,4)},o.prototype.readDoubleLE=function(e,t){return e>>>=0,t||O(e,8,this.length),$(this,e,!0,52,8)},o.prototype.readDoubleBE=function(e,t){return e>>>=0,t||O(e,8,this.length),$(this,e,!1,52,8)},o.prototype.writeUintLE=o.prototype.writeUIntLE=function(e,t,r,n){(e=+e,t>>>=0,r>>>=0,n)||B(this,e,t,r,Math.pow(2,8*r)-1,0);var i=1,o=0;for(this[t]=255&e;++o<r&&(i*=256);)this[t+o]=e/i&255;return t+r},o.prototype.writeUintBE=o.prototype.writeUIntBE=function(e,t,r,n){(e=+e,t>>>=0,r>>>=0,n)||B(this,e,t,r,Math.pow(2,8*r)-1,0);var i=r-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+r},o.prototype.writeUint8=o.prototype.writeUInt8=function(e,t,r){return e=+e,t>>>=0,r||B(this,e,t,1,255,0),this[t]=255&e,t+1},o.prototype.writeUint16LE=o.prototype.writeUInt16LE=function(e,t,r){return e=+e,t>>>=0,r||B(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},o.prototype.writeUint16BE=o.prototype.writeUInt16BE=function(e,t,r){return e=+e,t>>>=0,r||B(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},o.prototype.writeUint32LE=o.prototype.writeUInt32LE=function(e,t,r){return e=+e,t>>>=0,r||B(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},o.prototype.writeUint32BE=o.prototype.writeUInt32BE=function(e,t,r){return e=+e,t>>>=0,r||B(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},o.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t>>>=0,!n){var i=Math.pow(2,8*r-1);B(this,e,t,r,i-1,-i)}var o=0,s=1,u=0;for(this[t]=255&e;++o<r&&(s*=256);)e<0&&0===u&&0!==this[t+o-1]&&(u=1),this[t+o]=(e/s>>0)-u&255;return t+r},o.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t>>>=0,!n){var i=Math.pow(2,8*r-1);B(this,e,t,r,i-1,-i)}var o=r-1,s=1,u=0;for(this[t+o]=255&e;--o>=0&&(s*=256);)e<0&&0===u&&0!==this[t+o+1]&&(u=1),this[t+o]=(e/s>>0)-u&255;return t+r},o.prototype.writeInt8=function(e,t,r){return e=+e,t>>>=0,r||B(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},o.prototype.writeInt16LE=function(e,t,r){return e=+e,t>>>=0,r||B(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},o.prototype.writeInt16BE=function(e,t,r){return e=+e,t>>>=0,r||B(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},o.prototype.writeInt32LE=function(e,t,r){return e=+e,t>>>=0,r||B(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},o.prototype.writeInt32BE=function(e,t,r){return e=+e,t>>>=0,r||B(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},o.prototype.writeFloatLE=function(e,t,r){return C(this,e,t,!0,r)},o.prototype.writeFloatBE=function(e,t,r){return C(this,e,t,!1,r)},o.prototype.writeDoubleLE=function(e,t,r){return R(this,e,t,!0,r)},o.prototype.writeDoubleBE=function(e,t,r){return R(this,e,t,!1,r)},o.prototype.copy=function(e,t,r,n){if(!o.isBuffer(e))throw new TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var i=n-r;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,r,n):Uint8Array.prototype.set.call(e,this.subarray(r,n),t),i},o.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!o.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(1===e.length){var i=e.charCodeAt(0);("utf8"===n&&i<128||"latin1"===n)&&(e=i)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;var s;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(s=t;s<r;++s)this[s]=e;else{var u=o.isBuffer(e)?e:o.from(e,n),a=u.length;if(0===a)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(s=0;s<r-t;++s)this[s+t]=u[s%a]}return this};var U=/[^+/0-9A-Za-z-_]/g;function j(e,t){var r;t=t||1/0;for(var n=e.length,i=null,o=[],s=0;s<n;++s){if((r=e.charCodeAt(s))>55295&&r<57344){if(!i){if(r>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(s+1===n){(t-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(t-=3)>-1&&o.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;o.push(r)}else if(r<2048){if((t-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function L(e){return G.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(U,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function D(e,t,r,n){for(var i=0;i<n&&!(i+r>=t.length||i>=e.length);++i)t[i+r]=e[i];return i}function P(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function M(e){return e!=e}var z=function(){for(var e="0123456789abcdef",t=new Array(256),r=0;r<16;++r)for(var n=16*r,i=0;i<16;++i)t[n+i]=e[r]+e[i];return t}()})),ya=p((function(e){!function(t){var r,n=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,i=Math.ceil,o=Math.floor,s="[BigNumber Error] ",u=s+"Number primitive has more than 15 significant digits: ",a=1e14,c=14,f=9007199254740991,l=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],h=1e7,p=1e9;function d(e){var t=0|e;return e>0||e===t?t:t-1}function y(e){for(var t,r,n=1,i=e.length,o=e[0]+"";n<i;){for(t=e[n++]+"",r=c-t.length;r--;t="0"+t);o+=t}for(i=o.length;48===o.charCodeAt(--i););return o.slice(0,i+1||1)}function v(e,t){var r,n,i=e.c,o=t.c,s=e.s,u=t.s,a=e.e,c=t.e;if(!s||!u)return null;if(r=i&&!i[0],n=o&&!o[0],r||n)return r?n?0:-u:s;if(s!=u)return s;if(r=s<0,n=a==c,!i||!o)return n?0:!i^r?1:-1;if(!n)return a>c^r?1:-1;for(u=(a=i.length)<(c=o.length)?a:c,s=0;s<u;s++)if(i[s]!=o[s])return i[s]>o[s]^r?1:-1;return a==c?0:a>c^r?1:-1}function g(e,t,r,n){if(e<t||e>r||e!==o(e))throw Error(s+(n||"Argument")+("number"==typeof e?e<t||e>r?" out of range: ":" not an integer: ":" not a primitive number: ")+String(e))}function m(e){var t=e.c.length-1;return d(e.e/c)==t&&e.c[t]%2!=0}function b(e,t){return(e.length>1?e.charAt(0)+"."+e.slice(1):e)+(t<0?"e":"e+")+t}function _(e,t,r){var n,i;if(t<0){for(i=r+".";++t;i+=r);e=i+e}else if(++t>(n=e.length)){for(i=r,t-=n;--t;i+=r);e+=i}else t<n&&(e=e.slice(0,t)+"."+e.slice(t));return e}(r=function e(t){var r,w,k,E,A,S,x,I,T,O,B=H.prototype={constructor:H,toString:null,valueOf:null},N=new H(1),C=20,R=4,U=-7,j=21,L=-1e7,D=1e7,P=!1,M=1,z=0,F={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"",suffix:""},K="0123456789abcdefghijklmnopqrstuvwxyz";function H(e,t){var r,i,s,a,l,h,p,d,y=this;if(!(y instanceof H))return new H(e,t);if(null==t){if(e&&!0===e._isBigNumber)return y.s=e.s,void(!e.c||e.e>D?y.c=y.e=null:e.e<L?y.c=[y.e=0]:(y.e=e.e,y.c=e.c.slice()));if((h="number"==typeof e)&&0*e==0){if(y.s=1/e<0?(e=-e,-1):1,e===~~e){for(a=0,l=e;l>=10;l/=10,a++);return void(a>D?y.c=y.e=null:(y.e=a,y.c=[e]))}d=String(e)}else{if(!n.test(d=String(e)))return k(y,d,h);y.s=45==d.charCodeAt(0)?(d=d.slice(1),-1):1}(a=d.indexOf("."))>-1&&(d=d.replace(".","")),(l=d.search(/e/i))>0?(a<0&&(a=l),a+=+d.slice(l+1),d=d.substring(0,l)):a<0&&(a=d.length)}else{if(g(t,2,K.length,"Base"),10==t)return W(y=new H(e),C+y.e+1,R);if(d=String(e),h="number"==typeof e){if(0*e!=0)return k(y,d,h,t);if(y.s=1/e<0?(d=d.slice(1),-1):1,H.DEBUG&&d.replace(/^0\.0*|\./,"").length>15)throw Error(u+e)}else y.s=45===d.charCodeAt(0)?(d=d.slice(1),-1):1;for(r=K.slice(0,t),a=l=0,p=d.length;l<p;l++)if(r.indexOf(i=d.charAt(l))<0){if("."==i){if(l>a){a=p;continue}}else if(!s&&(d==d.toUpperCase()&&(d=d.toLowerCase())||d==d.toLowerCase()&&(d=d.toUpperCase()))){s=!0,l=-1,a=0;continue}return k(y,String(e),h,t)}h=!1,(a=(d=w(d,t,10,y.s)).indexOf("."))>-1?d=d.replace(".",""):a=d.length}for(l=0;48===d.charCodeAt(l);l++);for(p=d.length;48===d.charCodeAt(--p););if(d=d.slice(l,++p)){if(p-=l,h&&H.DEBUG&&p>15&&(e>f||e!==o(e)))throw Error(u+y.s*e);if((a=a-l-1)>D)y.c=y.e=null;else if(a<L)y.c=[y.e=0];else{if(y.e=a,y.c=[],l=(a+1)%c,a<0&&(l+=c),l<p){for(l&&y.c.push(+d.slice(0,l)),p-=c;l<p;)y.c.push(+d.slice(l,l+=c));l=c-(d=d.slice(l)).length}else l-=p;for(;l--;d+="0");y.c.push(+d)}}else y.c=[y.e=0]}function G(e,t,r,n){var i,o,s,u,a;if(null==r?r=R:g(r,0,8),!e.c)return e.toString();if(i=e.c[0],s=e.e,null==t)a=y(e.c),a=1==n||2==n&&(s<=U||s>=j)?b(a,s):_(a,s,"0");else if(o=(e=W(new H(e),t,r)).e,u=(a=y(e.c)).length,1==n||2==n&&(t<=o||o<=U)){for(;u<t;a+="0",u++);a=b(a,o)}else if(t-=s,a=_(a,o,"0"),o+1>u){if(--t>0)for(a+=".";t--;a+="0");}else if((t+=o-u)>0)for(o+1==u&&(a+=".");t--;a+="0");return e.s<0&&i?"-"+a:a}function $(e,t){for(var r,n=1,i=new H(e[0]);n<e.length;n++){if(!(r=new H(e[n])).s){i=r;break}t.call(i,r)&&(i=r)}return i}function q(e,t,r){for(var n=1,i=t.length;!t[--i];t.pop());for(i=t[0];i>=10;i/=10,n++);return(r=n+r*c-1)>D?e.c=e.e=null:r<L?e.c=[e.e=0]:(e.e=r,e.c=t),e}function W(e,t,r,n){var s,u,f,h,p,d,y,v=e.c,g=l;if(v){e:{for(s=1,h=v[0];h>=10;h/=10,s++);if((u=t-s)<0)u+=c,f=t,y=(p=v[d=0])/g[s-f-1]%10|0;else if((d=i((u+1)/c))>=v.length){if(!n)break e;for(;v.length<=d;v.push(0));p=y=0,s=1,f=(u%=c)-c+1}else{for(p=h=v[d],s=1;h>=10;h/=10,s++);y=(f=(u%=c)-c+s)<0?0:p/g[s-f-1]%10|0}if(n=n||t<0||null!=v[d+1]||(f<0?p:p%g[s-f-1]),n=r<4?(y||n)&&(0==r||r==(e.s<0?3:2)):y>5||5==y&&(4==r||n||6==r&&(u>0?f>0?p/g[s-f]:0:v[d-1])%10&1||r==(e.s<0?8:7)),t<1||!v[0])return v.length=0,n?(t-=e.e+1,v[0]=g[(c-t%c)%c],e.e=-t||0):v[0]=e.e=0,e;if(0==u?(v.length=d,h=1,d--):(v.length=d+1,h=g[c-u],v[d]=f>0?o(p/g[s-f]%g[f])*h:0),n)for(;;){if(0==d){for(u=1,f=v[0];f>=10;f/=10,u++);for(f=v[0]+=h,h=1;f>=10;f/=10,h++);u!=h&&(e.e++,v[0]==a&&(v[0]=1));break}if(v[d]+=h,v[d]!=a)break;v[d--]=0,h=1}for(u=v.length;0===v[--u];v.pop());}e.e>D?e.c=e.e=null:e.e<L&&(e.c=[e.e=0])}return e}function V(e){var t,r=e.e;return null===r?e.toString():(t=y(e.c),t=r<=U||r>=j?b(t,r):_(t,r,"0"),e.s<0?"-"+t:t)}return H.clone=e,H.ROUND_UP=0,H.ROUND_DOWN=1,H.ROUND_CEIL=2,H.ROUND_FLOOR=3,H.ROUND_HALF_UP=4,H.ROUND_HALF_DOWN=5,H.ROUND_HALF_EVEN=6,H.ROUND_HALF_CEIL=7,H.ROUND_HALF_FLOOR=8,H.EUCLID=9,H.config=H.set=function(e){var t,r;if(null!=e){if("object"!=typeof e)throw Error(s+"Object expected: "+e);if(e.hasOwnProperty(t="DECIMAL_PLACES")&&(g(r=e[t],0,p,t),C=r),e.hasOwnProperty(t="ROUNDING_MODE")&&(g(r=e[t],0,8,t),R=r),e.hasOwnProperty(t="EXPONENTIAL_AT")&&((r=e[t])&&r.pop?(g(r[0],-p,0,t),g(r[1],0,p,t),U=r[0],j=r[1]):(g(r,-p,p,t),U=-(j=r<0?-r:r))),e.hasOwnProperty(t="RANGE"))if((r=e[t])&&r.pop)g(r[0],-p,-1,t),g(r[1],1,p,t),L=r[0],D=r[1];else{if(g(r,-p,p,t),!r)throw Error(s+t+" cannot be zero: "+r);L=-(D=r<0?-r:r)}if(e.hasOwnProperty(t="CRYPTO")){if((r=e[t])!==!!r)throw Error(s+t+" not true or false: "+r);if(r){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw P=!r,Error(s+"crypto unavailable");P=r}else P=r}if(e.hasOwnProperty(t="MODULO_MODE")&&(g(r=e[t],0,9,t),M=r),e.hasOwnProperty(t="POW_PRECISION")&&(g(r=e[t],0,p,t),z=r),e.hasOwnProperty(t="FORMAT")){if("object"!=typeof(r=e[t]))throw Error(s+t+" not an object: "+r);F=r}if(e.hasOwnProperty(t="ALPHABET")){if("string"!=typeof(r=e[t])||/^.?$|[+\-.\s]|(.).*\1/.test(r))throw Error(s+t+" invalid: "+r);K=r}}return{DECIMAL_PLACES:C,ROUNDING_MODE:R,EXPONENTIAL_AT:[U,j],RANGE:[L,D],CRYPTO:P,MODULO_MODE:M,POW_PRECISION:z,FORMAT:F,ALPHABET:K}},H.isBigNumber=function(e){if(!e||!0!==e._isBigNumber)return!1;if(!H.DEBUG)return!0;var t,r,n=e.c,i=e.e,u=e.s;e:if("[object Array]"=={}.toString.call(n)){if((1===u||-1===u)&&i>=-p&&i<=p&&i===o(i)){if(0===n[0]){if(0===i&&1===n.length)return!0;break e}if((t=(i+1)%c)<1&&(t+=c),String(n[0]).length==t){for(t=0;t<n.length;t++)if((r=n[t])<0||r>=a||r!==o(r))break e;if(0!==r)return!0}}}else if(null===n&&null===i&&(null===u||1===u||-1===u))return!0;throw Error(s+"Invalid BigNumber: "+e)},H.maximum=H.max=function(){return $(arguments,B.lt)},H.minimum=H.min=function(){return $(arguments,B.gt)},H.random=(E=9007199254740992,A=Math.random()*E&2097151?function(){return o(Math.random()*E)}:function(){return 8388608*(1073741824*Math.random()|0)+(8388608*Math.random()|0)},function(e){var t,r,n,u,a,f=0,h=[],d=new H(N);if(null==e?e=C:g(e,0,p),u=i(e/c),P)if(crypto.getRandomValues){for(t=crypto.getRandomValues(new Uint32Array(u*=2));f<u;)(a=131072*t[f]+(t[f+1]>>>11))>=9e15?(r=crypto.getRandomValues(new Uint32Array(2)),t[f]=r[0],t[f+1]=r[1]):(h.push(a%1e14),f+=2);f=u/2}else{if(!crypto.randomBytes)throw P=!1,Error(s+"crypto unavailable");for(t=crypto.randomBytes(u*=7);f<u;)(a=281474976710656*(31&t[f])+1099511627776*t[f+1]+4294967296*t[f+2]+16777216*t[f+3]+(t[f+4]<<16)+(t[f+5]<<8)+t[f+6])>=9e15?crypto.randomBytes(7).copy(t,f):(h.push(a%1e14),f+=7);f=u/7}if(!P)for(;f<u;)(a=A())<9e15&&(h[f++]=a%1e14);for(u=h[--f],e%=c,u&&e&&(a=l[c-e],h[f]=o(u/a)*a);0===h[f];h.pop(),f--);if(f<0)h=[n=0];else{for(n=-1;0===h[0];h.splice(0,1),n-=c);for(f=1,a=h[0];a>=10;a/=10,f++);f<c&&(n-=c-f)}return d.e=n,d.c=h,d}),H.sum=function(){for(var e=1,t=arguments,r=new H(t[0]);e<t.length;)r=r.plus(t[e++]);return r},w=function(){var e="0123456789";function t(e,t,r,n){for(var i,o,s=[0],u=0,a=e.length;u<a;){for(o=s.length;o--;s[o]*=t);for(s[0]+=n.indexOf(e.charAt(u++)),i=0;i<s.length;i++)s[i]>r-1&&(null==s[i+1]&&(s[i+1]=0),s[i+1]+=s[i]/r|0,s[i]%=r)}return s.reverse()}return function(n,i,o,s,u){var a,c,f,l,h,p,d,v,g=n.indexOf("."),m=C,b=R;for(g>=0&&(l=z,z=0,n=n.replace(".",""),p=(v=new H(i)).pow(n.length-g),z=l,v.c=t(_(y(p.c),p.e,"0"),10,o,e),v.e=v.c.length),f=l=(d=t(n,i,o,u?(a=K,e):(a=e,K))).length;0==d[--l];d.pop());if(!d[0])return a.charAt(0);if(g<0?--f:(p.c=d,p.e=f,p.s=s,d=(p=r(p,v,m,b,o)).c,h=p.r,f=p.e),g=d[c=f+m+1],l=o/2,h=h||c<0||null!=d[c+1],h=b<4?(null!=g||h)&&(0==b||b==(p.s<0?3:2)):g>l||g==l&&(4==b||h||6==b&&1&d[c-1]||b==(p.s<0?8:7)),c<1||!d[0])n=h?_(a.charAt(1),-m,a.charAt(0)):a.charAt(0);else{if(d.length=c,h)for(--o;++d[--c]>o;)d[c]=0,c||(++f,d=[1].concat(d));for(l=d.length;!d[--l];);for(g=0,n="";g<=l;n+=a.charAt(d[g++]));n=_(n,f,a.charAt(0))}return n}}(),r=function(){function e(e,t,r){var n,i,o,s,u=0,a=e.length,c=t%h,f=t/h|0;for(e=e.slice();a--;)u=((i=c*(o=e[a]%h)+(n=f*o+(s=e[a]/h|0)*c)%h*h+u)/r|0)+(n/h|0)+f*s,e[a]=i%r;return u&&(e=[u].concat(e)),e}function t(e,t,r,n){var i,o;if(r!=n)o=r>n?1:-1;else for(i=o=0;i<r;i++)if(e[i]!=t[i]){o=e[i]>t[i]?1:-1;break}return o}function r(e,t,r,n){for(var i=0;r--;)e[r]-=i,i=e[r]<t[r]?1:0,e[r]=i*n+e[r]-t[r];for(;!e[0]&&e.length>1;e.splice(0,1));}return function(n,i,s,u,f){var l,h,p,y,v,g,m,b,_,w,k,E,A,S,x,I,T,O=n.s==i.s?1:-1,B=n.c,N=i.c;if(!(B&&B[0]&&N&&N[0]))return new H(n.s&&i.s&&(B?!N||B[0]!=N[0]:N)?B&&0==B[0]||!N?0*O:O/0:NaN);for(_=(b=new H(O)).c=[],O=s+(h=n.e-i.e)+1,f||(f=a,h=d(n.e/c)-d(i.e/c),O=O/c|0),p=0;N[p]==(B[p]||0);p++);if(N[p]>(B[p]||0)&&h--,O<0)_.push(1),y=!0;else{for(S=B.length,I=N.length,p=0,O+=2,(v=o(f/(N[0]+1)))>1&&(N=e(N,v,f),B=e(B,v,f),I=N.length,S=B.length),A=I,k=(w=B.slice(0,I)).length;k<I;w[k++]=0);T=N.slice(),T=[0].concat(T),x=N[0],N[1]>=f/2&&x++;do{if(v=0,(l=t(N,w,I,k))<0){if(E=w[0],I!=k&&(E=E*f+(w[1]||0)),(v=o(E/x))>1)for(v>=f&&(v=f-1),m=(g=e(N,v,f)).length,k=w.length;1==t(g,w,m,k);)v--,r(g,I<m?T:N,m,f),m=g.length,l=1;else 0==v&&(l=v=1),m=(g=N.slice()).length;if(m<k&&(g=[0].concat(g)),r(w,g,k,f),k=w.length,-1==l)for(;t(N,w,I,k)<1;)v++,r(w,I<k?T:N,k,f),k=w.length}else 0===l&&(v++,w=[0]);_[p++]=v,w[0]?w[k++]=B[A]||0:(w=[B[A]],k=1)}while((A++<S||null!=w[0])&&O--);y=null!=w[0],_[0]||_.splice(0,1)}if(f==a){for(p=1,O=_[0];O>=10;O/=10,p++);W(b,s+(b.e=p+h*c-1)+1,u,y)}else b.e=h,b.r=+y;return b}}(),S=/^(-?)0([xbo])(?=\w[\w.]*$)/i,x=/^([^.]+)\.$/,I=/^\.([^.]+)$/,T=/^-?(Infinity|NaN)$/,O=/^\s*\+(?=[\w.])|^\s+|\s+$/g,k=function(e,t,r,n){var i,o=r?t:t.replace(O,"");if(T.test(o))e.s=isNaN(o)?null:o<0?-1:1;else{if(!r&&(o=o.replace(S,(function(e,t,r){return i="x"==(r=r.toLowerCase())?16:"b"==r?2:8,n&&n!=i?e:t})),n&&(i=n,o=o.replace(x,"$1").replace(I,"0.$1")),t!=o))return new H(o,i);if(H.DEBUG)throw Error(s+"Not a"+(n?" base "+n:"")+" number: "+t);e.s=null}e.c=e.e=null},B.absoluteValue=B.abs=function(){var e=new H(this);return e.s<0&&(e.s=1),e},B.comparedTo=function(e,t){return v(this,new H(e,t))},B.decimalPlaces=B.dp=function(e,t){var r,n,i,o=this;if(null!=e)return g(e,0,p),null==t?t=R:g(t,0,8),W(new H(o),e+o.e+1,t);if(!(r=o.c))return null;if(n=((i=r.length-1)-d(this.e/c))*c,i=r[i])for(;i%10==0;i/=10,n--);return n<0&&(n=0),n},B.dividedBy=B.div=function(e,t){return r(this,new H(e,t),C,R)},B.dividedToIntegerBy=B.idiv=function(e,t){return r(this,new H(e,t),0,1)},B.exponentiatedBy=B.pow=function(e,t){var r,n,u,a,f,l,h,p,d=this;if((e=new H(e)).c&&!e.isInteger())throw Error(s+"Exponent not an integer: "+V(e));if(null!=t&&(t=new H(t)),f=e.e>14,!d.c||!d.c[0]||1==d.c[0]&&!d.e&&1==d.c.length||!e.c||!e.c[0])return p=new H(Math.pow(+V(d),f?2-m(e):+V(e))),t?p.mod(t):p;if(l=e.s<0,t){if(t.c?!t.c[0]:!t.s)return new H(NaN);(n=!l&&d.isInteger()&&t.isInteger())&&(d=d.mod(t))}else{if(e.e>9&&(d.e>0||d.e<-1||(0==d.e?d.c[0]>1||f&&d.c[1]>=24e7:d.c[0]<8e13||f&&d.c[0]<=9999975e7)))return a=d.s<0&&m(e)?-0:0,d.e>-1&&(a=1/a),new H(l?1/a:a);z&&(a=i(z/c+2))}for(f?(r=new H(.5),l&&(e.s=1),h=m(e)):h=(u=Math.abs(+V(e)))%2,p=new H(N);;){if(h){if(!(p=p.times(d)).c)break;a?p.c.length>a&&(p.c.length=a):n&&(p=p.mod(t))}if(u){if(0===(u=o(u/2)))break;h=u%2}else if(W(e=e.times(r),e.e+1,1),e.e>14)h=m(e);else{if(0===(u=+V(e)))break;h=u%2}d=d.times(d),a?d.c&&d.c.length>a&&(d.c.length=a):n&&(d=d.mod(t))}return n?p:(l&&(p=N.div(p)),t?p.mod(t):a?W(p,z,R,undefined):p)},B.integerValue=function(e){var t=new H(this);return null==e?e=R:g(e,0,8),W(t,t.e+1,e)},B.isEqualTo=B.eq=function(e,t){return 0===v(this,new H(e,t))},B.isFinite=function(){return!!this.c},B.isGreaterThan=B.gt=function(e,t){return v(this,new H(e,t))>0},B.isGreaterThanOrEqualTo=B.gte=function(e,t){return 1===(t=v(this,new H(e,t)))||0===t},B.isInteger=function(){return!!this.c&&d(this.e/c)>this.c.length-2},B.isLessThan=B.lt=function(e,t){return v(this,new H(e,t))<0},B.isLessThanOrEqualTo=B.lte=function(e,t){return-1===(t=v(this,new H(e,t)))||0===t},B.isNaN=function(){return!this.s},B.isNegative=function(){return this.s<0},B.isPositive=function(){return this.s>0},B.isZero=function(){return!!this.c&&0==this.c[0]},B.minus=function(e,t){var r,n,i,o,s=this,u=s.s;if(t=(e=new H(e,t)).s,!u||!t)return new H(NaN);if(u!=t)return e.s=-t,s.plus(e);var f=s.e/c,l=e.e/c,h=s.c,p=e.c;if(!f||!l){if(!h||!p)return h?(e.s=-t,e):new H(p?s:NaN);if(!h[0]||!p[0])return p[0]?(e.s=-t,e):new H(h[0]?s:3==R?-0:0)}if(f=d(f),l=d(l),h=h.slice(),u=f-l){for((o=u<0)?(u=-u,i=h):(l=f,i=p),i.reverse(),t=u;t--;i.push(0));i.reverse()}else for(n=(o=(u=h.length)<(t=p.length))?u:t,u=t=0;t<n;t++)if(h[t]!=p[t]){o=h[t]<p[t];break}if(o&&(i=h,h=p,p=i,e.s=-e.s),(t=(n=p.length)-(r=h.length))>0)for(;t--;h[r++]=0);for(t=a-1;n>u;){if(h[--n]<p[n]){for(r=n;r&&!h[--r];h[r]=t);--h[r],h[n]+=a}h[n]-=p[n]}for(;0==h[0];h.splice(0,1),--l);return h[0]?q(e,h,l):(e.s=3==R?-1:1,e.c=[e.e=0],e)},B.modulo=B.mod=function(e,t){var n,i,o=this;return e=new H(e,t),!o.c||!e.s||e.c&&!e.c[0]?new H(NaN):!e.c||o.c&&!o.c[0]?new H(o):(9==M?(i=e.s,e.s=1,n=r(o,e,0,3),e.s=i,n.s*=i):n=r(o,e,0,M),(e=o.minus(n.times(e))).c[0]||1!=M||(e.s=o.s),e)},B.multipliedBy=B.times=function(e,t){var r,n,i,o,s,u,f,l,p,y,v,g,m,b,_,w=this,k=w.c,E=(e=new H(e,t)).c;if(!(k&&E&&k[0]&&E[0]))return!w.s||!e.s||k&&!k[0]&&!E||E&&!E[0]&&!k?e.c=e.e=e.s=null:(e.s*=w.s,k&&E?(e.c=[0],e.e=0):e.c=e.e=null),e;for(n=d(w.e/c)+d(e.e/c),e.s*=w.s,(f=k.length)<(y=E.length)&&(m=k,k=E,E=m,i=f,f=y,y=i),i=f+y,m=[];i--;m.push(0));for(b=a,_=h,i=y;--i>=0;){for(r=0,v=E[i]%_,g=E[i]/_|0,o=i+(s=f);o>i;)r=((l=v*(l=k[--s]%_)+(u=g*l+(p=k[s]/_|0)*v)%_*_+m[o]+r)/b|0)+(u/_|0)+g*p,m[o--]=l%b;m[o]=r}return r?++n:m.splice(0,1),q(e,m,n)},B.negated=function(){var e=new H(this);return e.s=-e.s||null,e},B.plus=function(e,t){var r,n=this,i=n.s;if(t=(e=new H(e,t)).s,!i||!t)return new H(NaN);if(i!=t)return e.s=-t,n.minus(e);var o=n.e/c,s=e.e/c,u=n.c,f=e.c;if(!o||!s){if(!u||!f)return new H(i/0);if(!u[0]||!f[0])return f[0]?e:new H(u[0]?n:0*i)}if(o=d(o),s=d(s),u=u.slice(),i=o-s){for(i>0?(s=o,r=f):(i=-i,r=u),r.reverse();i--;r.push(0));r.reverse()}for((i=u.length)-(t=f.length)<0&&(r=f,f=u,u=r,t=i),i=0;t;)i=(u[--t]=u[t]+f[t]+i)/a|0,u[t]=a===u[t]?0:u[t]%a;return i&&(u=[i].concat(u),++s),q(e,u,s)},B.precision=B.sd=function(e,t){var r,n,i,o=this;if(null!=e&&e!==!!e)return g(e,1,p),null==t?t=R:g(t,0,8),W(new H(o),e,t);if(!(r=o.c))return null;if(n=(i=r.length-1)*c+1,i=r[i]){for(;i%10==0;i/=10,n--);for(i=r[0];i>=10;i/=10,n++);}return e&&o.e+1>n&&(n=o.e+1),n},B.shiftedBy=function(e){return g(e,-9007199254740991,f),this.times("1e"+e)},B.squareRoot=B.sqrt=function(){var e,t,n,i,o,s=this,u=s.c,a=s.s,c=s.e,f=C+4,l=new H("0.5");if(1!==a||!u||!u[0])return new H(!a||a<0&&(!u||u[0])?NaN:u?s:1/0);if(0==(a=Math.sqrt(+V(s)))||a==1/0?(((t=y(u)).length+c)%2==0&&(t+="0"),a=Math.sqrt(+t),c=d((c+1)/2)-(c<0||c%2),n=new H(t=a==1/0?"5e"+c:(t=a.toExponential()).slice(0,t.indexOf("e")+1)+c)):n=new H(a+""),n.c[0])for((a=(c=n.e)+f)<3&&(a=0);;)if(o=n,n=l.times(o.plus(r(s,o,f,1))),y(o.c).slice(0,a)===(t=y(n.c)).slice(0,a)){if(n.e<c&&--a,"9999"!=(t=t.slice(a-3,a+1))&&(i||"4999"!=t)){+t&&(+t.slice(1)||"5"!=t.charAt(0))||(W(n,n.e+C+2,1),e=!n.times(n).eq(s));break}if(!i&&(W(o,o.e+C+2,0),o.times(o).eq(s))){n=o;break}f+=4,a+=4,i=1}return W(n,n.e+C+1,R,e)},B.toExponential=function(e,t){return null!=e&&(g(e,0,p),e++),G(this,e,t,1)},B.toFixed=function(e,t){return null!=e&&(g(e,0,p),e=e+this.e+1),G(this,e,t)},B.toFormat=function(e,t,r){var n,i=this;if(null==r)null!=e&&t&&"object"==typeof t?(r=t,t=null):e&&"object"==typeof e?(r=e,e=t=null):r=F;else if("object"!=typeof r)throw Error(s+"Argument not an object: "+r);if(n=i.toFixed(e,t),i.c){var o,u=n.split("."),a=+r.groupSize,c=+r.secondaryGroupSize,f=r.groupSeparator||"",l=u[0],h=u[1],p=i.s<0,d=p?l.slice(1):l,y=d.length;if(c&&(o=a,a=c,c=o,y-=o),a>0&&y>0){for(o=y%a||a,l=d.substr(0,o);o<y;o+=a)l+=f+d.substr(o,a);c>0&&(l+=f+d.slice(o)),p&&(l="-"+l)}n=h?l+(r.decimalSeparator||"")+((c=+r.fractionGroupSize)?h.replace(new RegExp("\\d{"+c+"}\\B","g"),"$&"+(r.fractionGroupSeparator||"")):h):l}return(r.prefix||"")+n+(r.suffix||"")},B.toFraction=function(e){var t,n,i,o,u,a,f,h,p,d,v,g,m=this,b=m.c;if(null!=e&&(!(f=new H(e)).isInteger()&&(f.c||1!==f.s)||f.lt(N)))throw Error(s+"Argument "+(f.isInteger()?"out of range: ":"not an integer: ")+V(f));if(!b)return new H(m);for(t=new H(N),p=n=new H(N),i=h=new H(N),g=y(b),u=t.e=g.length-m.e-1,t.c[0]=l[(a=u%c)<0?c+a:a],e=!e||f.comparedTo(t)>0?u>0?t:p:f,a=D,D=1/0,f=new H(g),h.c[0]=0;d=r(f,t,0,1),1!=(o=n.plus(d.times(i))).comparedTo(e);)n=i,i=o,p=h.plus(d.times(o=p)),h=o,t=f.minus(d.times(o=t)),f=o;return o=r(e.minus(n),i,0,1),h=h.plus(o.times(p)),n=n.plus(o.times(i)),h.s=p.s=m.s,v=r(p,i,u*=2,R).minus(m).abs().comparedTo(r(h,n,u,R).minus(m).abs())<1?[p,i]:[h,n],D=a,v},B.toNumber=function(){return+V(this)},B.toPrecision=function(e,t){return null!=e&&g(e,1,p),G(this,e,t,2)},B.toString=function(e){var t,r=this,n=r.s,i=r.e;return null===i?n?(t="Infinity",n<0&&(t="-"+t)):t="NaN":(null==e?t=i<=U||i>=j?b(y(r.c),i):_(y(r.c),i,"0"):10===e?t=_(y((r=W(new H(r),C+i+1,R)).c),r.e,"0"):(g(e,2,K.length,"Base"),t=w(_(y(r.c),i,"0"),10,e,n,!0)),n<0&&r.c[0]&&(t="-"+t)),t},B.valueOf=B.toJSON=function(){return V(this)},B._isBigNumber=!0,null!=t&&H.set(t),H}()).default=r.BigNumber=r,e.exports?e.exports=r:(t||(t="undefined"!=typeof self&&self?self:window),t.BigNumber=r)}(f)}));const va=ya.BigNumber;var ga={MT:{POS_INT:0,NEG_INT:1,BYTE_STRING:2,UTF8_STRING:3,ARRAY:4,MAP:5,TAG:6,SIMPLE_FLOAT:7},TAG:{DATE_STRING:0,DATE_EPOCH:1,POS_BIGINT:2,NEG_BIGINT:3,DECIMAL_FRAC:4,BIGFLOAT:5,BASE64URL_EXPECTED:21,BASE64_EXPECTED:22,BASE16_EXPECTED:23,CBOR:24,URI:32,BASE64URL:33,BASE64:34,REGEXP:35,MIME:36},NUMBYTES:{ZERO:0,ONE:24,TWO:25,FOUR:26,EIGHT:27,INDEFINITE:31},SIMPLE:{FALSE:20,TRUE:21,NULL:22,UNDEFINED:23},SYMS:{NULL:Symbol("null"),UNDEFINED:Symbol("undef"),PARENT:Symbol("parent"),BREAK:Symbol("break"),STREAM:Symbol("stream")},SHIFT32:Math.pow(2,32),SHIFT16:Math.pow(2,16),MAX_SAFE_HIGH:2097151,NEG_ONE:new va(-1),TEN:new va(10),TWO:new va(2),PARENT:{ARRAY:0,OBJECT:1,MAP:2,TAG:3,BYTE_STRING:4,UTF8_STRING:5}},ma=p((function(e,t){const{Buffer:r}=da,n=ya.BigNumber,i=ga.SHIFT32,o=ga.SHIFT16;t.parseHalf=function(e){var t,r,n;return n=128&e[0]?-1:1,t=(124&e[0])>>2,r=(3&e[0])<<8|e[1],t?31===t?n*(r?NaN:Infinity):n*Math.pow(2,t-25)*(1024+r):5.960464477539063e-8*n*r},t.arrayBufferToBignumber=function(e){const t=e.byteLength;let r="";for(let n=0;n<t;n++)r+=(i=e[n])<16?"0"+i.toString(16):i.toString(16);var i;return new n(r,16)},t.buildMap=e=>{const t=new Map,r=Object.keys(e),n=r.length;for(let i=0;i<n;i++)t.set(r[i],e[r[i]]);return t},t.buildInt32=(e,t)=>e*o+t,t.buildInt64=(e,r,o,s)=>{const u=t.buildInt32(e,r),a=t.buildInt32(o,s);return u>2097151?new n(u).times(i).plus(a):u*i+a},t.writeHalf=function(e,t){const n=r.allocUnsafe(4);n.writeFloatBE(t,0);const i=n.readUInt32BE(0);if(0!=(8191&i))return!1;var o=i>>16&32768;const s=i>>23&255,u=8388607&i;if(s>=113&&s<=142)o+=(s-112<<10)+(u>>13);else{if(!(s>=103&&s<113))return!1;if(u&(1<<126-s)-1)return!1;o+=u+8388608>>126-s}return e.writeUInt16BE(o,0),!0},t.keySorter=function(e,t){var r=e[0].byteLength,n=t[0].byteLength;return r>n?1:n>r?-1:e[0].compare(t[0])},t.isNegativeZero=e=>0===e&&1/e<0,t.nextPowerOf2=e=>{let t=0;if(e&&!(e&e-1))return e;for(;0!==e;)e>>=1,t+=1;return 1<<t}}));const ba=ga.MT,_a=ga.SIMPLE,wa=ga.SYMS;class ka{constructor(e){if("number"!=typeof e)throw new Error("Invalid Simple type: "+typeof e);if(e<0||e>255||(0|e)!==e)throw new Error("value must be a small positive integer: "+e);this.value=e}toString(){return"simple("+this.value+")"}inspect(){return"simple("+this.value+")"}encodeCBOR(e){return e._pushInt(this.value,ba.SIMPLE_FLOAT)}static isSimple(e){return e instanceof ka}static decode(e,t){switch(null==t&&(t=!0),e){case _a.FALSE:return!1;case _a.TRUE:return!0;case _a.NULL:return t?null:wa.NULL;case _a.UNDEFINED:return t?void 0:wa.UNDEFINED;case-1:if(!t)throw new Error("Invalid BREAK");return wa.BREAK;default:return new ka(e)}}}var Ea=ka;class Aa{constructor(e,t,r){if(this.tag=e,this.value=t,this.err=r,"number"!=typeof this.tag)throw new Error("Invalid tag type ("+typeof this.tag+")");if(this.tag<0||(0|this.tag)!==this.tag)throw new Error("Tag must be a positive integer: "+this.tag)}toString(){return`${this.tag}(${JSON.stringify(this.value)})`}encodeCBOR(e){return e._pushTag(this.tag),e.pushAny(this.value)}convert(e){var t,r;if("function"!=typeof(r=null!=e?e[this.tag]:void 0)&&"function"!=typeof(r=Aa["_tag"+this.tag]))return this;try{return r.call(Aa,this.value)}catch(e){return t=e,this.err=t,this}}}var Sa=Aa;const xa=self.location?self.location.protocol+"//"+self.location.host:"",Ia=self.URL;var Ta={URLWithLegacySupport:class{constructor(e="",t=xa){this.super=new Ia(e,t),this.path=this.pathname+this.search,this.auth=this.username&&this.password?this.username+":"+this.password:null,this.query=this.search&&this.search.startsWith("?")?this.search.slice(1):null}get hash(){return this.super.hash}get host(){return this.super.host}get hostname(){return this.super.hostname}get href(){return this.super.href}get origin(){return this.super.origin}get password(){return this.super.password}get pathname(){return this.super.pathname}get port(){return this.super.port}get protocol(){return this.super.protocol}get search(){return this.super.search}get searchParams(){return this.super.searchParams}get username(){return this.super.username}set hash(e){this.super.hash=e}set host(e){this.super.host=e}set hostname(e){this.super.hostname=e}set href(e){this.super.href=e}set origin(e){this.super.origin=e}set password(e){this.super.password=e}set pathname(e){this.super.pathname=e}set port(e){this.super.port=e}set protocol(e){this.super.protocol=e}set search(e){this.super.search=e}set searchParams(e){this.super.searchParams=e}set username(e){this.super.username=e}createObjectURL(e){return this.super.createObjectURL(e)}revokeObjectURL(e){this.super.revokeObjectURL(e)}toJSON(){return this.super.toJSON()}toString(){return this.super.toString()}format(){return this.toString()}},URLSearchParams:self.URLSearchParams,defaultBase:xa,format:function(e){if("string"==typeof e){return new Ia(e).toString()}if(!(e instanceof Ia)){const t=e.username&&e.password?`${e.username}:${e.password}@`:"",r=e.auth?e.auth+"@":"",n=e.port?":"+e.port:"",i=e.protocol?e.protocol+"//":"",o=e.host||"",s=e.hostname||"",u=e.search||(e.query?"?"+e.query:""),a=e.hash||"",c=e.pathname||"";return`${i}${t||r}${o||s+n}${e.path||c+u}${a}`}}};const{URLWithLegacySupport:Oa,format:Ba}=Ta;const{URLWithLegacySupport:Na,format:Ca,URLSearchParams:Ra,defaultBase:Ua}=Ta;var ja={URL:Na,URLSearchParams:Ra,format:Ca,relative:(e,t={},r={},n)=>{let i,o=t.protocol?t.protocol.replace(":",""):"http";o=(r[o]||n||o)+":";try{i=new Oa(e)}catch(e){i={}}const s=Object.assign({},t,{protocol:o||i.protocol,host:t.host||i.host});return new Oa(e,Ba(s)).toString()},defaultBase:Ua};const{Buffer:La}=da,Da=ya.BigNumber,{URL:Pa}=ja;class Ma{constructor(e){!(e=e||{}).size||e.size<65536?e.size=65536:e.size=ma.nextPowerOf2(e.size),this._heap=new ArrayBuffer(e.size),this._heap8=new Uint8Array(this._heap),this._buffer=La.from(this._heap),this._reset(),this._knownTags=Object.assign({0:e=>new Date(e),1:e=>new Date(1e3*e),2:e=>ma.arrayBufferToBignumber(e),3:e=>ga.NEG_ONE.minus(ma.arrayBufferToBignumber(e)),4:e=>ga.TEN.pow(e[0]).times(e[1]),5:e=>ga.TWO.pow(e[0]).times(e[1]),32:e=>new Pa(e),35:e=>new RegExp(e)},e.tags),this.parser=function(e,t,r){"use asm";var n=new e.Uint8Array(r),i=t.pushInt,o=t.pushInt32,s=t.pushInt32Neg,u=t.pushInt64,a=t.pushInt64Neg,c=t.pushFloat,f=t.pushFloatSingle,l=t.pushFloatDouble,h=t.pushTrue,p=t.pushFalse,d=t.pushUndefined,y=t.pushNull,v=t.pushInfinity,g=t.pushInfinityNeg,m=t.pushNaN,b=t.pushNaNNeg,_=t.pushArrayStart,w=t.pushArrayStartFixed,k=t.pushArrayStartFixed32,E=t.pushArrayStartFixed64,A=t.pushObjectStart,S=t.pushObjectStartFixed,x=t.pushObjectStartFixed32,I=t.pushObjectStartFixed64,T=t.pushByteString,O=t.pushByteStringStart,B=t.pushUtf8String,N=t.pushUtf8StringStart,C=t.pushSimpleUnassigned,R=t.pushTagStart,U=t.pushTagStart4,j=t.pushTagStart8,L=t.pushTagUnassigned,D=t.pushBreak,P=e.Math.pow,M=0,z=0,F=0;function K(e){e=e|0;M=0;z=e;while((M|0)<(z|0)){F=Je[n[M]&255](n[M]|0)|0;if((F|0)>0){break}}return F|0}function H(e){e=e|0;if(((M|0)+(e|0)|0)<(z|0)){return 0}return 1}function G(e){e=e|0;return n[e|0]<<8|n[e+1|0]|0}function $(e){e=e|0;return n[e|0]<<24|n[e+1|0]<<16|n[e+2|0]<<8|n[e+3|0]|0}function q(e){e=e|0;i(e|0);M=M+1|0;return 0}function W(e){e=e|0;if(H(1)|0){return 1}i(n[M+1|0]|0);M=M+2|0;return 0}function V(e){e=e|0;if(H(2)|0){return 1}i(G(M+1|0)|0);M=M+3|0;return 0}function Y(e){e=e|0;if(H(4)|0){return 1}o(G(M+1|0)|0,G(M+3|0)|0);M=M+5|0;return 0}function J(e){e=e|0;if(H(8)|0){return 1}u(G(M+1|0)|0,G(M+3|0)|0,G(M+5|0)|0,G(M+7|0)|0);M=M+9|0;return 0}function Z(e){e=e|0;i(-1-(e-32|0)|0);M=M+1|0;return 0}function X(e){e=e|0;if(H(1)|0){return 1}i(-1-(n[M+1|0]|0)|0);M=M+2|0;return 0}function Q(e){e=e|0;var t=0;if(H(2)|0){return 1}t=G(M+1|0)|0;i(-1-(t|0)|0);M=M+3|0;return 0}function ee(e){e=e|0;if(H(4)|0){return 1}s(G(M+1|0)|0,G(M+3|0)|0);M=M+5|0;return 0}function te(e){e=e|0;if(H(8)|0){return 1}a(G(M+1|0)|0,G(M+3|0)|0,G(M+5|0)|0,G(M+7|0)|0);M=M+9|0;return 0}function re(e){e=e|0;var t=0;var r=0;var n=0;n=e-64|0;if(H(n|0)|0){return 1}t=M+1|0;r=(M+1|0)+(n|0)|0;T(t|0,r|0);M=r|0;return 0}function ne(e){e=e|0;var t=0;var r=0;var i=0;if(H(1)|0){return 1}i=n[M+1|0]|0;t=M+2|0;r=(M+2|0)+(i|0)|0;if(H(i+1|0)|0){return 1}T(t|0,r|0);M=r|0;return 0}function ie(e){e=e|0;var t=0;var r=0;var n=0;if(H(2)|0){return 1}n=G(M+1|0)|0;t=M+3|0;r=(M+3|0)+(n|0)|0;if(H(n+2|0)|0){return 1}T(t|0,r|0);M=r|0;return 0}function oe(e){e=e|0;var t=0;var r=0;var n=0;if(H(4)|0){return 1}n=$(M+1|0)|0;t=M+5|0;r=(M+5|0)+(n|0)|0;if(H(n+4|0)|0){return 1}T(t|0,r|0);M=r|0;return 0}function se(e){e=e|0;return 1}function ue(e){e=e|0;O();M=M+1|0;return 0}function ae(e){e=e|0;var t=0;var r=0;var n=0;n=e-96|0;if(H(n|0)|0){return 1}t=M+1|0;r=(M+1|0)+(n|0)|0;B(t|0,r|0);M=r|0;return 0}function ce(e){e=e|0;var t=0;var r=0;var i=0;if(H(1)|0){return 1}i=n[M+1|0]|0;t=M+2|0;r=(M+2|0)+(i|0)|0;if(H(i+1|0)|0){return 1}B(t|0,r|0);M=r|0;return 0}function fe(e){e=e|0;var t=0;var r=0;var n=0;if(H(2)|0){return 1}n=G(M+1|0)|0;t=M+3|0;r=(M+3|0)+(n|0)|0;if(H(n+2|0)|0){return 1}B(t|0,r|0);M=r|0;return 0}function le(e){e=e|0;var t=0;var r=0;var n=0;if(H(4)|0){return 1}n=$(M+1|0)|0;t=M+5|0;r=(M+5|0)+(n|0)|0;if(H(n+4|0)|0){return 1}B(t|0,r|0);M=r|0;return 0}function he(e){e=e|0;return 1}function pe(e){e=e|0;N();M=M+1|0;return 0}function de(e){e=e|0;w(e-128|0);M=M+1|0;return 0}function ye(e){e=e|0;if(H(1)|0){return 1}w(n[M+1|0]|0);M=M+2|0;return 0}function ve(e){e=e|0;if(H(2)|0){return 1}w(G(M+1|0)|0);M=M+3|0;return 0}function ge(e){e=e|0;if(H(4)|0){return 1}k(G(M+1|0)|0,G(M+3|0)|0);M=M+5|0;return 0}function me(e){e=e|0;if(H(8)|0){return 1}E(G(M+1|0)|0,G(M+3|0)|0,G(M+5|0)|0,G(M+7|0)|0);M=M+9|0;return 0}function be(e){e=e|0;_();M=M+1|0;return 0}function _e(e){e=e|0;var t=0;t=e-160|0;if(H(t|0)|0){return 1}S(t|0);M=M+1|0;return 0}function we(e){e=e|0;if(H(1)|0){return 1}S(n[M+1|0]|0);M=M+2|0;return 0}function ke(e){e=e|0;if(H(2)|0){return 1}S(G(M+1|0)|0);M=M+3|0;return 0}function Ee(e){e=e|0;if(H(4)|0){return 1}x(G(M+1|0)|0,G(M+3|0)|0);M=M+5|0;return 0}function Ae(e){e=e|0;if(H(8)|0){return 1}I(G(M+1|0)|0,G(M+3|0)|0,G(M+5|0)|0,G(M+7|0)|0);M=M+9|0;return 0}function Se(e){e=e|0;A();M=M+1|0;return 0}function xe(e){e=e|0;R(e-192|0|0);M=M+1|0;return 0}function Ie(e){e|0;R(e|0);M=M+1|0;return 0}function Te(e){e|0;R(e|0);M=M+1|0;return 0}function Oe(e){e|0;R(e|0);M=M+1|0;return 0}function Be(e){e|0;R(e|0);M=M+1|0;return 0}function Ne(e){e=e|0;R(e-192|0|0);M=M+1|0;return 0}function Ce(e){e|0;R(e|0);M=M+1|0;return 0}function Re(e){e|0;R(e|0);M=M+1|0;return 0}function Ue(e){e|0;R(e|0);M=M+1|0;return 0}function je(e){e=e|0;if(H(1)|0){return 1}R(n[M+1|0]|0);M=M+2|0;return 0}function Le(e){e=e|0;if(H(2)|0){return 1}R(G(M+1|0)|0);M=M+3|0;return 0}function De(e){e=e|0;if(H(4)|0){return 1}U(G(M+1|0)|0,G(M+3|0)|0);M=M+5|0;return 0}function Pe(e){e=e|0;if(H(8)|0){return 1}j(G(M+1|0)|0,G(M+3|0)|0,G(M+5|0)|0,G(M+7|0)|0);M=M+9|0;return 0}function Me(e){e=e|0;C((e|0)-224|0);M=M+1|0;return 0}function ze(e){e=e|0;p();M=M+1|0;return 0}function Fe(e){e=e|0;h();M=M+1|0;return 0}function Ke(e){e=e|0;y();M=M+1|0;return 0}function He(e){e=e|0;d();M=M+1|0;return 0}function Ge(e){e=e|0;if(H(1)|0){return 1}C(n[M+1|0]|0);M=M+2|0;return 0}function $e(e){e=e|0;var t=0;var r=0;var i=1.0;var o=0.0;var s=0.0;var u=0.0;if(H(2)|0){return 1}t=n[M+1|0]|0;r=n[M+2|0]|0;if((t|0)&0x80){i=-1.0}o=+(((t|0)&0x7C)>>2);s=+(((t|0)&0x03)<<8|r);if(+o==0.0){c(+(+i*+5.9604644775390625e-8*+s))}else if(+o==31.0){if(+i==1.0){if(+s>0.0){m()}else{v()}}else{if(+s>0.0){b()}else{g()}}}else{c(+(+i*P(+2,+(+o-25.0))*+(1024.0+s)))}M=M+3|0;return 0}function qe(e){e=e|0;if(H(4)|0){return 1}f(n[M+1|0]|0,n[M+2|0]|0,n[M+3|0]|0,n[M+4|0]|0);M=M+5|0;return 0}function We(e){e=e|0;if(H(8)|0){return 1}l(n[M+1|0]|0,n[M+2|0]|0,n[M+3|0]|0,n[M+4|0]|0,n[M+5|0]|0,n[M+6|0]|0,n[M+7|0]|0,n[M+8|0]|0);M=M+9|0;return 0}function Ve(e){e=e|0;return 1}function Ye(e){e=e|0;D();M=M+1|0;return 0}var Je=[q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,W,V,Y,J,Ve,Ve,Ve,Ve,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,X,Q,ee,te,Ve,Ve,Ve,Ve,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,ne,ie,oe,se,Ve,Ve,Ve,ue,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ce,fe,le,he,Ve,Ve,Ve,pe,de,de,de,de,de,de,de,de,de,de,de,de,de,de,de,de,de,de,de,de,de,de,de,de,ye,ve,ge,me,Ve,Ve,Ve,be,_e,_e,_e,_e,_e,_e,_e,_e,_e,_e,_e,_e,_e,_e,_e,_e,_e,_e,_e,_e,_e,_e,_e,_e,we,ke,Ee,Ae,Ve,Ve,Ve,Se,xe,xe,xe,xe,xe,xe,Ne,Ne,Ne,Ne,Ne,Ne,Ne,Ne,Ne,Ne,Ne,Ne,Ne,Ne,Ne,Ne,Ne,Ne,je,Le,De,Pe,Ve,Ve,Ve,Ve,Me,Me,Me,Me,Me,Me,Me,Me,Me,Me,Me,Me,Me,Me,Me,Me,Me,Me,Me,Me,ze,Fe,Ke,He,Ge,$e,qe,We,Ve,Ve,Ve,Ye];return{parse:K}}(f,{log:console.log.bind(console),pushInt:this.pushInt.bind(this),pushInt32:this.pushInt32.bind(this),pushInt32Neg:this.pushInt32Neg.bind(this),pushInt64:this.pushInt64.bind(this),pushInt64Neg:this.pushInt64Neg.bind(this),pushFloat:this.pushFloat.bind(this),pushFloatSingle:this.pushFloatSingle.bind(this),pushFloatDouble:this.pushFloatDouble.bind(this),pushTrue:this.pushTrue.bind(this),pushFalse:this.pushFalse.bind(this),pushUndefined:this.pushUndefined.bind(this),pushNull:this.pushNull.bind(this),pushInfinity:this.pushInfinity.bind(this),pushInfinityNeg:this.pushInfinityNeg.bind(this),pushNaN:this.pushNaN.bind(this),pushNaNNeg:this.pushNaNNeg.bind(this),pushArrayStart:this.pushArrayStart.bind(this),pushArrayStartFixed:this.pushArrayStartFixed.bind(this),pushArrayStartFixed32:this.pushArrayStartFixed32.bind(this),pushArrayStartFixed64:this.pushArrayStartFixed64.bind(this),pushObjectStart:this.pushObjectStart.bind(this),pushObjectStartFixed:this.pushObjectStartFixed.bind(this),pushObjectStartFixed32:this.pushObjectStartFixed32.bind(this),pushObjectStartFixed64:this.pushObjectStartFixed64.bind(this),pushByteString:this.pushByteString.bind(this),pushByteStringStart:this.pushByteStringStart.bind(this),pushUtf8String:this.pushUtf8String.bind(this),pushUtf8StringStart:this.pushUtf8StringStart.bind(this),pushSimpleUnassigned:this.pushSimpleUnassigned.bind(this),pushTagUnassigned:this.pushTagUnassigned.bind(this),pushTagStart:this.pushTagStart.bind(this),pushTagStart4:this.pushTagStart4.bind(this),pushTagStart8:this.pushTagStart8.bind(this),pushBreak:this.pushBreak.bind(this)},this._heap)}get _depth(){return this._parents.length}get _currentParent(){return this._parents[this._depth-1]}get _ref(){return this._currentParent.ref}_closeParent(){var e=this._parents.pop();if(e.length>0)throw new Error(`Missing ${e.length} elements`);switch(e.type){case ga.PARENT.TAG:this._push(this.createTag(e.ref[0],e.ref[1]));break;case ga.PARENT.BYTE_STRING:this._push(this.createByteString(e.ref,e.length));break;case ga.PARENT.UTF8_STRING:this._push(this.createUtf8String(e.ref,e.length));break;case ga.PARENT.MAP:if(e.values%2>0)throw new Error("Odd number of elements in the map");this._push(this.createMap(e.ref,e.length));break;case ga.PARENT.OBJECT:if(e.values%2>0)throw new Error("Odd number of elements in the map");this._push(this.createObject(e.ref,e.length));break;case ga.PARENT.ARRAY:this._push(this.createArray(e.ref,e.length))}this._currentParent&&this._currentParent.type===ga.PARENT.TAG&&this._dec()}_dec(){const e=this._currentParent;e.length<0||(e.length--,0===e.length&&this._closeParent())}_push(e,t){const r=this._currentParent;switch(r.values++,r.type){case ga.PARENT.ARRAY:case ga.PARENT.BYTE_STRING:case ga.PARENT.UTF8_STRING:r.length>-1?this._ref[this._ref.length-r.length]=e:this._ref.push(e),this._dec();break;case ga.PARENT.OBJECT:null!=r.tmpKey?(this._ref[r.tmpKey]=e,r.tmpKey=null,this._dec()):(r.tmpKey=e,"string"!=typeof r.tmpKey&&(r.type=ga.PARENT.MAP,r.ref=ma.buildMap(r.ref)));break;case ga.PARENT.MAP:null!=r.tmpKey?(this._ref.set(r.tmpKey,e),r.tmpKey=null,this._dec()):r.tmpKey=e;break;case ga.PARENT.TAG:this._ref.push(e),t||this._dec();break;default:throw new Error("Unknown parent type")}}_createParent(e,t,r){this._parents[this._depth]={type:t,length:r,ref:e,values:0,tmpKey:null}}_reset(){this._res=[],this._parents=[{type:ga.PARENT.ARRAY,length:-1,ref:this._res,values:0,tmpKey:null}]}createTag(e,t){const r=this._knownTags[e];return r?r(t):new Sa(e,t)}createMap(e,t){return e}createObject(e,t){return e}createArray(e,t){return e}createByteString(e,t){return La.concat(e)}createByteStringFromHeap(e,t){return e===t?La.alloc(0):La.from(this._heap.slice(e,t))}createInt(e){return e}createInt32(e,t){return ma.buildInt32(e,t)}createInt64(e,t,r,n){return ma.buildInt64(e,t,r,n)}createFloat(e){return e}createFloatSingle(e,t,r,n){return $([e,t,r,n],0,!1,23,4)}createFloatDouble(e,t,r,n,i,o,s,u){return $([e,t,r,n,i,o,s,u],0,!1,52,8)}createInt32Neg(e,t){return-1-ma.buildInt32(e,t)}createInt64Neg(e,t,r,n){const i=ma.buildInt32(e,t),o=ma.buildInt32(r,n);return i>ga.MAX_SAFE_HIGH?ga.NEG_ONE.minus(new Da(i).times(ga.SHIFT32).plus(o)):-1-(i*ga.SHIFT32+o)}createTrue(){return!0}createFalse(){return!1}createNull(){return null}createUndefined(){}createInfinity(){return 1/0}createInfinityNeg(){return-1/0}createNaN(){return NaN}createNaNNeg(){return NaN}createUtf8String(e,t){return e.join("")}createUtf8StringFromHeap(e,t){return e===t?"":this._buffer.toString("utf8",e,t)}createSimpleUnassigned(e){return new Ea(e)}pushInt(e){this._push(this.createInt(e))}pushInt32(e,t){this._push(this.createInt32(e,t))}pushInt64(e,t,r,n){this._push(this.createInt64(e,t,r,n))}pushFloat(e){this._push(this.createFloat(e))}pushFloatSingle(e,t,r,n){this._push(this.createFloatSingle(e,t,r,n))}pushFloatDouble(e,t,r,n,i,o,s,u){this._push(this.createFloatDouble(e,t,r,n,i,o,s,u))}pushInt32Neg(e,t){this._push(this.createInt32Neg(e,t))}pushInt64Neg(e,t,r,n){this._push(this.createInt64Neg(e,t,r,n))}pushTrue(){this._push(this.createTrue())}pushFalse(){this._push(this.createFalse())}pushNull(){this._push(this.createNull())}pushUndefined(){this._push(this.createUndefined())}pushInfinity(){this._push(this.createInfinity())}pushInfinityNeg(){this._push(this.createInfinityNeg())}pushNaN(){this._push(this.createNaN())}pushNaNNeg(){this._push(this.createNaNNeg())}pushArrayStart(){this._createParent([],ga.PARENT.ARRAY,-1)}pushArrayStartFixed(e){this._createArrayStartFixed(e)}pushArrayStartFixed32(e,t){const r=ma.buildInt32(e,t);this._createArrayStartFixed(r)}pushArrayStartFixed64(e,t,r,n){const i=ma.buildInt64(e,t,r,n);this._createArrayStartFixed(i)}pushObjectStart(){this._createObjectStartFixed(-1)}pushObjectStartFixed(e){this._createObjectStartFixed(e)}pushObjectStartFixed32(e,t){const r=ma.buildInt32(e,t);this._createObjectStartFixed(r)}pushObjectStartFixed64(e,t,r,n){const i=ma.buildInt64(e,t,r,n);this._createObjectStartFixed(i)}pushByteStringStart(){this._parents[this._depth]={type:ga.PARENT.BYTE_STRING,length:-1,ref:[],values:0,tmpKey:null}}pushByteString(e,t){this._push(this.createByteStringFromHeap(e,t))}pushUtf8StringStart(){this._parents[this._depth]={type:ga.PARENT.UTF8_STRING,length:-1,ref:[],values:0,tmpKey:null}}pushUtf8String(e,t){this._push(this.createUtf8StringFromHeap(e,t))}pushSimpleUnassigned(e){this._push(this.createSimpleUnassigned(e))}pushTagStart(e){this._parents[this._depth]={type:ga.PARENT.TAG,length:1,ref:[e]}}pushTagStart4(e,t){this.pushTagStart(ma.buildInt32(e,t))}pushTagStart8(e,t,r,n){this.pushTagStart(ma.buildInt64(e,t,r,n))}pushTagUnassigned(e){this._push(this.createTag(e))}pushBreak(){if(this._currentParent.length>-1)throw new Error("Unexpected break");this._closeParent()}_createObjectStartFixed(e){0!==e?this._createParent({},ga.PARENT.OBJECT,e):this._push(this.createObject({}))}_createArrayStartFixed(e){0!==e?this._createParent(new Array(e),ga.PARENT.ARRAY,e):this._push(this.createArray([]))}_decode(e){if(0===e.byteLength)throw new Error("Input too short");this._reset(),this._heap8.set(e);const t=this.parser.parse(e.byteLength);if(this._depth>1){for(;0===this._currentParent.length;)this._closeParent();if(this._depth>1)throw new Error("Undeterminated nesting")}if(t>0)throw new Error("Failed to parse");if(0===this._res.length)throw new Error("No valid result")}decodeFirst(e){return this._decode(e),this._res[0]}decodeAll(e){return this._decode(e),this._res}static decode(e,t){"string"==typeof e&&(e=La.from(e,t||"hex"));return new Ma({size:e.length}).decodeFirst(e)}static decodeAll(e,t){"string"==typeof e&&(e=La.from(e,t||"hex"));return new Ma({size:e.length}).decodeAll(e)}}Ma.decodeFirst=Ma.decode;var za=Ma;const{Buffer:Fa}=da;class Ka extends za{createTag(e,t){return`${e}(${t})`}createInt(e){return super.createInt(e).toString()}createInt32(e,t){return super.createInt32(e,t).toString()}createInt64(e,t,r,n){return super.createInt64(e,t,r,n).toString()}createInt32Neg(e,t){return super.createInt32Neg(e,t).toString()}createInt64Neg(e,t,r,n){return super.createInt64Neg(e,t,r,n).toString()}createTrue(){return"true"}createFalse(){return"false"}createFloat(e){const t=super.createFloat(e);return ma.isNegativeZero(e)?"-0_1":`${t}_1`}createFloatSingle(e,t,r,n){return`${super.createFloatSingle(e,t,r,n)}_2`}createFloatDouble(e,t,r,n,i,o,s,u){return`${super.createFloatDouble(e,t,r,n,i,o,s,u)}_3`}createByteString(e,t){const r=e.join(", ");return-1===t?`(_ ${r})`:`h'${r}`}createByteStringFromHeap(e,t){return`h'${Fa.from(super.createByteStringFromHeap(e,t)).toString("hex")}'`}createInfinity(){return"Infinity_1"}createInfinityNeg(){return"-Infinity_1"}createNaN(){return"NaN_1"}createNaNNeg(){return"-NaN_1"}createNull(){return"null"}createUndefined(){return"undefined"}createSimpleUnassigned(e){return`simple(${e})`}createArray(e,t){const r=super.createArray(e,t);return-1===t?`[_ ${r.join(", ")}]`:`[${r.join(", ")}]`}createMap(e,t){const r=super.createMap(e),n=Array.from(r.keys()).reduce(Ga(r),"");return-1===t?`{_ ${n}}`:`{${n}}`}createObject(e,t){const r=super.createObject(e),n=Object.keys(r).reduce(Ga(r),"");return-1===t?`{_ ${n}}`:`{${n}}`}createUtf8String(e,t){const r=e.join(", ");return-1===t?`(_ ${r})`:`"${r}"`}createUtf8StringFromHeap(e,t){return`"${Fa.from(super.createUtf8StringFromHeap(e,t)).toString("utf8")}"`}static diagnose(e,t){"string"==typeof e&&(e=Fa.from(e,t||"hex"));return(new Ka).decodeFirst(e)}}var Ha=Ka;function Ga(e){return(t,r)=>t?`${t}, ${r}: ${e[r]}`:`${r}: ${e[r]}`}const{Buffer:$a}=da,{URL:qa}=ja,Wa=ya.BigNumber,Va=ga.MT,Ya=ga.NUMBYTES,Ja=ga.SHIFT32,Za=ga.SYMS,Xa=ga.TAG,Qa=ga.MT.SIMPLE_FLOAT<<5|ga.NUMBYTES.TWO,ec=ga.MT.SIMPLE_FLOAT<<5|ga.NUMBYTES.FOUR,tc=ga.MT.SIMPLE_FLOAT<<5|ga.NUMBYTES.EIGHT,rc=ga.MT.SIMPLE_FLOAT<<5|ga.SIMPLE.TRUE,nc=ga.MT.SIMPLE_FLOAT<<5|ga.SIMPLE.FALSE,ic=ga.MT.SIMPLE_FLOAT<<5|ga.SIMPLE.UNDEFINED,oc=ga.MT.SIMPLE_FLOAT<<5|ga.SIMPLE.NULL,sc=new Wa("0x20000000000000"),uc=$a.from("f97e00","hex"),ac=$a.from("f9fc00","hex"),cc=$a.from("f97c00","hex");class fc{constructor(e){e=e||{},this.streaming="function"==typeof e.stream,this.onData=e.stream,this.semanticTypes=[[qa,this._pushUrl],[Wa,this._pushBigNumber]];const t=e.genTypes||[],r=t.length;for(let e=0;e<r;e++)this.addSemanticType(t[e][0],t[e][1]);this._reset()}addSemanticType(e,t){const r=this.semanticTypes.length;for(let n=0;n<r;n++){if(this.semanticTypes[n][0]===e){const e=this.semanticTypes[n][1];return this.semanticTypes[n][1]=t,e}}return this.semanticTypes.push([e,t]),null}push(e){return!e||(this.result[this.offset]=e,this.resultMethod[this.offset]=0,this.resultLength[this.offset]=e.length,this.offset++,this.streaming&&this.onData(this.finalize()),!0)}pushWrite(e,t,r){return this.result[this.offset]=e,this.resultMethod[this.offset]=t,this.resultLength[this.offset]=r,this.offset++,this.streaming&&this.onData(this.finalize()),!0}_pushUInt8(e){return this.pushWrite(e,1,1)}_pushUInt16BE(e){return this.pushWrite(e,2,2)}_pushUInt32BE(e){return this.pushWrite(e,3,4)}_pushDoubleBE(e){return this.pushWrite(e,4,8)}_pushNaN(){return this.push(uc)}_pushInfinity(e){const t=e<0?ac:cc;return this.push(t)}_pushFloat(e){const t=$a.allocUnsafe(2);if(ma.writeHalf(t,e)&&ma.parseHalf(t)===e)return this._pushUInt8(Qa)&&this.push(t);const r=$a.allocUnsafe(4);return r.writeFloatBE(e,0),r.readFloatBE(0)===e?this._pushUInt8(ec)&&this.push(r):this._pushUInt8(tc)&&this._pushDoubleBE(e)}_pushInt(e,t,r){const n=t<<5;return e<24?this._pushUInt8(n|e):e<=255?this._pushUInt8(n|Ya.ONE)&&this._pushUInt8(e):e<=65535?this._pushUInt8(n|Ya.TWO)&&this._pushUInt16BE(e):e<=4294967295?this._pushUInt8(n|Ya.FOUR)&&this._pushUInt32BE(e):e<=Number.MAX_SAFE_INTEGER?this._pushUInt8(n|Ya.EIGHT)&&this._pushUInt32BE(Math.floor(e/Ja))&&this._pushUInt32BE(e%Ja):t===Va.NEG_INT?this._pushFloat(r):this._pushFloat(e)}_pushIntNum(e){return e<0?this._pushInt(-e-1,Va.NEG_INT,e):this._pushInt(e,Va.POS_INT)}_pushNumber(e){switch(!1){case e==e:return this._pushNaN(e);case isFinite(e):return this._pushInfinity(e);case e%1!=0:return this._pushIntNum(e);default:return this._pushFloat(e)}}_pushString(e){const t=$a.byteLength(e,"utf8");return this._pushInt(t,Va.UTF8_STRING)&&this.pushWrite(e,5,t)}_pushBoolean(e){return this._pushUInt8(e?rc:nc)}_pushUndefined(e){return this._pushUInt8(ic)}_pushArray(e,t){const r=t.length;if(!e._pushInt(r,Va.ARRAY))return!1;for(let n=0;n<r;n++)if(!e.pushAny(t[n]))return!1;return!0}_pushTag(e){return this._pushInt(e,Va.TAG)}_pushDate(e,t){return e._pushTag(Xa.DATE_EPOCH)&&e.pushAny(Math.round(t/1e3))}_pushBuffer(e,t){return e._pushInt(t.length,Va.BYTE_STRING)&&e.push(t)}_pushNoFilter(e,t){return e._pushBuffer(e,t.slice())}_pushRegexp(e,t){return e._pushTag(Xa.REGEXP)&&e.pushAny(t.source)}_pushSet(e,t){if(!e._pushInt(t.size,Va.ARRAY))return!1;for(const r of t)if(!e.pushAny(r))return!1;return!0}_pushUrl(e,t){return e._pushTag(Xa.URI)&&e.pushAny(t.format())}_pushBigint(e){let t=Xa.POS_BIGINT;e.isNegative()&&(e=e.negated().minus(1),t=Xa.NEG_BIGINT);let r=e.toString(16);r.length%2&&(r="0"+r);const n=$a.from(r,"hex");return this._pushTag(t)&&this._pushBuffer(this,n)}_pushBigNumber(e,t){if(t.isNaN())return e._pushNaN();if(!t.isFinite())return e._pushInfinity(t.isNegative()?-1/0:1/0);if(t.isInteger())return e._pushBigint(t);if(!e._pushTag(Xa.DECIMAL_FRAC)||!e._pushInt(2,Va.ARRAY))return!1;const r=t.decimalPlaces(),n=t.multipliedBy(new Wa(10).pow(r));return!!e._pushIntNum(-r)&&(n.abs().isLessThan(sc)?e._pushIntNum(n.toNumber()):e._pushBigint(n))}_pushMap(e,t){return!!e._pushInt(t.size,Va.MAP)&&this._pushRawMap(t.size,Array.from(t))}_pushObject(e){if(!e)return this._pushUInt8(oc);for(var t=this.semanticTypes.length,r=0;r<t;r++)if(e instanceof this.semanticTypes[r][0])return this.semanticTypes[r][1].call(e,this,e);var n=e.encodeCBOR;if("function"==typeof n)return n.call(e,this);var i=Object.keys(e),o=i.length;return!!this._pushInt(o,Va.MAP)&&this._pushRawMap(o,i.map((t=>[t,e[t]])))}_pushRawMap(e,t){t=t.map((function(e){return e[0]=fc.encode(e[0]),e})).sort(ma.keySorter);for(var r=0;r<e;r++){if(!this.push(t[r][0]))return!1;if(!this.pushAny(t[r][1]))return!1}return!0}write(e){return this.pushAny(e)}pushAny(e){switch(function(e){return{}.toString.call(e).slice(8,-1)}(e)){case"Number":return this._pushNumber(e);case"String":return this._pushString(e);case"Boolean":return this._pushBoolean(e);case"Object":return this._pushObject(e);case"Array":return this._pushArray(this,e);case"Uint8Array":return this._pushBuffer(this,$a.isBuffer(e)?e:$a.from(e));case"Null":return this._pushUInt8(oc);case"Undefined":return this._pushUndefined(e);case"Map":return this._pushMap(this,e);case"Set":return this._pushSet(this,e);case"URL":return this._pushUrl(this,e);case"BigNumber":return this._pushBigNumber(this,e);case"Date":return this._pushDate(this,e);case"RegExp":return this._pushRegexp(this,e);case"Symbol":switch(e){case Za.NULL:return this._pushObject(null);case Za.UNDEFINED:return this._pushUndefined(void 0);default:throw new Error("Unknown symbol: "+e.toString())}default:throw new Error("Unknown type: "+typeof e+", "+(e?e.toString():""))}}finalize(){if(0===this.offset)return null;for(var e=this.result,t=this.resultLength,r=this.resultMethod,n=this.offset,i=0,o=0;o<n;o++)i+=t[o];var s=$a.allocUnsafe(i),u=0,a=0;for(o=0;o<n;o++){switch(a=t[o],r[o]){case 0:e[o].copy(s,u);break;case 1:s.writeUInt8(e[o],u,!0);break;case 2:s.writeUInt16BE(e[o],u,!0);break;case 3:s.writeUInt32BE(e[o],u,!0);break;case 4:s.writeDoubleBE(e[o],u,!0);break;case 5:s.write(e[o],u,a,"utf8");break;default:throw new Error("unkown method")}u+=a}var c=s;return this._reset(),c}_reset(){this.result=[],this.resultMethod=[],this.resultLength=[],this.offset=0}static encode(e){const t=new fc;if(!t.pushAny(e))throw new Error("Failed to encode input");return t.finalize()}}var lc=fc,hc=p((function(e,t){t.Diagnose=Ha,t.Decoder=za,t.Encoder=lc,t.Simple=Ea,t.Tagged=Sa,t.decodeAll=t.Decoder.decodeAll,t.decodeFirst=t.Decoder.decodeFirst,t.diagnose=t.Diagnose.diagnose,t.encode=t.Encoder.encode,t.decode=t.Decoder.decode,t.leveldb={decode:t.Decoder.decodeAll,encode:t.Encoder.encode,buffer:!0,name:"cbor"}})),pc=Object.freeze({__proto__:null,clear:Re,create:function(){return o(void 0,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return[4,Be.init(Ne)];case 1:return[2,e.sent()]}}))}))},set:function(e){return o(void 0,void 0,void 0,(function(){return s(this,(function(t){return Ce=e,[2]}))}))},get:Ue,getKeyByName:Le,encrypt:De,decrypt:Pe,genKeyStr:Me,sha256Str:ze,sha256:Fe}),dc=function(e,t){return o(void 0,void 0,void 0,(function(){var r,n,i,u;return s(this,(function(a){switch(a.label){case 0:return function(e){var t;return"undefined"!=typeof Blob&&(e instanceof Blob||Q(e)&&"Blob"===(null===(t=null==e?void 0:e.constructor)||void 0===t?void 0:t.name))}(e)?[4,(c=e,o(void 0,void 0,void 0,(function(){return s(this,(function(e){return[2,new Promise((function(e,t){var r=function(){return t(new Error("Failed to read file"))},n=new FileReader;n.addEventListener("load",(function(t){var n,i=(null===(n=null==t?void 0:t.target)||void 0===n?void 0:n.result)||null;null===i&&r(),e(W.Buffer.from(i))})),n.addEventListener("error",(function(){return n.abort()})),n.addEventListener("abort",r),n.readAsArrayBuffer(c)}))]}))})))]:[3,2];case 1:return n=a.sent(),[3,3];case 2:n=e,a.label=3;case 3:return r=n,i=hc.encode(r),Y(t)?[4,De(i,t)]:[3,5];case 4:return u=a.sent(),[3,6];case 5:u=i,a.label=6;case 6:return[2,ia(u)]}var c}))}))},yc=function(e,t){return o(void 0,void 0,void 0,(function(){var r,n,i;return s(this,(function(o){switch(o.label){case 0:return[4,sa(e)];case 1:return r=o.sent(),Y(t)?[4,Pe(r,t)]:[3,3];case 2:return i=o.sent(),[3,4];case 3:i=r,o.label=4;case 4:return n=i,[2,hc.decode(n)]}}))}))},vc=Object.freeze({__proto__:null,add:dc,catAndDecode:yc}),gc=Object.freeze({__proto__:null,encoded:vc,set:function(e){_o=e},get:wo,iframe:ko,add:ia,catRaw:oa,catBuf:sa,cat:ua,ls:aa,dagGet:ca,dagPut:fa,dagPutLinks:la,size:ha,attemptPin:pa,DAG_NODE_DATA:na}),mc=function(e){return e.split("/").filter((function(e){return e.length>0}))},bc=function(e){return e.join("/")},_c=function(e){var t=mc(e),r=t.slice(1);return{head:t[0]||null,nextPath:r.length>0?bc(r):null}};function wc(e){return"private/Apps/"+e.creator+"/"+e.name}function kc(e){var t=[];return e.app&&t.push("/"+wc(e.app)),e.fs&&e.fs.privatePaths&&(t=t.concat(e.fs.privatePaths.map((function(e){return"/private/"+e.replace(/^\/+/,"")})).map((function(e){return e.replace(/\/+$/,"")})))),e.fs&&e.fs.publicPaths&&(t=t.concat(e.fs.publicPaths.map((function(e){return"/public/"+e.replace(/^\/+/,"")})).map((function(e){return e.replace(/\/+$/,"")})))),t}const Ec={};
/*!
     * Copyright (c) 2019-2020 Digital Bazaar, Inc. All rights reserved.
     */
const Ac="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";function Sc(e,t){return function(e,t,r){if(!(e instanceof Uint8Array))throw new TypeError('"input" must be a Uint8Array.');if("string"!=typeof t)throw new TypeError('"alphabet" must be a string.');if(void 0!==r&&"number"!=typeof r)throw new TypeError('"maxline" must be a number.');if(0===e.length)return"";let n="",i=0;const o=t.length,s=t.charAt(0),u=[0];for(i=0;i<e.length;++i){let t=e[i];for(let e=0;e<u.length;++e)t+=u[e]<<8,u[e]=t%o,t=t/o|0;for(;t>0;)u.push(t%o),t=t/o|0}for(i=0;0===e[i]&&i<e.length-1;++i)n+=s;for(i=u.length-1;i>=0;--i)n+=t[u[i]];if(r){const e=new RegExp(".{1,"+r+"}","g");n=n.match(e).join("\r\n")}return n}(e,Ac,t)}function xc(e){return function(e,t){if("string"!=typeof e)throw new TypeError('"input" must be a string.');if("string"!=typeof t)throw new TypeError('"alphabet" must be a string.');if(0===e.length)return new Uint8Array;let r=Ec[t];if(!r){r=Ec[t]=[];for(let e=0;e<t.length;++e)r[t.charCodeAt(e)]=e}e=e.replace(/\s/g,"");const n=t.length,i=t.charAt(0),o=[0];for(let t=0;t<e.length;t++){const i=r[e.charCodeAt(t)];if(void 0===i)return;let s=i;for(let e=0;e<o.length;++e)s+=o[e]*n,o[e]=255&s,s>>=8;for(;s>0;)o.push(255&s),s>>=8}for(let t=0;e[t]===i&&t<e.length-1;++t)o.push(0);return new Uint8Array(o.reverse())}(e,Ac)}var Ic=p((function(e,t){function r(e){if(!e||null===e)throw t.KeyDoesNotExist;if(void 0===e.privateKey)throw t.NotKeyPair;return e}function n(e){if(!e||null===e)throw t.KeyDoesNotExist;if(void 0!==e.privateKey||void 0===e.algorithm)throw t.NotKey;return e}function i(e){s(e,[y.CryptoSystem.ECC,y.CryptoSystem.RSA],t.UnsupportedCrypto)}function o(e){s(e,[y.KeyUse.Read,y.KeyUse.Write],t.InvalidKeyUse)}function s(e,t,r){if(!t.some((function(t){return t===e})))throw r}Object.defineProperty(t,"__esModule",{value:!0}),t.KeyDoesNotExist=new Error("Key does not exist. Make sure you properly instantiated the keystore."),t.NotKeyPair=new Error("Retrieved a symmetric key when an asymmetric keypair was expected. Please use a different key name."),t.NotKey=new Error("Retrieved an asymmetric keypair when an symmetric key was expected. Please use a different key name."),t.ECCNotEnabled=new Error("ECC is not enabled for this browser. Please use RSA instead."),t.UnsupportedCrypto=new Error("Cryptosystem not supported. Please use ECC or RSA"),t.InvalidKeyUse=new Error("Invalid key use. Please use 'read' or 'write"),t.checkIsKeyPair=r,t.checkIsKey=n,t.checkValidCryptoSystem=i,t.checkValidKeyUse=o,t.default={KeyDoesNotExist:t.KeyDoesNotExist,NotKeyPair:t.NotKeyPair,NotKey:t.NotKey,ECCNotEnabled:t.ECCNotEnabled,UnsupportedCrypto:t.UnsupportedCrypto,InvalidKeyUse:t.InvalidKeyUse,checkIsKeyPair:r,checkIsKey:n,checkValidCryptoSystem:i,checkValidKeyUse:o}})),Tc=f&&f.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{a(n.next(e))}catch(e){o(e)}}function u(e){try{a(n.throw(e))}catch(e){o(e)}}function a(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,u)}a((n=n.apply(e,t||[])).next())}))},Oc=f&&f.__generator||function(e,t){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}};function Bc(e,t){return Tc(this,void 0,void 0,(function(){var r,n;return Oc(this,(function(i){return Ic.checkValidKeyUse(t),r=t===y.KeyUse.Read?oe.ECC_READ_ALG:oe.ECC_WRITE_ALG,n=t===y.KeyUse.Read?["deriveKey","deriveBits"]:["sign","verify"],[2,globalThis.crypto.subtle.generateKey({name:r,namedCurve:e},!1,n)]}))}))}var Nc=Bc;function Cc(e,t,r){return Tc(this,void 0,void 0,(function(){var n,i,o;return Oc(this,(function(s){return Ic.checkValidKeyUse(r),n=r===y.KeyUse.Read?oe.ECC_READ_ALG:oe.ECC_WRITE_ALG,i=r===y.KeyUse.Read?[]:["verify"],o=g.default.base64ToArrBuf(e),[2,globalThis.crypto.subtle.importKey("raw",o,{name:n,namedCurve:t},!0,i)]}))}))}var Rc=Cc,Uc={makeKeypair:Bc,importPublicKey:Cc},jc=Object.defineProperty({makeKeypair:Nc,importPublicKey:Rc,default:Uc},"__esModule",{value:!0}),Lc=f&&f.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{a(n.next(e))}catch(e){o(e)}}function u(e){try{a(n.throw(e))}catch(e){o(e)}}function a(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,u)}a((n=n.apply(e,t||[])).next())}))},Dc=f&&f.__generator||function(e,t){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}};function Pc(e,t,r,n){return void 0===r&&(r=oe.DEFAULT_CHAR_SIZE),void 0===n&&(n=oe.DEFAULT_HASH_ALG),Lc(this,void 0,void 0,(function(){return Dc(this,(function(i){return[2,globalThis.crypto.subtle.sign({name:oe.ECC_WRITE_ALG,hash:{name:n}},t,g.normalizeUnicodeToBuf(e,r))]}))}))}function Mc(e,t,r,n,i,o){return void 0===n&&(n=oe.DEFAULT_CHAR_SIZE),void 0===i&&(i=oe.DEFAULT_ECC_CURVE),void 0===o&&(o=oe.DEFAULT_HASH_ALG),Lc(this,void 0,void 0,(function(){var s,u,a,c;return Dc(this,(function(f){switch(f.label){case 0:return u=(s=globalThis.crypto.subtle).verify,a=[{name:oe.ECC_WRITE_ALG,hash:{name:o}}],"string"!=typeof r?[3,2]:[4,jc.default.importPublicKey(r,i,y.KeyUse.Write)];case 1:return c=f.sent(),[3,3];case 2:c=r,f.label=3;case 3:return[2,u.apply(s,a.concat([c,g.normalizeBase64ToBuf(t),g.normalizeUnicodeToBuf(e,n)]))]}}))}))}function zc(e,t,r,n,i,o){return void 0===n&&(n=oe.DEFAULT_CHAR_SIZE),void 0===i&&(i=oe.DEFAULT_ECC_CURVE),Lc(this,void 0,void 0,(function(){var s,u;return Dc(this,(function(a){switch(a.label){case 0:return"string"!=typeof r?[3,2]:[4,jc.default.importPublicKey(r,i,y.KeyUse.Read)];case 1:return s=a.sent(),[3,3];case 2:s=r,a.label=3;case 3:return[4,Hc(t,s,o)];case 4:return u=a.sent(),[2,Te.default.encryptBytes(g.normalizeUnicodeToBuf(e,n),u,o)]}}))}))}function Fc(e,t,r,n,i){return void 0===n&&(n=oe.DEFAULT_ECC_CURVE),Lc(this,void 0,void 0,(function(){var o,s;return Dc(this,(function(u){switch(u.label){case 0:return"string"!=typeof r?[3,2]:[4,jc.default.importPublicKey(r,n,y.KeyUse.Read)];case 1:return o=u.sent(),[3,3];case 2:o=r,u.label=3;case 3:return[4,Hc(t,o,i)];case 4:return s=u.sent(),[2,Te.default.decryptBytes(g.normalizeBase64ToBuf(e),s,i)]}}))}))}function Kc(e){return Lc(this,void 0,void 0,(function(){var t;return Dc(this,(function(r){switch(r.label){case 0:return[4,globalThis.crypto.subtle.exportKey("raw",e.publicKey)];case 1:return t=r.sent(),[2,g.default.arrBufToBase64(t)]}}))}))}function Hc(e,t,r){return Lc(this,void 0,void 0,(function(){return Dc(this,(function(n){return[2,globalThis.crypto.subtle.deriveKey({name:oe.ECC_READ_ALG,public:t},e,{name:(null==r?void 0:r.alg)||oe.DEFAULT_SYMM_ALG,length:(null==r?void 0:r.length)||oe.DEFAULT_SYMM_LEN},!1,["encrypt","decrypt"])]}))}))}var Gc={sign:Pc,verify:Mc,encrypt:zc,decrypt:Fc,getPublicKey:Kc,getSharedKey:Hc},$c=f&&f.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{a(n.next(e))}catch(e){o(e)}}function u(e){try{a(n.throw(e))}catch(e){o(e)}}function a(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,u)}a((n=n.apply(e,t||[])).next())}))},qc=f&&f.__generator||function(e,t){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}};function Wc(e,t,r){return $c(this,void 0,void 0,(function(){var n,i;return qc(this,(function(o){return Ic.checkValidKeyUse(r),n=r===y.KeyUse.Read?oe.RSA_READ_ALG:oe.RSA_WRITE_ALG,i=r===y.KeyUse.Read?["encrypt","decrypt"]:["sign","verify"],[2,globalThis.crypto.subtle.generateKey({name:n,modulusLength:e,publicExponent:g.default.publicExponent(),hash:{name:t}},!1,i)]}))}))}var Vc=Wc;function Yc(e,t,r){return $c(this,void 0,void 0,(function(){var n,i,o;return qc(this,(function(s){return Ic.checkValidKeyUse(r),n=r===y.KeyUse.Read?oe.RSA_READ_ALG:oe.RSA_WRITE_ALG,i=r===y.KeyUse.Read?["encrypt"]:["verify"],o=g.default.base64ToArrBuf(function(e){return e.replace("-----BEGIN PUBLIC KEY-----\n","").replace("\n-----END PUBLIC KEY-----","")}(e)),[2,globalThis.crypto.subtle.importKey("spki",o,{name:n,hash:{name:t}},!0,i)]}))}))}var Jc=Yc,Zc={makeKeypair:Wc,importPublicKey:Yc},Xc=Object.defineProperty({makeKeypair:Vc,importPublicKey:Jc,default:Zc},"__esModule",{value:!0}),Qc=f&&f.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{a(n.next(e))}catch(e){o(e)}}function u(e){try{a(n.throw(e))}catch(e){o(e)}}function a(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,u)}a((n=n.apply(e,t||[])).next())}))},ef=f&&f.__generator||function(e,t){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}};function tf(e,t,r){return void 0===r&&(r=oe.DEFAULT_CHAR_SIZE),Qc(this,void 0,void 0,(function(){return ef(this,(function(n){return[2,globalThis.crypto.subtle.sign({name:oe.RSA_WRITE_ALG,saltLength:oe.SALT_LENGTH},t,g.normalizeUnicodeToBuf(e,r))]}))}))}function rf(e,t,r,n,i){return void 0===n&&(n=oe.DEFAULT_CHAR_SIZE),void 0===i&&(i=oe.DEFAULT_HASH_ALG),Qc(this,void 0,void 0,(function(){var o,s,u,a;return ef(this,(function(c){switch(c.label){case 0:return s=(o=globalThis.crypto.subtle).verify,u=[{name:oe.RSA_WRITE_ALG,saltLength:oe.SALT_LENGTH}],"string"!=typeof r?[3,2]:[4,Xc.default.importPublicKey(r,i,y.KeyUse.Write)];case 1:return a=c.sent(),[3,3];case 2:a=r,c.label=3;case 3:return[2,s.apply(o,u.concat([a,g.normalizeBase64ToBuf(t),g.normalizeUnicodeToBuf(e,n)]))]}}))}))}function nf(e,t,r,n){return void 0===r&&(r=oe.DEFAULT_CHAR_SIZE),void 0===n&&(n=oe.DEFAULT_HASH_ALG),Qc(this,void 0,void 0,(function(){var i,o,s,u;return ef(this,(function(a){switch(a.label){case 0:return o=(i=globalThis.crypto.subtle).encrypt,s=[{name:oe.RSA_READ_ALG}],"string"!=typeof t?[3,2]:[4,Xc.default.importPublicKey(t,n,y.KeyUse.Read)];case 1:return u=a.sent(),[3,3];case 2:u=t,a.label=3;case 3:return[2,o.apply(i,s.concat([u,g.normalizeUnicodeToBuf(e,r)]))]}}))}))}function of(e,t){return Qc(this,void 0,void 0,(function(){var r;return ef(this,(function(n){return r=g.normalizeBase64ToBuf(e),[2,globalThis.crypto.subtle.decrypt({name:oe.RSA_READ_ALG},t,r)]}))}))}function sf(e){return Qc(this,void 0,void 0,(function(){var t;return ef(this,(function(r){switch(r.label){case 0:return[4,globalThis.crypto.subtle.exportKey("spki",e.publicKey)];case 1:return t=r.sent(),[2,g.default.arrBufToBase64(t)]}}))}))}var uf={sign:tf,verify:rf,encrypt:nf,decrypt:of,getPublicKey:sf},af=new Uint8Array([237,1]).buffer,cf=new Uint8Array([0,245,2]).buffer,ff="did:key:z";function lf(){return o(this,void 0,void 0,(function(){var e;return s(this,(function(t){switch(t.label){case 0:return[4,Ue()];case 1:return[4,(e=t.sent()).publicReadKey()];case 2:return[2,pf(t.sent(),e.cfg.type)]}}))}))}function hf(){return o(this,void 0,void 0,(function(){var e;return s(this,(function(t){switch(t.label){case 0:return[4,Ue()];case 1:return[4,(e=t.sent()).publicWriteKey()];case 2:return[2,pf(t.sent(),e.cfg.type)]}}))}))}function pf(e,t){var r=m.base64ToArrBuf(e),n=function(e){switch(e){case y.CryptoSystem.RSA:return cf;default:return null}}(t)||new ArrayBuffer(0),i=m.joinBufs(n,r);return ff+Sc(new Uint8Array(i))}function df(e){if(!e.startsWith(ff))throw new Error("Please use a base58-encoded DID formatted `did:key:z...`");var t=xc(e.substr(ff.length)).buffer,r=vf(t),n=r.keyBuffer,i=r.type;return{publicKey:m.arrBufToBase64(n),type:i}}function yf(e){var t=e.charSize,r=void 0===t?16:t,n=e.data,i=e.did,u=e.signature;return o(this,void 0,void 0,(function(){var e,t,o;return s(this,(function(s){switch(s.label){case 0:switch(s.trys.push([0,7,,8]),e=df(i),t=e.type,o=e.publicKey,t){case"ecc":return[3,1];case"rsa":return[3,3]}return[3,5];case 1:return[4,Gc.verify(n,u,o,r)];case 2:return[2,s.sent()];case 3:return[4,uf.verify(n,u,o,r)];case 4:return[2,s.sent()];case 5:return[2,!1];case 6:return[3,8];case 7:return s.sent(),[2,!1];case 8:return[2]}}))}))}var vf=function(e){if(gf(e,cf))return{keyBuffer:e.slice(cf.byteLength),type:y.CryptoSystem.RSA};if(gf(e,af))return{keyBuffer:e.slice(af.byteLength),type:y.CryptoSystem.ECC};throw new Error("Unsupported key algorithm. Try using RSA.")},gf=function(e,t){return function(e,t){var r=new Uint8Array(e),n=new Uint8Array(t);if(r.length!==n.length)return!1;for(var i=0;i<r.length;i++)if(r[i]!==n[i])return!1;return!0}(t,e.slice(0,t.byteLength))},mf=Object.freeze({__proto__:null,exchange:lf,root:function(e){return o(this,void 0,void 0,(function(){var t,r;return s(this,(function(n){switch(n.label){case 0:t=S.endpoints.user,n.label=1;case 1:return n.trys.push([1,3,,4]),[4,b("_did."+e+"."+t)];case 2:return null!==(r=n.sent())?[2,r]:[3,4];case 3:return n.sent(),[3,4];case 4:throw new Error("Could not locate user DID in DNS.")}}))}))},ucan:hf,write:hf,publicKeyToDid:pf,didToPublicKey:df,verifySignedData:yf}),bf="wnfs";function _f(e){return e.reduce((function(e,t){var r,i,o=wf(t),s=o.payload.rsc;if(Sf(o))return e;if("object"!=typeof s)return n(n({},e),((r={})[s]=o,r));var u=Array.from(Object.entries(s))[0],a=u[0]+":"+(u[0]===bf?u[1].replace(/\/+$/,""):u[1]);return n(n({},e),((i={})[a]=o,i))}),{})}function wf(e){var t=e.split("."),r=JSON.parse(T(t[0])),i=JSON.parse(T(t[1]));return{header:r,payload:n(n({},i),{prf:i.prf?wf(i.prf):null}),signature:t[2]||null}}function kf(e){return Ef(e.header)+"."+Af(e.payload)+"."+(e.signature||xf(e.header,e.payload))}function Ef(e){return O(JSON.stringify(e))}function Af(e){return O(JSON.stringify(n(n({},e),{prf:e.prf?kf(e.prf):void 0})))}function Sf(e){return e.payload.exp<=Math.floor(Date.now()/1e3)}function xf(e,t){return o(this,void 0,void 0,(function(){var r,n,i,o,u;return s(this,(function(s){switch(s.label){case 0:return r=Ef(e),n=Af(t),[4,Ue()];case 1:return i=s.sent(),u=(o=C).makeUrlSafe,[4,i.sign(r+"."+n,{charSize:8})];case 2:return[2,u.apply(o,[s.sent()])]}}))}))}function If(e){switch(e){case y.CryptoSystem.RSA:return"RS256";default:return null}}var Tf=Object.freeze({__proto__:null,WNFS_PREFIX:bf,build:function(e){var t=e.addSignature,r=void 0===t||t,n=e.audience,i=e.facts,u=void 0===i?[]:i,a=e.issuer,c=e.lifetimeInSeconds,f=void 0===c?30:c,l=e.potency,h=void 0===l?"APPEND":l,p=e.proof,d=e.resource;return o(this,void 0,void 0,(function(){var e,t,i,o,c,l,y,v,g,m;return s(this,(function(s){switch(s.label){case 0:return[4,Ue()];case 1:return e=s.sent(),t=Math.floor(Date.now()/1e3),i={alg:If(e.cfg.type)||"UnknownAlgorithm",typ:"JWT",uav:"1.0.0"},o=t+f,c=t-60,p&&(l=p.payload,o=Math.min(l.exp,o),c=Math.max(l.nbf,c)),m={aud:n,exp:o,fct:u},(v=a)?[3,3]:[4,hf()];case 2:v=s.sent(),s.label=3;case 3:return m.iss=v,m.nbf=c,m.prf=p,m.ptc=h,m.rsc=d||(p?p.payload.rsc:"*"),y=m,r?[4,xf(i,y)]:[3,5];case 4:return g=s.sent(),[3,6];case 5:g=null,s.label=6;case 6:return[2,{header:i,payload:y,signature:g}]}}))}))},compileDictionary:_f,decode:wf,encode:kf,encodeHeader:Ef,encodePayload:Af,isExpired:Sf,isValid:function e(t){return o(this,void 0,void 0,(function(){var r,n,i,o;return s(this,(function(s){switch(s.label){case 0:return r=Ef(t.header),n=Af(t.payload),[4,yf({charSize:8,data:r+"."+n,did:t.payload.iss,signature:N(t.signature||"")})];case 1:return(i=s.sent())?t.payload.prf?(o=t.payload.prf.payload.aud===t.payload.iss)?[4,e(t.payload.prf)]:[2,o]:[2,!0]:[2,i];case 2:return[2,s.sent()]}}))}))},rootIssuer:function e(t,r){void 0===r&&(r=0);var n=function(e,t){try{return JSON.parse(T(e.split(".")[1]))}catch(r){throw new Error("Invalid UCAN ("+t+" level"+(1===t?"":"s")+" deep): `"+e+"`")}}(t,r);return n.prf?e(n.prf,r+1):n.iss},sign:xf}),Of={};function Bf(){return o(this,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return Of={},[4,v.removeItem(re)];case 1:return e.sent(),[2]}}))}))}function Nf(e){return o(this,void 0,void 0,(function(){return s(this,(function(t){return[2,Of["*"]||Of["app:*"]||Of["app:"+e]]}))}))}function Cf(e){return o(this,void 0,void 0,(function(){var t,r,n;return s(this,(function(i){switch(i.label){case 0:return t=mc(e),[4,ie()];case 1:return r=i.sent(),n=r?"wnfs:/":"",Of["*"]?[2,Of["*"]]:[2,t.reduce((function(e,r,i){if(e)return e;var o=bc(t.slice(0,t.length-i));return Of[""+n+o]||null}),null)]}}))}))}function Rf(e){return o(this,void 0,void 0,(function(){var t,r,n,i;return s(this,(function(o){switch(o.label){case 0:return[4,v.getItem(re)];case 1:return t=o.sent(),r=(t||[]).concat(e),Of=_f(r),n=Object.values(Of),i=n.map(kf),[4,v.setItem(re,i)];case 2:return o.sent(),[2]}}))}))}function Uf(e,t){var r=e.app,n=e.fs,i="wnfs:/",o=Of["*"];if(o&&!Sf(o))return!0;if(r){var s=Of[i+wc(r)];if(!s||Sf(s))return!1}if(n&&n.privatePaths&&!n.privatePaths.every((function(e){var t=e.replace(/^\/+/,""),r=t.length?"wnfs:/private/"+t:"wnfs:/private",n=Of[r];return n&&!Sf(n)})))return!1;if(n&&n.publicPaths&&!n.publicPaths.every((function(e){var t=e.replace(/^\/+/,""),r=t.length?"wnfs:/public/"+t:"wnfs:/public",n=Of[r];return n&&!Sf(n)})))return!1;return!0}var jf,Lf=p((function(e,t){!function(e){function t(e,t,r,n){var i,o=!1,s=0;function u(){i&&clearTimeout(i)}function a(){u(),o=!0}function c(){for(var a=arguments.length,c=new Array(a),f=0;f<a;f++)c[f]=arguments[f];var l=this,h=Date.now()-s;function p(){s=Date.now(),r.apply(l,c)}function d(){i=void 0}o||(n&&!i&&p(),u(),void 0===n&&h>e?p():!0!==t&&(i=setTimeout(n?d:p,void 0===n?e-h:e)))}return"boolean"!=typeof t&&(n=r,r=t,t=void 0),c.cancel=a,c}function r(e,r,n){return void 0===n?t(e,r,!1):t(e,n,!1!==r)}e.debounce=r,e.throttle=t,Object.defineProperty(e,"__esModule",{value:!0})}(t)}));!function(e){e.Public="public",e.Pretty="p",e.Private="private",e.PrivateLog="privateLog",e.Version="version"}(jf||(jf={}));var Df=function(e){var t=e.name,r=e.cid,n=e.size;return new ea.DAGLink(t,n,r)},Pf=function(e){var t=e.name,r=void 0===t?"":t,n=e.cid,i=e.size,o=e.mtime,s=e.type;return{name:r,cid:n.toString(),size:i,mtime:o,isFile:"dir"!==s}},Mf=function(e){return{name:e.Name,cid:e.Hash.toString(),size:e.Tsize}},zf=function(e,t,r,n){return{name:e,cid:t,size:n,isFile:r,mtime:Date.now()}},Ff=function(e){return e.reduce((function(e,t){return e[t.name]=t,e}),{})},Kf=Object.freeze({__proto__:null,toDAGLink:Df,fromFSFile:Pf,fromDAGLink:Mf,make:zf,arrToMap:Ff}),Hf=function(e){return o(void 0,void 0,void 0,(function(){return s(this,(function(t){return[2,sa(e)]}))}))},Gf=function(e,t){return o(void 0,void 0,void 0,(function(){return s(this,(function(r){return[2,yc(e,t)]}))}))},$f=function(e){return o(void 0,void 0,void 0,(function(){return s(this,(function(t){return[2,ia(e)]}))}))},qf=function(e,t){return o(void 0,void 0,void 0,(function(){return s(this,(function(r){return[2,dc(e,t)]}))}))},Wf=function(e){return o(void 0,void 0,void 0,(function(){var t;return s(this,(function(r){switch(r.label){case 0:return[4,ca(e)];case 1:return t=r.sent(),[2,Ff(t.Links.map(Mf))]}}))}))},Vf=function(e){return o(void 0,void 0,void 0,(function(){var t,r;return s(this,(function(n){switch(n.label){case 0:return[4,aa(e)];case 1:return t=n.sent(),r=Ff(t.map(Pf)),[4,ca(e)];case 2:return n.sent().Links.forEach((function(e){r[e.Name]&&0===r[e.Name].size&&(r[e.Name].size=e.Tsize)})),[2,r]}}))}))},Yf=function(e){return o(void 0,void 0,void 0,(function(){var t;return s(this,(function(r){return t=Object.values(e).filter((function(e){return void 0!==e})).map(Df),[2,la(t)]}))}))},Jf=function(e){return Q(e)&&void 0!==e.content},Zf=function(e){return Q(e)&&X(e.name)&&Z(e.size)&&J(e.isFile)},Xf=function(e){return Zf(e)&&nl(e.cid)},Qf=function(e){return Q(e)&&function(e){return Q(e)&&Z(e.mtime)&&Z(e.ctime)&&Z(e.mode)&&X(e._type)}(e.unixMeta)&&J(e.isFile)&&il(e.version)},el=function(e){return Q(e)&&Object.values(e).every((function(e){return Q(e)&&nl(e.cid)&&nl(e.userland)&&nl(e.metadata)&&el(e.subSkeleton)}))},tl=function(e){return Q(e)&&el(e.skeleton)&&Qf(e.metadata)&&!1===e.metadata.isFile},rl=function(e){return Q(e)&&Qf(e.metadata)&&!0===e.metadata.isFile},nl=function(e){return X(e)},il=function(e){if(!Q(e))return!1;var t=e.major,r=e.minor,n=e.patch;return Z(t)&&Z(r)&&Z(n)},ol=function(e,t){return o(void 0,void 0,void 0,(function(){var r,n,i;return s(this,(function(o){switch(o.label){case 0:return[4,dc(t,null)];case 1:return r=o.sent(),n=r.cid,i=r.size,[2,zf(e,n,!0,i)]}}))}))},sl=function(e){return o(void 0,void 0,void 0,(function(){var t,r,n,i,o,u,a,c;return s(this,(function(s){switch(s.label){case 0:return[4,Vf(e)];case 1:return t=s.sent(),[4,cl(t,"metadata",Qf)];case 2:return(r=s.sent()).isFile?(i=void 0,[3,5]):[3,3];case 3:return[4,cl(t,"skeleton",el)];case 4:i=s.sent(),s.label=5;case 5:if(n=i,o=(null===(a=t.userland)||void 0===a?void 0:a.cid)||null,!nl(o))throw new Error("Could not find userland");return u=(null===(c=t.previous)||void 0===c?void 0:c.cid)||void 0,[2,{userland:o,metadata:r,previous:u,skeleton:n}]}}))}))},ul=function(e,t){return o(void 0,void 0,void 0,(function(){var r;return s(this,(function(n){switch(n.label){case 0:return X(e)?[4,Vf(e)]:[3,2];case 1:return r=n.sent(),[2,al(r,t)];case 2:return[2,al(e,t)]}}))}))},al=function(e,t){return o(void 0,void 0,void 0,(function(){var r,n;return s(this,(function(i){return(r=null===(n=e[t])||void 0===n?void 0:n.cid)?[2,yc(r,null)]:[2,null]}))}))},cl=function(e,t,r,n){return void 0===n&&(n=!1),o(void 0,void 0,void 0,(function(){var i;return s(this,(function(o){switch(o.label){case 0:return[4,ul(e,t)];case 1:return i=o.sent(),[2,fl(i,t,r,n)]}}))}))},fl=function(e,t,r,n){if(void 0===n&&(n=!1),!function(e){return function(e){return void 0!==e}(e)&&V(e)}(e)){if(n)return e;throw new Error("Could not find header value: "+t)}if(r(e))return e;throw new Error("Improperly formatted header value: "+t)},ll=function(e){return Q(e)&&Qf(e.metadata)&&e.metadata.isFile&&X(e.key)&&nl(e.content)},hl=function(e){return Q(e)&&Qf(e.metadata)&&!1===e.metadata.isFile&&Z(e.revision)&&dl(e.links)&&yl(e.skeleton)},pl=function(e){return Zf(e)&&X(e.key)&&X(e.pointer)},dl=function(e){return Q(e)&&Object.values(e).every(pl)},yl=function(e){return Q(e)&&Object.values(e).every(vl)},vl=function(e){return Q(e)&&nl(e.cid)&&X(e.key)&&yl(e.subSkeleton)},gl={UINT32:p((function(e){!function(t){function r(e,t){return this instanceof r?(this._low=0,this._high=0,this.remainder=null,void 0===t?i.call(this,e):"string"==typeof e?o.call(this,e,t):void n.call(this,e,t)):new r(e,t)}function n(e,t){return this._low=0|e,this._high=0|t,this}function i(e){return this._low=65535&e,this._high=e>>>16,this}function o(e,t){var r=parseInt(e,t||10);return this._low=65535&r,this._high=r>>>16,this}r(Math.pow(36,5)),r(Math.pow(16,7)),r(Math.pow(10,9)),r(Math.pow(2,30)),r(36),r(16),r(10),r(2),r.prototype.fromBits=n,r.prototype.fromNumber=i,r.prototype.fromString=o,r.prototype.toNumber=function(){return 65536*this._high+this._low},r.prototype.toString=function(e){return this.toNumber().toString(e||10)},r.prototype.add=function(e){var t=this._low+e._low,r=t>>>16;return r+=this._high+e._high,this._low=65535&t,this._high=65535&r,this},r.prototype.subtract=function(e){return this.add(e.clone().negate())},r.prototype.multiply=function(e){var t,r,n=this._high,i=this._low,o=e._high,s=e._low;return t=(r=i*s)>>>16,t+=n*s,t&=65535,t+=i*o,this._low=65535&r,this._high=65535&t,this},r.prototype.div=function(e){if(0==e._low&&0==e._high)throw Error("division by zero");if(0==e._high&&1==e._low)return this.remainder=new r(0),this;if(e.gt(this))return this.remainder=this.clone(),this._low=0,this._high=0,this;if(this.eq(e))return this.remainder=new r(0),this._low=1,this._high=0,this;for(var t=e.clone(),n=-1;!this.lt(t);)t.shiftLeft(1,!0),n++;for(this.remainder=this.clone(),this._low=0,this._high=0;n>=0;n--)t.shiftRight(1),this.remainder.lt(t)||(this.remainder.subtract(t),n>=16?this._high|=1<<n-16:this._low|=1<<n);return this},r.prototype.negate=function(){var e=1+(65535&~this._low);return this._low=65535&e,this._high=~this._high+(e>>>16)&65535,this},r.prototype.equals=r.prototype.eq=function(e){return this._low==e._low&&this._high==e._high},r.prototype.greaterThan=r.prototype.gt=function(e){return this._high>e._high||!(this._high<e._high)&&this._low>e._low},r.prototype.lessThan=r.prototype.lt=function(e){return this._high<e._high||!(this._high>e._high)&&this._low<e._low},r.prototype.or=function(e){return this._low|=e._low,this._high|=e._high,this},r.prototype.and=function(e){return this._low&=e._low,this._high&=e._high,this},r.prototype.not=function(){return this._low=65535&~this._low,this._high=65535&~this._high,this},r.prototype.xor=function(e){return this._low^=e._low,this._high^=e._high,this},r.prototype.shiftRight=r.prototype.shiftr=function(e){return e>16?(this._low=this._high>>e-16,this._high=0):16==e?(this._low=this._high,this._high=0):(this._low=this._low>>e|this._high<<16-e&65535,this._high>>=e),this},r.prototype.shiftLeft=r.prototype.shiftl=function(e,t){return e>16?(this._high=this._low<<e-16,this._low=0,t||(this._high&=65535)):16==e?(this._high=this._low,this._low=0):(this._high=this._high<<e|this._low>>16-e,this._low=this._low<<e&65535,t||(this._high&=65535)),this},r.prototype.rotateLeft=r.prototype.rotl=function(e){var t=this._high<<16|this._low;return t=t<<e|t>>>32-e,this._low=65535&t,this._high=t>>>16,this},r.prototype.rotateRight=r.prototype.rotr=function(e){var t=this._high<<16|this._low;return t=t>>>e|t<<32-e,this._low=65535&t,this._high=t>>>16,this},r.prototype.clone=function(){return new r(this._low,this._high)},e.exports?e.exports=r:t.UINT32=r}(f)})),UINT64:p((function(e){!function(t){var r={16:i(Math.pow(16,5)),10:i(Math.pow(10,5)),2:i(Math.pow(2,5))},n={16:i(16),10:i(10),2:i(2)};function i(e,t,r,n){return this instanceof i?(this.remainder=null,"string"==typeof e?u.call(this,e,t):void 0===t?s.call(this,e):void o.apply(this,arguments)):new i(e,t,r,n)}function o(e,t,r,n){return void 0===r?(this._a00=65535&e,this._a16=e>>>16,this._a32=65535&t,this._a48=t>>>16,this):(this._a00=0|e,this._a16=0|t,this._a32=0|r,this._a48=0|n,this)}function s(e){return this._a00=65535&e,this._a16=e>>>16,this._a32=0,this._a48=0,this}function u(e,t){t=t||10,this._a00=0,this._a16=0,this._a32=0,this._a48=0;for(var n=r[t]||new i(Math.pow(t,5)),o=0,s=e.length;o<s;o+=5){var u=Math.min(5,s-o),a=parseInt(e.slice(o,o+u),t);this.multiply(u<5?new i(Math.pow(t,u)):n).add(new i(a))}return this}i.prototype.fromBits=o,i.prototype.fromNumber=s,i.prototype.fromString=u,i.prototype.toNumber=function(){return 65536*this._a16+this._a00},i.prototype.toString=function(e){var t=n[e=e||10]||new i(e);if(!this.gt(t))return this.toNumber().toString(e);for(var r=this.clone(),o=new Array(64),s=63;s>=0&&(r.div(t),o[s]=r.remainder.toNumber().toString(e),r.gt(t));s--);return o[s-1]=r.toNumber().toString(e),o.join("")},i.prototype.add=function(e){var t=this._a00+e._a00,r=t>>>16,n=(r+=this._a16+e._a16)>>>16,i=(n+=this._a32+e._a32)>>>16;return i+=this._a48+e._a48,this._a00=65535&t,this._a16=65535&r,this._a32=65535&n,this._a48=65535&i,this},i.prototype.subtract=function(e){return this.add(e.clone().negate())},i.prototype.multiply=function(e){var t=this._a00,r=this._a16,n=this._a32,i=this._a48,o=e._a00,s=e._a16,u=e._a32,a=t*o,c=a>>>16,f=(c+=t*s)>>>16;c&=65535,f+=(c+=r*o)>>>16;var l=(f+=t*u)>>>16;return f&=65535,l+=(f+=r*s)>>>16,f&=65535,l+=(f+=n*o)>>>16,l+=t*e._a48,l&=65535,l+=r*u,l&=65535,l+=n*s,l&=65535,l+=i*o,this._a00=65535&a,this._a16=65535&c,this._a32=65535&f,this._a48=65535&l,this},i.prototype.div=function(e){if(0==e._a16&&0==e._a32&&0==e._a48){if(0==e._a00)throw Error("division by zero");if(1==e._a00)return this.remainder=new i(0),this}if(e.gt(this))return this.remainder=this.clone(),this._a00=0,this._a16=0,this._a32=0,this._a48=0,this;if(this.eq(e))return this.remainder=new i(0),this._a00=1,this._a16=0,this._a32=0,this._a48=0,this;for(var t=e.clone(),r=-1;!this.lt(t);)t.shiftLeft(1,!0),r++;for(this.remainder=this.clone(),this._a00=0,this._a16=0,this._a32=0,this._a48=0;r>=0;r--)t.shiftRight(1),this.remainder.lt(t)||(this.remainder.subtract(t),r>=48?this._a48|=1<<r-48:r>=32?this._a32|=1<<r-32:r>=16?this._a16|=1<<r-16:this._a00|=1<<r);return this},i.prototype.negate=function(){var e=1+(65535&~this._a00);return this._a00=65535&e,e=(65535&~this._a16)+(e>>>16),this._a16=65535&e,e=(65535&~this._a32)+(e>>>16),this._a32=65535&e,this._a48=~this._a48+(e>>>16)&65535,this},i.prototype.equals=i.prototype.eq=function(e){return this._a48==e._a48&&this._a00==e._a00&&this._a32==e._a32&&this._a16==e._a16},i.prototype.greaterThan=i.prototype.gt=function(e){return this._a48>e._a48||!(this._a48<e._a48)&&(this._a32>e._a32||!(this._a32<e._a32)&&(this._a16>e._a16||!(this._a16<e._a16)&&this._a00>e._a00))},i.prototype.lessThan=i.prototype.lt=function(e){return this._a48<e._a48||!(this._a48>e._a48)&&(this._a32<e._a32||!(this._a32>e._a32)&&(this._a16<e._a16||!(this._a16>e._a16)&&this._a00<e._a00))},i.prototype.or=function(e){return this._a00|=e._a00,this._a16|=e._a16,this._a32|=e._a32,this._a48|=e._a48,this},i.prototype.and=function(e){return this._a00&=e._a00,this._a16&=e._a16,this._a32&=e._a32,this._a48&=e._a48,this},i.prototype.xor=function(e){return this._a00^=e._a00,this._a16^=e._a16,this._a32^=e._a32,this._a48^=e._a48,this},i.prototype.not=function(){return this._a00=65535&~this._a00,this._a16=65535&~this._a16,this._a32=65535&~this._a32,this._a48=65535&~this._a48,this},i.prototype.shiftRight=i.prototype.shiftr=function(e){return(e%=64)>=48?(this._a00=this._a48>>e-48,this._a16=0,this._a32=0,this._a48=0):e>=32?(e-=32,this._a00=65535&(this._a32>>e|this._a48<<16-e),this._a16=this._a48>>e&65535,this._a32=0,this._a48=0):e>=16?(e-=16,this._a00=65535&(this._a16>>e|this._a32<<16-e),this._a16=65535&(this._a32>>e|this._a48<<16-e),this._a32=this._a48>>e&65535,this._a48=0):(this._a00=65535&(this._a00>>e|this._a16<<16-e),this._a16=65535&(this._a16>>e|this._a32<<16-e),this._a32=65535&(this._a32>>e|this._a48<<16-e),this._a48=this._a48>>e&65535),this},i.prototype.shiftLeft=i.prototype.shiftl=function(e,t){return(e%=64)>=48?(this._a48=this._a00<<e-48,this._a32=0,this._a16=0,this._a00=0):e>=32?(e-=32,this._a48=this._a16<<e|this._a00>>16-e,this._a32=this._a00<<e&65535,this._a16=0,this._a00=0):e>=16?(e-=16,this._a48=this._a32<<e|this._a16>>16-e,this._a32=65535&(this._a16<<e|this._a00>>16-e),this._a16=this._a00<<e&65535,this._a00=0):(this._a48=this._a48<<e|this._a32>>16-e,this._a32=65535&(this._a32<<e|this._a16>>16-e),this._a16=65535&(this._a16<<e|this._a00>>16-e),this._a00=this._a00<<e&65535),t||(this._a48&=65535),this},i.prototype.rotateLeft=i.prototype.rotl=function(e){if(0==(e%=64))return this;if(e>=32){var t=this._a00;if(this._a00=this._a32,this._a32=t,t=this._a48,this._a48=this._a16,this._a16=t,32==e)return this;e-=32}var r=this._a48<<16|this._a32,n=this._a16<<16|this._a00,i=r<<e|n>>>32-e,o=n<<e|r>>>32-e;return this._a00=65535&o,this._a16=o>>>16,this._a32=65535&i,this._a48=i>>>16,this},i.prototype.rotateRight=i.prototype.rotr=function(e){if(0==(e%=64))return this;if(e>=32){var t=this._a00;if(this._a00=this._a32,this._a32=t,t=this._a48,this._a48=this._a16,this._a16=t,32==e)return this;e-=32}var r=this._a48<<16|this._a32,n=this._a16<<16|this._a00,i=r>>>e|n<<32-e,o=n>>>e|r<<32-e;return this._a00=65535&o,this._a16=o>>>16,this._a32=65535&i,this._a48=i>>>16,this},i.prototype.clone=function(){return new i(this._a00,this._a16,this._a32,this._a48)},e.exports?e.exports=i:t.UINT64=i}(f)}))},ml=gl.UINT32;ml.prototype.xxh_update=function(e,t){var r,n,i=_l._low,o=_l._high;r=(n=e*i)>>>16,r+=t*i,r&=65535,r+=e*o;var s=this._low+(65535&n),u=s>>>16,a=(u+=this._high+(65535&r))<<16|65535&s;u=(a=a<<13|a>>>19)>>>16,r=(n=(s=65535&a)*(i=bl._low))>>>16,r+=u*i,r&=65535,r+=s*(o=bl._high),this._low=65535&n,this._high=65535&r};var bl=ml("2654435761"),_l=ml("2246822519"),wl=ml("3266489917"),kl=ml("668265263"),El=ml("374761393");function Al(){return 2==arguments.length?new Al(arguments[1]).update(arguments[0]).digest():this instanceof Al?void Sl.call(this,arguments[0]):new Al(arguments[0])}function Sl(e){return this.seed=e instanceof ml?e.clone():ml(e),this.v1=this.seed.clone().add(bl).add(_l),this.v2=this.seed.clone().add(_l),this.v3=this.seed.clone(),this.v4=this.seed.clone().subtract(bl),this.total_len=0,this.memsize=0,this.memory=null,this}Al.prototype.init=Sl,Al.prototype.update=function(e){var t,r="string"==typeof e;r&&(e=function(e){for(var t=[],r=0,n=e.length;r<n;r++){var i=e.charCodeAt(r);i<128?t.push(i):i<2048?t.push(192|i>>6,128|63&i):i<55296||i>=57344?t.push(224|i>>12,128|i>>6&63,128|63&i):(r++,i=65536+((1023&i)<<10|1023&e.charCodeAt(r)),t.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|63&i))}return new Uint8Array(t)}(e),r=!1,t=!0),"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer&&(t=!0,e=new Uint8Array(e));var n=0,i=e.length,o=n+i;if(0==i)return this;if(this.total_len+=i,0==this.memsize&&(this.memory=r?"":t?new Uint8Array(16):new W.Buffer(16)),this.memsize+i<16)return r?this.memory+=e:t?this.memory.set(e.subarray(0,i),this.memsize):e.copy(this.memory,this.memsize,0,i),this.memsize+=i,this;if(this.memsize>0){r?this.memory+=e.slice(0,16-this.memsize):t?this.memory.set(e.subarray(0,16-this.memsize),this.memsize):e.copy(this.memory,this.memsize,0,16-this.memsize);var s=0;r?(this.v1.xxh_update(this.memory.charCodeAt(s+1)<<8|this.memory.charCodeAt(s),this.memory.charCodeAt(s+3)<<8|this.memory.charCodeAt(s+2)),s+=4,this.v2.xxh_update(this.memory.charCodeAt(s+1)<<8|this.memory.charCodeAt(s),this.memory.charCodeAt(s+3)<<8|this.memory.charCodeAt(s+2)),s+=4,this.v3.xxh_update(this.memory.charCodeAt(s+1)<<8|this.memory.charCodeAt(s),this.memory.charCodeAt(s+3)<<8|this.memory.charCodeAt(s+2)),s+=4,this.v4.xxh_update(this.memory.charCodeAt(s+1)<<8|this.memory.charCodeAt(s),this.memory.charCodeAt(s+3)<<8|this.memory.charCodeAt(s+2))):(this.v1.xxh_update(this.memory[s+1]<<8|this.memory[s],this.memory[s+3]<<8|this.memory[s+2]),s+=4,this.v2.xxh_update(this.memory[s+1]<<8|this.memory[s],this.memory[s+3]<<8|this.memory[s+2]),s+=4,this.v3.xxh_update(this.memory[s+1]<<8|this.memory[s],this.memory[s+3]<<8|this.memory[s+2]),s+=4,this.v4.xxh_update(this.memory[s+1]<<8|this.memory[s],this.memory[s+3]<<8|this.memory[s+2])),n+=16-this.memsize,this.memsize=0,r&&(this.memory="")}if(n<=o-16){var u=o-16;do{r?(this.v1.xxh_update(e.charCodeAt(n+1)<<8|e.charCodeAt(n),e.charCodeAt(n+3)<<8|e.charCodeAt(n+2)),n+=4,this.v2.xxh_update(e.charCodeAt(n+1)<<8|e.charCodeAt(n),e.charCodeAt(n+3)<<8|e.charCodeAt(n+2)),n+=4,this.v3.xxh_update(e.charCodeAt(n+1)<<8|e.charCodeAt(n),e.charCodeAt(n+3)<<8|e.charCodeAt(n+2)),n+=4,this.v4.xxh_update(e.charCodeAt(n+1)<<8|e.charCodeAt(n),e.charCodeAt(n+3)<<8|e.charCodeAt(n+2))):(this.v1.xxh_update(e[n+1]<<8|e[n],e[n+3]<<8|e[n+2]),n+=4,this.v2.xxh_update(e[n+1]<<8|e[n],e[n+3]<<8|e[n+2]),n+=4,this.v3.xxh_update(e[n+1]<<8|e[n],e[n+3]<<8|e[n+2]),n+=4,this.v4.xxh_update(e[n+1]<<8|e[n],e[n+3]<<8|e[n+2])),n+=4}while(n<=u)}return n<o&&(r?this.memory+=e.slice(n):t?this.memory.set(e.subarray(n,o),this.memsize):e.copy(this.memory,this.memsize,n,o),this.memsize=o-n),this},Al.prototype.digest=function(){var e,t,r=this.memory,n="string"==typeof r,i=0,o=this.memsize,s=new ml;for((e=this.total_len>=16?this.v1.rotl(1).add(this.v2.rotl(7).add(this.v3.rotl(12).add(this.v4.rotl(18)))):this.seed.clone().add(El)).add(s.fromNumber(this.total_len));i<=o-4;)n?s.fromBits(r.charCodeAt(i+1)<<8|r.charCodeAt(i),r.charCodeAt(i+3)<<8|r.charCodeAt(i+2)):s.fromBits(r[i+1]<<8|r[i],r[i+3]<<8|r[i+2]),e.add(s.multiply(wl)).rotl(17).multiply(kl),i+=4;for(;i<o;)s.fromBits(n?r.charCodeAt(i++):r[i++],0),e.add(s.multiply(El)).rotl(11).multiply(bl);return t=e.clone().shiftRight(15),e.xor(t).multiply(_l),t=e.clone().shiftRight(13),e.xor(t).multiply(wl),t=e.clone().shiftRight(16),e.xor(t),this.init(this.seed),e};var xl=Al,Il=gl.UINT64,Tl=Il("11400714785074694791"),Ol=Il("14029467366897019727"),Bl=Il("1609587929392839161"),Nl=Il("9650029242287828579"),Cl=Il("2870177450012600261");function Rl(){return 2==arguments.length?new Rl(arguments[1]).update(arguments[0]).digest():this instanceof Rl?void Ul.call(this,arguments[0]):new Rl(arguments[0])}function Ul(e){return this.seed=e instanceof Il?e.clone():Il(e),this.v1=this.seed.clone().add(Tl).add(Ol),this.v2=this.seed.clone().add(Ol),this.v3=this.seed.clone(),this.v4=this.seed.clone().subtract(Tl),this.total_len=0,this.memsize=0,this.memory=null,this}Rl.prototype.init=Ul,Rl.prototype.update=function(e){var t,r="string"==typeof e;r&&(e=function(e){for(var t=[],r=0,n=e.length;r<n;r++){var i=e.charCodeAt(r);i<128?t.push(i):i<2048?t.push(192|i>>6,128|63&i):i<55296||i>=57344?t.push(224|i>>12,128|i>>6&63,128|63&i):(r++,i=65536+((1023&i)<<10|1023&e.charCodeAt(r)),t.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|63&i))}return new Uint8Array(t)}(e),r=!1,t=!0),"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer&&(t=!0,e=new Uint8Array(e));var n=0,i=e.length,o=n+i;if(0==i)return this;if(this.total_len+=i,0==this.memsize&&(this.memory=r?"":t?new Uint8Array(32):new W.Buffer(32)),this.memsize+i<32)return r?this.memory+=e:t?this.memory.set(e.subarray(0,i),this.memsize):e.copy(this.memory,this.memsize,0,i),this.memsize+=i,this;if(this.memsize>0){r?this.memory+=e.slice(0,32-this.memsize):t?this.memory.set(e.subarray(0,32-this.memsize),this.memsize):e.copy(this.memory,this.memsize,0,32-this.memsize);var s=0;if(r)a=Il(this.memory.charCodeAt(s+1)<<8|this.memory.charCodeAt(s),this.memory.charCodeAt(s+3)<<8|this.memory.charCodeAt(s+2),this.memory.charCodeAt(s+5)<<8|this.memory.charCodeAt(s+4),this.memory.charCodeAt(s+7)<<8|this.memory.charCodeAt(s+6)),this.v1.add(a.multiply(Ol)).rotl(31).multiply(Tl),s+=8,a=Il(this.memory.charCodeAt(s+1)<<8|this.memory.charCodeAt(s),this.memory.charCodeAt(s+3)<<8|this.memory.charCodeAt(s+2),this.memory.charCodeAt(s+5)<<8|this.memory.charCodeAt(s+4),this.memory.charCodeAt(s+7)<<8|this.memory.charCodeAt(s+6)),this.v2.add(a.multiply(Ol)).rotl(31).multiply(Tl),s+=8,a=Il(this.memory.charCodeAt(s+1)<<8|this.memory.charCodeAt(s),this.memory.charCodeAt(s+3)<<8|this.memory.charCodeAt(s+2),this.memory.charCodeAt(s+5)<<8|this.memory.charCodeAt(s+4),this.memory.charCodeAt(s+7)<<8|this.memory.charCodeAt(s+6)),this.v3.add(a.multiply(Ol)).rotl(31).multiply(Tl),s+=8,a=Il(this.memory.charCodeAt(s+1)<<8|this.memory.charCodeAt(s),this.memory.charCodeAt(s+3)<<8|this.memory.charCodeAt(s+2),this.memory.charCodeAt(s+5)<<8|this.memory.charCodeAt(s+4),this.memory.charCodeAt(s+7)<<8|this.memory.charCodeAt(s+6)),this.v4.add(a.multiply(Ol)).rotl(31).multiply(Tl);else a=Il(this.memory[s+1]<<8|this.memory[s],this.memory[s+3]<<8|this.memory[s+2],this.memory[s+5]<<8|this.memory[s+4],this.memory[s+7]<<8|this.memory[s+6]),this.v1.add(a.multiply(Ol)).rotl(31).multiply(Tl),s+=8,a=Il(this.memory[s+1]<<8|this.memory[s],this.memory[s+3]<<8|this.memory[s+2],this.memory[s+5]<<8|this.memory[s+4],this.memory[s+7]<<8|this.memory[s+6]),this.v2.add(a.multiply(Ol)).rotl(31).multiply(Tl),s+=8,a=Il(this.memory[s+1]<<8|this.memory[s],this.memory[s+3]<<8|this.memory[s+2],this.memory[s+5]<<8|this.memory[s+4],this.memory[s+7]<<8|this.memory[s+6]),this.v3.add(a.multiply(Ol)).rotl(31).multiply(Tl),s+=8,a=Il(this.memory[s+1]<<8|this.memory[s],this.memory[s+3]<<8|this.memory[s+2],this.memory[s+5]<<8|this.memory[s+4],this.memory[s+7]<<8|this.memory[s+6]),this.v4.add(a.multiply(Ol)).rotl(31).multiply(Tl);n+=32-this.memsize,this.memsize=0,r&&(this.memory="")}if(n<=o-32){var u=o-32;do{var a;if(r)a=Il(e.charCodeAt(n+1)<<8|e.charCodeAt(n),e.charCodeAt(n+3)<<8|e.charCodeAt(n+2),e.charCodeAt(n+5)<<8|e.charCodeAt(n+4),e.charCodeAt(n+7)<<8|e.charCodeAt(n+6)),this.v1.add(a.multiply(Ol)).rotl(31).multiply(Tl),n+=8,a=Il(e.charCodeAt(n+1)<<8|e.charCodeAt(n),e.charCodeAt(n+3)<<8|e.charCodeAt(n+2),e.charCodeAt(n+5)<<8|e.charCodeAt(n+4),e.charCodeAt(n+7)<<8|e.charCodeAt(n+6)),this.v2.add(a.multiply(Ol)).rotl(31).multiply(Tl),n+=8,a=Il(e.charCodeAt(n+1)<<8|e.charCodeAt(n),e.charCodeAt(n+3)<<8|e.charCodeAt(n+2),e.charCodeAt(n+5)<<8|e.charCodeAt(n+4),e.charCodeAt(n+7)<<8|e.charCodeAt(n+6)),this.v3.add(a.multiply(Ol)).rotl(31).multiply(Tl),n+=8,a=Il(e.charCodeAt(n+1)<<8|e.charCodeAt(n),e.charCodeAt(n+3)<<8|e.charCodeAt(n+2),e.charCodeAt(n+5)<<8|e.charCodeAt(n+4),e.charCodeAt(n+7)<<8|e.charCodeAt(n+6)),this.v4.add(a.multiply(Ol)).rotl(31).multiply(Tl);else a=Il(e[n+1]<<8|e[n],e[n+3]<<8|e[n+2],e[n+5]<<8|e[n+4],e[n+7]<<8|e[n+6]),this.v1.add(a.multiply(Ol)).rotl(31).multiply(Tl),a=Il(e[(n+=8)+1]<<8|e[n],e[n+3]<<8|e[n+2],e[n+5]<<8|e[n+4],e[n+7]<<8|e[n+6]),this.v2.add(a.multiply(Ol)).rotl(31).multiply(Tl),a=Il(e[(n+=8)+1]<<8|e[n],e[n+3]<<8|e[n+2],e[n+5]<<8|e[n+4],e[n+7]<<8|e[n+6]),this.v3.add(a.multiply(Ol)).rotl(31).multiply(Tl),a=Il(e[(n+=8)+1]<<8|e[n],e[n+3]<<8|e[n+2],e[n+5]<<8|e[n+4],e[n+7]<<8|e[n+6]),this.v4.add(a.multiply(Ol)).rotl(31).multiply(Tl);n+=8}while(n<=u)}return n<o&&(r?this.memory+=e.slice(n):t?this.memory.set(e.subarray(n,o),this.memsize):e.copy(this.memory,this.memsize,n,o),this.memsize=o-n),this},Rl.prototype.digest=function(){var e,t,r=this.memory,n="string"==typeof r,i=0,o=this.memsize,s=new Il;for(this.total_len>=32?((e=this.v1.clone().rotl(1)).add(this.v2.clone().rotl(7)),e.add(this.v3.clone().rotl(12)),e.add(this.v4.clone().rotl(18)),e.xor(this.v1.multiply(Ol).rotl(31).multiply(Tl)),e.multiply(Tl).add(Nl),e.xor(this.v2.multiply(Ol).rotl(31).multiply(Tl)),e.multiply(Tl).add(Nl),e.xor(this.v3.multiply(Ol).rotl(31).multiply(Tl)),e.multiply(Tl).add(Nl),e.xor(this.v4.multiply(Ol).rotl(31).multiply(Tl)),e.multiply(Tl).add(Nl)):e=this.seed.clone().add(Cl),e.add(s.fromNumber(this.total_len));i<=o-8;)n?s.fromBits(r.charCodeAt(i+1)<<8|r.charCodeAt(i),r.charCodeAt(i+3)<<8|r.charCodeAt(i+2),r.charCodeAt(i+5)<<8|r.charCodeAt(i+4),r.charCodeAt(i+7)<<8|r.charCodeAt(i+6)):s.fromBits(r[i+1]<<8|r[i],r[i+3]<<8|r[i+2],r[i+5]<<8|r[i+4],r[i+7]<<8|r[i+6]),s.multiply(Ol).rotl(31).multiply(Tl),e.xor(s).rotl(27).multiply(Tl).add(Nl),i+=8;for(i+4<=o&&(n?s.fromBits(r.charCodeAt(i+1)<<8|r.charCodeAt(i),r.charCodeAt(i+3)<<8|r.charCodeAt(i+2),0,0):s.fromBits(r[i+1]<<8|r[i],r[i+3]<<8|r[i+2],0,0),e.xor(s.multiply(Tl)).rotl(23).multiply(Ol).add(Bl),i+=4);i<o;)s.fromBits(n?r.charCodeAt(i++):r[i++],0,0,0),e.xor(s.multiply(Cl)).rotl(11).multiply(Tl);return t=e.clone().shiftRight(33),e.xor(t).multiply(Ol),t=e.clone().shiftRight(29),e.xor(t).multiply(Bl),t=e.clone().shiftRight(32),e.xor(t),this.init(this.seed),e};var jl={h32:xl,h64:Rl},Ll=f&&f.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Dl=(f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}})(jl);var Pl=function(e,t){for(var r=new Array(e),n="function"==typeof t?t:function(){return t},i=0;i<e;i++)r[i]=n();return r};function Ml(e,t,r){void 0===t&&(t=!1),void 0===r&&(r=78187493520);var n=Dl.default.h64(e,r+1),i=Dl.default.h64(e,r+2);if(t)return{first:n.toNumber(),second:i.toNumber()};var o=n.toString(16);o.length<16&&(o="0".repeat(16-o.length)+o);var s=i.toString(16);return s.length<16&&(s="0".repeat(16-s.length)+s),{first:Number(o),second:Number(s)}}var zl=Ml;var Fl=function(e,t){void 0===t&&(t=78187493520);var r=Dl.default.h64(e,t+1),n=Dl.default.h64(e,t+2),i=r.toString(16);i.length<16&&(i="0".repeat(16-i.length)+i);var o=n.toString(16);return o.length<16&&(o="0".repeat(16-o.length)+o),{first:i,second:o}};var Kl=function(e,t){void 0===t&&(t=78187493520);var r=Dl.default.h64(e,t+1),n=Dl.default.h64(e,t+2),i=r.toString(16);i.length<16&&(i="0".repeat(16-i.length)+i);var o=n.toString(16);return o.length<16&&(o="0".repeat(16-o.length)+o),{int:{first:r.toNumber(),second:n.toNumber()},string:{first:i,second:o}}};function Hl(e,t,r,n){return Math.abs((t+e*r)%n)}var Gl=Hl;var $l=function(e,t,r,n){return void 0===n&&(n=78187493520),function e(t,r,i,o,s){if(void 0===s&&(s=[]),s.length===o)return s;var u=Ml(r,!0,n+i%t),a=Hl(t,u.first,u.second,i);return s.includes(a)||s.push(a),e(t+1,r,i,o,s)}(1,e,t,r)};var ql=function(e,t,r,n){void 0===n&&(n=78187493520);for(var i=[],o=1;o<=r;o++){var s=Ml(e,!0,n+t%o);i.push(Hl(o,s.first,s.second,t))}if(i.length!==r)throw new Error("report this, please, shouldnt be of different size");return i};var Wl=function(e,t,r){void 0===r&&(r=Math.random),e=Math.ceil(e),t=Math.floor(t);var n=r();return Math.floor(n*(t-e+1))+e};var Vl=function(e,t){for(var r=Math.max(e.length,t.length),n=W.Buffer.allocUnsafe(r).fill(0),i=0;i<r;++i)i<e.length&&i<t.length?n[r-i-1]=e[e.length-i-1]^t[t.length-i-1]:i<e.length&&i>=t.length?n[r-i-1]^=e[e.length-i-1]:i<t.length&&i>=e.length&&(n[r-i-1]^=t[t.length-i-1]);for(var o=0,s=n.values(),u=s.next();!u.done&&0===u.value;)o++,u=s.next();return n.slice(o)};var Yl=function(e){var t,r;if(null===e||!e)return!0;try{for(var n=Ll(e),i=n.next();!i.done;i=n.next()){if(0!==i.value)return!1}}catch(e){t={error:e}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(t)throw t.error}}return!0};var Jl=function(e,t,r){switch(void 0===t&&(t=78187493520),r){case 32:return Dl.default.h32(e,t).toNumber();case 64:default:return Dl.default.h64(e,t).toNumber()}};var Zl=function(e,t,r,n){var i;switch(void 0===t&&(t=78187493520),void 0===r&&(r=16),void 0===n&&(n=64),n){case 32:i=Dl.default.h32(e,t);break;case 64:default:i=Dl.default.h64(e,t)}var o="";return 16===r?(o=i.toString(r)).length<n/4&&(o="0".repeat(n/4-o.length)+o):2===r&&(o=rh(i.toString(16))).length<n&&(o="0".repeat(n-o.length)+o),o};var Xl=function(e,t,r,n){var i;switch(void 0===t&&(t=78187493520),void 0===r&&(r=16),void 0===n&&(n=64),n){case 32:i=Dl.default.h32(e,t);break;case 64:default:i=Dl.default.h64(e,t)}var o="";return 16===r?(o=i.toString(r)).length<n/4&&(o="0".repeat(n/4-o.length)+o):2===r&&(o=rh(i.toString(16))).length<n&&(o="0".repeat(n-o.length)+o),{int:i.toNumber(),string:o}};function Ql(){return 78187493520}var eh=Ql;var th=function(e){return Math.ceil(Math.pow(2,Math.floor(Math.log(e)/Math.log(2))))};function rh(e){return parseInt(e,16).toString(2)}var nh=rh;var ih=function(e){return[128,64,32,16,8,4,2,1].map((function(t){return(t&e)>0?1:0}))};var oh=function(e){return e.reduce((function(e,t,r){if(0===t)return e;if(1===t)return e+Math.pow(2,7-r);throw new Error("Not binary")}),0)},sh=Object.defineProperty({allocateArray:Pl,hashTwice:zl,hashTwiceAsString:Fl,allInOneHashTwice:Kl,doubleHashing:Gl,getDistinctIndices:$l,getIndices:ql,randomInt:Wl,xorBuffer:Vl,isEmptyBuffer:Yl,hashAsInt:Jl,hashAsString:Zl,hashIntAndString:Xl,getDefaultSeed:eh,power2:th,hex2bin:nh,uint8ToBits:ih,bitsToUint8:oh},"__esModule",{value:!0}),uh=p((function(e){!function(e,t,r){function n(e){var t,r=this,n=(t=4022871197,function(e){e=String(e);for(var r=0;r<e.length;r++){var n=.02519603282416938*(t+=e.charCodeAt(r));n-=t=n>>>0,t=(n*=t)>>>0,t+=4294967296*(n-=t)}return 2.3283064365386963e-10*(t>>>0)});r.next=function(){var e=2091639*r.s0+2.3283064365386963e-10*r.c;return r.s0=r.s1,r.s1=r.s2,r.s2=e-(r.c=0|e)},r.c=1,r.s0=n(" "),r.s1=n(" "),r.s2=n(" "),r.s0-=n(e),r.s0<0&&(r.s0+=1),r.s1-=n(e),r.s1<0&&(r.s1+=1),r.s2-=n(e),r.s2<0&&(r.s2+=1),n=null}function i(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function o(e,t){var r=new n(e),o=t&&t.state,s=r.next;return s.int32=function(){return 4294967296*r.next()|0},s.double=function(){return s()+11102230246251565e-32*(2097152*s()|0)},s.quick=s,o&&("object"==typeof o&&i(o,r),s.state=function(){return i(r,{})}),s}t&&t.exports?t.exports=o:r&&r.amd?r((function(){return o})):this.alea=o}(0,e,!1)})),ah=p((function(e){!function(e,t,r){function n(e){var t=this,r="";t.x=0,t.y=0,t.z=0,t.w=0,t.next=function(){var e=t.x^t.x<<11;return t.x=t.y,t.y=t.z,t.z=t.w,t.w^=t.w>>>19^e^e>>>8},e===(0|e)?t.x=e:r+=e;for(var n=0;n<r.length+64;n++)t.x^=0|r.charCodeAt(n),t.next()}function i(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t}function o(e,t){var r=new n(e),o=t&&t.state,s=function(){return(r.next()>>>0)/4294967296};return s.double=function(){do{var e=((r.next()>>>11)+(r.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},s.int32=r.next,s.quick=s,o&&("object"==typeof o&&i(o,r),s.state=function(){return i(r,{})}),s}t&&t.exports?t.exports=o:r&&r.amd?r((function(){return o})):this.xor128=o}(0,e,!1)})),ch=p((function(e){!function(e,t,r){function n(e){var t=this,r="";t.next=function(){var e=t.x^t.x>>>2;return t.x=t.y,t.y=t.z,t.z=t.w,t.w=t.v,(t.d=t.d+362437|0)+(t.v=t.v^t.v<<4^e^e<<1)|0},t.x=0,t.y=0,t.z=0,t.w=0,t.v=0,e===(0|e)?t.x=e:r+=e;for(var n=0;n<r.length+64;n++)t.x^=0|r.charCodeAt(n),n==r.length&&(t.d=t.x<<10^t.x>>>4),t.next()}function i(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t.v=e.v,t.d=e.d,t}function o(e,t){var r=new n(e),o=t&&t.state,s=function(){return(r.next()>>>0)/4294967296};return s.double=function(){do{var e=((r.next()>>>11)+(r.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},s.int32=r.next,s.quick=s,o&&("object"==typeof o&&i(o,r),s.state=function(){return i(r,{})}),s}t&&t.exports?t.exports=o:r&&r.amd?r((function(){return o})):this.xorwow=o}(0,e,!1)})),fh=p((function(e){!function(e,t,r){function n(e){var t=this;t.next=function(){var e,r,n=t.x,i=t.i;return e=n[i],r=(e^=e>>>7)^e<<24,r^=(e=n[i+1&7])^e>>>10,r^=(e=n[i+3&7])^e>>>3,r^=(e=n[i+4&7])^e<<7,e=n[i+7&7],r^=(e^=e<<13)^e<<9,n[i]=r,t.i=i+1&7,r},function(e,t){var r,n=[];if(t===(0|t))n[0]=t;else for(t=""+t,r=0;r<t.length;++r)n[7&r]=n[7&r]<<15^t.charCodeAt(r)+n[r+1&7]<<13;for(;n.length<8;)n.push(0);for(r=0;r<8&&0===n[r];++r);for(8==r&&(n[7]=-1),e.x=n,e.i=0,r=256;r>0;--r)e.next()}(t,e)}function i(e,t){return t.x=e.x.slice(),t.i=e.i,t}function o(e,t){null==e&&(e=+new Date);var r=new n(e),o=t&&t.state,s=function(){return(r.next()>>>0)/4294967296};return s.double=function(){do{var e=((r.next()>>>11)+(r.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},s.int32=r.next,s.quick=s,o&&(o.x&&i(o,r),s.state=function(){return i(r,{})}),s}t&&t.exports?t.exports=o:r&&r.amd?r((function(){return o})):this.xorshift7=o}(0,e,!1)})),lh=p((function(e){!function(e,t,r){function n(e){var t=this;t.next=function(){var e,r,n=t.w,i=t.X,o=t.i;return t.w=n=n+1640531527|0,r=i[o+34&127],e=i[o=o+1&127],r^=r<<13,e^=e<<17,r^=r>>>15,e^=e>>>12,r=i[o]=r^e,t.i=o,r+(n^n>>>16)|0},function(e,t){var r,n,i,o,s,u=[],a=128;for(t===(0|t)?(n=t,t=null):(t+="\0",n=0,a=Math.max(a,t.length)),i=0,o=-32;o<a;++o)t&&(n^=t.charCodeAt((o+32)%t.length)),0===o&&(s=n),n^=n<<10,n^=n>>>15,n^=n<<4,n^=n>>>13,o>=0&&(s=s+1640531527|0,i=0==(r=u[127&o]^=n+s)?i+1:0);for(i>=128&&(u[127&(t&&t.length||0)]=-1),i=127,o=512;o>0;--o)n=u[i+34&127],r=u[i=i+1&127],n^=n<<13,r^=r<<17,n^=n>>>15,r^=r>>>12,u[i]=n^r;e.w=s,e.X=u,e.i=i}(t,e)}function i(e,t){return t.i=e.i,t.w=e.w,t.X=e.X.slice(),t}function o(e,t){null==e&&(e=+new Date);var r=new n(e),o=t&&t.state,s=function(){return(r.next()>>>0)/4294967296};return s.double=function(){do{var e=((r.next()>>>11)+(r.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},s.int32=r.next,s.quick=s,o&&(o.X&&i(o,r),s.state=function(){return i(r,{})}),s}t&&t.exports?t.exports=o:r&&r.amd?r((function(){return o})):this.xor4096=o}(0,e,!1)})),hh=p((function(e){!function(e,t,r){function n(e){var t=this,r="";t.next=function(){var e=t.b,r=t.c,n=t.d,i=t.a;return e=e<<25^e>>>7^r,r=r-n|0,n=n<<24^n>>>8^i,i=i-e|0,t.b=e=e<<20^e>>>12^r,t.c=r=r-n|0,t.d=n<<16^r>>>16^i,t.a=i-e|0},t.a=0,t.b=0,t.c=-1640531527,t.d=1367130551,e===Math.floor(e)?(t.a=e/4294967296|0,t.b=0|e):r+=e;for(var n=0;n<r.length+20;n++)t.b^=0|r.charCodeAt(n),t.next()}function i(e,t){return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t}function o(e,t){var r=new n(e),o=t&&t.state,s=function(){return(r.next()>>>0)/4294967296};return s.double=function(){do{var e=((r.next()>>>11)+(r.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},s.int32=r.next,s.quick=s,o&&("object"==typeof o&&i(o,r),s.state=function(){return i(r,{})}),s}t&&t.exports?t.exports=o:r&&r.amd?r((function(){return o})):this.tychei=o}(0,e,!1)})),ph=h(Object.freeze({__proto__:null,default:{}})),dh=p((function(e){!function(t,r,n){var i,o=256,s=n.pow(o,6),u=n.pow(2,52),a=2*u,c=255;function f(e,c,f){var v=[],g=d(p((c=1==c?{entropy:!0}:c||{}).entropy?[e,y(r)]:null==e?function(){try{var e;return i&&(e=i.randomBytes)?e=e(o):(e=new Uint8Array(o),(t.crypto||t.msCrypto).getRandomValues(e)),y(e)}catch(e){var n=t.navigator,s=n&&n.plugins;return[+new Date,t,s,t.screen,y(r)]}}():e,3),v),m=new l(v),b=function(){for(var e=m.g(6),t=s,r=0;e<u;)e=(e+r)*o,t*=o,r=m.g(1);for(;e>=a;)e/=2,t/=2,r>>>=1;return(e+r)/t};return b.int32=function(){return 0|m.g(4)},b.quick=function(){return m.g(4)/4294967296},b.double=b,d(y(m.S),r),(c.pass||f||function(e,t,r,i){return i&&(i.S&&h(i,m),e.state=function(){return h(m,{})}),r?(n.random=e,t):e})(b,g,"global"in c?c.global:this==n,c.state)}function l(e){var t,r=e.length,n=this,i=0,s=n.i=n.j=0,u=n.S=[];for(r||(e=[r++]);i<o;)u[i]=i++;for(i=0;i<o;i++)u[i]=u[s=c&s+e[i%r]+(t=u[i])],u[s]=t;(n.g=function(e){for(var t,r=0,i=n.i,s=n.j,u=n.S;e--;)t=u[i=c&i+1],r=r*o+u[c&(u[i]=u[s=c&s+t])+(u[s]=t)];return n.i=i,n.j=s,r})(o)}function h(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function p(e,t){var r,n=[],i=typeof e;if(t&&"object"==i)for(r in e)try{n.push(p(e[r],t-1))}catch(e){}return n.length?n:"string"==i?e:e+"\0"}function d(e,t){for(var r,n=e+"",i=0;i<n.length;)t[c&i]=c&(r^=19*t[c&i])+n.charCodeAt(i++);return y(t)}function y(e){return String.fromCharCode.apply(0,e)}if(d(n.random(),r),e.exports){e.exports=f;try{i=ph}catch(e){}}else n.seedrandom=f}("undefined"!=typeof self?self:f,[],Math)}));dh.alea=uh,dh.xor128=ah,dh.xorwow=ch,dh.xorshift7=fh,dh.xor4096=lh,dh.tychei=hh;var yh,vh=dh,gh=f&&f.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t},mh=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},bh=gh(sh),_h=mh(vh),wh=function(){function e(){this._seed=bh.getDefaultSeed(),this._rng=_h.default(""+this._seed)}return Object.defineProperty(e.prototype,"seed",{get:function(){return this._seed},set:function(e){this._seed=e,this._rng=_h.default(""+this._seed)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"random",{get:function(){return this._rng},enumerable:!0,configurable:!0}),e}(),kh=Object.defineProperty({default:wh},"__esModule",{value:!0});!function(e){!function(t){var r="object"==typeof f?f:"object"==typeof self?self:"object"==typeof this?this:Function("return this;")(),n=i(e);function i(e,t){return function(r,n){"function"!=typeof e[r]&&Object.defineProperty(e,r,{configurable:!0,writable:!0,value:n}),t&&t(r,n)}}void 0===r.Reflect?r.Reflect=e:n=i(r.Reflect,n),function(e){var t=Object.prototype.hasOwnProperty,r="function"==typeof Symbol,n=r&&void 0!==Symbol.toPrimitive?Symbol.toPrimitive:"@@toPrimitive",i=r&&void 0!==Symbol.iterator?Symbol.iterator:"@@iterator",o="function"==typeof Object.create,s={__proto__:[]}instanceof Array,u=!o&&!s,a={create:o?function(){return ne(Object.create(null))}:s?function(){return ne({__proto__:null})}:function(){return ne({})},has:u?function(e,r){return t.call(e,r)}:function(e,t){return t in e},get:u?function(e,r){return t.call(e,r)?e[r]:void 0}:function(e,t){return e[t]}},c=Object.getPrototypeOf(Function),f="object"==typeof Tt&&Tt.env&&"true"===Tt.env.REFLECT_METADATA_USE_MAP_POLYFILL,l=f||"function"!=typeof Map||"function"!=typeof Map.prototype.entries?ee():Map,h=f||"function"!=typeof Set||"function"!=typeof Set.prototype.entries?te():Set,p=new(f||"function"!=typeof WeakMap?re():WeakMap);function d(e,t,r,n){if(j(r)){if(!G(e))throw new TypeError;if(!q(t))throw new TypeError;return A(e,t)}if(!G(e))throw new TypeError;if(!P(t))throw new TypeError;if(!P(n)&&!j(n)&&!L(n))throw new TypeError;return L(n)&&(n=void 0),S(e,t,r=H(r),n)}function y(e,t){function r(r,n){if(!P(r))throw new TypeError;if(!j(n)&&!W(n))throw new TypeError;N(e,t,r,n)}return r}function v(e,t,r,n){if(!P(r))throw new TypeError;return j(n)||(n=H(n)),N(e,t,r,n)}function g(e,t,r){if(!P(t))throw new TypeError;return j(r)||(r=H(r)),I(e,t,r)}function m(e,t,r){if(!P(t))throw new TypeError;return j(r)||(r=H(r)),T(e,t,r)}function b(e,t,r){if(!P(t))throw new TypeError;return j(r)||(r=H(r)),O(e,t,r)}function _(e,t,r){if(!P(t))throw new TypeError;return j(r)||(r=H(r)),B(e,t,r)}function w(e,t){if(!P(e))throw new TypeError;return j(t)||(t=H(t)),C(e,t)}function k(e,t){if(!P(e))throw new TypeError;return j(t)||(t=H(t)),R(e,t)}function E(e,t,r){if(!P(t))throw new TypeError;j(r)||(r=H(r));var n=x(t,r,!1);if(j(n))return!1;if(!n.delete(e))return!1;if(n.size>0)return!0;var i=p.get(t);return i.delete(r),i.size>0||p.delete(t),!0}function A(e,t){for(var r=e.length-1;r>=0;--r){var n=(0,e[r])(t);if(!j(n)&&!L(n)){if(!q(n))throw new TypeError;t=n}}return t}function S(e,t,r,n){for(var i=e.length-1;i>=0;--i){var o=(0,e[i])(t,r,n);if(!j(o)&&!L(o)){if(!P(o))throw new TypeError;n=o}}return n}function x(e,t,r){var n=p.get(e);if(j(n)){if(!r)return;n=new l,p.set(e,n)}var i=n.get(t);if(j(i)){if(!r)return;i=new l,n.set(t,i)}return i}function I(e,t,r){if(T(e,t,r))return!0;var n=Q(t);return!L(n)&&I(e,n,r)}function T(e,t,r){var n=x(t,r,!1);return!j(n)&&F(n.has(e))}function O(e,t,r){if(T(e,t,r))return B(e,t,r);var n=Q(t);return L(n)?void 0:O(e,n,r)}function B(e,t,r){var n=x(t,r,!1);if(!j(n))return n.get(e)}function N(e,t,r,n){x(r,n,!0).set(e,t)}function C(e,t){var r=R(e,t),n=Q(e);if(null===n)return r;var i=C(n,t);if(i.length<=0)return r;if(r.length<=0)return i;for(var o=new h,s=[],u=0,a=r;u<a.length;u++){var c=a[u];o.has(c)||(o.add(c),s.push(c))}for(var f=0,l=i;f<l.length;f++){c=l[f];o.has(c)||(o.add(c),s.push(c))}return s}function R(e,t){var r=[],n=x(e,t,!1);if(j(n))return r;for(var i=Y(n.keys()),o=0;;){var s=Z(i);if(!s)return r.length=o,r;var u=J(s);try{r[o]=u}catch(e){try{X(i)}finally{throw e}}o++}}function U(e){if(null===e)return 1;switch(typeof e){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return null===e?1:6;default:return 6}}function j(e){return void 0===e}function L(e){return null===e}function D(e){return"symbol"==typeof e}function P(e){return"object"==typeof e?null!==e:"function"==typeof e}function M(e,t){switch(U(e)){case 0:case 1:case 2:case 3:case 4:case 5:return e}var r=3===t?"string":5===t?"number":"default",i=V(e,n);if(void 0!==i){var o=i.call(e,r);if(P(o))throw new TypeError;return o}return z(e,"default"===r?"number":r)}function z(e,t){if("string"===t){var r=e.toString;if($(r))if(!P(i=r.call(e)))return i;if($(n=e.valueOf))if(!P(i=n.call(e)))return i}else{var n;if($(n=e.valueOf))if(!P(i=n.call(e)))return i;var i,o=e.toString;if($(o))if(!P(i=o.call(e)))return i}throw new TypeError}function F(e){return!!e}function K(e){return""+e}function H(e){var t=M(e,3);return D(t)?t:K(t)}function G(e){return Array.isArray?Array.isArray(e):e instanceof Object?e instanceof Array:"[object Array]"===Object.prototype.toString.call(e)}function $(e){return"function"==typeof e}function q(e){return"function"==typeof e}function W(e){switch(U(e)){case 3:case 4:return!0;default:return!1}}function V(e,t){var r=e[t];if(null!=r){if(!$(r))throw new TypeError;return r}}function Y(e){var t=V(e,i);if(!$(t))throw new TypeError;var r=t.call(e);if(!P(r))throw new TypeError;return r}function J(e){return e.value}function Z(e){var t=e.next();return!t.done&&t}function X(e){var t=e.return;t&&t.call(e)}function Q(e){var t=Object.getPrototypeOf(e);if("function"!=typeof e||e===c)return t;if(t!==c)return t;var r=e.prototype,n=r&&Object.getPrototypeOf(r);if(null==n||n===Object.prototype)return t;var i=n.constructor;return"function"!=typeof i||i===e?t:i}function ee(){var e={},t=[],r=function(){function e(e,t,r){this._index=0,this._keys=e,this._values=t,this._selector=r}return e.prototype["@@iterator"]=function(){return this},e.prototype[i]=function(){return this},e.prototype.next=function(){var e=this._index;if(e>=0&&e<this._keys.length){var r=this._selector(this._keys[e],this._values[e]);return e+1>=this._keys.length?(this._index=-1,this._keys=t,this._values=t):this._index++,{value:r,done:!1}}return{value:void 0,done:!0}},e.prototype.throw=function(e){throw this._index>=0&&(this._index=-1,this._keys=t,this._values=t),e},e.prototype.return=function(e){return this._index>=0&&(this._index=-1,this._keys=t,this._values=t),{value:e,done:!0}},e}();return function(){function t(){this._keys=[],this._values=[],this._cacheKey=e,this._cacheIndex=-2}return Object.defineProperty(t.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),t.prototype.has=function(e){return this._find(e,!1)>=0},t.prototype.get=function(e){var t=this._find(e,!1);return t>=0?this._values[t]:void 0},t.prototype.set=function(e,t){var r=this._find(e,!0);return this._values[r]=t,this},t.prototype.delete=function(t){var r=this._find(t,!1);if(r>=0){for(var n=this._keys.length,i=r+1;i<n;i++)this._keys[i-1]=this._keys[i],this._values[i-1]=this._values[i];return this._keys.length--,this._values.length--,t===this._cacheKey&&(this._cacheKey=e,this._cacheIndex=-2),!0}return!1},t.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=e,this._cacheIndex=-2},t.prototype.keys=function(){return new r(this._keys,this._values,n)},t.prototype.values=function(){return new r(this._keys,this._values,o)},t.prototype.entries=function(){return new r(this._keys,this._values,s)},t.prototype["@@iterator"]=function(){return this.entries()},t.prototype[i]=function(){return this.entries()},t.prototype._find=function(e,t){return this._cacheKey!==e&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=e)),this._cacheIndex<0&&t&&(this._cacheIndex=this._keys.length,this._keys.push(e),this._values.push(void 0)),this._cacheIndex},t}();function n(e,t){return e}function o(e,t){return t}function s(e,t){return[e,t]}}function te(){return function(){function e(){this._map=new l}return Object.defineProperty(e.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),e.prototype.has=function(e){return this._map.has(e)},e.prototype.add=function(e){return this._map.set(e,e),this},e.prototype.delete=function(e){return this._map.delete(e)},e.prototype.clear=function(){this._map.clear()},e.prototype.keys=function(){return this._map.keys()},e.prototype.values=function(){return this._map.values()},e.prototype.entries=function(){return this._map.entries()},e.prototype["@@iterator"]=function(){return this.keys()},e.prototype[i]=function(){return this.keys()},e}()}function re(){var e=16,r=a.create(),n=i();return function(){function e(){this._key=i()}return e.prototype.has=function(e){var t=o(e,!1);return void 0!==t&&a.has(t,this._key)},e.prototype.get=function(e){var t=o(e,!1);return void 0!==t?a.get(t,this._key):void 0},e.prototype.set=function(e,t){return o(e,!0)[this._key]=t,this},e.prototype.delete=function(e){var t=o(e,!1);return void 0!==t&&delete t[this._key]},e.prototype.clear=function(){this._key=i()},e}();function i(){var e;do{e="@@WeakMap@@"+c()}while(a.has(r,e));return r[e]=!0,e}function o(e,r){if(!t.call(e,n)){if(!r)return;Object.defineProperty(e,n,{value:a.create()})}return e[n]}function s(e,t){for(var r=0;r<t;++r)e[r]=255*Math.random()|0;return e}function u(e){return"function"==typeof Uint8Array?"undefined"!=typeof crypto?crypto.getRandomValues(new Uint8Array(e)):"undefined"!=typeof msCrypto?msCrypto.getRandomValues(new Uint8Array(e)):s(new Uint8Array(e),e):s(new Array(e),e)}function c(){var t=u(e);t[6]=79&t[6]|64,t[8]=191&t[8]|128;for(var r="",n=0;n<e;++n){var i=t[n];4!==n&&6!==n&&8!==n||(r+="-"),i<16&&(r+="0"),r+=i.toString(16).toLowerCase()}return r}}function ne(e){return e.__=void 0,delete e.__,e}e("decorate",d),e("metadata",y),e("defineMetadata",v),e("hasMetadata",g),e("hasOwnMetadata",m),e("getMetadata",b),e("getOwnMetadata",_),e("getMetadataKeys",w),e("getOwnMetadataKeys",k),e("deleteMetadata",E)}(n)}()}(yh||(yh={}));var Eh=f&&f.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)s.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return s},Ah=f&&f.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(Eh(arguments[t]));return e};function Sh(e){return null==e?e:Array.isArray(e)?e.map(Sh):"object"==typeof e?"saveAsJSON"in e?e.saveAsJSON():Object.assign({},e):e}var xh=Sh;var Ih=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return function(r){var n={type:e};return t.forEach((function(e){n[e]=Sh(r[e])})),n}};var Th=function(e){return function(t){return t.prototype.saveAsJSON=function(){return e.export(this)},t.fromJSON=function(t){return e.import(t)},t}},Oh=Symbol("bloom-filters:exportable:class-name"),Bh=Symbol("bloom-filters:exportable:fields"),Nh=Symbol("bloom-filters:exportable:constructor-parameters");var Ch=function(e,t){return void 0===e&&(e=Sh),void 0===t&&(t=function(e){return e}),function(r,n){var i=[];Reflect.hasMetadata(Bh,r)&&(i=Reflect.getMetadata(Bh,r)),i.push({name:n,exporter:e,importer:t}),Reflect.defineMetadata(Bh,i,r)}};var Rh=function(e){return function(t,r,n){var i=new Map;Reflect.hasMetadata(Nh,t)&&(i=Reflect.getMetadata(Nh,t)),i.set(e,n),Reflect.defineMetadata(Nh,i,t)}};var Uh=function(e,t){return void 0===t&&(t=[]),function(r){if(Reflect.defineMetadata(Oh,e,r.prototype),!Reflect.hasMetadata(Bh,r.prototype)||0===t.length)throw new SyntaxError("No exported fields declared when @AutoExportable is called");Reflect.hasMetadata(Nh,r)||Reflect.defineMetadata(Nh,new Map,r),r.prototype.saveAsJSON=function(){var e=this,n={type:Reflect.getMetadata(Oh,r.prototype)};return Reflect.getMetadata(Bh,r.prototype).forEach((function(t){n[t.name]=t.exporter(e[t.name])})),t.forEach((function(t){n[t]=Sh(e[t])})),n},r.fromJSON=function(e){var n=Reflect.getMetadata(Oh,r.prototype),i=Reflect.getMetadata(Nh,r),o=Reflect.getMetadata(Bh,r.prototype);if(e.type!==n)throw new Error("Cannot create an object "+n+' from a JSON export with type "'+e.type+'"');var s=[],u=[];t.map((function(e){return{name:e,importer:function(e){return e}}})).concat(o).forEach((function(t){if(!(t.name in e))throw new Error('Invalid import: required field "'+t+'" not found in JSON export "'+e+'"');i.has(t.name)?s[i.get(t.name)]=t.importer(e[t.name]):u.push({name:t.name,value:t.importer(e[t.name])})}));var a=new(r.bind.apply(r,Ah([void 0],s)));return u.forEach((function(e){a[e.name]=e.value})),a}}},jh=Object.defineProperty({cloneField:xh,cloneObject:Ih,Exportable:Th,Field:Ch,Parameter:Rh,AutoExportable:Uh},"__esModule",{value:!0});var Lh=function(e,t){return Math.ceil(-e*Math.log(t)/Math.pow(Math.log(2),2))};var Dh=function(e,t){return Math.ceil(e/t*Math.log(2))},Ph=Object.defineProperty({optimalFilterSize:Lh,optimalHashes:Dh},"__esModule",{value:!0}),Mh=f&&f.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),zh=f&&f.__decorate||function(e,t,r,n){var i,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var u=e.length-1;u>=0;u--)(i=e[u])&&(s=(o<3?i(s):o>3?i(t,r,s):i(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s},Fh=f&&f.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},Kh=f&&f.__param||function(e,t){return function(r,n){t(r,n,e)}},Hh=function(e){function t(t,r){var n=e.call(this)||this;if(r<1)throw new Error("A BloomFilter cannot uses less than one hash function, while you tried to use "+r+".");return n._size=t.length,n._nbHashes=r,n._filter=t,n._length=0,n}var r;return Mh(t,e),r=t,t.empty=function(e,t){var n=sh.allocateArray(e,0);return new r(n,t)},t.create=function(e,t){var n=Ph.optimalFilterSize(e,t),i=Ph.optimalHashes(n,e),o=sh.allocateArray(n,0);return new r(o,i)},t.from=function(e,t){var n=Array.from(e),i=r.create(n.length,t);return n.forEach((function(e){return i.add(e)})),i},t.fromBuffer=function(e,t){for(var n=new Uint8Array(e),i=[],o=0;o<n.length;o++){var s=sh.uint8ToBits(n[o]);i=i.concat(s)}return new r(i,t)},Object.defineProperty(t.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"length",{get:function(){return this._length},enumerable:!0,configurable:!0}),t.prototype.add=function(e){for(var t=sh.getDistinctIndices(e,this._size,this._nbHashes,this.seed),r=0;r<t.length;r++)this._filter[t[r]]=1;this._length++},t.prototype.has=function(e){for(var t=sh.getDistinctIndices(e,this._size,this._nbHashes,this.seed),r=0;r<t.length;r++)if(!this._filter[t[r]])return!1;return!0},t.prototype.rate=function(){return Math.pow(1-Math.exp(-this._nbHashes*this._length/this._size),this._nbHashes)},t.prototype.equals=function(e){return this._size===e._size&&this._nbHashes===e._nbHashes&&this._filter.every((function(t,r){return e._filter[r]===t}))},t.prototype.toBuffer=function(){for(var e=new Uint8Array(Math.ceil(this._size/8)),t=0;t<e.length;t++){var r=this._filter.slice(8*t,8*t+8);e[t]=sh.bitsToUint8(r)}return e.buffer},zh([jh.Field(),Fh("design:type",Number)],t.prototype,"_size",void 0),zh([jh.Field(),Fh("design:type",Number)],t.prototype,"_nbHashes",void 0),zh([jh.Field(),Fh("design:type",Array)],t.prototype,"_filter",void 0),zh([jh.Field(),Fh("design:type",Number)],t.prototype,"_length",void 0),t=r=zh([jh.AutoExportable("BloomFilter",["_seed"]),Kh(0,jh.Parameter("_filter")),Kh(1,jh.Parameter("_nbHashes")),Fh("design:paramtypes",[Array,Number])],t)}((f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}})(kh).default),Gh=Object.defineProperty({default:Hh},"__esModule",{value:!0}),$h=f&&f.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),qh=f&&f.__decorate||function(e,t,r,n){var i,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var u=e.length-1;u>=0;u--)(i=e[u])&&(s=(o<3?i(s):o>3?i(t,r,s):i(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s},Wh=f&&f.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},Vh=f&&f.__param||function(e,t){return function(r,n){t(r,n,e)}},Yh=function(e){function t(t,r){var n=e.call(this)||this;if(r<1)throw new Error("A CountingBloomFilter must used at least one hash function, but you tried to use "+r+" functions. Consider increasing it.");return n._size=t,n._nbHashes=r,n._filter=sh.allocateArray(n._size,(function(){return[0,0]})),n._length=0,n}var r;return $h(t,e),r=t,t.create=function(e,t){var n=Ph.optimalFilterSize(e,t);return new r(n,Ph.optimalHashes(n,e))},t.from=function(e,t){var n=Array.from(e),i=r.create(n.length,t);return n.forEach((function(e){return i.add(e)})),i},Object.defineProperty(t.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"length",{get:function(){return this._length},enumerable:!0,configurable:!0}),t.prototype.add=function(e){for(var t=sh.getDistinctIndices(e,this._size,this._nbHashes,this.seed),r=0;r<t.length;r++)this._filter[t[r]][1]+=1,this._filter[t[r]][1]>0&&(this._filter[t[r]][0]=1);this._length++},t.prototype.remove=function(e){for(var t=sh.getDistinctIndices(e,this._size,this._nbHashes,this.seed),r=0;r<t.length;r++)this._filter[t[r]][1]-=1,this._filter[t[r]][1]<=0&&(this._filter[t[r]][0]=0);return this._length--,!0},t.prototype.has=function(e){for(var t=sh.getDistinctIndices(e,this._size,this._nbHashes,this.seed),r=0;r<t.length;r++)if(!this._filter[t[r]][0])return!1;return!0},t.prototype.rate=function(){return Math.pow(1-Math.exp(-this._nbHashes*this._length/this._size),this._nbHashes)},t.prototype.equals=function(e){return this._size===e._size&&this._nbHashes===e._nbHashes&&this._length===e._length&&this._filter.every((function(t,r){return e._filter[r][0]===t[0]&&e._filter[r][1]===t[1]}))},qh([jh.Field(),Wh("design:type",Number)],t.prototype,"_size",void 0),qh([jh.Field(),Wh("design:type",Number)],t.prototype,"_nbHashes",void 0),qh([jh.Field(),Wh("design:type",Array)],t.prototype,"_filter",void 0),qh([jh.Field(),Wh("design:type",Number)],t.prototype,"_length",void 0),t=r=qh([jh.AutoExportable("CountingBloomFilter",["_seed"]),Vh(0,jh.Parameter("_size")),Vh(1,jh.Parameter("_nbHashes")),Wh("design:paramtypes",[Number,Number])],t)}((f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}})(kh).default),Jh=Object.defineProperty({default:Yh},"__esModule",{value:!0}),Zh=f&&f.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Xh=f&&f.__decorate||function(e,t,r,n){var i,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var u=e.length-1;u>=0;u--)(i=e[u])&&(s=(o<3?i(s):o>3?i(t,r,s):i(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s},Qh=f&&f.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},ep=f&&f.__param||function(e,t){return function(r,n){t(r,n,e)}};var tp=function(e){function t(t,r,n,i){var o=e.call(this)||this;return o._size=t,o._nbHashes=r,o._loadFactor=n,o._m=Math.ceil(o._size/o._nbHashes),o._filter=sh.allocateArray(o._nbHashes,(function(){return sh.allocateArray(o._m,0)})),o._capacity=void 0!==i?i:function(e,t,r){return Math.ceil(e*(Math.log(t)*Math.log(1-t))/(-r*Math.log(t)))}(o._size,n,r),o._length=0,o}var r;return Zh(t,e),r=t,t.create=function(e,t,n){void 0===n&&(n=.5);var i=function(e,t,r){return Math.ceil(e*-Math.log(t)/(Math.log(r)*Math.log(1-r)))}(e,t,n),o=function(e,t){return Math.ceil(Math.log(e)/Math.log(t))}(t,n);return new r(i,o,n,e)},t.from=function(e,t,n){void 0===n&&(n=.5);var i=Array.from(e),o=r.create(i.length,t,n);return i.forEach((function(e){return o.add(e)})),o},Object.defineProperty(t.prototype,"capacity",{get:function(){return this._capacity},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"length",{get:function(){return this._length},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"loadFactor",{get:function(){return this._loadFactor},enumerable:!0,configurable:!0}),t.prototype.add=function(e){for(var t=sh.getIndices(e,this._m,this._nbHashes,this.seed),r=0;r<this._nbHashes;r++)this._filter[r][t[r]]=1;this._length++},t.prototype.has=function(e){for(var t=sh.getIndices(e,this._m,this._nbHashes,this.seed),r=0;r<this._nbHashes;r++)if(!this._filter[r][t[r]])return!1;return!0},t.prototype.rate=function(){var e=this._currentload();return Math.pow(e,this._nbHashes)},t.prototype.equals=function(e){return this._size===e._size&&this._nbHashes===e._nbHashes&&this._length===e._length&&this._loadFactor===e._loadFactor&&this._filter.every((function(t,r){return e._filter[r].every((function(e,r){return t[r]===e}))}))},t.prototype._currentload=function(){return this._filter.map((function(e){return e.reduce((function(e,t){return e+t}),0)})).reduce((function(e,t){return e+t}),0)/this._size},Xh([jh.Field(),Qh("design:type",Number)],t.prototype,"_size",void 0),Xh([jh.Field(),Qh("design:type",Number)],t.prototype,"_nbHashes",void 0),Xh([jh.Field(),Qh("design:type",Number)],t.prototype,"_loadFactor",void 0),Xh([jh.Field(),Qh("design:type",Number)],t.prototype,"_m",void 0),Xh([jh.Field(),Qh("design:type",Array)],t.prototype,"_filter",void 0),Xh([jh.Field(),Qh("design:type",Number)],t.prototype,"_capacity",void 0),Xh([jh.Field(),Qh("design:type",Number)],t.prototype,"_length",void 0),t=r=Xh([jh.AutoExportable("PartitionedBloomFilter",["_seed"]),ep(0,jh.Parameter("_size")),ep(1,jh.Parameter("_nbHashes")),ep(2,jh.Parameter("_loadFactor")),ep(3,jh.Parameter("_capacity")),Qh("design:paramtypes",[Number,Number,Number,Number])],t)}((f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}})(kh).default),rp=Object.defineProperty({default:tp},"__esModule",{value:!0}),np=f&&f.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),ip=f&&f.__decorate||function(e,t,r,n){var i,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var u=e.length-1;u>=0;u--)(i=e[u])&&(s=(o<3?i(s):o>3?i(t,r,s):i(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s},op=f&&f.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},sp=f&&f.__param||function(e,t){return function(r,n){t(r,n,e)}},up=f&&f.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},ap=function(e){function t(t,r){var n=e.call(this)||this;return n._columns=t,n._rows=r,n._matrix=sh.allocateArray(n._rows,(function(){return sh.allocateArray(n._columns,0)})),n._allSums=0,n}var r;return np(t,e),r=t,t.create=function(e,t){void 0===t&&(t=.999);var n=Math.ceil(Math.E/e),i=Math.ceil(Math.log(1/t));return new r(n,i)},t.from=function(e,t,n){var i,o;void 0===n&&(n=.999);var s=r.create(t,n);try{for(var u=up(e),a=u.next();!a.done;a=u.next()){var c=a.value;s.update(c)}}catch(e){i={error:e}}finally{try{a&&!a.done&&(o=u.return)&&o.call(u)}finally{if(i)throw i.error}}return s},Object.defineProperty(t.prototype,"columns",{get:function(){return this._columns},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rows",{get:function(){return this._rows},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"sum",{get:function(){return this._allSums},enumerable:!0,configurable:!0}),t.prototype.update=function(e,t){void 0===t&&(t=1),this._allSums+=t;for(var r=sh.getDistinctIndices(e,this._columns,this._rows,this.seed),n=0;n<this._rows;n++)this._matrix[n][r[n]]+=t},t.prototype.count=function(e){for(var t=1/0,r=sh.getDistinctIndices(e,this._columns,this._rows,this.seed),n=0;n<this._rows;n++){var i=this._matrix[n][r[n]];t=Math.min(i,t)}return t},t.prototype.equals=function(e){if(this._columns!==e._columns||this._rows!==e._rows)return!1;for(var t=0;t<this._rows;t++)for(var r=0;r<this._columns;r++)if(this._matrix[t][r]!==e._matrix[t][r])return!1;return!0},t.prototype.merge=function(e){if(this._columns!==e._columns)throw new Error("Cannot merge two sketches with different number of columns");if(this._rows!==e._rows)throw new Error("Cannot merge two sketches with different number of rows");for(var t=0;t<this._rows;t++)for(var r=0;r<this._columns;r++)this._matrix[t][r]+=e._matrix[t][r]},t.prototype.clone=function(){var e=new r(this._columns,this._rows);return e.merge(this),e.seed=this.seed,e},ip([jh.Field(),op("design:type",Number)],t.prototype,"_columns",void 0),ip([jh.Field(),op("design:type",Number)],t.prototype,"_rows",void 0),ip([jh.Field(),op("design:type",Array)],t.prototype,"_matrix",void 0),ip([jh.Field(),op("design:type",Number)],t.prototype,"_allSums",void 0),t=r=ip([jh.AutoExportable("CountMinSketch",["_seed"]),sp(0,jh.Parameter("_columns")),sp(1,jh.Parameter("_rows")),op("design:paramtypes",[Number,Number])],t)}((f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}})(kh).default),cp=Object.defineProperty({default:ap},"__esModule",{value:!0}),fp=f&&f.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),lp=f&&f.__decorate||function(e,t,r,n){var i,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var u=e.length-1;u>=0;u--)(i=e[u])&&(s=(o<3?i(s):o>3?i(t,r,s):i(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s},hp=f&&f.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},pp=f&&f.__param||function(e,t){return function(r,n){t(r,n,e)}},dp=(f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}})(kh),yp=Math.pow(2,32);var vp=function(e){function t(t){var r=e.call(this)||this;return r._nbRegisters=t,r._nbBytesPerHash=Math.round(Math.log2(t)),r._correctionBias=function(e){switch(e){case 16:return.673;case 32:return.697;case 64:return.709;default:return.7213/(1+1.079/e)}}(t),r._registers=sh.allocateArray(r._nbRegisters,0),r}var r;return fp(t,e),r=t,Object.defineProperty(t.prototype,"nbRegisters",{get:function(){return this._nbRegisters},enumerable:!0,configurable:!0}),t.prototype.update=function(e){for(var t=sh.hashAsInt(e,this.seed).toString(2),r=1+parseInt(t.slice(0,this._nbBytesPerHash-1),2),n=t.slice(this._nbBytesPerHash),i=0;"1"!==n[i]&&i<n.length-1;)i++;this._registers[r]=Math.max(this._registers[r],i)},t.prototype.count=function(e){void 0===e&&(e=!1);var t=this._registers.reduce((function(e,t){return e+Math.pow(2,-t)}),0),r=this._correctionBias*Math.pow(this._nbRegisters,2)/t;return r>yp/30&&(r=-yp*Math.log(1-r/yp)),e&&(r=Math.round(r)),r},t.prototype.accuracy=function(){return 1.04/Math.sqrt(this._nbRegisters)},t.prototype.merge=function(e){if(this.nbRegisters!==e.nbRegisters)throw new Error("Two HyperLogLog must have the same number of registers to be merged. Tried to merge two HyperLogLog with m = "+this.nbRegisters+" and m = "+e.nbRegisters);for(var t=new r(this.nbRegisters),n=0;n<this.nbRegisters-1;n++)t._registers[n]=Math.max(this._registers[n],e._registers[n]);return t},t.prototype.equals=function(e){if(this.nbRegisters!==e.nbRegisters)return!1;for(var t=0;t<this.nbRegisters-1;t++)if(this._registers[t]!==e._registers[t])return!1;return!0},lp([jh.Field(),hp("design:type",Number)],t.prototype,"_nbRegisters",void 0),lp([jh.Field(),hp("design:type",Number)],t.prototype,"_nbBytesPerHash",void 0),lp([jh.Field(),hp("design:type",Number)],t.prototype,"_correctionBias",void 0),lp([jh.Field(),hp("design:type",Array)],t.prototype,"_registers",void 0),t=r=lp([jh.AutoExportable("HyperLogLog",["_seed"]),pp(0,jh.Parameter("_nbRegisters")),hp("design:paramtypes",[Number])],t)}(dp.default),gp=Object.defineProperty({default:vp},"__esModule",{value:!0}),mp=p((function(e,t){(function(){var r,n="Expected a function",i="__lodash_hash_undefined__",o="__lodash_placeholder__",s=16,u=32,a=64,c=128,l=256,h=1/0,p=9007199254740991,d=NaN,y=4294967295,v=[["ary",c],["bind",1],["bindKey",2],["curry",8],["curryRight",s],["flip",512],["partial",u],["partialRight",a],["rearg",l]],g="[object Arguments]",m="[object Array]",b="[object Boolean]",_="[object Date]",w="[object Error]",k="[object Function]",E="[object GeneratorFunction]",A="[object Map]",S="[object Number]",x="[object Object]",I="[object Promise]",T="[object RegExp]",O="[object Set]",B="[object String]",N="[object Symbol]",C="[object WeakMap]",R="[object ArrayBuffer]",U="[object DataView]",j="[object Float32Array]",L="[object Float64Array]",D="[object Int8Array]",P="[object Int16Array]",M="[object Int32Array]",z="[object Uint8Array]",F="[object Uint8ClampedArray]",K="[object Uint16Array]",H="[object Uint32Array]",G=/\b__p \+= '';/g,$=/\b(__p \+=) '' \+/g,q=/(__e\(.*?\)|\b__t\)) \+\n'';/g,W=/&(?:amp|lt|gt|quot|#39);/g,V=/[&<>"']/g,Y=RegExp(W.source),J=RegExp(V.source),Z=/<%-([\s\S]+?)%>/g,X=/<%([\s\S]+?)%>/g,Q=/<%=([\s\S]+?)%>/g,ee=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,te=/^\w*$/,re=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ne=/[\\^$.*+?()[\]{}|]/g,ie=RegExp(ne.source),oe=/^\s+|\s+$/g,se=/^\s+/,ue=/\s+$/,ae=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ce=/\{\n\/\* \[wrapped with (.+)\] \*/,fe=/,? & /,le=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,he=/\\(\\)?/g,pe=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,de=/\w*$/,ye=/^[-+]0x[0-9a-f]+$/i,ve=/^0b[01]+$/i,ge=/^\[object .+?Constructor\]$/,me=/^0o[0-7]+$/i,be=/^(?:0|[1-9]\d*)$/,_e=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,we=/($^)/,ke=/['\n\r\u2028\u2029\\]/g,Ee="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Ae="\\u2700-\\u27bf",Se="a-z\\xdf-\\xf6\\xf8-\\xff",xe="A-Z\\xc0-\\xd6\\xd8-\\xde",Ie="\\ufe0e\\ufe0f",Te="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Oe="[']",Be="[\\ud800-\\udfff]",Ne="["+Te+"]",Ce="["+Ee+"]",Re="\\d+",Ue="[\\u2700-\\u27bf]",je="["+Se+"]",Le="[^\\ud800-\\udfff"+Te+Re+Ae+Se+xe+"]",De="\\ud83c[\\udffb-\\udfff]",Pe="[^\\ud800-\\udfff]",Me="(?:\\ud83c[\\udde6-\\uddff]){2}",ze="[\\ud800-\\udbff][\\udc00-\\udfff]",Fe="["+xe+"]",Ke="(?:"+je+"|"+Le+")",He="(?:"+Fe+"|"+Le+")",Ge="(?:['](?:d|ll|m|re|s|t|ve))?",$e="(?:['](?:D|LL|M|RE|S|T|VE))?",qe="(?:"+Ce+"|"+De+")"+"?",We="[\\ufe0e\\ufe0f]?",Ve=We+qe+("(?:\\u200d(?:"+[Pe,Me,ze].join("|")+")"+We+qe+")*"),Ye="(?:"+[Ue,Me,ze].join("|")+")"+Ve,Je="(?:"+[Pe+Ce+"?",Ce,Me,ze,Be].join("|")+")",Ze=RegExp(Oe,"g"),Xe=RegExp(Ce,"g"),Qe=RegExp(De+"(?="+De+")|"+Je+Ve,"g"),et=RegExp([Fe+"?"+je+"+"+Ge+"(?="+[Ne,Fe,"$"].join("|")+")",He+"+"+$e+"(?="+[Ne,Fe+Ke,"$"].join("|")+")",Fe+"?"+Ke+"+"+Ge,Fe+"+"+$e,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Re,Ye].join("|"),"g"),tt=RegExp("[\\u200d\\ud800-\\udfff"+Ee+Ie+"]"),rt=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,nt=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],it=-1,ot={};ot[j]=ot[L]=ot[D]=ot[P]=ot[M]=ot[z]=ot[F]=ot[K]=ot[H]=!0,ot[g]=ot[m]=ot[R]=ot[b]=ot[U]=ot[_]=ot[w]=ot[k]=ot[A]=ot[S]=ot[x]=ot[T]=ot[O]=ot[B]=ot[C]=!1;var st={};st[g]=st[m]=st[R]=st[U]=st[b]=st[_]=st[j]=st[L]=st[D]=st[P]=st[M]=st[A]=st[S]=st[x]=st[T]=st[O]=st[B]=st[N]=st[z]=st[F]=st[K]=st[H]=!0,st[w]=st[k]=st[C]=!1;var ut={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},at=parseFloat,ct=parseInt,ft="object"==typeof f&&f&&f.Object===Object&&f,lt="object"==typeof self&&self&&self.Object===Object&&self,ht=ft||lt||Function("return this")(),pt=t&&!t.nodeType&&t,dt=pt&&e&&!e.nodeType&&e,yt=dt&&dt.exports===pt,vt=yt&&ft.process,gt=function(){try{var e=dt&&dt.require&&dt.require("util").types;return e||vt&&vt.binding&&vt.binding("util")}catch(e){}}(),mt=gt&&gt.isArrayBuffer,bt=gt&&gt.isDate,_t=gt&&gt.isMap,wt=gt&&gt.isRegExp,kt=gt&&gt.isSet,Et=gt&&gt.isTypedArray;function At(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}function St(e,t,r,n){for(var i=-1,o=null==e?0:e.length;++i<o;){var s=e[i];t(n,s,r(s),e)}return n}function xt(e,t){for(var r=-1,n=null==e?0:e.length;++r<n&&!1!==t(e[r],r,e););return e}function It(e,t){for(var r=null==e?0:e.length;r--&&!1!==t(e[r],r,e););return e}function Tt(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(!t(e[r],r,e))return!1;return!0}function Ot(e,t){for(var r=-1,n=null==e?0:e.length,i=0,o=[];++r<n;){var s=e[r];t(s,r,e)&&(o[i++]=s)}return o}function Bt(e,t){return!!(null==e?0:e.length)&&zt(e,t,0)>-1}function Nt(e,t,r){for(var n=-1,i=null==e?0:e.length;++n<i;)if(r(t,e[n]))return!0;return!1}function Ct(e,t){for(var r=-1,n=null==e?0:e.length,i=Array(n);++r<n;)i[r]=t(e[r],r,e);return i}function Rt(e,t){for(var r=-1,n=t.length,i=e.length;++r<n;)e[i+r]=t[r];return e}function Ut(e,t,r,n){var i=-1,o=null==e?0:e.length;for(n&&o&&(r=e[++i]);++i<o;)r=t(r,e[i],i,e);return r}function jt(e,t,r,n){var i=null==e?0:e.length;for(n&&i&&(r=e[--i]);i--;)r=t(r,e[i],i,e);return r}function Lt(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}var Dt=Gt("length");function Pt(e,t,r){var n;return r(e,(function(e,r,i){if(t(e,r,i))return n=r,!1})),n}function Mt(e,t,r,n){for(var i=e.length,o=r+(n?1:-1);n?o--:++o<i;)if(t(e[o],o,e))return o;return-1}function zt(e,t,r){return t==t?function(e,t,r){var n=r-1,i=e.length;for(;++n<i;)if(e[n]===t)return n;return-1}(e,t,r):Mt(e,Kt,r)}function Ft(e,t,r,n){for(var i=r-1,o=e.length;++i<o;)if(n(e[i],t))return i;return-1}function Kt(e){return e!=e}function Ht(e,t){var r=null==e?0:e.length;return r?Wt(e,t)/r:d}function Gt(e){return function(t){return null==t?r:t[e]}}function $t(e){return function(t){return null==e?r:e[t]}}function qt(e,t,r,n,i){return i(e,(function(e,i,o){r=n?(n=!1,e):t(r,e,i,o)})),r}function Wt(e,t){for(var n,i=-1,o=e.length;++i<o;){var s=t(e[i]);s!==r&&(n=n===r?s:n+s)}return n}function Vt(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}function Yt(e){return function(t){return e(t)}}function Jt(e,t){return Ct(t,(function(t){return e[t]}))}function Zt(e,t){return e.has(t)}function Xt(e,t){for(var r=-1,n=e.length;++r<n&&zt(t,e[r],0)>-1;);return r}function Qt(e,t){for(var r=e.length;r--&&zt(t,e[r],0)>-1;);return r}function er(e,t){for(var r=e.length,n=0;r--;)e[r]===t&&++n;return n}var tr=$t({"":"A","":"A","":"A","":"A","":"A","":"A","":"a","":"a","":"a","":"a","":"a","":"a","":"C","":"c","":"D","":"d","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"N","":"n","":"O","":"O","":"O","":"O","":"O","":"O","":"o","":"o","":"o","":"o","":"o","":"o","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"Y","":"y","":"y","":"Ae","":"ae","":"Th","":"th","":"ss","":"A","":"A","":"A","":"a","":"a","":"a","":"C","":"C","":"C","":"C","":"c","":"c","":"c","":"c","":"D","":"D","":"d","":"d","":"E","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"e","":"G","":"G","":"G","":"G","":"g","":"g","":"g","":"g","":"H","":"H","":"h","":"h","":"I","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"i","":"J","":"j","":"K","":"k","":"k","":"L","":"L","":"L","":"L","":"L","":"l","":"l","":"l","":"l","":"l","":"N","":"N","":"N","":"N","":"n","":"n","":"n","":"n","":"O","":"O","":"O","":"o","":"o","":"o","":"R","":"R","":"R","":"r","":"r","":"r","":"S","":"S","":"S","":"S","":"s","":"s","":"s","":"s","":"T","":"T","":"T","":"t","":"t","":"t","":"U","":"U","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"u","":"u","":"W","":"w","":"Y","":"y","":"Y","":"Z","":"Z","":"Z","":"z","":"z","":"z","":"IJ","":"ij","":"Oe","":"oe","":"'n","":"s"}),rr=$t({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function nr(e){return"\\"+ut[e]}function ir(e){return tt.test(e)}function or(e){var t=-1,r=Array(e.size);return e.forEach((function(e,n){r[++t]=[n,e]})),r}function sr(e,t){return function(r){return e(t(r))}}function ur(e,t){for(var r=-1,n=e.length,i=0,s=[];++r<n;){var u=e[r];u!==t&&u!==o||(e[r]=o,s[i++]=r)}return s}function ar(e){var t=-1,r=Array(e.size);return e.forEach((function(e){r[++t]=e})),r}function cr(e){var t=-1,r=Array(e.size);return e.forEach((function(e){r[++t]=[e,e]})),r}function fr(e){return ir(e)?function(e){var t=Qe.lastIndex=0;for(;Qe.test(e);)++t;return t}(e):Dt(e)}function lr(e){return ir(e)?function(e){return e.match(Qe)||[]}(e):function(e){return e.split("")}(e)}var hr=$t({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var pr=function e(t){var f,Ee=(t=null==t?ht:pr.defaults(ht.Object(),t,pr.pick(ht,nt))).Array,Ae=t.Date,Se=t.Error,xe=t.Function,Ie=t.Math,Te=t.Object,Oe=t.RegExp,Be=t.String,Ne=t.TypeError,Ce=Ee.prototype,Re=xe.prototype,Ue=Te.prototype,je=t["__core-js_shared__"],Le=Re.toString,De=Ue.hasOwnProperty,Pe=0,Me=(f=/[^.]+$/.exec(je&&je.keys&&je.keys.IE_PROTO||""))?"Symbol(src)_1."+f:"",ze=Ue.toString,Fe=Le.call(Te),Ke=ht._,He=Oe("^"+Le.call(De).replace(ne,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ge=yt?t.Buffer:r,$e=t.Symbol,qe=t.Uint8Array,We=Ge?Ge.allocUnsafe:r,Ve=sr(Te.getPrototypeOf,Te),Ye=Te.create,Je=Ue.propertyIsEnumerable,Qe=Ce.splice,tt=$e?$e.isConcatSpreadable:r,ut=$e?$e.iterator:r,ft=$e?$e.toStringTag:r,lt=function(){try{var e=ho(Te,"defineProperty");return e({},"",{}),e}catch(e){}}(),pt=t.clearTimeout!==ht.clearTimeout&&t.clearTimeout,dt=Ae&&Ae.now!==ht.Date.now&&Ae.now,vt=t.setTimeout!==ht.setTimeout&&t.setTimeout,gt=Ie.ceil,Dt=Ie.floor,$t=Te.getOwnPropertySymbols,dr=Ge?Ge.isBuffer:r,yr=t.isFinite,vr=Ce.join,gr=sr(Te.keys,Te),mr=Ie.max,br=Ie.min,_r=Ae.now,wr=t.parseInt,kr=Ie.random,Er=Ce.reverse,Ar=ho(t,"DataView"),Sr=ho(t,"Map"),xr=ho(t,"Promise"),Ir=ho(t,"Set"),Tr=ho(t,"WeakMap"),Or=ho(Te,"create"),Br=Tr&&new Tr,Nr={},Cr=zo(Ar),Rr=zo(Sr),Ur=zo(xr),jr=zo(Ir),Lr=zo(Tr),Dr=$e?$e.prototype:r,Pr=Dr?Dr.valueOf:r,Mr=Dr?Dr.toString:r;function zr(e){if(nu(e)&&!qs(e)&&!(e instanceof Gr)){if(e instanceof Hr)return e;if(De.call(e,"__wrapped__"))return Fo(e)}return new Hr(e)}var Fr=function(){function e(){}return function(t){if(!ru(t))return{};if(Ye)return Ye(t);e.prototype=t;var n=new e;return e.prototype=r,n}}();function Kr(){}function Hr(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=r}function Gr(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=y,this.__views__=[]}function $r(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function qr(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Wr(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Vr(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new Wr;++t<r;)this.add(e[t])}function Yr(e){var t=this.__data__=new qr(e);this.size=t.size}function Jr(e,t){var r=qs(e),n=!r&&$s(e),i=!r&&!n&&Js(e),o=!r&&!n&&!i&&lu(e),s=r||n||i||o,u=s?Vt(e.length,Be):[],a=u.length;for(var c in e)!t&&!De.call(e,c)||s&&("length"==c||i&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||_o(c,a))||u.push(c);return u}function Zr(e){var t=e.length;return t?e[Yn(0,t-1)]:r}function Xr(e,t){return Do(Bi(e),an(t,0,e.length))}function Qr(e){return Do(Bi(e))}function en(e,t,n){(n!==r&&!Ks(e[t],n)||n===r&&!(t in e))&&sn(e,t,n)}function tn(e,t,n){var i=e[t];De.call(e,t)&&Ks(i,n)&&(n!==r||t in e)||sn(e,t,n)}function rn(e,t){for(var r=e.length;r--;)if(Ks(e[r][0],t))return r;return-1}function nn(e,t,r,n){return pn(e,(function(e,i,o){t(n,e,r(e),o)})),n}function on(e,t){return e&&Ni(t,Ru(t),e)}function sn(e,t,r){"__proto__"==t&&lt?lt(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}function un(e,t){for(var n=-1,i=t.length,o=Ee(i),s=null==e;++n<i;)o[n]=s?r:Tu(e,t[n]);return o}function an(e,t,n){return e==e&&(n!==r&&(e=e<=n?e:n),t!==r&&(e=e>=t?e:t)),e}function cn(e,t,n,i,o,s){var u,a=1&t,c=2&t,f=4&t;if(n&&(u=o?n(e,i,o,s):n(e)),u!==r)return u;if(!ru(e))return e;var l=qs(e);if(l){if(u=function(e){var t=e.length,r=new e.constructor(t);t&&"string"==typeof e[0]&&De.call(e,"index")&&(r.index=e.index,r.input=e.input);return r}(e),!a)return Bi(e,u)}else{var h=vo(e),p=h==k||h==E;if(Js(e))return Ai(e,a);if(h==x||h==g||p&&!o){if(u=c||p?{}:mo(e),!a)return c?function(e,t){return Ni(e,yo(e),t)}(e,function(e,t){return e&&Ni(t,Uu(t),e)}(u,e)):function(e,t){return Ni(e,po(e),t)}(e,on(u,e))}else{if(!st[h])return o?e:{};u=function(e,t,r){var n=e.constructor;switch(t){case R:return Si(e);case b:case _:return new n(+e);case U:return function(e,t){var r=t?Si(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}(e,r);case j:case L:case D:case P:case M:case z:case F:case K:case H:return xi(e,r);case A:return new n;case S:case B:return new n(e);case T:return function(e){var t=new e.constructor(e.source,de.exec(e));return t.lastIndex=e.lastIndex,t}(e);case O:return new n;case N:return function(e){return Pr?Te(Pr.call(e)):{}}(e)}}(e,h,a)}}s||(s=new Yr);var d=s.get(e);if(d)return d;s.set(e,u),au(e)?e.forEach((function(r){u.add(cn(r,t,n,r,e,s))})):iu(e)&&e.forEach((function(r,i){u.set(i,cn(r,t,n,i,e,s))}));var y=l?r:(f?c?oo:io:c?Uu:Ru)(e);return xt(y||e,(function(r,i){y&&(r=e[i=r]),tn(u,i,cn(r,t,n,i,e,s))})),u}function fn(e,t,n){var i=n.length;if(null==e)return!i;for(e=Te(e);i--;){var o=n[i],s=t[o],u=e[o];if(u===r&&!(o in e)||!s(u))return!1}return!0}function ln(e,t,i){if("function"!=typeof e)throw new Ne(n);return Ro((function(){e.apply(r,i)}),t)}function hn(e,t,r,n){var i=-1,o=Bt,s=!0,u=e.length,a=[],c=t.length;if(!u)return a;r&&(t=Ct(t,Yt(r))),n?(o=Nt,s=!1):t.length>=200&&(o=Zt,s=!1,t=new Vr(t));e:for(;++i<u;){var f=e[i],l=null==r?f:r(f);if(f=n||0!==f?f:0,s&&l==l){for(var h=c;h--;)if(t[h]===l)continue e;a.push(f)}else o(t,l,n)||a.push(f)}return a}zr.templateSettings={escape:Z,evaluate:X,interpolate:Q,variable:"",imports:{_:zr}},zr.prototype=Kr.prototype,zr.prototype.constructor=zr,Hr.prototype=Fr(Kr.prototype),Hr.prototype.constructor=Hr,Gr.prototype=Fr(Kr.prototype),Gr.prototype.constructor=Gr,$r.prototype.clear=function(){this.__data__=Or?Or(null):{},this.size=0},$r.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},$r.prototype.get=function(e){var t=this.__data__;if(Or){var n=t[e];return n===i?r:n}return De.call(t,e)?t[e]:r},$r.prototype.has=function(e){var t=this.__data__;return Or?t[e]!==r:De.call(t,e)},$r.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Or&&t===r?i:t,this},qr.prototype.clear=function(){this.__data__=[],this.size=0},qr.prototype.delete=function(e){var t=this.__data__,r=rn(t,e);return!(r<0)&&(r==t.length-1?t.pop():Qe.call(t,r,1),--this.size,!0)},qr.prototype.get=function(e){var t=this.__data__,n=rn(t,e);return n<0?r:t[n][1]},qr.prototype.has=function(e){return rn(this.__data__,e)>-1},qr.prototype.set=function(e,t){var r=this.__data__,n=rn(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this},Wr.prototype.clear=function(){this.size=0,this.__data__={hash:new $r,map:new(Sr||qr),string:new $r}},Wr.prototype.delete=function(e){var t=fo(this,e).delete(e);return this.size-=t?1:0,t},Wr.prototype.get=function(e){return fo(this,e).get(e)},Wr.prototype.has=function(e){return fo(this,e).has(e)},Wr.prototype.set=function(e,t){var r=fo(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this},Vr.prototype.add=Vr.prototype.push=function(e){return this.__data__.set(e,i),this},Vr.prototype.has=function(e){return this.__data__.has(e)},Yr.prototype.clear=function(){this.__data__=new qr,this.size=0},Yr.prototype.delete=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r},Yr.prototype.get=function(e){return this.__data__.get(e)},Yr.prototype.has=function(e){return this.__data__.has(e)},Yr.prototype.set=function(e,t){var r=this.__data__;if(r instanceof qr){var n=r.__data__;if(!Sr||n.length<199)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new Wr(n)}return r.set(e,t),this.size=r.size,this};var pn=Ui(wn),dn=Ui(kn,!0);function yn(e,t){var r=!0;return pn(e,(function(e,n,i){return r=!!t(e,n,i)})),r}function vn(e,t,n){for(var i=-1,o=e.length;++i<o;){var s=e[i],u=t(s);if(null!=u&&(a===r?u==u&&!fu(u):n(u,a)))var a=u,c=s}return c}function gn(e,t){var r=[];return pn(e,(function(e,n,i){t(e,n,i)&&r.push(e)})),r}function mn(e,t,r,n,i){var o=-1,s=e.length;for(r||(r=bo),i||(i=[]);++o<s;){var u=e[o];t>0&&r(u)?t>1?mn(u,t-1,r,n,i):Rt(i,u):n||(i[i.length]=u)}return i}var bn=ji(),_n=ji(!0);function wn(e,t){return e&&bn(e,t,Ru)}function kn(e,t){return e&&_n(e,t,Ru)}function En(e,t){return Ot(t,(function(t){return Qs(e[t])}))}function An(e,t){for(var n=0,i=(t=_i(t,e)).length;null!=e&&n<i;)e=e[Mo(t[n++])];return n&&n==i?e:r}function Sn(e,t,r){var n=t(e);return qs(e)?n:Rt(n,r(e))}function xn(e){return null==e?e===r?"[object Undefined]":"[object Null]":ft&&ft in Te(e)?function(e){var t=De.call(e,ft),n=e[ft];try{e[ft]=r;var i=!0}catch(e){}var o=ze.call(e);i&&(t?e[ft]=n:delete e[ft]);return o}(e):function(e){return ze.call(e)}(e)}function In(e,t){return e>t}function Tn(e,t){return null!=e&&De.call(e,t)}function On(e,t){return null!=e&&t in Te(e)}function Bn(e,t,n){for(var i=n?Nt:Bt,o=e[0].length,s=e.length,u=s,a=Ee(s),c=1/0,f=[];u--;){var l=e[u];u&&t&&(l=Ct(l,Yt(t))),c=br(l.length,c),a[u]=!n&&(t||o>=120&&l.length>=120)?new Vr(u&&l):r}l=e[0];var h=-1,p=a[0];e:for(;++h<o&&f.length<c;){var d=l[h],y=t?t(d):d;if(d=n||0!==d?d:0,!(p?Zt(p,y):i(f,y,n))){for(u=s;--u;){var v=a[u];if(!(v?Zt(v,y):i(e[u],y,n)))continue e}p&&p.push(y),f.push(d)}}return f}function Nn(e,t,n){var i=null==(e=Oo(e,t=_i(t,e)))?e:e[Mo(Xo(t))];return null==i?r:At(i,e,n)}function Cn(e){return nu(e)&&xn(e)==g}function Rn(e,t,n,i,o){return e===t||(null==e||null==t||!nu(e)&&!nu(t)?e!=e&&t!=t:function(e,t,n,i,o,s){var u=qs(e),a=qs(t),c=u?m:vo(e),f=a?m:vo(t),l=(c=c==g?x:c)==x,h=(f=f==g?x:f)==x,p=c==f;if(p&&Js(e)){if(!Js(t))return!1;u=!0,l=!1}if(p&&!l)return s||(s=new Yr),u||lu(e)?ro(e,t,n,i,o,s):function(e,t,r,n,i,o,s){switch(r){case U:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case R:return!(e.byteLength!=t.byteLength||!o(new qe(e),new qe(t)));case b:case _:case S:return Ks(+e,+t);case w:return e.name==t.name&&e.message==t.message;case T:case B:return e==t+"";case A:var u=or;case O:var a=1&n;if(u||(u=ar),e.size!=t.size&&!a)return!1;var c=s.get(e);if(c)return c==t;n|=2,s.set(e,t);var f=ro(u(e),u(t),n,i,o,s);return s.delete(e),f;case N:if(Pr)return Pr.call(e)==Pr.call(t)}return!1}(e,t,c,n,i,o,s);if(!(1&n)){var d=l&&De.call(e,"__wrapped__"),y=h&&De.call(t,"__wrapped__");if(d||y){var v=d?e.value():e,k=y?t.value():t;return s||(s=new Yr),o(v,k,n,i,s)}}if(!p)return!1;return s||(s=new Yr),function(e,t,n,i,o,s){var u=1&n,a=io(e),c=a.length,f=io(t).length;if(c!=f&&!u)return!1;var l=c;for(;l--;){var h=a[l];if(!(u?h in t:De.call(t,h)))return!1}var p=s.get(e),d=s.get(t);if(p&&d)return p==t&&d==e;var y=!0;s.set(e,t),s.set(t,e);var v=u;for(;++l<c;){var g=e[h=a[l]],m=t[h];if(i)var b=u?i(m,g,h,t,e,s):i(g,m,h,e,t,s);if(!(b===r?g===m||o(g,m,n,i,s):b)){y=!1;break}v||(v="constructor"==h)}if(y&&!v){var _=e.constructor,w=t.constructor;_==w||!("constructor"in e)||!("constructor"in t)||"function"==typeof _&&_ instanceof _&&"function"==typeof w&&w instanceof w||(y=!1)}return s.delete(e),s.delete(t),y}(e,t,n,i,o,s)}(e,t,n,i,Rn,o))}function Un(e,t,n,i){var o=n.length,s=o,u=!i;if(null==e)return!s;for(e=Te(e);o--;){var a=n[o];if(u&&a[2]?a[1]!==e[a[0]]:!(a[0]in e))return!1}for(;++o<s;){var c=(a=n[o])[0],f=e[c],l=a[1];if(u&&a[2]){if(f===r&&!(c in e))return!1}else{var h=new Yr;if(i)var p=i(f,l,c,e,t,h);if(!(p===r?Rn(l,f,3,i,h):p))return!1}}return!0}function jn(e){return!(!ru(e)||(t=e,Me&&Me in t))&&(Qs(e)?He:ge).test(zo(e));var t}function Ln(e){return"function"==typeof e?e:null==e?oa:"object"==typeof e?qs(e)?Kn(e[0],e[1]):Fn(e):da(e)}function Dn(e){if(!So(e))return gr(e);var t=[];for(var r in Te(e))De.call(e,r)&&"constructor"!=r&&t.push(r);return t}function Pn(e){if(!ru(e))return function(e){var t=[];if(null!=e)for(var r in Te(e))t.push(r);return t}(e);var t=So(e),r=[];for(var n in e)("constructor"!=n||!t&&De.call(e,n))&&r.push(n);return r}function Mn(e,t){return e<t}function zn(e,t){var r=-1,n=Vs(e)?Ee(e.length):[];return pn(e,(function(e,i,o){n[++r]=t(e,i,o)})),n}function Fn(e){var t=lo(e);return 1==t.length&&t[0][2]?Io(t[0][0],t[0][1]):function(r){return r===e||Un(r,e,t)}}function Kn(e,t){return ko(e)&&xo(t)?Io(Mo(e),t):function(n){var i=Tu(n,e);return i===r&&i===t?Ou(n,e):Rn(t,i,3)}}function Hn(e,t,n,i,o){e!==t&&bn(t,(function(s,u){if(o||(o=new Yr),ru(s))!function(e,t,n,i,o,s,u){var a=No(e,n),c=No(t,n),f=u.get(c);if(f)return void en(e,n,f);var l=s?s(a,c,n+"",e,t,u):r,h=l===r;if(h){var p=qs(c),d=!p&&Js(c),y=!p&&!d&&lu(c);l=c,p||d||y?qs(a)?l=a:Ys(a)?l=Bi(a):d?(h=!1,l=Ai(c,!0)):y?(h=!1,l=xi(c,!0)):l=[]:su(c)||$s(c)?(l=a,$s(a)?l=bu(a):ru(a)&&!Qs(a)||(l=mo(c))):h=!1}h&&(u.set(c,l),o(l,c,i,s,u),u.delete(c));en(e,n,l)}(e,t,u,n,Hn,i,o);else{var a=i?i(No(e,u),s,u+"",e,t,o):r;a===r&&(a=s),en(e,u,a)}}),Uu)}function Gn(e,t){var n=e.length;if(n)return _o(t+=t<0?n:0,n)?e[t]:r}function $n(e,t,r){t=t.length?Ct(t,(function(e){return qs(e)?function(t){return An(t,1===e.length?e[0]:e)}:e})):[oa];var n=-1;return t=Ct(t,Yt(co())),function(e,t){var r=e.length;for(e.sort(t);r--;)e[r]=e[r].value;return e}(zn(e,(function(e,r,i){return{criteria:Ct(t,(function(t){return t(e)})),index:++n,value:e}})),(function(e,t){return function(e,t,r){var n=-1,i=e.criteria,o=t.criteria,s=i.length,u=r.length;for(;++n<s;){var a=Ii(i[n],o[n]);if(a)return n>=u?a:a*("desc"==r[n]?-1:1)}return e.index-t.index}(e,t,r)}))}function qn(e,t,r){for(var n=-1,i=t.length,o={};++n<i;){var s=t[n],u=An(e,s);r(u,s)&&ei(o,_i(s,e),u)}return o}function Wn(e,t,r,n){var i=n?Ft:zt,o=-1,s=t.length,u=e;for(e===t&&(t=Bi(t)),r&&(u=Ct(e,Yt(r)));++o<s;)for(var a=0,c=t[o],f=r?r(c):c;(a=i(u,f,a,n))>-1;)u!==e&&Qe.call(u,a,1),Qe.call(e,a,1);return e}function Vn(e,t){for(var r=e?t.length:0,n=r-1;r--;){var i=t[r];if(r==n||i!==o){var o=i;_o(i)?Qe.call(e,i,1):hi(e,i)}}return e}function Yn(e,t){return e+Dt(kr()*(t-e+1))}function Jn(e,t){var r="";if(!e||t<1||t>p)return r;do{t%2&&(r+=e),(t=Dt(t/2))&&(e+=e)}while(t);return r}function Zn(e,t){return Uo(To(e,t,oa),e+"")}function Xn(e){return Zr(Ku(e))}function Qn(e,t){var r=Ku(e);return Do(r,an(t,0,r.length))}function ei(e,t,n,i){if(!ru(e))return e;for(var o=-1,s=(t=_i(t,e)).length,u=s-1,a=e;null!=a&&++o<s;){var c=Mo(t[o]),f=n;if("__proto__"===c||"constructor"===c||"prototype"===c)return e;if(o!=u){var l=a[c];(f=i?i(l,c,a):r)===r&&(f=ru(l)?l:_o(t[o+1])?[]:{})}tn(a,c,f),a=a[c]}return e}var ti=Br?function(e,t){return Br.set(e,t),e}:oa,ri=lt?function(e,t){return lt(e,"toString",{configurable:!0,enumerable:!1,value:ra(t),writable:!0})}:oa;function ni(e){return Do(Ku(e))}function ii(e,t,r){var n=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(r=r>i?i:r)<0&&(r+=i),i=t>r?0:r-t>>>0,t>>>=0;for(var o=Ee(i);++n<i;)o[n]=e[n+t];return o}function oi(e,t){var r;return pn(e,(function(e,n,i){return!(r=t(e,n,i))})),!!r}function si(e,t,r){var n=0,i=null==e?n:e.length;if("number"==typeof t&&t==t&&i<=2147483647){for(;n<i;){var o=n+i>>>1,s=e[o];null!==s&&!fu(s)&&(r?s<=t:s<t)?n=o+1:i=o}return i}return ui(e,t,oa,r)}function ui(e,t,n,i){var o=0,s=null==e?0:e.length;if(0===s)return 0;for(var u=(t=n(t))!=t,a=null===t,c=fu(t),f=t===r;o<s;){var l=Dt((o+s)/2),h=n(e[l]),p=h!==r,d=null===h,y=h==h,v=fu(h);if(u)var g=i||y;else g=f?y&&(i||p):a?y&&p&&(i||!d):c?y&&p&&!d&&(i||!v):!d&&!v&&(i?h<=t:h<t);g?o=l+1:s=l}return br(s,4294967294)}function ai(e,t){for(var r=-1,n=e.length,i=0,o=[];++r<n;){var s=e[r],u=t?t(s):s;if(!r||!Ks(u,a)){var a=u;o[i++]=0===s?0:s}}return o}function ci(e){return"number"==typeof e?e:fu(e)?d:+e}function fi(e){if("string"==typeof e)return e;if(qs(e))return Ct(e,fi)+"";if(fu(e))return Mr?Mr.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function li(e,t,r){var n=-1,i=Bt,o=e.length,s=!0,u=[],a=u;if(r)s=!1,i=Nt;else if(o>=200){var c=t?null:Ji(e);if(c)return ar(c);s=!1,i=Zt,a=new Vr}else a=t?[]:u;e:for(;++n<o;){var f=e[n],l=t?t(f):f;if(f=r||0!==f?f:0,s&&l==l){for(var h=a.length;h--;)if(a[h]===l)continue e;t&&a.push(l),u.push(f)}else i(a,l,r)||(a!==u&&a.push(l),u.push(f))}return u}function hi(e,t){return null==(e=Oo(e,t=_i(t,e)))||delete e[Mo(Xo(t))]}function pi(e,t,r,n){return ei(e,t,r(An(e,t)),n)}function di(e,t,r,n){for(var i=e.length,o=n?i:-1;(n?o--:++o<i)&&t(e[o],o,e););return r?ii(e,n?0:o,n?o+1:i):ii(e,n?o+1:0,n?i:o)}function yi(e,t){var r=e;return r instanceof Gr&&(r=r.value()),Ut(t,(function(e,t){return t.func.apply(t.thisArg,Rt([e],t.args))}),r)}function vi(e,t,r){var n=e.length;if(n<2)return n?li(e[0]):[];for(var i=-1,o=Ee(n);++i<n;)for(var s=e[i],u=-1;++u<n;)u!=i&&(o[i]=hn(o[i]||s,e[u],t,r));return li(mn(o,1),t,r)}function gi(e,t,n){for(var i=-1,o=e.length,s=t.length,u={};++i<o;){var a=i<s?t[i]:r;n(u,e[i],a)}return u}function mi(e){return Ys(e)?e:[]}function bi(e){return"function"==typeof e?e:oa}function _i(e,t){return qs(e)?e:ko(e,t)?[e]:Po(_u(e))}var wi=Zn;function ki(e,t,n){var i=e.length;return n=n===r?i:n,!t&&n>=i?e:ii(e,t,n)}var Ei=pt||function(e){return ht.clearTimeout(e)};function Ai(e,t){if(t)return e.slice();var r=e.length,n=We?We(r):new e.constructor(r);return e.copy(n),n}function Si(e){var t=new e.constructor(e.byteLength);return new qe(t).set(new qe(e)),t}function xi(e,t){var r=t?Si(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}function Ii(e,t){if(e!==t){var n=e!==r,i=null===e,o=e==e,s=fu(e),u=t!==r,a=null===t,c=t==t,f=fu(t);if(!a&&!f&&!s&&e>t||s&&u&&c&&!a&&!f||i&&u&&c||!n&&c||!o)return 1;if(!i&&!s&&!f&&e<t||f&&n&&o&&!i&&!s||a&&n&&o||!u&&o||!c)return-1}return 0}function Ti(e,t,r,n){for(var i=-1,o=e.length,s=r.length,u=-1,a=t.length,c=mr(o-s,0),f=Ee(a+c),l=!n;++u<a;)f[u]=t[u];for(;++i<s;)(l||i<o)&&(f[r[i]]=e[i]);for(;c--;)f[u++]=e[i++];return f}function Oi(e,t,r,n){for(var i=-1,o=e.length,s=-1,u=r.length,a=-1,c=t.length,f=mr(o-u,0),l=Ee(f+c),h=!n;++i<f;)l[i]=e[i];for(var p=i;++a<c;)l[p+a]=t[a];for(;++s<u;)(h||i<o)&&(l[p+r[s]]=e[i++]);return l}function Bi(e,t){var r=-1,n=e.length;for(t||(t=Ee(n));++r<n;)t[r]=e[r];return t}function Ni(e,t,n,i){var o=!n;n||(n={});for(var s=-1,u=t.length;++s<u;){var a=t[s],c=i?i(n[a],e[a],a,n,e):r;c===r&&(c=e[a]),o?sn(n,a,c):tn(n,a,c)}return n}function Ci(e,t){return function(r,n){var i=qs(r)?St:nn,o=t?t():{};return i(r,e,co(n,2),o)}}function Ri(e){return Zn((function(t,n){var i=-1,o=n.length,s=o>1?n[o-1]:r,u=o>2?n[2]:r;for(s=e.length>3&&"function"==typeof s?(o--,s):r,u&&wo(n[0],n[1],u)&&(s=o<3?r:s,o=1),t=Te(t);++i<o;){var a=n[i];a&&e(t,a,i,s)}return t}))}function Ui(e,t){return function(r,n){if(null==r)return r;if(!Vs(r))return e(r,n);for(var i=r.length,o=t?i:-1,s=Te(r);(t?o--:++o<i)&&!1!==n(s[o],o,s););return r}}function ji(e){return function(t,r,n){for(var i=-1,o=Te(t),s=n(t),u=s.length;u--;){var a=s[e?u:++i];if(!1===r(o[a],a,o))break}return t}}function Li(e){return function(t){var n=ir(t=_u(t))?lr(t):r,i=n?n[0]:t.charAt(0),o=n?ki(n,1).join(""):t.slice(1);return i[e]()+o}}function Di(e){return function(t){return Ut(Qu($u(t).replace(Ze,"")),e,"")}}function Pi(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var r=Fr(e.prototype),n=e.apply(r,t);return ru(n)?n:r}}function Mi(e){return function(t,n,i){var o=Te(t);if(!Vs(t)){var s=co(n,3);t=Ru(t),n=function(e){return s(o[e],e,o)}}var u=e(t,n,i);return u>-1?o[s?t[u]:u]:r}}function zi(e){return no((function(t){var i=t.length,o=i,s=Hr.prototype.thru;for(e&&t.reverse();o--;){var u=t[o];if("function"!=typeof u)throw new Ne(n);if(s&&!a&&"wrapper"==uo(u))var a=new Hr([],!0)}for(o=a?o:i;++o<i;){var c=uo(u=t[o]),f="wrapper"==c?so(u):r;a=f&&Eo(f[0])&&424==f[1]&&!f[4].length&&1==f[9]?a[uo(f[0])].apply(a,f[3]):1==u.length&&Eo(u)?a[c]():a.thru(u)}return function(){var e=arguments,r=e[0];if(a&&1==e.length&&qs(r))return a.plant(r).value();for(var n=0,o=i?t[n].apply(this,e):r;++n<i;)o=t[n].call(this,o);return o}}))}function Fi(e,t,n,i,o,s,u,a,f,l){var h=t&c,p=1&t,d=2&t,y=24&t,v=512&t,g=d?r:Pi(e);return function r(){for(var c=arguments.length,m=Ee(c),b=c;b--;)m[b]=arguments[b];if(y)var _=ao(r),w=er(m,_);if(i&&(m=Ti(m,i,o,y)),s&&(m=Oi(m,s,u,y)),c-=w,y&&c<l){var k=ur(m,_);return Vi(e,t,Fi,r.placeholder,n,m,k,a,f,l-c)}var E=p?n:this,A=d?E[e]:e;return c=m.length,a?m=Bo(m,a):v&&c>1&&m.reverse(),h&&f<c&&(m.length=f),this&&this!==ht&&this instanceof r&&(A=g||Pi(A)),A.apply(E,m)}}function Ki(e,t){return function(r,n){return function(e,t,r,n){return wn(e,(function(e,i,o){t(n,r(e),i,o)})),n}(r,e,t(n),{})}}function Hi(e,t){return function(n,i){var o;if(n===r&&i===r)return t;if(n!==r&&(o=n),i!==r){if(o===r)return i;"string"==typeof n||"string"==typeof i?(n=fi(n),i=fi(i)):(n=ci(n),i=ci(i)),o=e(n,i)}return o}}function Gi(e){return no((function(t){return t=Ct(t,Yt(co())),Zn((function(r){var n=this;return e(t,(function(e){return At(e,n,r)}))}))}))}function $i(e,t){var n=(t=t===r?" ":fi(t)).length;if(n<2)return n?Jn(t,e):t;var i=Jn(t,gt(e/fr(t)));return ir(t)?ki(lr(i),0,e).join(""):i.slice(0,e)}function qi(e){return function(t,n,i){return i&&"number"!=typeof i&&wo(t,n,i)&&(n=i=r),t=yu(t),n===r?(n=t,t=0):n=yu(n),function(e,t,r,n){for(var i=-1,o=mr(gt((t-e)/(r||1)),0),s=Ee(o);o--;)s[n?o:++i]=e,e+=r;return s}(t,n,i=i===r?t<n?1:-1:yu(i),e)}}function Wi(e){return function(t,r){return"string"==typeof t&&"string"==typeof r||(t=mu(t),r=mu(r)),e(t,r)}}function Vi(e,t,n,i,o,s,c,f,l,h){var p=8&t;t|=p?u:a,4&(t&=~(p?a:u))||(t&=-4);var d=[e,t,o,p?s:r,p?c:r,p?r:s,p?r:c,f,l,h],y=n.apply(r,d);return Eo(e)&&Co(y,d),y.placeholder=i,jo(y,e,t)}function Yi(e){var t=Ie[e];return function(e,r){if(e=mu(e),(r=null==r?0:br(vu(r),292))&&yr(e)){var n=(_u(e)+"e").split("e");return+((n=(_u(t(n[0]+"e"+(+n[1]+r)))+"e").split("e"))[0]+"e"+(+n[1]-r))}return t(e)}}var Ji=Ir&&1/ar(new Ir([,-0]))[1]==h?function(e){return new Ir(e)}:fa;function Zi(e){return function(t){var r=vo(t);return r==A?or(t):r==O?cr(t):function(e,t){return Ct(t,(function(t){return[t,e[t]]}))}(t,e(t))}}function Xi(e,t,i,f,h,p,d,y){var v=2&t;if(!v&&"function"!=typeof e)throw new Ne(n);var g=f?f.length:0;if(g||(t&=-97,f=h=r),d=d===r?d:mr(vu(d),0),y=y===r?y:vu(y),g-=h?h.length:0,t&a){var m=f,b=h;f=h=r}var _=v?r:so(e),w=[e,t,i,f,h,m,b,p,d,y];if(_&&function(e,t){var r=e[1],n=t[1],i=r|n,s=i<131,u=n==c&&8==r||n==c&&r==l&&e[7].length<=t[8]||384==n&&t[7].length<=t[8]&&8==r;if(!s&&!u)return e;1&n&&(e[2]=t[2],i|=1&r?0:4);var a=t[3];if(a){var f=e[3];e[3]=f?Ti(f,a,t[4]):a,e[4]=f?ur(e[3],o):t[4]}(a=t[5])&&(f=e[5],e[5]=f?Oi(f,a,t[6]):a,e[6]=f?ur(e[5],o):t[6]);(a=t[7])&&(e[7]=a);n&c&&(e[8]=null==e[8]?t[8]:br(e[8],t[8]));null==e[9]&&(e[9]=t[9]);e[0]=t[0],e[1]=i}(w,_),e=w[0],t=w[1],i=w[2],f=w[3],h=w[4],!(y=w[9]=w[9]===r?v?0:e.length:mr(w[9]-g,0))&&24&t&&(t&=-25),t&&1!=t)k=8==t||t==s?function(e,t,n){var i=Pi(e);return function o(){for(var s=arguments.length,u=Ee(s),a=s,c=ao(o);a--;)u[a]=arguments[a];var f=s<3&&u[0]!==c&&u[s-1]!==c?[]:ur(u,c);return(s-=f.length)<n?Vi(e,t,Fi,o.placeholder,r,u,f,r,r,n-s):At(this&&this!==ht&&this instanceof o?i:e,this,u)}}(e,t,y):t!=u&&33!=t||h.length?Fi.apply(r,w):function(e,t,r,n){var i=1&t,o=Pi(e);return function t(){for(var s=-1,u=arguments.length,a=-1,c=n.length,f=Ee(c+u),l=this&&this!==ht&&this instanceof t?o:e;++a<c;)f[a]=n[a];for(;u--;)f[a++]=arguments[++s];return At(l,i?r:this,f)}}(e,t,i,f);else var k=function(e,t,r){var n=1&t,i=Pi(e);return function t(){return(this&&this!==ht&&this instanceof t?i:e).apply(n?r:this,arguments)}}(e,t,i);return jo((_?ti:Co)(k,w),e,t)}function Qi(e,t,n,i){return e===r||Ks(e,Ue[n])&&!De.call(i,n)?t:e}function eo(e,t,n,i,o,s){return ru(e)&&ru(t)&&(s.set(t,e),Hn(e,t,r,eo,s),s.delete(t)),e}function to(e){return su(e)?r:e}function ro(e,t,n,i,o,s){var u=1&n,a=e.length,c=t.length;if(a!=c&&!(u&&c>a))return!1;var f=s.get(e),l=s.get(t);if(f&&l)return f==t&&l==e;var h=-1,p=!0,d=2&n?new Vr:r;for(s.set(e,t),s.set(t,e);++h<a;){var y=e[h],v=t[h];if(i)var g=u?i(v,y,h,t,e,s):i(y,v,h,e,t,s);if(g!==r){if(g)continue;p=!1;break}if(d){if(!Lt(t,(function(e,t){if(!Zt(d,t)&&(y===e||o(y,e,n,i,s)))return d.push(t)}))){p=!1;break}}else if(y!==v&&!o(y,v,n,i,s)){p=!1;break}}return s.delete(e),s.delete(t),p}function no(e){return Uo(To(e,r,Wo),e+"")}function io(e){return Sn(e,Ru,po)}function oo(e){return Sn(e,Uu,yo)}var so=Br?function(e){return Br.get(e)}:fa;function uo(e){for(var t=e.name+"",r=Nr[t],n=De.call(Nr,t)?r.length:0;n--;){var i=r[n],o=i.func;if(null==o||o==e)return i.name}return t}function ao(e){return(De.call(zr,"placeholder")?zr:e).placeholder}function co(){var e=zr.iteratee||sa;return e=e===sa?Ln:e,arguments.length?e(arguments[0],arguments[1]):e}function fo(e,t){var r,n,i=e.__data__;return("string"==(n=typeof(r=t))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==r:null===r)?i["string"==typeof t?"string":"hash"]:i.map}function lo(e){for(var t=Ru(e),r=t.length;r--;){var n=t[r],i=e[n];t[r]=[n,i,xo(i)]}return t}function ho(e,t){var n=function(e,t){return null==e?r:e[t]}(e,t);return jn(n)?n:r}var po=$t?function(e){return null==e?[]:(e=Te(e),Ot($t(e),(function(t){return Je.call(e,t)})))}:ga,yo=$t?function(e){for(var t=[];e;)Rt(t,po(e)),e=Ve(e);return t}:ga,vo=xn;function go(e,t,r){for(var n=-1,i=(t=_i(t,e)).length,o=!1;++n<i;){var s=Mo(t[n]);if(!(o=null!=e&&r(e,s)))break;e=e[s]}return o||++n!=i?o:!!(i=null==e?0:e.length)&&tu(i)&&_o(s,i)&&(qs(e)||$s(e))}function mo(e){return"function"!=typeof e.constructor||So(e)?{}:Fr(Ve(e))}function bo(e){return qs(e)||$s(e)||!!(tt&&e&&e[tt])}function _o(e,t){var r=typeof e;return!!(t=null==t?p:t)&&("number"==r||"symbol"!=r&&be.test(e))&&e>-1&&e%1==0&&e<t}function wo(e,t,r){if(!ru(r))return!1;var n=typeof t;return!!("number"==n?Vs(r)&&_o(t,r.length):"string"==n&&t in r)&&Ks(r[t],e)}function ko(e,t){if(qs(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!fu(e))||(te.test(e)||!ee.test(e)||null!=t&&e in Te(t))}function Eo(e){var t=uo(e),r=zr[t];if("function"!=typeof r||!(t in Gr.prototype))return!1;if(e===r)return!0;var n=so(r);return!!n&&e===n[0]}(Ar&&vo(new Ar(new ArrayBuffer(1)))!=U||Sr&&vo(new Sr)!=A||xr&&vo(xr.resolve())!=I||Ir&&vo(new Ir)!=O||Tr&&vo(new Tr)!=C)&&(vo=function(e){var t=xn(e),n=t==x?e.constructor:r,i=n?zo(n):"";if(i)switch(i){case Cr:return U;case Rr:return A;case Ur:return I;case jr:return O;case Lr:return C}return t});var Ao=je?Qs:ma;function So(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Ue)}function xo(e){return e==e&&!ru(e)}function Io(e,t){return function(n){return null!=n&&(n[e]===t&&(t!==r||e in Te(n)))}}function To(e,t,n){return t=mr(t===r?e.length-1:t,0),function(){for(var r=arguments,i=-1,o=mr(r.length-t,0),s=Ee(o);++i<o;)s[i]=r[t+i];i=-1;for(var u=Ee(t+1);++i<t;)u[i]=r[i];return u[t]=n(s),At(e,this,u)}}function Oo(e,t){return t.length<2?e:An(e,ii(t,0,-1))}function Bo(e,t){for(var n=e.length,i=br(t.length,n),o=Bi(e);i--;){var s=t[i];e[i]=_o(s,n)?o[s]:r}return e}function No(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var Co=Lo(ti),Ro=vt||function(e,t){return ht.setTimeout(e,t)},Uo=Lo(ri);function jo(e,t,r){var n=t+"";return Uo(e,function(e,t){var r=t.length;if(!r)return e;var n=r-1;return t[n]=(r>1?"& ":"")+t[n],t=t.join(r>2?", ":" "),e.replace(ae,"{\n/* [wrapped with "+t+"] */\n")}(n,function(e,t){return xt(v,(function(r){var n="_."+r[0];t&r[1]&&!Bt(e,n)&&e.push(n)})),e.sort()}(function(e){var t=e.match(ce);return t?t[1].split(fe):[]}(n),r)))}function Lo(e){var t=0,n=0;return function(){var i=_r(),o=16-(i-n);if(n=i,o>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(r,arguments)}}function Do(e,t){var n=-1,i=e.length,o=i-1;for(t=t===r?i:t;++n<t;){var s=Yn(n,o),u=e[s];e[s]=e[n],e[n]=u}return e.length=t,e}var Po=function(e){var t=Ls(e,(function(e){return 500===r.size&&r.clear(),e})),r=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(re,(function(e,r,n,i){t.push(n?i.replace(he,"$1"):r||e)})),t}));function Mo(e){if("string"==typeof e||fu(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function zo(e){if(null!=e){try{return Le.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function Fo(e){if(e instanceof Gr)return e.clone();var t=new Hr(e.__wrapped__,e.__chain__);return t.__actions__=Bi(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var Ko=Zn((function(e,t){return Ys(e)?hn(e,mn(t,1,Ys,!0)):[]})),Ho=Zn((function(e,t){var n=Xo(t);return Ys(n)&&(n=r),Ys(e)?hn(e,mn(t,1,Ys,!0),co(n,2)):[]})),Go=Zn((function(e,t){var n=Xo(t);return Ys(n)&&(n=r),Ys(e)?hn(e,mn(t,1,Ys,!0),r,n):[]}));function $o(e,t,r){var n=null==e?0:e.length;if(!n)return-1;var i=null==r?0:vu(r);return i<0&&(i=mr(n+i,0)),Mt(e,co(t,3),i)}function qo(e,t,n){var i=null==e?0:e.length;if(!i)return-1;var o=i-1;return n!==r&&(o=vu(n),o=n<0?mr(i+o,0):br(o,i-1)),Mt(e,co(t,3),o,!0)}function Wo(e){return(null==e?0:e.length)?mn(e,1):[]}function Vo(e){return e&&e.length?e[0]:r}var Yo=Zn((function(e){var t=Ct(e,mi);return t.length&&t[0]===e[0]?Bn(t):[]})),Jo=Zn((function(e){var t=Xo(e),n=Ct(e,mi);return t===Xo(n)?t=r:n.pop(),n.length&&n[0]===e[0]?Bn(n,co(t,2)):[]})),Zo=Zn((function(e){var t=Xo(e),n=Ct(e,mi);return(t="function"==typeof t?t:r)&&n.pop(),n.length&&n[0]===e[0]?Bn(n,r,t):[]}));function Xo(e){var t=null==e?0:e.length;return t?e[t-1]:r}var Qo=Zn(es);function es(e,t){return e&&e.length&&t&&t.length?Wn(e,t):e}var ts=no((function(e,t){var r=null==e?0:e.length,n=un(e,t);return Vn(e,Ct(t,(function(e){return _o(e,r)?+e:e})).sort(Ii)),n}));function rs(e){return null==e?e:Er.call(e)}var ns=Zn((function(e){return li(mn(e,1,Ys,!0))})),is=Zn((function(e){var t=Xo(e);return Ys(t)&&(t=r),li(mn(e,1,Ys,!0),co(t,2))})),os=Zn((function(e){var t=Xo(e);return t="function"==typeof t?t:r,li(mn(e,1,Ys,!0),r,t)}));function ss(e){if(!e||!e.length)return[];var t=0;return e=Ot(e,(function(e){if(Ys(e))return t=mr(e.length,t),!0})),Vt(t,(function(t){return Ct(e,Gt(t))}))}function us(e,t){if(!e||!e.length)return[];var n=ss(e);return null==t?n:Ct(n,(function(e){return At(t,r,e)}))}var as=Zn((function(e,t){return Ys(e)?hn(e,t):[]})),cs=Zn((function(e){return vi(Ot(e,Ys))})),fs=Zn((function(e){var t=Xo(e);return Ys(t)&&(t=r),vi(Ot(e,Ys),co(t,2))})),ls=Zn((function(e){var t=Xo(e);return t="function"==typeof t?t:r,vi(Ot(e,Ys),r,t)})),hs=Zn(ss);var ps=Zn((function(e){var t=e.length,n=t>1?e[t-1]:r;return n="function"==typeof n?(e.pop(),n):r,us(e,n)}));function ds(e){var t=zr(e);return t.__chain__=!0,t}function ys(e,t){return t(e)}var vs=no((function(e){var t=e.length,n=t?e[0]:0,i=this.__wrapped__,o=function(t){return un(t,e)};return!(t>1||this.__actions__.length)&&i instanceof Gr&&_o(n)?((i=i.slice(n,+n+(t?1:0))).__actions__.push({func:ys,args:[o],thisArg:r}),new Hr(i,this.__chain__).thru((function(e){return t&&!e.length&&e.push(r),e}))):this.thru(o)}));var gs=Ci((function(e,t,r){De.call(e,r)?++e[r]:sn(e,r,1)}));var ms=Mi($o),bs=Mi(qo);function _s(e,t){return(qs(e)?xt:pn)(e,co(t,3))}function ws(e,t){return(qs(e)?It:dn)(e,co(t,3))}var ks=Ci((function(e,t,r){De.call(e,r)?e[r].push(t):sn(e,r,[t])}));var Es=Zn((function(e,t,r){var n=-1,i="function"==typeof t,o=Vs(e)?Ee(e.length):[];return pn(e,(function(e){o[++n]=i?At(t,e,r):Nn(e,t,r)})),o})),As=Ci((function(e,t,r){sn(e,r,t)}));function Ss(e,t){return(qs(e)?Ct:zn)(e,co(t,3))}var xs=Ci((function(e,t,r){e[r?0:1].push(t)}),(function(){return[[],[]]}));var Is=Zn((function(e,t){if(null==e)return[];var r=t.length;return r>1&&wo(e,t[0],t[1])?t=[]:r>2&&wo(t[0],t[1],t[2])&&(t=[t[0]]),$n(e,mn(t,1),[])})),Ts=dt||function(){return ht.Date.now()};function Os(e,t,n){return t=n?r:t,t=e&&null==t?e.length:t,Xi(e,c,r,r,r,r,t)}function Bs(e,t){var i;if("function"!=typeof t)throw new Ne(n);return e=vu(e),function(){return--e>0&&(i=t.apply(this,arguments)),e<=1&&(t=r),i}}var Ns=Zn((function(e,t,r){var n=1;if(r.length){var i=ur(r,ao(Ns));n|=u}return Xi(e,n,t,r,i)})),Cs=Zn((function(e,t,r){var n=3;if(r.length){var i=ur(r,ao(Cs));n|=u}return Xi(t,n,e,r,i)}));function Rs(e,t,i){var o,s,u,a,c,f,l=0,h=!1,p=!1,d=!0;if("function"!=typeof e)throw new Ne(n);function y(t){var n=o,i=s;return o=s=r,l=t,a=e.apply(i,n)}function v(e){return l=e,c=Ro(m,t),h?y(e):a}function g(e){var n=e-f;return f===r||n>=t||n<0||p&&e-l>=u}function m(){var e=Ts();if(g(e))return b(e);c=Ro(m,function(e){var r=t-(e-f);return p?br(r,u-(e-l)):r}(e))}function b(e){return c=r,d&&o?y(e):(o=s=r,a)}function _(){var e=Ts(),n=g(e);if(o=arguments,s=this,f=e,n){if(c===r)return v(f);if(p)return Ei(c),c=Ro(m,t),y(f)}return c===r&&(c=Ro(m,t)),a}return t=mu(t)||0,ru(i)&&(h=!!i.leading,u=(p="maxWait"in i)?mr(mu(i.maxWait)||0,t):u,d="trailing"in i?!!i.trailing:d),_.cancel=function(){c!==r&&Ei(c),l=0,o=f=s=c=r},_.flush=function(){return c===r?a:b(Ts())},_}var Us=Zn((function(e,t){return ln(e,1,t)})),js=Zn((function(e,t,r){return ln(e,mu(t)||0,r)}));function Ls(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new Ne(n);var r=function(){var n=arguments,i=t?t.apply(this,n):n[0],o=r.cache;if(o.has(i))return o.get(i);var s=e.apply(this,n);return r.cache=o.set(i,s)||o,s};return r.cache=new(Ls.Cache||Wr),r}function Ds(e){if("function"!=typeof e)throw new Ne(n);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}Ls.Cache=Wr;var Ps=wi((function(e,t){var r=(t=1==t.length&&qs(t[0])?Ct(t[0],Yt(co())):Ct(mn(t,1),Yt(co()))).length;return Zn((function(n){for(var i=-1,o=br(n.length,r);++i<o;)n[i]=t[i].call(this,n[i]);return At(e,this,n)}))})),Ms=Zn((function(e,t){var n=ur(t,ao(Ms));return Xi(e,u,r,t,n)})),zs=Zn((function(e,t){var n=ur(t,ao(zs));return Xi(e,a,r,t,n)})),Fs=no((function(e,t){return Xi(e,l,r,r,r,t)}));function Ks(e,t){return e===t||e!=e&&t!=t}var Hs=Wi(In),Gs=Wi((function(e,t){return e>=t})),$s=Cn(function(){return arguments}())?Cn:function(e){return nu(e)&&De.call(e,"callee")&&!Je.call(e,"callee")},qs=Ee.isArray,Ws=mt?Yt(mt):function(e){return nu(e)&&xn(e)==R};function Vs(e){return null!=e&&tu(e.length)&&!Qs(e)}function Ys(e){return nu(e)&&Vs(e)}var Js=dr||ma,Zs=bt?Yt(bt):function(e){return nu(e)&&xn(e)==_};function Xs(e){if(!nu(e))return!1;var t=xn(e);return t==w||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!su(e)}function Qs(e){if(!ru(e))return!1;var t=xn(e);return t==k||t==E||"[object AsyncFunction]"==t||"[object Proxy]"==t}function eu(e){return"number"==typeof e&&e==vu(e)}function tu(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=p}function ru(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function nu(e){return null!=e&&"object"==typeof e}var iu=_t?Yt(_t):function(e){return nu(e)&&vo(e)==A};function ou(e){return"number"==typeof e||nu(e)&&xn(e)==S}function su(e){if(!nu(e)||xn(e)!=x)return!1;var t=Ve(e);if(null===t)return!0;var r=De.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&Le.call(r)==Fe}var uu=wt?Yt(wt):function(e){return nu(e)&&xn(e)==T};var au=kt?Yt(kt):function(e){return nu(e)&&vo(e)==O};function cu(e){return"string"==typeof e||!qs(e)&&nu(e)&&xn(e)==B}function fu(e){return"symbol"==typeof e||nu(e)&&xn(e)==N}var lu=Et?Yt(Et):function(e){return nu(e)&&tu(e.length)&&!!ot[xn(e)]};var hu=Wi(Mn),pu=Wi((function(e,t){return e<=t}));function du(e){if(!e)return[];if(Vs(e))return cu(e)?lr(e):Bi(e);if(ut&&e[ut])return function(e){for(var t,r=[];!(t=e.next()).done;)r.push(t.value);return r}(e[ut]());var t=vo(e);return(t==A?or:t==O?ar:Ku)(e)}function yu(e){return e?(e=mu(e))===h||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}function vu(e){var t=yu(e),r=t%1;return t==t?r?t-r:t:0}function gu(e){return e?an(vu(e),0,y):0}function mu(e){if("number"==typeof e)return e;if(fu(e))return d;if(ru(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=ru(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(oe,"");var r=ve.test(e);return r||me.test(e)?ct(e.slice(2),r?2:8):ye.test(e)?d:+e}function bu(e){return Ni(e,Uu(e))}function _u(e){return null==e?"":fi(e)}var wu=Ri((function(e,t){if(So(t)||Vs(t))Ni(t,Ru(t),e);else for(var r in t)De.call(t,r)&&tn(e,r,t[r])})),ku=Ri((function(e,t){Ni(t,Uu(t),e)})),Eu=Ri((function(e,t,r,n){Ni(t,Uu(t),e,n)})),Au=Ri((function(e,t,r,n){Ni(t,Ru(t),e,n)})),Su=no(un);var xu=Zn((function(e,t){e=Te(e);var n=-1,i=t.length,o=i>2?t[2]:r;for(o&&wo(t[0],t[1],o)&&(i=1);++n<i;)for(var s=t[n],u=Uu(s),a=-1,c=u.length;++a<c;){var f=u[a],l=e[f];(l===r||Ks(l,Ue[f])&&!De.call(e,f))&&(e[f]=s[f])}return e})),Iu=Zn((function(e){return e.push(r,eo),At(Lu,r,e)}));function Tu(e,t,n){var i=null==e?r:An(e,t);return i===r?n:i}function Ou(e,t){return null!=e&&go(e,t,On)}var Bu=Ki((function(e,t,r){null!=t&&"function"!=typeof t.toString&&(t=ze.call(t)),e[t]=r}),ra(oa)),Nu=Ki((function(e,t,r){null!=t&&"function"!=typeof t.toString&&(t=ze.call(t)),De.call(e,t)?e[t].push(r):e[t]=[r]}),co),Cu=Zn(Nn);function Ru(e){return Vs(e)?Jr(e):Dn(e)}function Uu(e){return Vs(e)?Jr(e,!0):Pn(e)}var ju=Ri((function(e,t,r){Hn(e,t,r)})),Lu=Ri((function(e,t,r,n){Hn(e,t,r,n)})),Du=no((function(e,t){var r={};if(null==e)return r;var n=!1;t=Ct(t,(function(t){return t=_i(t,e),n||(n=t.length>1),t})),Ni(e,oo(e),r),n&&(r=cn(r,7,to));for(var i=t.length;i--;)hi(r,t[i]);return r}));var Pu=no((function(e,t){return null==e?{}:function(e,t){return qn(e,t,(function(t,r){return Ou(e,r)}))}(e,t)}));function Mu(e,t){if(null==e)return{};var r=Ct(oo(e),(function(e){return[e]}));return t=co(t),qn(e,r,(function(e,r){return t(e,r[0])}))}var zu=Zi(Ru),Fu=Zi(Uu);function Ku(e){return null==e?[]:Jt(e,Ru(e))}var Hu=Di((function(e,t,r){return t=t.toLowerCase(),e+(r?Gu(t):t)}));function Gu(e){return Xu(_u(e).toLowerCase())}function $u(e){return(e=_u(e))&&e.replace(_e,tr).replace(Xe,"")}var qu=Di((function(e,t,r){return e+(r?"-":"")+t.toLowerCase()})),Wu=Di((function(e,t,r){return e+(r?" ":"")+t.toLowerCase()})),Vu=Li("toLowerCase");var Yu=Di((function(e,t,r){return e+(r?"_":"")+t.toLowerCase()}));var Ju=Di((function(e,t,r){return e+(r?" ":"")+Xu(t)}));var Zu=Di((function(e,t,r){return e+(r?" ":"")+t.toUpperCase()})),Xu=Li("toUpperCase");function Qu(e,t,n){return e=_u(e),(t=n?r:t)===r?function(e){return rt.test(e)}(e)?function(e){return e.match(et)||[]}(e):function(e){return e.match(le)||[]}(e):e.match(t)||[]}var ea=Zn((function(e,t){try{return At(e,r,t)}catch(e){return Xs(e)?e:new Se(e)}})),ta=no((function(e,t){return xt(t,(function(t){t=Mo(t),sn(e,t,Ns(e[t],e))})),e}));function ra(e){return function(){return e}}var na=zi(),ia=zi(!0);function oa(e){return e}function sa(e){return Ln("function"==typeof e?e:cn(e,1))}var ua=Zn((function(e,t){return function(r){return Nn(r,e,t)}})),aa=Zn((function(e,t){return function(r){return Nn(e,r,t)}}));function ca(e,t,r){var n=Ru(t),i=En(t,n);null!=r||ru(t)&&(i.length||!n.length)||(r=t,t=e,e=this,i=En(t,Ru(t)));var o=!(ru(r)&&"chain"in r&&!r.chain),s=Qs(e);return xt(i,(function(r){var n=t[r];e[r]=n,s&&(e.prototype[r]=function(){var t=this.__chain__;if(o||t){var r=e(this.__wrapped__),i=r.__actions__=Bi(this.__actions__);return i.push({func:n,args:arguments,thisArg:e}),r.__chain__=t,r}return n.apply(e,Rt([this.value()],arguments))})})),e}function fa(){}var la=Gi(Ct),ha=Gi(Tt),pa=Gi(Lt);function da(e){return ko(e)?Gt(Mo(e)):function(e){return function(t){return An(t,e)}}(e)}var ya=qi(),va=qi(!0);function ga(){return[]}function ma(){return!1}var ba=Hi((function(e,t){return e+t}),0),_a=Yi("ceil"),wa=Hi((function(e,t){return e/t}),1),ka=Yi("floor");var Ea,Aa=Hi((function(e,t){return e*t}),1),Sa=Yi("round"),xa=Hi((function(e,t){return e-t}),0);return zr.after=function(e,t){if("function"!=typeof t)throw new Ne(n);return e=vu(e),function(){if(--e<1)return t.apply(this,arguments)}},zr.ary=Os,zr.assign=wu,zr.assignIn=ku,zr.assignInWith=Eu,zr.assignWith=Au,zr.at=Su,zr.before=Bs,zr.bind=Ns,zr.bindAll=ta,zr.bindKey=Cs,zr.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return qs(e)?e:[e]},zr.chain=ds,zr.chunk=function(e,t,n){t=(n?wo(e,t,n):t===r)?1:mr(vu(t),0);var i=null==e?0:e.length;if(!i||t<1)return[];for(var o=0,s=0,u=Ee(gt(i/t));o<i;)u[s++]=ii(e,o,o+=t);return u},zr.compact=function(e){for(var t=-1,r=null==e?0:e.length,n=0,i=[];++t<r;){var o=e[t];o&&(i[n++]=o)}return i},zr.concat=function(){var e=arguments.length;if(!e)return[];for(var t=Ee(e-1),r=arguments[0],n=e;n--;)t[n-1]=arguments[n];return Rt(qs(r)?Bi(r):[r],mn(t,1))},zr.cond=function(e){var t=null==e?0:e.length,r=co();return e=t?Ct(e,(function(e){if("function"!=typeof e[1])throw new Ne(n);return[r(e[0]),e[1]]})):[],Zn((function(r){for(var n=-1;++n<t;){var i=e[n];if(At(i[0],this,r))return At(i[1],this,r)}}))},zr.conforms=function(e){return function(e){var t=Ru(e);return function(r){return fn(r,e,t)}}(cn(e,1))},zr.constant=ra,zr.countBy=gs,zr.create=function(e,t){var r=Fr(e);return null==t?r:on(r,t)},zr.curry=function e(t,n,i){var o=Xi(t,8,r,r,r,r,r,n=i?r:n);return o.placeholder=e.placeholder,o},zr.curryRight=function e(t,n,i){var o=Xi(t,s,r,r,r,r,r,n=i?r:n);return o.placeholder=e.placeholder,o},zr.debounce=Rs,zr.defaults=xu,zr.defaultsDeep=Iu,zr.defer=Us,zr.delay=js,zr.difference=Ko,zr.differenceBy=Ho,zr.differenceWith=Go,zr.drop=function(e,t,n){var i=null==e?0:e.length;return i?ii(e,(t=n||t===r?1:vu(t))<0?0:t,i):[]},zr.dropRight=function(e,t,n){var i=null==e?0:e.length;return i?ii(e,0,(t=i-(t=n||t===r?1:vu(t)))<0?0:t):[]},zr.dropRightWhile=function(e,t){return e&&e.length?di(e,co(t,3),!0,!0):[]},zr.dropWhile=function(e,t){return e&&e.length?di(e,co(t,3),!0):[]},zr.fill=function(e,t,n,i){var o=null==e?0:e.length;return o?(n&&"number"!=typeof n&&wo(e,t,n)&&(n=0,i=o),function(e,t,n,i){var o=e.length;for((n=vu(n))<0&&(n=-n>o?0:o+n),(i=i===r||i>o?o:vu(i))<0&&(i+=o),i=n>i?0:gu(i);n<i;)e[n++]=t;return e}(e,t,n,i)):[]},zr.filter=function(e,t){return(qs(e)?Ot:gn)(e,co(t,3))},zr.flatMap=function(e,t){return mn(Ss(e,t),1)},zr.flatMapDeep=function(e,t){return mn(Ss(e,t),h)},zr.flatMapDepth=function(e,t,n){return n=n===r?1:vu(n),mn(Ss(e,t),n)},zr.flatten=Wo,zr.flattenDeep=function(e){return(null==e?0:e.length)?mn(e,h):[]},zr.flattenDepth=function(e,t){return(null==e?0:e.length)?mn(e,t=t===r?1:vu(t)):[]},zr.flip=function(e){return Xi(e,512)},zr.flow=na,zr.flowRight=ia,zr.fromPairs=function(e){for(var t=-1,r=null==e?0:e.length,n={};++t<r;){var i=e[t];n[i[0]]=i[1]}return n},zr.functions=function(e){return null==e?[]:En(e,Ru(e))},zr.functionsIn=function(e){return null==e?[]:En(e,Uu(e))},zr.groupBy=ks,zr.initial=function(e){return(null==e?0:e.length)?ii(e,0,-1):[]},zr.intersection=Yo,zr.intersectionBy=Jo,zr.intersectionWith=Zo,zr.invert=Bu,zr.invertBy=Nu,zr.invokeMap=Es,zr.iteratee=sa,zr.keyBy=As,zr.keys=Ru,zr.keysIn=Uu,zr.map=Ss,zr.mapKeys=function(e,t){var r={};return t=co(t,3),wn(e,(function(e,n,i){sn(r,t(e,n,i),e)})),r},zr.mapValues=function(e,t){var r={};return t=co(t,3),wn(e,(function(e,n,i){sn(r,n,t(e,n,i))})),r},zr.matches=function(e){return Fn(cn(e,1))},zr.matchesProperty=function(e,t){return Kn(e,cn(t,1))},zr.memoize=Ls,zr.merge=ju,zr.mergeWith=Lu,zr.method=ua,zr.methodOf=aa,zr.mixin=ca,zr.negate=Ds,zr.nthArg=function(e){return e=vu(e),Zn((function(t){return Gn(t,e)}))},zr.omit=Du,zr.omitBy=function(e,t){return Mu(e,Ds(co(t)))},zr.once=function(e){return Bs(2,e)},zr.orderBy=function(e,t,n,i){return null==e?[]:(qs(t)||(t=null==t?[]:[t]),qs(n=i?r:n)||(n=null==n?[]:[n]),$n(e,t,n))},zr.over=la,zr.overArgs=Ps,zr.overEvery=ha,zr.overSome=pa,zr.partial=Ms,zr.partialRight=zs,zr.partition=xs,zr.pick=Pu,zr.pickBy=Mu,zr.property=da,zr.propertyOf=function(e){return function(t){return null==e?r:An(e,t)}},zr.pull=Qo,zr.pullAll=es,zr.pullAllBy=function(e,t,r){return e&&e.length&&t&&t.length?Wn(e,t,co(r,2)):e},zr.pullAllWith=function(e,t,n){return e&&e.length&&t&&t.length?Wn(e,t,r,n):e},zr.pullAt=ts,zr.range=ya,zr.rangeRight=va,zr.rearg=Fs,zr.reject=function(e,t){return(qs(e)?Ot:gn)(e,Ds(co(t,3)))},zr.remove=function(e,t){var r=[];if(!e||!e.length)return r;var n=-1,i=[],o=e.length;for(t=co(t,3);++n<o;){var s=e[n];t(s,n,e)&&(r.push(s),i.push(n))}return Vn(e,i),r},zr.rest=function(e,t){if("function"!=typeof e)throw new Ne(n);return Zn(e,t=t===r?t:vu(t))},zr.reverse=rs,zr.sampleSize=function(e,t,n){return t=(n?wo(e,t,n):t===r)?1:vu(t),(qs(e)?Xr:Qn)(e,t)},zr.set=function(e,t,r){return null==e?e:ei(e,t,r)},zr.setWith=function(e,t,n,i){return i="function"==typeof i?i:r,null==e?e:ei(e,t,n,i)},zr.shuffle=function(e){return(qs(e)?Qr:ni)(e)},zr.slice=function(e,t,n){var i=null==e?0:e.length;return i?(n&&"number"!=typeof n&&wo(e,t,n)?(t=0,n=i):(t=null==t?0:vu(t),n=n===r?i:vu(n)),ii(e,t,n)):[]},zr.sortBy=Is,zr.sortedUniq=function(e){return e&&e.length?ai(e):[]},zr.sortedUniqBy=function(e,t){return e&&e.length?ai(e,co(t,2)):[]},zr.split=function(e,t,n){return n&&"number"!=typeof n&&wo(e,t,n)&&(t=n=r),(n=n===r?y:n>>>0)?(e=_u(e))&&("string"==typeof t||null!=t&&!uu(t))&&!(t=fi(t))&&ir(e)?ki(lr(e),0,n):e.split(t,n):[]},zr.spread=function(e,t){if("function"!=typeof e)throw new Ne(n);return t=null==t?0:mr(vu(t),0),Zn((function(r){var n=r[t],i=ki(r,0,t);return n&&Rt(i,n),At(e,this,i)}))},zr.tail=function(e){var t=null==e?0:e.length;return t?ii(e,1,t):[]},zr.take=function(e,t,n){return e&&e.length?ii(e,0,(t=n||t===r?1:vu(t))<0?0:t):[]},zr.takeRight=function(e,t,n){var i=null==e?0:e.length;return i?ii(e,(t=i-(t=n||t===r?1:vu(t)))<0?0:t,i):[]},zr.takeRightWhile=function(e,t){return e&&e.length?di(e,co(t,3),!1,!0):[]},zr.takeWhile=function(e,t){return e&&e.length?di(e,co(t,3)):[]},zr.tap=function(e,t){return t(e),e},zr.throttle=function(e,t,r){var i=!0,o=!0;if("function"!=typeof e)throw new Ne(n);return ru(r)&&(i="leading"in r?!!r.leading:i,o="trailing"in r?!!r.trailing:o),Rs(e,t,{leading:i,maxWait:t,trailing:o})},zr.thru=ys,zr.toArray=du,zr.toPairs=zu,zr.toPairsIn=Fu,zr.toPath=function(e){return qs(e)?Ct(e,Mo):fu(e)?[e]:Bi(Po(_u(e)))},zr.toPlainObject=bu,zr.transform=function(e,t,r){var n=qs(e),i=n||Js(e)||lu(e);if(t=co(t,4),null==r){var o=e&&e.constructor;r=i?n?new o:[]:ru(e)&&Qs(o)?Fr(Ve(e)):{}}return(i?xt:wn)(e,(function(e,n,i){return t(r,e,n,i)})),r},zr.unary=function(e){return Os(e,1)},zr.union=ns,zr.unionBy=is,zr.unionWith=os,zr.uniq=function(e){return e&&e.length?li(e):[]},zr.uniqBy=function(e,t){return e&&e.length?li(e,co(t,2)):[]},zr.uniqWith=function(e,t){return t="function"==typeof t?t:r,e&&e.length?li(e,r,t):[]},zr.unset=function(e,t){return null==e||hi(e,t)},zr.unzip=ss,zr.unzipWith=us,zr.update=function(e,t,r){return null==e?e:pi(e,t,bi(r))},zr.updateWith=function(e,t,n,i){return i="function"==typeof i?i:r,null==e?e:pi(e,t,bi(n),i)},zr.values=Ku,zr.valuesIn=function(e){return null==e?[]:Jt(e,Uu(e))},zr.without=as,zr.words=Qu,zr.wrap=function(e,t){return Ms(bi(t),e)},zr.xor=cs,zr.xorBy=fs,zr.xorWith=ls,zr.zip=hs,zr.zipObject=function(e,t){return gi(e||[],t||[],tn)},zr.zipObjectDeep=function(e,t){return gi(e||[],t||[],ei)},zr.zipWith=ps,zr.entries=zu,zr.entriesIn=Fu,zr.extend=ku,zr.extendWith=Eu,ca(zr,zr),zr.add=ba,zr.attempt=ea,zr.camelCase=Hu,zr.capitalize=Gu,zr.ceil=_a,zr.clamp=function(e,t,n){return n===r&&(n=t,t=r),n!==r&&(n=(n=mu(n))==n?n:0),t!==r&&(t=(t=mu(t))==t?t:0),an(mu(e),t,n)},zr.clone=function(e){return cn(e,4)},zr.cloneDeep=function(e){return cn(e,5)},zr.cloneDeepWith=function(e,t){return cn(e,5,t="function"==typeof t?t:r)},zr.cloneWith=function(e,t){return cn(e,4,t="function"==typeof t?t:r)},zr.conformsTo=function(e,t){return null==t||fn(e,t,Ru(t))},zr.deburr=$u,zr.defaultTo=function(e,t){return null==e||e!=e?t:e},zr.divide=wa,zr.endsWith=function(e,t,n){e=_u(e),t=fi(t);var i=e.length,o=n=n===r?i:an(vu(n),0,i);return(n-=t.length)>=0&&e.slice(n,o)==t},zr.eq=Ks,zr.escape=function(e){return(e=_u(e))&&J.test(e)?e.replace(V,rr):e},zr.escapeRegExp=function(e){return(e=_u(e))&&ie.test(e)?e.replace(ne,"\\$&"):e},zr.every=function(e,t,n){var i=qs(e)?Tt:yn;return n&&wo(e,t,n)&&(t=r),i(e,co(t,3))},zr.find=ms,zr.findIndex=$o,zr.findKey=function(e,t){return Pt(e,co(t,3),wn)},zr.findLast=bs,zr.findLastIndex=qo,zr.findLastKey=function(e,t){return Pt(e,co(t,3),kn)},zr.floor=ka,zr.forEach=_s,zr.forEachRight=ws,zr.forIn=function(e,t){return null==e?e:bn(e,co(t,3),Uu)},zr.forInRight=function(e,t){return null==e?e:_n(e,co(t,3),Uu)},zr.forOwn=function(e,t){return e&&wn(e,co(t,3))},zr.forOwnRight=function(e,t){return e&&kn(e,co(t,3))},zr.get=Tu,zr.gt=Hs,zr.gte=Gs,zr.has=function(e,t){return null!=e&&go(e,t,Tn)},zr.hasIn=Ou,zr.head=Vo,zr.identity=oa,zr.includes=function(e,t,r,n){e=Vs(e)?e:Ku(e),r=r&&!n?vu(r):0;var i=e.length;return r<0&&(r=mr(i+r,0)),cu(e)?r<=i&&e.indexOf(t,r)>-1:!!i&&zt(e,t,r)>-1},zr.indexOf=function(e,t,r){var n=null==e?0:e.length;if(!n)return-1;var i=null==r?0:vu(r);return i<0&&(i=mr(n+i,0)),zt(e,t,i)},zr.inRange=function(e,t,n){return t=yu(t),n===r?(n=t,t=0):n=yu(n),function(e,t,r){return e>=br(t,r)&&e<mr(t,r)}(e=mu(e),t,n)},zr.invoke=Cu,zr.isArguments=$s,zr.isArray=qs,zr.isArrayBuffer=Ws,zr.isArrayLike=Vs,zr.isArrayLikeObject=Ys,zr.isBoolean=function(e){return!0===e||!1===e||nu(e)&&xn(e)==b},zr.isBuffer=Js,zr.isDate=Zs,zr.isElement=function(e){return nu(e)&&1===e.nodeType&&!su(e)},zr.isEmpty=function(e){if(null==e)return!0;if(Vs(e)&&(qs(e)||"string"==typeof e||"function"==typeof e.splice||Js(e)||lu(e)||$s(e)))return!e.length;var t=vo(e);if(t==A||t==O)return!e.size;if(So(e))return!Dn(e).length;for(var r in e)if(De.call(e,r))return!1;return!0},zr.isEqual=function(e,t){return Rn(e,t)},zr.isEqualWith=function(e,t,n){var i=(n="function"==typeof n?n:r)?n(e,t):r;return i===r?Rn(e,t,r,n):!!i},zr.isError=Xs,zr.isFinite=function(e){return"number"==typeof e&&yr(e)},zr.isFunction=Qs,zr.isInteger=eu,zr.isLength=tu,zr.isMap=iu,zr.isMatch=function(e,t){return e===t||Un(e,t,lo(t))},zr.isMatchWith=function(e,t,n){return n="function"==typeof n?n:r,Un(e,t,lo(t),n)},zr.isNaN=function(e){return ou(e)&&e!=+e},zr.isNative=function(e){if(Ao(e))throw new Se("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return jn(e)},zr.isNil=function(e){return null==e},zr.isNull=function(e){return null===e},zr.isNumber=ou,zr.isObject=ru,zr.isObjectLike=nu,zr.isPlainObject=su,zr.isRegExp=uu,zr.isSafeInteger=function(e){return eu(e)&&e>=-9007199254740991&&e<=p},zr.isSet=au,zr.isString=cu,zr.isSymbol=fu,zr.isTypedArray=lu,zr.isUndefined=function(e){return e===r},zr.isWeakMap=function(e){return nu(e)&&vo(e)==C},zr.isWeakSet=function(e){return nu(e)&&"[object WeakSet]"==xn(e)},zr.join=function(e,t){return null==e?"":vr.call(e,t)},zr.kebabCase=qu,zr.last=Xo,zr.lastIndexOf=function(e,t,n){var i=null==e?0:e.length;if(!i)return-1;var o=i;return n!==r&&(o=(o=vu(n))<0?mr(i+o,0):br(o,i-1)),t==t?function(e,t,r){for(var n=r+1;n--;)if(e[n]===t)return n;return n}(e,t,o):Mt(e,Kt,o,!0)},zr.lowerCase=Wu,zr.lowerFirst=Vu,zr.lt=hu,zr.lte=pu,zr.max=function(e){return e&&e.length?vn(e,oa,In):r},zr.maxBy=function(e,t){return e&&e.length?vn(e,co(t,2),In):r},zr.mean=function(e){return Ht(e,oa)},zr.meanBy=function(e,t){return Ht(e,co(t,2))},zr.min=function(e){return e&&e.length?vn(e,oa,Mn):r},zr.minBy=function(e,t){return e&&e.length?vn(e,co(t,2),Mn):r},zr.stubArray=ga,zr.stubFalse=ma,zr.stubObject=function(){return{}},zr.stubString=function(){return""},zr.stubTrue=function(){return!0},zr.multiply=Aa,zr.nth=function(e,t){return e&&e.length?Gn(e,vu(t)):r},zr.noConflict=function(){return ht._===this&&(ht._=Ke),this},zr.noop=fa,zr.now=Ts,zr.pad=function(e,t,r){e=_u(e);var n=(t=vu(t))?fr(e):0;if(!t||n>=t)return e;var i=(t-n)/2;return $i(Dt(i),r)+e+$i(gt(i),r)},zr.padEnd=function(e,t,r){e=_u(e);var n=(t=vu(t))?fr(e):0;return t&&n<t?e+$i(t-n,r):e},zr.padStart=function(e,t,r){e=_u(e);var n=(t=vu(t))?fr(e):0;return t&&n<t?$i(t-n,r)+e:e},zr.parseInt=function(e,t,r){return r||null==t?t=0:t&&(t=+t),wr(_u(e).replace(se,""),t||0)},zr.random=function(e,t,n){if(n&&"boolean"!=typeof n&&wo(e,t,n)&&(t=n=r),n===r&&("boolean"==typeof t?(n=t,t=r):"boolean"==typeof e&&(n=e,e=r)),e===r&&t===r?(e=0,t=1):(e=yu(e),t===r?(t=e,e=0):t=yu(t)),e>t){var i=e;e=t,t=i}if(n||e%1||t%1){var o=kr();return br(e+o*(t-e+at("1e-"+((o+"").length-1))),t)}return Yn(e,t)},zr.reduce=function(e,t,r){var n=qs(e)?Ut:qt,i=arguments.length<3;return n(e,co(t,4),r,i,pn)},zr.reduceRight=function(e,t,r){var n=qs(e)?jt:qt,i=arguments.length<3;return n(e,co(t,4),r,i,dn)},zr.repeat=function(e,t,n){return t=(n?wo(e,t,n):t===r)?1:vu(t),Jn(_u(e),t)},zr.replace=function(){var e=arguments,t=_u(e[0]);return e.length<3?t:t.replace(e[1],e[2])},zr.result=function(e,t,n){var i=-1,o=(t=_i(t,e)).length;for(o||(o=1,e=r);++i<o;){var s=null==e?r:e[Mo(t[i])];s===r&&(i=o,s=n),e=Qs(s)?s.call(e):s}return e},zr.round=Sa,zr.runInContext=e,zr.sample=function(e){return(qs(e)?Zr:Xn)(e)},zr.size=function(e){if(null==e)return 0;if(Vs(e))return cu(e)?fr(e):e.length;var t=vo(e);return t==A||t==O?e.size:Dn(e).length},zr.snakeCase=Yu,zr.some=function(e,t,n){var i=qs(e)?Lt:oi;return n&&wo(e,t,n)&&(t=r),i(e,co(t,3))},zr.sortedIndex=function(e,t){return si(e,t)},zr.sortedIndexBy=function(e,t,r){return ui(e,t,co(r,2))},zr.sortedIndexOf=function(e,t){var r=null==e?0:e.length;if(r){var n=si(e,t);if(n<r&&Ks(e[n],t))return n}return-1},zr.sortedLastIndex=function(e,t){return si(e,t,!0)},zr.sortedLastIndexBy=function(e,t,r){return ui(e,t,co(r,2),!0)},zr.sortedLastIndexOf=function(e,t){if(null==e?0:e.length){var r=si(e,t,!0)-1;if(Ks(e[r],t))return r}return-1},zr.startCase=Ju,zr.startsWith=function(e,t,r){return e=_u(e),r=null==r?0:an(vu(r),0,e.length),t=fi(t),e.slice(r,r+t.length)==t},zr.subtract=xa,zr.sum=function(e){return e&&e.length?Wt(e,oa):0},zr.sumBy=function(e,t){return e&&e.length?Wt(e,co(t,2)):0},zr.template=function(e,t,n){var i=zr.templateSettings;n&&wo(e,t,n)&&(t=r),e=_u(e),t=Eu({},t,i,Qi);var o,s,u=Eu({},t.imports,i.imports,Qi),a=Ru(u),c=Jt(u,a),f=0,l=t.interpolate||we,h="__p += '",p=Oe((t.escape||we).source+"|"+l.source+"|"+(l===Q?pe:we).source+"|"+(t.evaluate||we).source+"|$","g"),d="//# sourceURL="+(De.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++it+"]")+"\n";e.replace(p,(function(t,r,n,i,u,a){return n||(n=i),h+=e.slice(f,a).replace(ke,nr),r&&(o=!0,h+="' +\n__e("+r+") +\n'"),u&&(s=!0,h+="';\n"+u+";\n__p += '"),n&&(h+="' +\n((__t = ("+n+")) == null ? '' : __t) +\n'"),f=a+t.length,t})),h+="';\n";var y=De.call(t,"variable")&&t.variable;y||(h="with (obj) {\n"+h+"\n}\n"),h=(s?h.replace(G,""):h).replace($,"$1").replace(q,"$1;"),h="function("+(y||"obj")+") {\n"+(y?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(s?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+h+"return __p\n}";var v=ea((function(){return xe(a,d+"return "+h).apply(r,c)}));if(v.source=h,Xs(v))throw v;return v},zr.times=function(e,t){if((e=vu(e))<1||e>p)return[];var r=y,n=br(e,y);t=co(t),e-=y;for(var i=Vt(n,t);++r<e;)t(r);return i},zr.toFinite=yu,zr.toInteger=vu,zr.toLength=gu,zr.toLower=function(e){return _u(e).toLowerCase()},zr.toNumber=mu,zr.toSafeInteger=function(e){return e?an(vu(e),-9007199254740991,p):0===e?e:0},zr.toString=_u,zr.toUpper=function(e){return _u(e).toUpperCase()},zr.trim=function(e,t,n){if((e=_u(e))&&(n||t===r))return e.replace(oe,"");if(!e||!(t=fi(t)))return e;var i=lr(e),o=lr(t);return ki(i,Xt(i,o),Qt(i,o)+1).join("")},zr.trimEnd=function(e,t,n){if((e=_u(e))&&(n||t===r))return e.replace(ue,"");if(!e||!(t=fi(t)))return e;var i=lr(e);return ki(i,0,Qt(i,lr(t))+1).join("")},zr.trimStart=function(e,t,n){if((e=_u(e))&&(n||t===r))return e.replace(se,"");if(!e||!(t=fi(t)))return e;var i=lr(e);return ki(i,Xt(i,lr(t))).join("")},zr.truncate=function(e,t){var n=30,i="...";if(ru(t)){var o="separator"in t?t.separator:o;n="length"in t?vu(t.length):n,i="omission"in t?fi(t.omission):i}var s=(e=_u(e)).length;if(ir(e)){var u=lr(e);s=u.length}if(n>=s)return e;var a=n-fr(i);if(a<1)return i;var c=u?ki(u,0,a).join(""):e.slice(0,a);if(o===r)return c+i;if(u&&(a+=c.length-a),uu(o)){if(e.slice(a).search(o)){var f,l=c;for(o.global||(o=Oe(o.source,_u(de.exec(o))+"g")),o.lastIndex=0;f=o.exec(l);)var h=f.index;c=c.slice(0,h===r?a:h)}}else if(e.indexOf(fi(o),a)!=a){var p=c.lastIndexOf(o);p>-1&&(c=c.slice(0,p))}return c+i},zr.unescape=function(e){return(e=_u(e))&&Y.test(e)?e.replace(W,hr):e},zr.uniqueId=function(e){var t=++Pe;return _u(e)+t},zr.upperCase=Zu,zr.upperFirst=Xu,zr.each=_s,zr.eachRight=ws,zr.first=Vo,ca(zr,(Ea={},wn(zr,(function(e,t){De.call(zr.prototype,t)||(Ea[t]=e)})),Ea),{chain:!1}),zr.VERSION="4.17.20",xt(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(e){zr[e].placeholder=zr})),xt(["drop","take"],(function(e,t){Gr.prototype[e]=function(n){n=n===r?1:mr(vu(n),0);var i=this.__filtered__&&!t?new Gr(this):this.clone();return i.__filtered__?i.__takeCount__=br(n,i.__takeCount__):i.__views__.push({size:br(n,y),type:e+(i.__dir__<0?"Right":"")}),i},Gr.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}})),xt(["filter","map","takeWhile"],(function(e,t){var r=t+1,n=1==r||3==r;Gr.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:co(e,3),type:r}),t.__filtered__=t.__filtered__||n,t}})),xt(["head","last"],(function(e,t){var r="take"+(t?"Right":"");Gr.prototype[e]=function(){return this[r](1).value()[0]}})),xt(["initial","tail"],(function(e,t){var r="drop"+(t?"":"Right");Gr.prototype[e]=function(){return this.__filtered__?new Gr(this):this[r](1)}})),Gr.prototype.compact=function(){return this.filter(oa)},Gr.prototype.find=function(e){return this.filter(e).head()},Gr.prototype.findLast=function(e){return this.reverse().find(e)},Gr.prototype.invokeMap=Zn((function(e,t){return"function"==typeof e?new Gr(this):this.map((function(r){return Nn(r,e,t)}))})),Gr.prototype.reject=function(e){return this.filter(Ds(co(e)))},Gr.prototype.slice=function(e,t){e=vu(e);var n=this;return n.__filtered__&&(e>0||t<0)?new Gr(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==r&&(n=(t=vu(t))<0?n.dropRight(-t):n.take(t-e)),n)},Gr.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Gr.prototype.toArray=function(){return this.take(y)},wn(Gr.prototype,(function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),i=/^(?:head|last)$/.test(t),o=zr[i?"take"+("last"==t?"Right":""):t],s=i||/^find/.test(t);o&&(zr.prototype[t]=function(){var t=this.__wrapped__,u=i?[1]:arguments,a=t instanceof Gr,c=u[0],f=a||qs(t),l=function(e){var t=o.apply(zr,Rt([e],u));return i&&h?t[0]:t};f&&n&&"function"==typeof c&&1!=c.length&&(a=f=!1);var h=this.__chain__,p=!!this.__actions__.length,d=s&&!h,y=a&&!p;if(!s&&f){t=y?t:new Gr(this);var v=e.apply(t,u);return v.__actions__.push({func:ys,args:[l],thisArg:r}),new Hr(v,h)}return d&&y?e.apply(this,u):(v=this.thru(l),d?i?v.value()[0]:v.value():v)})})),xt(["pop","push","shift","sort","splice","unshift"],(function(e){var t=Ce[e],r=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",n=/^(?:pop|shift)$/.test(e);zr.prototype[e]=function(){var e=arguments;if(n&&!this.__chain__){var i=this.value();return t.apply(qs(i)?i:[],e)}return this[r]((function(r){return t.apply(qs(r)?r:[],e)}))}})),wn(Gr.prototype,(function(e,t){var r=zr[t];if(r){var n=r.name+"";De.call(Nr,n)||(Nr[n]=[]),Nr[n].push({name:t,func:r})}})),Nr[Fi(r,2).name]=[{name:"wrapper",func:r}],Gr.prototype.clone=function(){var e=new Gr(this.__wrapped__);return e.__actions__=Bi(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Bi(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Bi(this.__views__),e},Gr.prototype.reverse=function(){if(this.__filtered__){var e=new Gr(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},Gr.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,r=qs(e),n=t<0,i=r?e.length:0,o=function(e,t,r){var n=-1,i=r.length;for(;++n<i;){var o=r[n],s=o.size;switch(o.type){case"drop":e+=s;break;case"dropRight":t-=s;break;case"take":t=br(t,e+s);break;case"takeRight":e=mr(e,t-s)}}return{start:e,end:t}}(0,i,this.__views__),s=o.start,u=o.end,a=u-s,c=n?u:s-1,f=this.__iteratees__,l=f.length,h=0,p=br(a,this.__takeCount__);if(!r||!n&&i==a&&p==a)return yi(e,this.__actions__);var d=[];e:for(;a--&&h<p;){for(var y=-1,v=e[c+=t];++y<l;){var g=f[y],m=g.iteratee,b=g.type,_=m(v);if(2==b)v=_;else if(!_){if(1==b)continue e;break e}}d[h++]=v}return d},zr.prototype.at=vs,zr.prototype.chain=function(){return ds(this)},zr.prototype.commit=function(){return new Hr(this.value(),this.__chain__)},zr.prototype.next=function(){this.__values__===r&&(this.__values__=du(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?r:this.__values__[this.__index__++]}},zr.prototype.plant=function(e){for(var t,n=this;n instanceof Kr;){var i=Fo(n);i.__index__=0,i.__values__=r,t?o.__wrapped__=i:t=i;var o=i;n=n.__wrapped__}return o.__wrapped__=e,t},zr.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof Gr){var t=e;return this.__actions__.length&&(t=new Gr(this)),(t=t.reverse()).__actions__.push({func:ys,args:[rs],thisArg:r}),new Hr(t,this.__chain__)}return this.thru(rs)},zr.prototype.toJSON=zr.prototype.valueOf=zr.prototype.value=function(){return yi(this.__wrapped__,this.__actions__)},zr.prototype.first=zr.prototype.head,ut&&(zr.prototype[ut]=function(){return this}),zr}();dt?((dt.exports=pr)._=pr,pt._=pr):ht._=pr}).call(f)})),bp=f&&f.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),_p=f&&f.__decorate||function(e,t,r,n){var i,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var u=e.length-1;u>=0;u--)(i=e[u])&&(s=(o<3?i(s):o>3?i(t,r,s):i(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s},wp=f&&f.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},kp=f&&f.__param||function(e,t){return function(r,n){t(r,n,e)}},Ep=f&&f.__generator||function(e,t){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}},Ap=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},Sp=Ap(kh),xp=Ap(cp),Ip=function(){function e(){this._content=[]}return Object.defineProperty(e.prototype,"length",{get:function(){return this._content.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"content",{get:function(){return this._content},set:function(e){this._content=e},enumerable:!0,configurable:!0}),e.prototype.get=function(e){return this._content[e]},e.prototype.add=function(e){var t=mp.sortedIndexBy(this._content,e,(function(e){return e.frequency}));this._content.splice(t,0,e)},e.prototype.remove=function(e){this._content.splice(e,1)},e.prototype.popMin=function(){return this._content.shift()},e.prototype.indexOf=function(e){return this._content.findIndex((function(t){return t.value===e}))},e.prototype.clear=function(){this._content=[]},e}(),Tp=function(e){function t(t,r,n){var i=e.call(this)||this;return i._k=t,i._errorRate=r,i._accuracy=n,i._sketch=xp.default.create(r,n),i._heap=new Ip,i}return bp(t,e),t.prototype.add=function(e){this._sketch.update(e);var t=this._sketch.count(e);if(this._heap.length<this._k||t>=this._heap.get(0).frequency){var r=this._heap.indexOf(e);r>-1&&this._heap.remove(r),this._heap.add({value:e,frequency:t}),this._heap.length>this._k&&this._heap.popMin()}},t.prototype.clear=function(){this._sketch=xp.default.create(this._errorRate,this._accuracy),this._heap.clear()},t.prototype.values=function(){for(var e=[],t=this._heap.length-1;t>0;t--){var r=this._heap.get(t);e.push({value:r.value,frequency:r.frequency,rank:this._heap.length-t})}return e},t.prototype.iterator=function(){var e=this._heap;return function(){var t,r;return Ep(this,(function(n){switch(n.label){case 0:t=e.length-1,n.label=1;case 1:return t>0?[4,{value:(r=e.get(t)).value,frequency:r.frequency,rank:e.length-t}]:[3,4];case 2:n.sent(),n.label=3;case 3:return t--,[3,1];case 4:return[2]}}))}()},_p([jh.Field(),wp("design:type",Number)],t.prototype,"_k",void 0),_p([jh.Field(),wp("design:type",Number)],t.prototype,"_errorRate",void 0),_p([jh.Field(),wp("design:type",Number)],t.prototype,"_accuracy",void 0),_p([jh.Field(),wp("design:type",xp.default)],t.prototype,"_sketch",void 0),_p([jh.Field((function(e){return e.content}),(function(e){var t=new Ip;return t.content=e,t})),wp("design:type",Ip)],t.prototype,"_heap",void 0),t=_p([jh.AutoExportable("TopK",["_seed"]),kp(0,jh.Parameter("_k")),kp(1,jh.Parameter("_errorRate")),kp(2,jh.Parameter("_accuracy")),wp("design:paramtypes",[Number,Number,Number])],t)}(Sp.default),Op=Object.defineProperty({default:Tp},"__esModule",{value:!0}),Bp=f&&f.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Np=f&&f.__decorate||function(e,t,r,n){var i,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var u=e.length-1;u>=0;u--)(i=e[u])&&(s=(o<3?i(s):o>3?i(t,r,s):i(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s},Cp=f&&f.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},Rp=f&&f.__param||function(e,t){return function(r,n){t(r,n,e)}},Up=f&&f.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)s.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return s},jp=f&&f.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(Up(arguments[t]));return e},Lp=(f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}})(kh),Dp=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Bp(t,e),t}(Error);function Pp(e,t){return(t.a*e+t.b)%t.c}var Mp=function(e){function t(t,r){var n=e.call(this)||this;return n._nbHashes=t,n._hashFunctions=r,n._signature=sh.allocateArray(n._nbHashes,1/0),n}return Bp(t,e),Object.defineProperty(t.prototype,"nbHashes",{get:function(){return this._nbHashes},enumerable:!0,configurable:!0}),t.prototype.isEmpty=function(){return this._signature[0]===1/0},t.prototype.add=function(e){for(var t=0;t<this._nbHashes;t++)this._signature[t]=Math.min(this._signature[t],Pp(e,this._hashFunctions[t]))},t.prototype.bulkLoad=function(e){for(var t=this,r=function(r){var i=e.map((function(e){return Pp(e,t._hashFunctions[r])}));n._signature[r]=Math.min.apply(Math,jp([n._signature[r]],i))},n=this,i=0;i<this._nbHashes;i++)r(i)},t.prototype.compareWith=function(e){if(this.isEmpty()||e.isEmpty())throw new Dp("Cannot compute a Jaccard similairty with a MinHash that contains no values");return mp.intersection(this._signature,e._signature).length/this._nbHashes},Np([jh.Field(),Cp("design:type",Number)],t.prototype,"_nbHashes",void 0),Np([jh.Field(),Cp("design:type",Array)],t.prototype,"_hashFunctions",void 0),Np([jh.Field(),Cp("design:type",Array)],t.prototype,"_signature",void 0),t=Np([jh.AutoExportable("MinHash",["_seed"]),Rp(0,jh.Parameter("_nbHashes")),Rp(1,jh.Parameter("_hashFunctions")),Cp("design:paramtypes",[Number,Array])],t)}(Lp.default),zp=Object.defineProperty({MinHash:Mp},"__esModule",{value:!0});function Fp(e){if(2!==e&&e%2==0)return!1;for(var t=2;t<Math.sqrt(e);t++)if(e%t==0)return!1;return!0}var Kp=function(){function e(e,t){this._nbHashes=e,this._maxValue=t,this._hashFunctions=[];for(var r=function(e){for(var t=0;;){if(Fp(e+t))return e+t;t++}}(this._maxValue),n=0;n<this._nbHashes;n++){var i=mp.random(0,this._maxValue,!1),o=mp.random(0,this._maxValue,!1);this._hashFunctions.push({a:i,b:o,c:r})}}return e.prototype.create=function(){return new zp.MinHash(this._nbHashes,this._hashFunctions)},e}(),Hp=Object.defineProperty({default:Kp},"__esModule",{value:!0});var Gp=function(e,t){return e===t||e!=e&&t!=t},$p=1/0,qp=17976931348623157e292,Wp=NaN,Vp="[object Symbol]",Yp=/^\s+|\s+$/g,Jp=/^[-+]0x[0-9a-f]+$/i,Zp=/^0b[01]+$/i,Xp=/^0o[0-7]+$/i,Qp=parseInt;function ed(e){return e!=e}var td=Object.prototype.toString,rd=Math.max;function nd(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}var id=function(e,t,r){var n=e?e.length:0;if(!n)return-1;var i=null==r?0:function(e){var t=function(e){if(!e)return 0===e?e:0;if((e=function(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&td.call(e)==Vp}(e))return Wp;if(nd(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=nd(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(Yp,"");var r=Zp.test(e);return r||Xp.test(e)?Qp(e.slice(2),r?2:8):Jp.test(e)?Wp:+e}(e))===$p||e===-1/0){return(e<0?-1:1)*qp}return e==e?e:0}(e),r=t%1;return t==t?r?t-r:t:0}(r);return i<0&&(i=rd(n+i,0)),function(e,t,r){if(t!=t)return function(e,t,r,n){for(var i=e.length,o=r+(n?1:-1);n?o--:++o<i;)if(t(e[o],o,e))return o;return-1}(e,ed,r);for(var n=r-1,i=e.length;++n<i;)if(e[n]===t)return n;return-1}(e,t,i)},od=f&&f.__decorate||function(e,t,r,n){var i,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var u=e.length-1;u>=0;u--)(i=e[u])&&(s=(o<3?i(s):o>3?i(t,r,s):i(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s},sd=f&&f.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},ud=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},ad=f&&f.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t},cd=ud(Gp),fd=ud(id),ld=ad(sh),hd=jh,pd=function(){function e(e){this._elements=ld.allocateArray(e,null),this._size=e,this._length=0}var t;return t=e,Object.defineProperty(e.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"length",{get:function(){return this._length},enumerable:!0,configurable:!0}),e.prototype.isFree=function(){return this._length<this._size},e.prototype.nextEmptySlot=function(){return fd.default(this._elements,null)},e.prototype.at=function(e){return this._elements[e]},e.prototype.add=function(e){return!(null===e||!this.isFree())&&(this.set(this.nextEmptySlot(),e),this._length++,!0)},e.prototype.remove=function(e){var t=fd.default(this._elements,e);return!(t<=-1)&&(this.unset(t),!0)},e.prototype.has=function(e){return fd.default(this._elements,e)>-1},e.prototype.set=function(e,t){this._elements[e]=t},e.prototype.unset=function(e){this._elements[e]=null,this._length--},e.prototype.swapRandom=function(e,t){void 0===t&&(t=Math.random);var r=ld.randomInt(0,this._length-1,t),n=this._elements[r];return this._elements[r]=e,n},e.prototype.swap=function(e,t){var r=this._elements[e];return this._elements[e]=t,r},e.prototype.equals=function(e){return this._size===e.size&&this._length===e.length&&this._elements.every((function(t,r){return cd.default(e.at(r),t)}))},e=t=od([jh.Exportable({export:hd.cloneObject("Bucket","_size","_elements"),import:function(e){if(e.type,!("_elements"in e))throw new Error("Cannot create a Bucket from a JSON export which does not represent a bucket");var r=new t(e._size);return e._elements.forEach((function(e,t){null!==e&&(r._elements[t]=e,r._length++)})),r}}),sd("design:paramtypes",[Number])],e)}(),dd=Object.defineProperty({default:pd},"__esModule",{value:!0}),yd=f&&f.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),vd=f&&f.__decorate||function(e,t,r,n){var i,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var u=e.length-1;u>=0;u--)(i=e[u])&&(s=(o<3?i(s):o>3?i(t,r,s):i(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s},gd=f&&f.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},md=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},bd=md(kh),_d=md(dd);var wd=function(e){function t(t,r,n,i){void 0===i&&(i=500);var o=e.call(this)||this;return o._filter=sh.allocateArray(t,(function(){return new _d.default(n)})),o._size=t,o._bucketSize=n,o._fingerprintLength=r,o._length=0,o._maxKicks=i,o}var r;return yd(t,e),r=t,t.create=function(e,t,n,i){void 0===n&&(n=4),void 0===i&&(i=500);var o=function(e,t){var r=Math.ceil(Math.log2(1/t)+Math.log2(2*e));return Math.ceil(r/4)}(n,t),s=Math.ceil(e/n/.955);return new r(s,o,n,i)},t.from=function(e,t,n,i){void 0===n&&(n=4),void 0===i&&(i=500);var o=Array.from(e),s=r.create(o.length,t,n,i);return o.forEach((function(e){return s.add(e)})),s},Object.defineProperty(t.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fullSize",{get:function(){return this.size*this.bucketSize},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"length",{get:function(){return this._length},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fingerprintLength",{get:function(){return this._fingerprintLength},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bucketSize",{get:function(){return this._bucketSize},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxKicks",{get:function(){return this._maxKicks},enumerable:!0,configurable:!0}),t.prototype.add=function(e,t,r){void 0===t&&(t=!1),void 0===r&&(r=!1);var n=this._locations(e);if(this._filter[n.firstIndex].isFree())this._filter[n.firstIndex].add(n.fingerprint);else{if(!this._filter[n.secondIndex].isFree()){for(var i=this.random()<.5?n.firstIndex:n.secondIndex,o=n.fingerprint,s=[],u=0;u<this._maxKicks;u++){var a=sh.randomInt(0,this._filter[i].length-1,this.random),c=this._filter[i].at(a);s.push([i,a,c]),this._filter[i].set(a,o),o=c;var f=sh.hashAsInt(o,this.seed,64);if(i=Math.abs(i^Math.abs(f))%this._filter.length,this._filter[i].isFree())return this._filter[i].add(o),this._length++,!0}if(!r)for(var l=s.length-1;l>=0;l--){var h=s[l];this._filter[h[0]].set(h[1],h[2])}if(t)throw new Error('The Cuckoo Filter is full, cannot insert element "'+e+'"');return!1}this._filter[n.secondIndex].add(n.fingerprint)}return this._length++,!0},t.prototype.remove=function(e){var t=this._locations(e);return this._filter[t.firstIndex].has(t.fingerprint)?(this._filter[t.firstIndex].remove(t.fingerprint),this._length--,!0):!!this._filter[t.secondIndex].has(t.fingerprint)&&(this._filter[t.secondIndex].remove(t.fingerprint),this._length--,!0)},t.prototype.has=function(e){var t=this._locations(e);return this._filter[t.firstIndex].has(t.fingerprint)||this._filter[t.secondIndex].has(t.fingerprint)},t.prototype.rate=function(){var e=this._computeHashTableLoad(),t=this._fingerprintLength/e.load;return Math.pow(2,Math.log2(2*this._bucketSize)-e.load*t)},t.prototype._computeHashTableLoad=function(){var e=this._filter.length*this._bucketSize,t=this._filter.reduce((function(e,t){return e+t.length}),0);return{used:t,free:e-t,size:e,load:t/e}},t.prototype._locations=function(e){var t=sh.hashIntAndString(e,this.seed,16,64),r=t.int;if(this._fingerprintLength>t.string.length)throw new Error("The fingerprint length ("+this._fingerprintLength+") is higher than the hash length ("+t.string.length+"). Please reduce the fingerprint length or report if it is an unexpected behavior.");var n=t.string.substring(0,this._fingerprintLength),i=Math.abs(r),o=Math.abs(sh.hashAsInt(n,this.seed,64)),s=Math.abs(i^o);return{fingerprint:n,firstIndex:i%this._size,secondIndex:s%this._size}},t.prototype.equals=function(e){for(var t=0,r=!0;r&&t<this._filter.length;){var n=this._filter[t];e._filter[t].equals(n)||(r=!1),t++}return r},t=r=vd([jh.Exportable({export:jh.cloneObject("CuckooFilter","_size","_fingerprintLength","_length","_maxKicks","_filter","_seed"),import:function(e){if(!("CuckooFilter"===e.type&&"_size"in e&&"_fingerprintLength"in e&&"_length"in e&&"_maxKicks"in e&&"_filter"in e&&"_seed"in e))throw new Error("Cannot create a CuckooFilter from a JSON export which does not represent a cuckoo filter");var t=new r(e._size,e._fingerprintLength,e._bucketSize,e._maxKicks);return t._length=e._length,t._filter=e._filter.map((function(e){var t=new _d.default(e._size);return e._elements.forEach((function(e,r){null!==e&&(t._elements[r]=e,t._length++)})),t})),t.seed=e.seed,t}}),gd("design:paramtypes",[Number,Number,Number,Number])],t)}(bd.default),kd=Object.defineProperty({default:wd},"__esModule",{value:!0}),Ed=f&&f.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ad=f&&f.__decorate||function(e,t,r,n){var i,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var u=e.length-1;u>=0;u--)(i=e[u])&&(s=(o<3?i(s):o>3?i(t,r,s):i(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s},Sd=f&&f.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},xd=f&&f.__param||function(e,t){return function(r,n){t(r,n,e)}},Id=(f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}})(kh),Td=Symbol.for("nodejs.util.inspect.custom"),Od=function(e){function t(t,r,n){var i=e.call(this)||this;return i._idSum=t,i._hashSum=r,i._count=n,i}var r;return Ed(t,e),r=t,t.empty=function(){return new r(W.Buffer.allocUnsafe(0).fill(0),W.Buffer.allocUnsafe(0).fill(0),0)},t.prototype[Td]=function(){return"Cell:<"+JSON.stringify(this._idSum.toJSON().data)+", "+JSON.stringify(this._hashSum.toJSON().data)+", "+this._count+">"},Object.defineProperty(t.prototype,"idSum",{get:function(){return this._idSum},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hashSum",{get:function(){return this._hashSum},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"count",{get:function(){return this._count},enumerable:!0,configurable:!0}),t.prototype.add=function(e,t){this._idSum=sh.xorBuffer(this._idSum,e),this._hashSum=sh.xorBuffer(this._hashSum,t),this._count++},t.prototype.xorm=function(e){return new r(sh.xorBuffer(this._idSum,e.idSum),sh.xorBuffer(this._hashSum,e.hashSum),this._count-e.count)},t.prototype.isEmpty=function(){return this._idSum.equals(W.Buffer.from(""))&&this._hashSum.equals(W.Buffer.from(""))&&0===this._count},t.prototype.equals=function(e){return this._count===e.count&&this._idSum.equals(e.idSum)&&this._hashSum.equals(e.hashSum)},t.prototype.isPure=function(){if(this.isEmpty()||1!==this._count&&-1!==this._count)return!1;var e=sh.hashTwiceAsString(JSON.stringify(this._idSum.toJSON()),this.seed);return this._hashSum.equals(W.Buffer.from(e.first))},Ad([jh.Field((function(e){return e.toString()}),W.Buffer.from),Sd("design:type",W.Buffer)],t.prototype,"_idSum",void 0),Ad([jh.Field((function(e){return e.toString()}),W.Buffer.from),Sd("design:type",W.Buffer)],t.prototype,"_hashSum",void 0),Ad([jh.Field(),Sd("design:type",Number)],t.prototype,"_count",void 0),t=r=Ad([jh.AutoExportable("Cell",["_seed"]),xd(0,jh.Parameter("_idSum")),xd(1,jh.Parameter("_hashSum")),xd(2,jh.Parameter("_count")),Sd("design:paramtypes",[W.Buffer,W.Buffer,Number])],t)}(Id.default),Bd=Object.defineProperty({default:Od},"__esModule",{value:!0}),Nd=f&&f.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Cd=f&&f.__decorate||function(e,t,r,n){var i,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var u=e.length-1;u>=0;u--)(i=e[u])&&(s=(o<3?i(s):o>3?i(t,r,s):i(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s},Rd=f&&f.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},Ud=f&&f.__param||function(e,t){return function(r,n){t(r,n,e)}},jd=f&&f.__generator||function(e,t){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}},Ld=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},Dd=Ld(kh),Pd=Ld(Bd),Md=function(e){function t(t,r){void 0===r&&(r=3);var n=e.call(this)||this;if(void 0===W.Buffer)throw new Error('No native Buffer implementation bound in your JavaScript env. If you are in a Web browser, consider importing the polyfill "feross/buffer" (https://github.com/feross/buffer).');if(r<=0)throw new Error("The hashCount must be a non-zero, positive integer");return n._size=t,n._hashCount=r,n._elements=sh.allocateArray(n._size,(function(){return Pd.default.empty()})),n}var r;return Nd(t,e),r=t,t.create=function(e,t){var n=Ph.optimalFilterSize(e,t),i=Ph.optimalHashes(n,e);return new r(n,i)},t.from=function(e,t){var n=Array.from(e),i=r.create(n.length,t);return n.forEach((function(e){return i.add(e)})),i},Object.defineProperty(t.prototype,"hashCount",{get:function(){return this._hashCount},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"length",{get:function(){return this._elements.reduce((function(e,t){return e+t.count}),0)/this._hashCount},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"elements",{get:function(){return this._elements},enumerable:!0,configurable:!0}),t.prototype.add=function(e){for(var t=sh.allInOneHashTwice(JSON.stringify(e.toJSON()),this.seed),r=sh.getDistinctIndices(t.string.first,this._size,this._hashCount,this.seed),n=0;n<this._hashCount;++n)this._elements[r[n]].add(e,W.Buffer.from(t.string.first))},t.prototype.remove=function(e){for(var t=sh.allInOneHashTwice(JSON.stringify(e.toJSON()),this.seed),r=sh.getDistinctIndices(t.string.first,this.size,this._hashCount,this.seed),n=0;n<this._hashCount;++n)this._elements[r[n]]=this._elements[r[n]].xorm(new Pd.default(W.Buffer.from(e),W.Buffer.from(t.string.first),1));return!0},t.prototype.has=function(e){for(var t=sh.allInOneHashTwice(JSON.stringify(e.toJSON()),this.seed),r=sh.getDistinctIndices(t.string.first,this.size,this._hashCount,this.seed),n=0;n<this._hashCount;++n){if(0===this._elements[r[n]].count)return!1;if(1===this._elements[r[n]].count)return!!this._elements[r[n]].idSum.equals(e)}return!0},t.prototype.listEntries=function(){var e=this,t=[];return function(){var r,n,i;return jd(this,(function(o){switch(o.label){case 0:r=function(r){var n;return jd(this,(function(i){switch(i.label){case 0:return(n=e._elements[r]).count>0&&-1===t.findIndex((function(e){return e.equals(n.idSum)}))?e.has(n.idSum)?(t.push(n.idSum),[4,n.idSum]):[3,2]:[3,3];case 1:return i.sent(),[3,3];case 2:return[2,{value:!1}];case 3:return[2]}}))},n=0,o.label=1;case 1:return n<e._elements.length-1?[5,r(n)]:[3,4];case 2:if("object"==typeof(i=o.sent()))return[2,i.value];o.label=3;case 3:return n++,[3,1];case 4:return[2,!0]}}))}()},t.prototype.substract=function(e){if(this.size!==e.size)throw new Error("The two Invertible Bloom Filters must be of the same size");var t=new r(e._size,e._hashCount);t.seed=this.seed;for(var n=0;n<this.size;++n)t._elements[n]=this._elements[n].xorm(e._elements[n]);return t},t.prototype.equals=function(e){if(e._size!==this._size||e._hashCount!==this._hashCount||e.seed!==this.seed)return!1;for(var t=0;t<e._elements.length;++t)if(!e._elements[t].equals(this._elements[t]))return!1;return!0},t.prototype.decode=function(e,t){void 0===e&&(e=[]),void 0===t&&(t=[]);for(var r=[],n=null,i=0;i<this._elements.length;++i)(n=this._elements[i]).isPure()&&r.push(i);for(;0!==r.length;){var o=(n=this._elements[r.pop()]).idSum,s=n.count;if(n.isPure()){if(1===s)e.push(o);else{if(-1!==s)throw new Error("Please report, not possible");t.push(o)}var u=sh.allInOneHashTwice(JSON.stringify(o.toJSON()),this.seed),a=sh.getDistinctIndices(u.string.first,this._size,this._hashCount,this.seed);for(i=0;i<a.length;++i)this._elements[a[i]]=this._elements[a[i]].xorm(new Pd.default(o,W.Buffer.from(u.string.first),s)),this._elements[a[i]].isPure()&&r.push(a[i])}}return this._elements.findIndex((function(e){return!e.isEmpty()}))>-1?{success:!1,reason:{cell:n,iblt:this},additional:e,missing:t}:{success:!0,additional:e,missing:t}},Cd([jh.Field(),Rd("design:type",Number)],t.prototype,"_size",void 0),Cd([jh.Field(),Rd("design:type",Number)],t.prototype,"_hashCount",void 0),Cd([jh.Field(void 0,(function(e){return e.map((function(e){var t=new Pd.default(W.Buffer.from(e._idSum),W.Buffer.from(e._hashSum),e._count);return t.seed=e._seed,t}))})),Rd("design:type",Array)],t.prototype,"_elements",void 0),t=r=Cd([jh.AutoExportable("InvertibleBloomFilter",["_seed"]),Ud(0,jh.Parameter("_size")),Ud(1,jh.Parameter("_hashCount")),Rd("design:paramtypes",[Number,Number])],t)}(Dd.default),zd=Object.defineProperty({default:Md},"__esModule",{value:!0}),Fd=Gh.default;Jh.default,rp.default,cp.default,gp.default,Op.default,zp.MinHash,Hp.default,kd.default,zd.default,Bd.default;var Kd,Hd=function(e){return o(void 0,void 0,void 0,(function(){var t;return s(this,(function(r){return t="0".repeat(256),[2,Gd(t,e)]}))}))},Gd=function(e,t){return o(void 0,void 0,void 0,(function(){var r,n;return s(this,(function(i){switch(i.label){case 0:return r=Zd(e),[4,ze(t)];case 1:return n=i.sent(),r.add(n),[4,Jd(r)];case 2:return[2,i.sent()]}}))}))},$d=function(e,t,r){return o(void 0,void 0,void 0,(function(){return s(this,(function(n){switch(n.label){case 0:return[4,Gd(e,""+r+t)];case 1:return[2,n.sent()]}}))}))},qd=function(e){return o(void 0,void 0,void 0,(function(){var t;return s(this,(function(r){switch(r.label){case 0:return[4,Vd(Zd(e))];case 1:return t=r.sent(),[2,Wd(t)]}}))}))},Wd=function(e){return o(void 0,void 0,void 0,(function(){var t;return s(this,(function(r){switch(r.label){case 0:return[4,Fe(e.toBuffer())];case 1:return t=r.sent(),[2,je(t)]}}))}))},Vd=function(e,t){return void 0===t&&(t=320),o(void 0,void 0,void 0,(function(){var r,n,i;return s(this,(function(o){switch(o.label){case 0:if(t>8*e.toBuffer().byteLength)throw new Error("threshold is bigger than filter size");if(Yd(e)>=t)return[2,e];r=e.toBuffer(),n=r,o.label=1;case 1:return[4,Fe(n)];case 2:i=o.sent(),e.add(je(i)),n=i,o.label=3;case 3:if(Xd(r,e.toBuffer()))return[3,1];o.label=4;case 4:return[2,Vd(e,t)]}}))}))},Yd=function(e){for(var t=new Uint32Array(e.toBuffer()),r=0,n=0;n<t.length;n++)r+=Qd(t[n]);return r},Jd=function(e){return je(e.toBuffer())},Zd=function(e){var t=function(e){for(var t=new Uint8Array(e.length/2),r=0;r<t.length;r++)t[r]=parseInt(e.slice(2*r,2*r+2),16);return t.buffer}(e);return Fd.fromBuffer(t,16)},Xd=function(e,t){if(e.byteLength!==t.byteLength)return!1;for(var r=new Uint8Array(e),n=new Uint8Array(t),i=0;i<r.length;i++)if(r[i]!==n[i])return!1;return!0},Qd=function(e){var t=e-(e>>1&1431655765),r=(858993459&t)+(t>>2&858993459);return 16843009*(r+(r>>4)&252645135)>>24},ey=function(e,t,r){return o(void 0,void 0,void 0,(function(){var n,i,o,u,a,c,f,l,h;return s(this,(function(s){switch(s.label){case 0:return[4,qf(t,r)];case 1:return n=s.sent(),i=n.cid,o=n.size,[4,$d(t.bareNameFilter,r,t.revision)];case 2:return u=s.sent(),[4,qd(u)];case 3:return a=s.sent(),[4,e.add(a,i)];case 4:return s.sent(),ll(t)?[4,Gd(t.bareNameFilter,t.key)]:[3,9];case 5:return c=s.sent(),[4,$d(c,t.key,t.revision)];case 6:return f=s.sent(),[4,qd(f)];case 7:return l=s.sent(),[4,e.add(l,t.content)];case 8:s.sent(),s.label=9;case 9:return h=ll(t)?[{},!0]:[t.skeleton,!1],[2,{cid:i,name:a,key:r,size:o,isFile:h[1],skeleton:h[0]}]}}))}))},ty=function(e,t){return o(void 0,void 0,void 0,(function(){var r;return s(this,(function(n){switch(n.label){case 0:return[4,yc(e,t)];case 1:if(r=n.sent(),!hl(i=r)&&!ll(i))throw new Error("Could not parse a valid filesystem object, "+e);return[2,r]}var i}))}))},ry=function(e,t,r){return o(void 0,void 0,void 0,(function(){var n;return s(this,(function(i){switch(i.label){case 0:return[4,e.get(t)];case 1:return null===(n=i.sent())?[2,null]:[2,ny(n,r)]}}))}))},ny=function(e,t){return o(void 0,void 0,void 0,(function(){return s(this,(function(r){switch(r.label){case 0:return[4,ty(e,t)];case 1:return[2,r.sent()]}}))}))},iy=function(e,t,r){return o(void 0,void 0,void 0,(function(){var n;return s(this,(function(i){switch(i.label){case 0:return[4,e.get(t)];case 1:return null===(n=i.sent())?[2,null]:[2,oy(e,n,r)]}}))}))},oy=function(e,t,r){return o(void 0,void 0,void 0,(function(){var n,i,o;return s(this,(function(s){switch(s.label){case 0:return[4,ny(t,r)];case 1:return n=s.sent(),[4,sy(e,n.bareNameFilter,r,n.revision)];case 2:return(null==(i=s.sent())?void 0:i.cid)?[4,ny(null==i?void 0:i.cid,r)]:[3,4];case 3:return o=s.sent(),[3,5];case 4:o=n,s.label=5;case 5:return[2,o]}}))}))},sy=function(e,t,r,n){return o(void 0,void 0,void 0,(function(){var i,o,u,a,c,f,l;return s(this,(function(s){switch(s.label){case 0:i=n,o=null,u=0,a=null,s.label=1;case 1:return null!==o?[3,3]:(c=n+Math.pow(2,u),[4,uy(e,t,r,c)]);case 2:return null!==(l=s.sent())?(a=l,i=c):o=c,u++,[3,1];case 3:return i<o-1?(f=Math.floor((o+i)/2),[4,uy(e,t,r,f)]):[3,5];case 4:return null!==(l=s.sent())?(a=l,i=f):o=f,[3,3];case 5:return[2,a]}}))}))},uy=function(e,t,r,n){return o(void 0,void 0,void 0,(function(){var i,o,u;return s(this,(function(s){switch(s.label){case 0:return[4,$d(t,r,n)];case 1:return i=s.sent(),[4,qd(i)];case 2:return o=s.sent(),[4,e.get(o)];case 3:return[2,(u=s.sent())?{cid:u,name:o,number:n}:null]}}))}))},ay=function(e,t,r){return{major:e,minor:t,patch:r}},cy=function(e){return e.major+"."+e.minor+"."+e.patch},fy=ay(0,0,0),ly=ay(1,0,0),hy=ay(1,0,0),py=function(){function e(e){this.content=e}return e.prototype.put=function(){return o(this,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return[4,this.putDetailed()];case 1:return[2,e.sent().cid]}}))}))},e.prototype.updateContent=function(e){return o(this,void 0,void 0,(function(){return s(this,(function(t){return this.content=e,[2,this]}))}))},e}(),dy=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.create=function(e){return new t(e)},t.fromCID=function(e){return o(this,void 0,void 0,(function(){return s(this,(function(r){switch(r.label){case 0:return[4,Hf(e)];case 1:return[2,new t(r.sent())]}}))}))},t.instanceOf=function(e){return Q(e)&&void 0!==e.content},t.prototype.put=function(){return o(this,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return[4,this.putDetailed()];case 1:return[2,e.sent().cid]}}))}))},t.prototype.putDetailed=function(){return o(this,void 0,void 0,(function(){return s(this,(function(e){return[2,$f(this.content)]}))}))},t}(py),yy=function(){function e(e){this.version=e}return e.prototype.put=function(){return o(this,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return[4,this.putDetailed()];case 1:return[2,e.sent().cid]}}))}))},e.prototype.ls=function(e){return o(this,void 0,void 0,(function(){var t;return s(this,(function(r){switch(r.label){case 0:return[4,this.get(e)];case 1:if(null===(t=r.sent()))throw new Error("Path does not exist");if(Jf(t))throw new Error("Can not `ls` a file");return[2,t.getLinks()]}}))}))},e.prototype.cat=function(e){return o(this,void 0,void 0,(function(){var t;return s(this,(function(r){switch(r.label){case 0:return[4,this.get(e)];case 1:if(null===(t=r.sent()))throw new Error("Path does not exist");if(!Jf(t))throw new Error("Can not `cat` a directory");return[2,t.content]}}))}))},e.prototype.mkdir=function(e){return o(this,void 0,void 0,(function(){var t=this;return s(this,(function(r){return[2,this.mkdirRecurse(e,(function(){return t.put()}))]}))}))},e.prototype.mkdirRecurse=function(e,t){return o(this,void 0,void 0,(function(){var r,n,i,o,u=this;return s(this,(function(s){switch(s.label){case 0:if(r=_c(e),n=r.head,i=r.nextPath,null===n)throw new Error("Invalid path: empty");return[4,this.getOrCreateDirectChild(n,t)];case 1:if(o=s.sent(),Jf(o))throw new Error("There is a file along the given path: "+e);return null===i?[3,3]:[4,o.mkdirRecurse(i,(function(){return u.updateDirectChild(o,n,t)}))];case 2:s.sent(),s.label=3;case 3:return[2,this]}}))}))},e.prototype.add=function(e,t){return o(this,void 0,void 0,(function(){var r=this;return s(this,(function(n){switch(n.label){case 0:return[4,this.addRecurse(e,t,(function(){return r.put()}))];case 1:return n.sent(),[2,this]}}))}))},e.prototype.addRecurse=function(e,t,r){return o(this,void 0,void 0,(function(){var n,i,u,a,c=this;return s(this,(function(f){switch(f.label){case 0:if(n=_c(e),i=n.head,u=n.nextPath,null===i)throw new Error("Invalid path: empty");return null!==u?[3,2]:[4,this.createOrUpdateChildFile(t,i,r)];case 1:return f.sent(),[3,5];case 2:return[4,this.getOrCreateDirectChild(i,r)];case 3:if(a=f.sent(),Jf(a))throw new Error("There is a file along the given path: "+e);return[4,a.addRecurse(u,t,(function(){return o(c,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return[4,this.updateDirectChild(a,i,r)];case 1:return e.sent(),[2]}}))}))}))];case 4:f.sent(),f.label=5;case 5:return[2,this]}}))}))},e.prototype.rm=function(e){return o(this,void 0,void 0,(function(){var t=this;return s(this,(function(r){switch(r.label){case 0:return[4,this.rmRecurse(e,(function(){return t.put()}))];case 1:return r.sent(),[2,this]}}))}))},e.prototype.rmRecurse=function(e,t){return o(this,void 0,void 0,(function(){var r,n,i,u,a=this;return s(this,(function(c){switch(c.label){case 0:if(r=_c(e),n=r.head,i=r.nextPath,null===n)throw new Error("Invalid path: empty");return null!==i?[3,3]:(this.removeDirectChild(n),t?[4,t()]:[3,2]);case 1:c.sent(),c.label=2;case 2:return[3,6];case 3:return[4,this.getDirectChild(n)];case 4:if(null===(u=c.sent()))throw new Error("Invalid path: does not exist");if(Jf(u))throw new Error("There is a file along the given path: "+e);return[4,u.rmRecurse(i,(function(){return o(a,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return[4,this.updateDirectChild(u,n,t)];case 1:return e.sent(),[2]}}))}))}))];case 5:c.sent(),c.label=6;case 6:return[2,this]}}))}))},e.prototype.mv=function(e,t){return o(this,void 0,void 0,(function(){var r,n,i,u,c,f,l=this;return s(this,(function(h){switch(h.label){case 0:return[4,this.get(e)];case 1:if(null===(r=h.sent()))throw new Error("Path does not exist: "+e);if(n=function(e){var t=mc(e),r=t.slice(0,t.length-1);return{tail:t[t.length-1]||null,parentPath:r.length>0?bc(r):null}}(t),i=n.tail,u=(u=n.parentPath)||"",null===i)throw new Error("Path does not exist: "+t);return[4,this.get(u)];case 2:return(c=h.sent())?[3,5]:[4,this.mkdir(u)];case 3:return h.sent(),[4,this.get(u)];case 4:return c=h.sent(),[3,6];case 5:if(Jf(c))throw new Error("Can not `mv` to a file: "+u);h.label=6;case 6:return f=mc(t),[4,this.rm(e)];case 7:return h.sent(),[4,a(f).reverse().reduce((function(e,t,r){return e.then((function(e){return o(l,void 0,void 0,(function(){var n,i,o;return s(this,(function(s){switch(s.label){case 0:return(n=f.slice(0,-(r+1))).length?[4,this.get(bc(n))]:[3,2];case 1:return o=s.sent(),[3,3];case 2:o=this,s.label=3;case 3:return!(i=o)||Jf(i)?[3,5]:[4,i.updateDirectChild(e,t,null)];case 4:return s.sent(),[2,i];case 5:throw new Error("Failed to update tree while moving node")}}))}))}))}),Promise.resolve(r))];case 8:return h.sent(),[2,this]}}))}))},e.prototype.exists=function(e){return o(this,void 0,void 0,(function(){return s(this,(function(t){switch(t.label){case 0:return[4,this.get(e)];case 1:return[2,null!==t.sent()]}}))}))},e.prototype.read=function(e){return this.get(e)},e.prototype.write=function(e,t){return this.add(e,t)},e.prototype.getOrCreateDirectChild=function(e,t){return o(this,void 0,void 0,(function(){var r;return s(this,(function(n){switch(n.label){case 0:return[4,this.getDirectChild(e)];case 1:return[2,null!==(r=n.sent())?r:this.createChildTree(e,t)]}}))}))},e}(),vy=function(e){function t(t){var r=e.call(this,fy)||this;return r.links=t,r.children={},r}return r(t,e),t.empty=function(){return o(this,void 0,void 0,(function(){return s(this,(function(e){return[2,new t({})]}))}))},t.fromCID=function(e){return o(this,void 0,void 0,(function(){return s(this,(function(r){switch(r.label){case 0:return[4,Vf(e)];case 1:return[2,new t(r.sent())]}}))}))},t.fromLinks=function(e){return new t(e)},t.prototype.createChildTree=function(e,r){return o(this,void 0,void 0,(function(){var n,i;return s(this,(function(o){switch(o.label){case 0:return[4,t.empty()];case 1:if(n=o.sent(),i=this.children[e]){if(dy.instanceOf(i))throw new Error("There is a file at the given path: "+e);return[2,i]}return[4,this.updateDirectChild(n,e,r)];case 2:return o.sent(),[2,n]}}))}))},t.prototype.createOrUpdateChildFile=function(e,t,r){return o(this,void 0,void 0,(function(){var n,i;return s(this,(function(o){switch(o.label){case 0:return[4,this.getDirectChild(t)];case 1:return null!==(n=o.sent())?[3,3]:[4,dy.create(e)];case 2:return i=o.sent(),[3,6];case 3:return dy.instanceOf(n)?[4,n.updateContent(e)]:[3,5];case 4:return i=o.sent(),[3,6];case 5:throw new Error("There is already a directory with that name: "+t);case 6:return[4,this.updateDirectChild(i,t,r)];case 7:return o.sent(),[2,i]}}))}))},t.prototype.putDetailed=function(){return o(this,void 0,void 0,(function(){return s(this,(function(e){return[2,Yf(this.links)]}))}))},t.prototype.putAndUpdateLink=function(e,t,r){return o(this,void 0,void 0,(function(){var n;return s(this,(function(i){switch(i.label){case 0:return[4,e.putDetailed()];case 1:return n=i.sent(),this.updateLink(t,n),r?[4,r()]:[3,3];case 2:i.sent(),i.label=3;case 3:return[2,this]}}))}))},t.prototype.updateDirectChild=function(e,t,r){return o(this,void 0,void 0,(function(){return s(this,(function(n){return this.children[t]=e,[2,this.putAndUpdateLink(e,t,r)]}))}))},t.prototype.removeDirectChild=function(e){return delete this.links[e],this.children[e]&&delete this.children[e],this},t.prototype.getDirectChild=function(e){return o(this,void 0,void 0,(function(){var r,n,i;return s(this,(function(o){switch(o.label){case 0:return this.children[e]?[2,this.children[e]]:null===(r=this.links[e]||null)?[2,null]:r.isFile?[4,dy.fromCID(r.cid)]:[3,2];case 1:return i=o.sent(),[3,4];case 2:return[4,t.fromCID(r.cid)];case 3:i=o.sent(),o.label=4;case 4:return n=i,this.children[e]?[2,this.children[e]]:(this.children[e]=n,[2,n])}}))}))},t.prototype.get=function(e){return o(this,void 0,void 0,(function(){var t,r,n,i;return s(this,(function(o){switch(o.label){case 0:return t=_c(e),r=t.head,n=t.nextPath,null===r?[2,this]:[4,this.getDirectChild(r)];case 1:return i=o.sent(),null===n?[2,i]:null===i||Jf(i)?[2,null]:[2,i.get(n)]}}))}))},t.prototype.updateLink=function(e,t){var r=t.cid,n=t.size,i=t.isFile;return this.links[e]=zf(e,r,i,n),this},t.prototype.getLinks=function(){return this.links},t}(yy),gy={0:!0,1:!0,2:!0,3:!0,4:!0,5:!0,6:!0,7:!0,8:!0,9:!0,a:!0,b:!0,c:!0,d:!0,e:!0,f:!0},my=function(){function e(e){this.links=e,this.children={}}return e.create=function(){return new e({})},e.fromCID=function(t){return o(this,void 0,void 0,(function(){return s(this,(function(r){switch(r.label){case 0:return[4,Wf(t)];case 1:return[2,new e(r.sent())]}}))}))},e.prototype.putDetailed=function(){return o(this,void 0,void 0,(function(){return s(this,(function(e){return[2,Yf(this.links)]}))}))},e.prototype.put=function(){return o(this,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return[4,this.putDetailed()];case 1:return[2,e.sent().cid]}}))}))},e.prototype.add=function(e,t){return o(this,void 0,void 0,(function(){var r,n,i,o;return s(this,(function(s){switch(s.label){case 0:if(u=e[0],!0!==gy[u])throw new Error("Not a valid name, must be hexadecimal");return r=this.nextTreeOrSiblingName(e),e!==r?[3,1]:[3,9];case 1:return null!==r?[3,2]:(this.links[e]=zf(e,t,!0,0),[3,9]);case 2:return 1!==r.length?[3,6]:[4,this.getDirectChild(r)];case 3:return[4,(n=s.sent()).add(e.slice(1),t)];case 4:return s.sent(),[4,this.putAndUpdateLink(r,n)];case 5:return s.sent(),[3,9];case 6:return i=this.addEmptyChild(e[0]),o=this.links[r].cid,this.removeChild(r),[4,Promise.all([i.add(e.slice(1),t),i.add(r.slice(1),o)])];case 7:return s.sent(),[4,this.putAndUpdateLink(e[0],i)];case 8:s.sent(),s.label=9;case 9:return[2]}var u}))}))},e.prototype.putAndUpdateLink=function(e,t){return o(this,void 0,void 0,(function(){var r,n,i;return s(this,(function(o){switch(o.label){case 0:return[4,t.putDetailed()];case 1:return r=o.sent(),n=r.cid,i=r.size,this.links[e]=zf(e,n,!1,i),[2]}}))}))},e.prototype.addEmptyChild=function(t){var r=e.create();return this.children[t]=r,r},e.prototype.get=function(e){return o(this,void 0,void 0,(function(){var t;return s(this,(function(r){switch(r.label){case 0:return null===(t=this.nextTreeName(e))?[2,null]:t.length>1?[2,this.links[t].cid]:[4,this.getDirectChild(t)];case 1:return[2,r.sent().get(e.slice(1))]}}))}))},e.prototype.exists=function(e){return o(this,void 0,void 0,(function(){return s(this,(function(t){switch(t.label){case 0:return[4,this.get(e)];case 1:return[2,null!==t.sent()]}}))}))},e.prototype.members=function(){return o(this,void 0,void 0,(function(){var t=this;return s(this,(function(r){switch(r.label){case 0:return[4,Promise.all(Object.values(this.links).map((function(r){var i=r.name,u=r.cid;return o(t,void 0,void 0,(function(){return s(this,(function(t){switch(t.label){case 0:return i.length>1?[2,[{name:i,cid:u}]]:[4,e.fromCID(u)];case 1:return[4,t.sent().members()];case 2:return[2,t.sent().map((function(e){return n(n({},e),{name:i+e.name})}))]}}))}))})))];case 1:return[2,r.sent().reduce((function(e,t){return e.concat(t)}))]}}))}))},e.prototype.getDirectChild=function(t){return o(this,void 0,void 0,(function(){var r;return s(this,(function(n){switch(n.label){case 0:return this.children[t]?[2,this.children[t]]:[4,e.fromCID(this.links[t].cid)];case 1:return r=n.sent(),this.children[t]?[2,this.children[t]]:(this.children[t]=r,[2,r])}}))}))},e.prototype.removeChild=function(e){delete this.links[e],this.children[e]&&delete this.children[e]},e.prototype.directChildExists=function(e){return void 0!==this.links[e]||void 0!==this.children[e]},e.prototype.nextTreeName=function(e){return this.directChildExists(e[0])?e[0]:this.directChildExists(e)?e:null},e.prototype.nextTreeOrSiblingName=function(e){var t=e[0];return this.directChildExists(t)?t:Object.keys(this.links).find((function(e){return t===e[0]}))||null},e}(),by=function(){function e(e){this.node=e}return e.prototype.back=function(t){void 0===t&&(t=-1);var r=Math.abs(Math.min(t,-1));return Array.from({length:r},(function(e,t){return t})).reduce((function(t){return t.then((function(t){return t?e._getPreviousVersion(t):null}))}),Promise.resolve(this.node))},e.prototype.prior=function(t){return o(this,void 0,void 0,(function(){return s(this,(function(r){return[2,e._prior(this.node,t)]}))}))},e.prototype.list=function(t){return void 0===t&&(t=5),o(this,void 0,void 0,(function(){return s(this,(function(r){switch(r.label){case 0:return[4,Array.from({length:t},(function(e,t){return t})).reduce((function(t,r){return t.then((function(t){var n=t.node,i=t.acc;return n?e._getPreviousVersion(n).then((function(e){return{node:e,acc:a(i,[{delta:-(r+1),timestamp:n.header.metadata.unixMeta.mtime}])}})):Promise.resolve({node:null,acc:i})}))}),e._getPreviousVersion(this.node).then((function(e){return{node:e,acc:[]}})))];case 1:return[2,r.sent().acc]}}))}))},e._getPreviousVersion=function(e){return o(this,void 0,void 0,(function(){return s(this,(function(t){return e.header.previous?[2,e.constructor.fromCID(e.header.previous)]:[2,Promise.resolve(null)]}))}))},e._prior=function(t,r){return o(this,void 0,void 0,(function(){var n;return s(this,(function(i){switch(i.label){case 0:return t.header.metadata.unixMeta.mtime<r?[2,t]:[4,e._getPreviousVersion(t)];case 1:return[2,(n=i.sent())?e._prior(n,r):null]}}))}))},e}();!function(e){e.Raw="raw",e.Directory="dir",e.File="file",e.Metadata="metadata",e.Symlink="symlink",e.HAMTShard="hamtShard"}(Kd||(Kd={}));var _y=function(e){return{mtime:Date.now(),ctime:Date.now(),mode:e?644:755,_type:e?Kd.File:Kd.Directory}},wy=function(e){return{isFile:e,version:hy,unixMeta:_y(e)}},ky=function(e){return n(n({},e),{unixMeta:n(n({},e.unixMeta),{mtime:Date.now()})})},Ey=function(e){function t(t){var r=t.content,n=t.header,i=t.cid,o=e.call(this,r)||this;return o.cid=i,o.header=n,o.history=new by(o),o}return r(t,e),t.instanceOf=function(e){return Q(e)&&void 0!==e.content&&rl(e.header)},t.create=function(e){return o(this,void 0,void 0,(function(){return s(this,(function(r){return[2,new t({content:e,header:{metadata:wy(!0)},cid:null})]}))}))},t.fromCID=function(e){return o(this,void 0,void 0,(function(){var r;return s(this,(function(n){switch(n.label){case 0:return[4,sl(e)];case 1:return r=n.sent(),[2,t.fromInfo(r,e)]}}))}))},t.fromInfo=function(e,r){return o(this,void 0,void 0,(function(){var n,i,o;return s(this,(function(s){switch(s.label){case 0:return n=e.userland,i=e.metadata,o=e.previous,[4,Hf(n)];case 1:return[2,new t({content:s.sent(),header:{metadata:i,previous:o},cid:r})]}}))}))},t.prototype.putDetailed=function(){return o(this,void 0,void 0,(function(){var e;return s(this,(function(t){switch(t.label){case 0:return[4,(r=this.content,n=ky(this.header.metadata),i=this.cid,o(void 0,void 0,void 0,(function(){var e,t,o,u,a,c,f,l,h,p;return s(this,(function(s){switch(s.label){case 0:return[4,$f(r)];case 1:return e=s.sent(),t=zf("userland",e.cid,!0,e.size),[4,ol("metadata",n)];case 2:return o=s.sent(),null==i?[3,4]:(c=(a=Kf).make,f=["previous",i,!1],[4,ha(i)]);case 3:return u=c.apply(a,f.concat([s.sent()])),[3,5];case 4:u=void 0,s.label=5;case 5:return[4,Yf({metadata:o,userland:t,previous:u})];case 6:return l=s.sent(),h=l.cid,p=l.size,[2,{cid:h,userland:t.cid,metadata:o.cid,size:p,isFile:!0,skeleton:{}}]}}))})))];case 1:return e=t.sent(),this.cid=e.cid,[2,e]}var r,n,i}))}))},t}(py),Ay=function(e,t){var r,n=e[t[0]]||null,i=(r=t.slice(1)).length<1?null:r;return null===n||null===i?n:Ay(n.subSkeleton,i)},Sy=function(e){function t(t){var r=t.links,n=t.header,i=t.cid,o=e.call(this,n.metadata.version)||this;return o.children={},o.cid=i,o.links=r,o.header=n,o.history=new by(o),o}return r(t,e),t.empty=function(){return o(this,void 0,void 0,(function(){return s(this,(function(e){return[2,new t({links:{},header:{metadata:wy(!1),skeleton:{}},cid:null})]}))}))},t.fromCID=function(e){return o(this,void 0,void 0,(function(){var r;return s(this,(function(n){switch(n.label){case 0:return[4,sl(e)];case 1:if(r=n.sent(),!tl(i=r)||!nl(i.userland))throw new Error("Could not parse a valid public tree at: "+e);return[2,t.fromInfo(r,e)]}var i}))}))},t.fromInfo=function(e,r){return o(this,void 0,void 0,(function(){var n,i,o,u;return s(this,(function(s){switch(s.label){case 0:return n=e.userland,i=e.metadata,o=e.previous,u=e.skeleton,[4,Vf(n)];case 1:return[2,new t({links:s.sent(),header:{metadata:i,previous:o,skeleton:u},cid:r})]}}))}))},t.instanceOf=function(e){return function(e){return Q(e)&&Object.values(e).every(Xf)}(e.links)&&tl(e.header)},t.prototype.createChildTree=function(e,r){return o(this,void 0,void 0,(function(){var n,i;return s(this,(function(o){switch(o.label){case 0:return[4,t.empty()];case 1:if(n=o.sent(),i=this.children[e]){if(Ey.instanceOf(i))throw new Error("There is a file at the given path: "+e);if(t.instanceOf(i))return[2,i];throw new Error("Not a public tree at the given path: "+e)}return[4,this.updateDirectChild(n,e,r)];case 2:return o.sent(),[2,n]}}))}))},t.prototype.createOrUpdateChildFile=function(e,t,r){return o(this,void 0,void 0,(function(){var n,i;return s(this,(function(o){switch(o.label){case 0:return[4,this.getDirectChild(t)];case 1:return null!==(n=o.sent())?[3,3]:[4,Ey.create(e)];case 2:return i=o.sent(),[3,6];case 3:return Ey.instanceOf(n)?[4,n.updateContent(e)]:[3,5];case 4:return i=o.sent(),[3,6];case 5:throw new Error("There is already a directory with that name: "+t);case 6:return[4,this.updateDirectChild(i,t,r)];case 7:return o.sent(),[2,i]}}))}))},t.prototype.putDetailed=function(){return o(this,void 0,void 0,(function(){var e;return s(this,(function(t){switch(t.label){case 0:return[4,(r=this.links,n=this.header.skeleton,i=this.header.metadata,u=this.cid,o(void 0,void 0,void 0,(function(){var e,t,o,a,c,f,l,h,p,d,y,v;return s(this,(function(s){switch(s.label){case 0:return[4,Yf(r)];case 1:return e=s.sent(),t=zf("userland",e.cid,!0,e.size),[4,Promise.all([ol("metadata",i),ol("skeleton",n)])];case 2:return o=s.sent(),a=o[0],c=o[1],null==u?[3,4]:(h=(l=Kf).make,p=["previous",u,!1],[4,ha(u)]);case 3:return f=h.apply(l,p.concat([s.sent()])),[3,5];case 4:f=void 0,s.label=5;case 5:return[4,Yf({metadata:a,skeleton:c,userland:t,previous:f})];case 6:return d=s.sent(),y=d.cid,v=d.size,[2,{cid:y,userland:t.cid,metadata:a.cid,size:v,isFile:!1,skeleton:n}]}}))})))];case 1:return e=t.sent(),this.header.previous=this.cid||void 0,this.cid=e.cid,[2,e]}var r,n,i,u}))}))},t.prototype.updateDirectChild=function(e,t,r){return o(this,void 0,void 0,(function(){var n;return s(this,(function(i){switch(i.label){case 0:return this.children[t]=e,[4,e.putDetailed()];case 1:return n=i.sent(),this.updateLink(t,n),r?[4,r()]:[3,3];case 2:i.sent(),i.label=3;case 3:return[2,this]}}))}))},t.prototype.removeDirectChild=function(e){return delete this.links[e],delete this.header.skeleton[e],this.children[e]&&delete this.children[e],this},t.prototype.getDirectChild=function(e){return o(this,void 0,void 0,(function(){var r,n,i;return s(this,(function(o){switch(o.label){case 0:return this.children[e]?[2,this.children[e]]:null===(r=this.header.skeleton[e]||null)?[2,null]:r.isFile?[4,Ey.fromCID(r.cid)]:[3,2];case 1:return i=o.sent(),[3,4];case 2:return[4,t.fromCID(r.cid)];case 3:i=o.sent(),o.label=4;case 4:return n=i,this.children[e]?[2,this.children[e]]:(this.children[e]=n,[2,n])}}))}))},t.prototype.get=function(e){return o(this,void 0,void 0,(function(){var r,n,i;return s(this,(function(o){switch(o.label){case 0:return null===(r=function(e){var t=mc(e);return t.length<1?null:t}(e))?[2,this]:null===(n=Ay(this.header.skeleton,r))?[2,null]:[4,sl(n.cid)];case 1:return i=o.sent(),[2,(s=i,rl(s)&&nl(s.userland)?Ey.fromInfo(i,n.cid):t.fromInfo(i,n.cid))]}var s}))}))},t.prototype.getLinks=function(){var e=this;return Object.values(this.links).reduce((function(t,r){var i,o;return n(n({},t),((i={})[r.name]=n(n({},r),{isFile:null===(o=e.header.skeleton[r.name])||void 0===o?void 0:o.isFile}),i))}),{})},t.prototype.updateLink=function(e,t){var r=t.cid,n=t.metadata,i=t.userland,o=t.size,s=t.isFile,u=t.skeleton;return this.links[e]=zf(e,r,!1,o),this.header.skeleton[e]={cid:r,metadata:n,userland:i,subSkeleton:u,isFile:s},this.header.metadata.unixMeta.mtime=Date.now(),this},t}(yy),xy=function(){function e(e){this.node=e}return e.prototype.back=function(e){var t;return void 0===e&&(e=-1),o(this,void 0,void 0,(function(){var r,n,i;return s(this,(function(o){switch(o.label){case 0:return r=Math.min(e,-1),n=null===(t=this.node.header)||void 0===t?void 0:t.revision,(i=n)?[4,this._getRevision(n+r)]:[3,2];case 1:i=o.sent(),o.label=2;case 2:return[2,i||null]}}))}))},e.prototype.prior=function(e){return o(this,void 0,void 0,(function(){return s(this,(function(t){return this.node.header.metadata.unixMeta.mtime<e?[2,this.node]:[2,this._prior(this.node.header.revision-1,e)]}))}))},e.prototype.list=function(e){return void 0===e&&(e=5),o(this,void 0,void 0,(function(){var t,r=this;return s(this,(function(n){return t=this.node.header.revision,[2,Promise.all(Array.from({length:e},(function(e,n){var i=n+1;return r._getRevisionInfoFromNumber(t-i).then((function(e){return{revisionInfo:e,delta:-i}}))}))).then((function(e){return e.filter((function(e){return!!e.revisionInfo}))})).then((function(e){return e.map((function(e){var t=e.revisionInfo.metadata.unixMeta.mtime;return{delta:e.delta,timestamp:t}}))}))]}))}))},e.prototype._getRevision=function(e){return o(this,void 0,void 0,(function(){var t,r;return s(this,(function(n){switch(n.label){case 0:return[4,this._getRevisionInfoFromNumber(e)];case 1:return t=n.sent(),(r=t)?[4,this.node.constructor.fromInfo(this.node.mmpt,this.node.key,t)]:[3,3];case 2:r=n.sent(),n.label=3;case 3:return[2,r]}}))}))},e.prototype._getRevisionInfo=function(e){return ty(e.cid,this.node.key)},e.prototype._getRevisionInfoFromNumber=function(e){return o(this,void 0,void 0,(function(){var t,r,n,i,o;return s(this,(function(s){switch(s.label){case 0:return t=this.node,r=t.key,n=t.mmpt,i=this.node.header.bareNameFilter,[4,uy(n,i,r,e)];case 1:return[2,(o=s.sent())&&this._getRevisionInfo(o)]}}))}))},e.prototype._prior=function(e,t){return o(this,void 0,void 0,(function(){var r;return s(this,(function(n){switch(n.label){case 0:return[4,this._getRevisionInfoFromNumber(e)];case 1:return(null==(r=n.sent())?void 0:r.revision)?r.metadata.unixMeta.mtime<t?[2,this._getRevision(r.revision)]:[2,this._prior(r.revision-1,t)]:[2,null]}}))}))},e}(),Iy=function(e){function t(t){var r=t.content,n=t.mmpt,i=t.key,o=t.header,s=e.call(this,r)||this;return s.header=o,s.history=new xy(s),s.key=i,s.mmpt=n,s}return r(t,e),t.instanceOf=function(e){return Q(e)&&void 0!==e.content&&void 0!==e.mmpt&&ll(e.header)},t.create=function(e,r,n,i){return o(this,void 0,void 0,(function(){var o,u,a;return s(this,(function(s){switch(s.label){case 0:return[4,Gd(n,i)];case 1:return o=s.sent(),[4,Me()];case 2:return u=s.sent(),[4,qf(r,u)];case 3:return a=s.sent(),[2,new t({content:r,mmpt:e,key:i,header:{bareNameFilter:o,key:u,revision:1,metadata:wy(!0),content:a.cid}})]}}))}))},t.fromLatestName=function(e,r,n){return o(this,void 0,void 0,(function(){var i;return s(this,(function(o){switch(o.label){case 0:return[4,iy(e,r,n)];case 1:if(i=o.sent(),!ll(i))throw new Error("Could not parse a valid private file using the given key");return[2,t.fromInfo(e,n,i)]}}))}))},t.fromName=function(e,r,n){return o(this,void 0,void 0,(function(){var i;return s(this,(function(o){switch(o.label){case 0:return[4,ry(e,r,n)];case 1:if(i=o.sent(),!ll(i))throw new Error("Could not parse a valid private file using the given key");return[2,t.fromInfo(e,n,i)]}}))}))},t.fromInfo=function(e,r,n){return o(this,void 0,void 0,(function(){return s(this,(function(i){switch(i.label){case 0:return[4,Gf(n.content,n.key)];case 1:return[2,new t({content:i.sent(),key:r,mmpt:e,header:n})]}}))}))},t.prototype.getName=function(){return o(this,void 0,void 0,(function(){var e,t,r,n;return s(this,(function(i){switch(i.label){case 0:return e=this.header,t=e.bareNameFilter,r=e.revision,[4,$d(t,this.key,r)];case 1:return n=i.sent(),[2,qd(n)]}}))}))},t.prototype.updateParentNameFilter=function(e){return o(this,void 0,void 0,(function(){var t;return s(this,(function(r){switch(r.label){case 0:return t=this.header,[4,Gd(e,this.header.key)];case 1:return t.bareNameFilter=r.sent(),[2,this]}}))}))},t.prototype.updateContent=function(e){return o(this,void 0,void 0,(function(){var t;return s(this,(function(r){switch(r.label){case 0:return[4,qf(e,this.header.key)];case 1:return t=r.sent(),this.content=e,this.header=n(n({},this.header),{revision:this.header.revision+1,content:t.cid}),[2,this]}}))}))},t.prototype.putDetailed=function(){return o(this,void 0,void 0,(function(){return s(this,(function(e){return[2,ey(this.mmpt,n(n({},this.header),{metadata:ky(this.header.metadata)}),this.key)]}))}))},t}(py),Ty=function(e){function t(t){var r=t.mmpt,n=t.key,i=t.header,o=e.call(this,ly)||this;return o.children={},o.header=i,o.history=new xy(o),o.key=n,o.mmpt=r,o}return r(t,e),t.instanceOf=function(e){return Q(e)&&void 0!==e.mmpt&&hl(e.header)},t.create=function(e,r,n){return o(this,void 0,void 0,(function(){var i,o;return s(this,(function(s){switch(s.label){case 0:return n?[4,Gd(n,r)]:[3,2];case 1:return o=s.sent(),[3,4];case 2:return[4,Hd(r)];case 3:o=s.sent(),s.label=4;case 4:return i=o,[2,new t({mmpt:e,key:r,header:{metadata:wy(!1),bareNameFilter:i,revision:1,links:{},skeleton:{}}})]}}))}))},t.fromBaseKey=function(e,t){return o(this,void 0,void 0,(function(){var r;return s(this,(function(n){switch(n.label){case 0:return[4,Hd(t)];case 1:return r=n.sent(),[2,this.fromBareNameFilter(e,r,t)]}}))}))},t.fromBareNameFilter=function(e,t,r){return o(this,void 0,void 0,(function(){var n,i,o;return s(this,(function(s){switch(s.label){case 0:return[4,$d(t,r,1)];case 1:return n=s.sent(),[4,qd(n)];case 2:return i=s.sent(),[4,iy(e,i,r)];case 3:return o=s.sent(),[2,this.fromInfo(e,r,o)]}}))}))},t.fromLatestName=function(e,t,r){return o(this,void 0,void 0,(function(){var n;return s(this,(function(i){switch(i.label){case 0:return[4,iy(e,t,r)];case 1:return n=i.sent(),[2,this.fromInfo(e,r,n)]}}))}))},t.fromName=function(e,t,r){return o(this,void 0,void 0,(function(){var n;return s(this,(function(i){switch(i.label){case 0:return[4,ry(e,t,r)];case 1:return n=i.sent(),[2,this.fromInfo(e,r,n)]}}))}))},t.fromInfo=function(e,r,n){return o(this,void 0,void 0,(function(){return s(this,(function(i){if(!hl(n))throw new Error("Could not parse a valid private tree using the given key");return[2,new t({mmpt:e,key:r,header:n})]}))}))},t.prototype.createChildTree=function(e,r){return o(this,void 0,void 0,(function(){var n,i,o;return s(this,(function(s){switch(s.label){case 0:return[4,Me()];case 1:return n=s.sent(),[4,t.create(this.mmpt,n,this.header.bareNameFilter)];case 2:if(i=s.sent(),o=this.children[e]){if(Iy.instanceOf(o))throw new Error("There is a file at the given path: "+e);return[2,o]}return[4,this.updateDirectChild(i,e,r)];case 3:return s.sent(),[2,i]}}))}))},t.prototype.createOrUpdateChildFile=function(e,t,r){return o(this,void 0,void 0,(function(){var n,i,o;return s(this,(function(s){switch(s.label){case 0:return[4,this.getDirectChild(t)];case 1:return null!==(n=s.sent())?[3,4]:[4,Me()];case 2:return o=s.sent(),[4,Iy.create(this.mmpt,e,this.header.bareNameFilter,o)];case 3:return i=s.sent(),[3,7];case 4:return Iy.instanceOf(n)?[4,n.updateContent(e)]:[3,6];case 5:return i=s.sent(),[3,7];case 6:throw new Error("There is already a directory with that name: "+t);case 7:return[4,this.updateDirectChild(i,t,r)];case 8:return s.sent(),[2,i]}}))}))},t.prototype.putDetailed=function(){return o(this,void 0,void 0,(function(){var e;return s(this,(function(t){return e=Object.assign({},this.header),[2,ey(this.mmpt,e,this.key)]}))}))},t.prototype.updateDirectChild=function(e,t,r){return o(this,void 0,void 0,(function(){var n;return s(this,(function(i){switch(i.label){case 0:return[4,e.updateParentNameFilter(this.header.bareNameFilter)];case 1:return i.sent(),this.children[t]=e,[4,e.putDetailed()];case 2:return n=i.sent(),this.updateLink(t,n),r?[4,r()]:[3,4];case 3:i.sent(),i.label=4;case 4:return[2,this]}}))}))},t.prototype.removeDirectChild=function(e){return this.header=n(n({},this.header),{revision:this.header.revision+1,links:ee(this.header.links,e),skeleton:ee(this.header.skeleton,e)}),this.children[e]&&delete this.children[e],this},t.prototype.getDirectChild=function(e){return o(this,void 0,void 0,(function(){var r,n,i;return s(this,(function(o){switch(o.label){case 0:return this.children[e]?[2,this.children[e]]:void 0===(r=this.header.links[e])?[2,null]:r.isFile?[4,Iy.fromLatestName(this.mmpt,r.pointer,r.key)]:[3,2];case 1:return i=o.sent(),[3,4];case 2:return[4,t.fromLatestName(this.mmpt,r.pointer,r.key)];case 3:i=o.sent(),o.label=4;case 4:return n=i,this.children[e]?[2,this.children[e]]:(this.children[e]=n,[2,n])}}))}))},t.prototype.getName=function(){return o(this,void 0,void 0,(function(){var e,t,r,n;return s(this,(function(i){switch(i.label){case 0:return e=this.header,t=e.bareNameFilter,r=e.revision,[4,$d(t,this.key,r)];case 1:return n=i.sent(),[2,qd(n)]}}))}))},t.prototype.updateParentNameFilter=function(e){return o(this,void 0,void 0,(function(){var t;return s(this,(function(r){switch(r.label){case 0:return t=this.header,[4,Gd(e,this.key)];case 1:return t.bareNameFilter=r.sent(),[2,this]}}))}))},t.prototype.get=function(e){return o(this,void 0,void 0,(function(){var r,n,i,o,u;return s(this,(function(s){switch(s.label){case 0:return 0===(r=mc(e)).length?[2,this]:(n=r[0],i=r.slice(1),void 0===(o=this.header.skeleton[n])?[2,null]:[4,this.getRecurse(o,i)]);case 1:return null===(u=s.sent())?[2,null]:[2,ll(u.node)?Iy.fromInfo(this.mmpt,u.key,u.node):t.fromInfo(this.mmpt,u.key,u.node)]}}))}))},t.prototype.getRecurse=function(e,t){return o(this,void 0,void 0,(function(){var r,n,i,o,u,a;return s(this,(function(s){switch(s.label){case 0:return r=t[0],n=t.slice(1),void 0!==r?[3,2]:(a={key:e.key},[4,oy(this.mmpt,e.cid,e.key)]);case 1:return[2,(a.node=s.sent(),a)];case 2:return void 0!==(i=e.subSkeleton[r])?[2,this.getRecurse(i,n)]:[4,oy(this.mmpt,e.cid,e.key)];case 3:return o=s.sent(),hl(o)?[2,void 0===(u=o.skeleton[r])?null:this.getRecurse(u,n)]:[2,null]}}))}))},t.prototype.getLinks=function(){return e=this.header.links,t=function(e){e.key;var t=i(e,["key"]);return n({},t)},r={},Object.entries(e).forEach((function(e){var n=e[0],i=e[1];r[n]=t(i,n)})),r;var e,t,r},t.prototype.updateLink=function(e,t){var r=t.cid,n=t.size,i=t.key,o=t.isFile,s=t.skeleton,u=t.name;return this.header.links[e]={name:e,key:i,pointer:u,size:n,isFile:o,mtime:Date.now()},this.header.skeleton[e]={cid:r,key:i,subSkeleton:s},this.header.revision=this.header.revision+1,this.header.metadata.unixMeta.mtime=Date.now(),this},t}(yy),Oy=function(){function e(e){var t=e.links,r=e.mmpt,n=e.privateLog,i=e.publicTree,o=e.prettyTree,s=e.privateTrees;this.links=t,this.mmpt=r,this.privateLog=n,this.publicTree=i,this.prettyTree=o,this.privateTrees=s}return e.empty=function(t){var r=t.rootKey;return o(this,void 0,void 0,(function(){var t,n,i,o,u;return s(this,(function(s){switch(s.label){case 0:return[4,Sy.empty()];case 1:return t=s.sent(),[4,vy.empty()];case 2:return n=s.sent(),i=my.create(),[4,Ty.create(i,r,null)];case 3:return[4,(o=s.sent()).put()];case 4:return s.sent(),u=new e({links:{},mmpt:i,privateLog:[],publicTree:t,prettyTree:n,privateTrees:{"/":o}}),[4,e.storeRootKey(r)];case 5:return s.sent(),u.setVersion(ly),[4,Promise.all([u.updatePuttable(jf.Public,t),u.updatePuttable(jf.Pretty,n),u.updatePuttable(jf.Private,i)])];case 6:return s.sent(),[2,u]}}))}))},e.fromCID=function(t){var r,n,i,u=t.cid,a=t.permissions;return o(this,void 0,void 0,(function(){var t,o,c,f,l,h,p,d,y,v,g,m,b;return s(this,(function(s){switch(s.label){case 0:return[4,Vf(u)];case 1:return t=s.sent(),a?[4,Ry(a)]:[3,3];case 2:return c=s.sent(),[3,4];case 3:c={},s.label=4;case 4:return o=c,null!==(f=(null===(r=t[jf.Public])||void 0===r?void 0:r.cid)||null)?[3,6]:[4,Sy.empty()];case 5:return h=s.sent(),[3,8];case 6:return[4,Sy.fromCID(f)];case 7:h=s.sent(),s.label=8;case 8:return l=h,t[jf.Pretty]?[4,vy.fromCID(t[jf.Pretty].cid)]:[3,10];case 9:return d=s.sent(),[3,12];case 10:return[4,vy.empty()];case 11:d=s.sent(),s.label=12;case 12:return p=d,null!==(y=(null===(n=t[jf.Private])||void 0===n?void 0:n.cid)||null)?[3,14]:[4,my.create()];case 13:return v=s.sent(),g={},[3,17];case 14:return[4,my.fromCID(y)];case 15:return v=s.sent(),[4,Cy(o,v)];case 16:g=s.sent(),s.label=17;case 17:return(m=null===(i=t[jf.PrivateLog])||void 0===i?void 0:i.cid)?[4,ca(m).then((function(e){return e.Links.map(Mf)})).then((function(e){return e.sort((function(e,t){return parseInt(e.name,10)-parseInt(t.name,10)}))}))]:[3,19];case 18:return b=s.sent(),[3,20];case 19:b=[],s.label=20;case 20:return[2,new e({links:t,mmpt:v,privateLog:b,publicTree:l,prettyTree:p,privateTrees:g})]}}))}))},e.prototype.put=function(){return o(this,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return[4,this.putDetailed()];case 1:return[2,e.sent().cid]}}))}))},e.prototype.putDetailed=function(){return o(this,void 0,void 0,(function(){return s(this,(function(e){return[2,Yf(this.links)]}))}))},e.prototype.updateLink=function(e,t){var r=t.cid,n=t.size,i=t.isFile;return this.links[e]=zf(e,r,i,n),this},e.prototype.updatePuttable=function(e,t){return o(this,void 0,void 0,(function(){var r,n;return s(this,(function(i){switch(i.label){case 0:return r=this.updateLink,n=[e],[4,t.putDetailed()];case 1:return[2,r.apply(this,n.concat([i.sent()]))]}}))}))},e.storeRootKey=function(e){return o(this,void 0,void 0,(function(){var t;return s(this,(function(r){switch(r.label){case 0:return[4,He({path:"/private"})];case 1:return t=r.sent(),[4,Ue()];case 2:return[4,r.sent().importSymmKey(e,t)];case 3:return r.sent(),[2]}}))}))},e.prototype.findPrivateTree=function(e){return Ny(this.privateTrees,e)},e.prototype.addPrivateLogEntry=function(t){var r;return o(this,void 0,void 0,(function(){var n,i,o,u,c,f,l,h,p,d,y;return s(this,(function(s){switch(s.label){case 0:return n=a(this.privateLog),i=Math.max(0,n.length-1),(null===(r=n[i])||void 0===r?void 0:r.cid)?[4,ua(n[i].cid)]:[3,2];case 1:return u=s.sent().split(","),[3,3];case 2:u=[],s.label=3;case 3:return(o=u).length+1>e.LOG_CHUNK_SIZE&&(i+=1,o=[]),[4,ze(t)];case 4:return c=s.sent(),f=a(o,[c]),[4,$f(f.join(","))];case 5:return l=s.sent(),n[i]={name:i.toString(),cid:l.cid,size:l.size},[4,la(n.map(Df))];case 6:return h=s.sent(),p=this.updateLink,d=[jf.PrivateLog],y={cid:h.cid,isFile:!1},[4,ha(h.cid)];case 7:return p.apply(this,d.concat([(y.size=s.sent(),y)])),this.privateLog=n,[2]}}))}))},e.prototype.setVersion=function(e){return o(this,void 0,void 0,(function(){var t;return s(this,(function(r){switch(r.label){case 0:return[4,$f(cy(e))];case 1:return t=r.sent(),[2,this.updateLink(jf.Version,t)]}}))}))},e.LOG_CHUNK_SIZE=1020,e}();function By(e,t){return o(this,void 0,void 0,(function(){var r,n,i,o,u,a,c,f;return s(this,(function(s){switch(s.label){case 0:return[4,Ke({path:"/private/"+(r=t.slice(1))})];case 1:return n=s.sent(),[4,v.getItem(n)];case 2:return(i=s.sent())?[2,i]:(o=mc(r),u=Ny(e,o),a=u[0],(c=u[1])?(f=r.replace(new RegExp("^"+a),""),c.exists(f)?[3,4]:[4,c.mkdir(f)]):[2,null]);case 3:s.sent(),s.label=4;case 4:return[2,c.get(f).then((function(e){return e?e.header.bareNameFilter:null}))]}}))}))}function Ny(e,t){var r=bc(t),n=e["/"+r];return n?[r,n]:t.length>0?Ny(e,t.slice(0,-1)):[r,null]}function Cy(e,t){var r=this;return function(e){return Object.entries(e).sort((function(e,t){return e[0].localeCompare(t[0])}))}(e).reduce((function(e,i){var u=i[0],a=i[1];return e.then((function(e){return o(r,void 0,void 0,(function(){var r,i,o,c;return s(this,(function(s){switch(s.label){case 0:return"/"!==(r=function(e){return"/"+e.replace(/^\/?private(\/|$)/,"").replace(/^\/+/,"").replace(/\/+$/,"")}(u))&&""!==r?[3,2]:[4,Ty.fromBaseKey(t,a)];case 1:return i=s.sent(),[3,5];case 2:return[4,By(e,r)];case 3:if(!(o=s.sent()))throw new Error("Was trying to load the PrivateTree for the path `"+u+"`, but couldn't find the bare name filter for it.");return[4,Ty.fromBareNameFilter(t,o,a)];case 4:i=s.sent(),s.label=5;case 5:return[2,n(n({},e),(c={},c[r]=i,c))]}}))}))}))}),Promise.resolve({}))}function Ry(e){return o(this,void 0,void 0,(function(){var t=this;return s(this,(function(r){return[2,kc(e).reduce((function(e,r){return o(t,void 0,void 0,(function(){var t,i=this;return s(this,(function(u){switch(u.label){case 0:return r.startsWith("/public")?[2,e]:[4,He({path:r})];case 1:return t=u.sent(),[2,e.then((function(e){return o(i,void 0,void 0,(function(){var i,o,u;return s(this,(function(s){switch(s.label){case 0:return i=[n({},e)],u={},o=r,[4,Le(t)];case 1:return[2,n.apply(void 0,i.concat([(u[o]=s.sent(),u)]))]}}))}))}))]}}))}))}),Promise.resolve({}))]}))}))}function Uy(){return"webnative.wnfs_cid_log-"+S.endpoints.lobby}function jy(){return o(this,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return[4,v.getItem(Uy())];case 1:return[2,e.sent()||[]]}}))}))}function Ly(e){return o(this,void 0,void 0,(function(){var t;return s(this,(function(r){switch(r.label){case 0:return[4,jy()];case 1:return[2,[(t=r.sent()).indexOf(e),t.length]]}}))}))}function Dy(){return o(this,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return[4,jy()];case 1:return[2,e.sent()[0]]}}))}))}function Py(e){return o(this,void 0,void 0,(function(){var t,r;return s(this,(function(n){switch(n.label){case 0:return[4,jy()];case 1:return t=n.sent(),r=a([e],t).slice(0,1e3),[4,v.setItem(Uy(),r)];case 2:return n.sent(),[2]}}))}))}function My(){return o(this,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return[4,v.removeItem(Uy())];case 1:return e.sent(),[2]}}))}))}function zy(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];S.debug&&console.log.apply(console,e)}var Fy="Qmc5m94Gu7z62RC8waSKkZUrCCBJPyHbkpmGzEePxy2oXJ";function Ky(e){return o(this,void 0,void 0,(function(){var t,r,n;return s(this,(function(i){switch(i.label){case 0:return[4,Hy(e)];case 1:if((t=i.sent())===Fy)return[2,null];if(null!==t)return[2,t];i.label=2;case 2:return i.trys.push([2,4,,5]),[4,E(e+".files."+S.endpoints.user)];case 3:return[2,(r=i.sent())===Fy?null:r];case 4:throw n=i.sent(),console.error(n),new Error("Could not locate user root in dns");case 5:return[2]}}))}))}function Hy(e){return o(this,void 0,void 0,(function(){var t;return s(this,(function(r){switch(r.label){case 0:return r.trys.push([0,3,,4]),[4,fetch(S.endpoints.api+"/user/data/"+e,{cache:"reload"})];case 1:return[4,r.sent().json()];case 2:if(t=r.sent(),!nl(t))throw new Error("Did not receive a CID");return[2,t];case 3:return zy("Could not locate user root on Fission server: ",r.sent().toString()),[2,null];case 4:return[2]}}))}))}function Gy(e,t){return o(this,void 0,void 0,(function(){var r,n=this;return s(this,(function(i){switch(i.label){case 0:return r=S.endpoints.api,zy(" Updating your DNSLink:",e),[4,$y(r+"/user/data/"+e,{headers:function(){return o(n,void 0,void 0,(function(){var e,r,n,i,o;return s(this,(function(s){switch(s.label){case 0:return r=(e=Tf).encode,i=(n=Tf).build,o={},[4,I()];case 1:return o.audience=s.sent(),[4,hf()];case 2:return[4,i.apply(n,[(o.issuer=s.sent(),o.potency="APPEND",o.proof=t,o.resource=t.payload.rsc,o)])];case 3:return[2,{authorization:"Bearer "+r.apply(e,[s.sent()])}]}}))}))},retries:100,retryDelay:5e3,retryOn:[502,503,504]},{method:"PATCH"}).then((function(t){return t.status<300?zy(" DNSLink updated:",e):zy(" Failed to update DNSLink for:",e),{success:t.status<300}})).catch((function(t){return zy(" Failed to update DNSLink for:",e),console.error(t),{success:!1}}))];case 1:return[2,i.sent()]}}))}))}function $y(e,t,r,i){return void 0===i&&(i=0),o(this,void 0,void 0,(function(){var o,u;return s(this,(function(s){switch(s.label){case 0:return[4,t.headers()];case 1:return o=s.sent(),[4,fetch(e,n(n({},r),{headers:n(n({},r.headers),o)}))];case 2:return u=s.sent(),t.retryOn.includes(u.status)?i<t.retries?[4,new Promise((function(n,o){return setTimeout((function(){return $y(e,t,r,i+1).then(n,o)}),t.retryDelay)}))]:[3,4]:[3,5];case 3:return[2,s.sent()];case 4:throw new Error("Too many retries for fetch");case 5:return[2,u]}}))}))}var qy=Object.freeze({__proto__:null,lookup:Ky,lookupOnFisson:Hy,update:Gy}),Wy=function(e){function t(t){var r=e.call(this,t)||this;return r.name="NoPermissionError",r}return r(t,e),t}(Error),Vy=Object.freeze({__proto__:null,NoPermissionError:Wy}),Yy=function(){function e(e){var t=this,r=e.root,n=e.permissions,i=e.localOnly;this.localOnly=i||!1,this.proofs={},this.publishHooks=[],this.root=r,this._publishWhenOnline=[],this._publishing=!1,this._whenOnline=this._whenOnline.bind(this),this._beforeLeaving=this._beforeLeaving.bind(this);var o=globalThis;o.filesystems=o.filesystems||[],o.filesystems.push(this),n&&n.app&&n.app.creator&&n.app.name&&(this.appPath=function(e){return function(t){return jf.Private+"/Apps/"+(e.app?e.app.creator+"/":"")+(e.app?e.app.name:"")+(t?"/"+("object"==typeof t?t.join("/"):t):"")}}(n));var s=Lf.throttle(3e3,!1,(function(e,r){if(globalThis.navigator.onLine)return t._publishing=[e,!0],Gy(e,r).then((function(){t._publishing&&t._publishing[0]===e&&(t._publishing=!1)}));t._publishWhenOnline.push([e,r])}),!1);this.publishHooks.push((function(e){Py(e),zy(" Adding to the CID ledger:",e)})),this.publishHooks.push(s),globalThis.addEventListener("online",this._whenOnline),globalThis.addEventListener("beforeunload",this._beforeLeaving)}return e.empty=function(t){return o(this,void 0,void 0,(function(){var r,n,i,o,u;return s(this,(function(s){switch(s.label){case 0:return r=t.permissions,n=t.localOnly,(o=t.rootKey)?[3,2]:[4,Me()];case 1:o=s.sent(),s.label=2;case 2:return i=o,[4,Oy.empty({rootKey:i})];case 3:return u=s.sent(),[2,new e({root:u,permissions:r,localOnly:n})]}}))}))},e.fromCID=function(t,r){return void 0===r&&(r={}),o(this,void 0,void 0,(function(){var n,i,o;return s(this,(function(s){switch(s.label){case 0:return n=r.permissions,i=r.localOnly,[4,Oy.fromCID({cid:t,permissions:n})];case 1:return o=s.sent(),[2,new e({root:o,permissions:n,localOnly:i})]}}))}))},e.prototype.deactivate=function(){var e=this,t=globalThis;t.filesystems=t.filesystems.filter((function(t){return t!==e})),t.removeEventListener("online",this._whenOnline),t.removeEventListener("beforeunload",this._beforeLeaving)},e.prototype.mkdir=function(e,t){return void 0===t&&(t={}),o(this,void 0,void 0,(function(){return s(this,(function(r){switch(r.label){case 0:return[4,this.runOnTree(e,!0,(function(e,t){return e.mkdir(t)}))];case 1:return r.sent(),t.publish?[4,this.publish()]:[3,3];case 2:r.sent(),r.label=3;case 3:return[2,this]}}))}))},e.prototype.ls=function(e){return o(this,void 0,void 0,(function(){return s(this,(function(t){return[2,this.runOnTree(e,!1,(function(e,t){return e.ls(t)}))]}))}))},e.prototype.add=function(e,t,r){return void 0===r&&(r={}),o(this,void 0,void 0,(function(){return s(this,(function(n){switch(n.label){case 0:return[4,this.runOnTree(e,!0,(function(e,r){return e.add(r,t)}))];case 1:return n.sent(),r.publish?[4,this.publish()]:[3,3];case 2:n.sent(),n.label=3;case 3:return[2,this]}}))}))},e.prototype.cat=function(e){return o(this,void 0,void 0,(function(){return s(this,(function(t){return[2,this.runOnTree(e,!1,(function(e,t){return e.cat(t)}))]}))}))},e.prototype.exists=function(e){return o(this,void 0,void 0,(function(){return s(this,(function(t){return[2,this.runOnTree(e,!1,(function(e,t){return e.exists(t)}))]}))}))},e.prototype.rm=function(e){return o(this,void 0,void 0,(function(){return s(this,(function(t){switch(t.label){case 0:return[4,this.runOnTree(e,!0,(function(e,t){return e.rm(t)}))];case 1:return t.sent(),[2,this]}}))}))},e.prototype.get=function(e){return o(this,void 0,void 0,(function(){return s(this,(function(t){return[2,this.runOnTree(e,!1,(function(e,t){return e.get(t)}))]}))}))},e.prototype.mv=function(e,t){return o(this,void 0,void 0,(function(){return s(this,(function(r){switch(r.label){case 0:if(n=t,!(mc(e)[0]===mc(n)[0]))throw new Error("`mv` is only supported on the same tree for now");return[4,this.exists(t)];case 1:if(r.sent())throw new Error("Destination already exists");return[4,this.runOnTree(e,!0,(function(e,r){var n=_c(t).nextPath;return e.mv(r,n||"")}))];case 2:return r.sent(),[2,this]}var n}))}))},e.prototype.read=function(e){return o(this,void 0,void 0,(function(){return s(this,(function(t){return[2,this.cat(e)]}))}))},e.prototype.write=function(e,t,r){return void 0===r&&(r={}),o(this,void 0,void 0,(function(){return s(this,(function(n){return[2,this.add(e,t,r)]}))}))},e.prototype.publish=function(){return o(this,void 0,void 0,(function(){var e,t,r=this;return s(this,(function(n){switch(n.label){case 0:return e=Array.from(Object.entries(this.proofs)),this.proofs={},[4,this.root.put()];case 1:return t=n.sent(),e.forEach((function(e){e[0];var n=e[1];r.publishHooks.forEach((function(e){return e(t,n)}))})),[2,t]}}))}))},e.prototype.runOnTree=function(e,t,r){return o(this,void 0,void 0,(function(){var n,i,o,u,a,c,f,l,h,p;return s(this,(function(s){switch(s.label){case 0:return n=mc(e),i=n[0],o=bc(n.slice(1)),this.localOnly?[3,2]:[4,Cf(e)];case 1:if(!(u=s.sent())||Sf(u)||!u.signature)throw new Wy("I don't have the necessary permissions to "+(t?"make changes to":"query")+' the file system at "'+e+'"');this.proofs[u.signature]=u,s.label=2;case 2:return i!==jf.Public?[3,7]:[4,r(this.root.publicTree,o)];case 3:return a=s.sent(),t&&Sy.instanceOf(a)?[4,r(this.root.prettyTree,o)]:[3,6];case 4:return c=s.sent(),this.root.publicTree=a,this.root.prettyTree=c,[4,Promise.all([this.root.updatePuttable(jf.Public,this.root.publicTree),this.root.updatePuttable(jf.Pretty,this.root.prettyTree)])];case 5:s.sent(),s.label=6;case 6:return[3,18];case 7:if(i!==jf.Private)return[3,14];if(f=this.root.findPrivateTree(n.slice(1)),l=f[0],!(h=f[1]))throw new Wy("I don't have the necessary permissions to make these changes to the file system");return[4,r(h,o.replace(new RegExp("^"+l+"/?"),""))];case 8:return a=s.sent(),t&&Ty.instanceOf(a)?(this.root.privateTrees[l]=a,[4,a.put()]):[3,13];case 9:return s.sent(),[4,this.root.updatePuttable(jf.Private,this.root.mmpt)];case 10:return s.sent(),[4,this.root.mmpt.put()];case 11:return p=s.sent(),[4,this.root.addPrivateLogEntry(p)];case 12:s.sent(),s.label=13;case 13:return[3,18];case 14:if(i!==jf.Pretty||!t)return[3,15];throw new Error("The pretty path is read only");case 15:return i!==jf.Pretty?[3,17]:[4,r(this.root.prettyTree,o)];case 16:return a=s.sent(),[3,18];case 17:throw new Error("Not a valid FileSystem path");case 18:return[2,a]}}))}))},e.prototype._whenOnline=function(){var e=this,t=a(this._publishWhenOnline);this._publishWhenOnline=[],t.forEach((function(t){var r=t[0],n=t[1];e.publishHooks.forEach((function(e){return e(r,n)}))}))},e.prototype._beforeLeaving=function(e){var t="Are you sure you want to leave? We don't control the browser so you may lose your data.";if(this._publishing||this._publishWhenOnline.length)return(e||globalThis.event).returnValue=t,t},e}();function Jy(e,t,r){return o(this,void 0,void 0,(function(){var n,i,o,u,a,c,f,l,h,p;return s(this,(function(s){switch(s.label){case 0:return(o=t)?[3,2]:[4,ie()];case 1:o=s.sent()||void 0,s.label=2;case 2:if(!(t=o))throw new Error("User hasn't authenticated yet");return[4,Rf([])];case 3:return s.sent(),navigator.onLine?[4,Ky(t)]:[3,5];case 4:return a=s.sent(),[3,6];case 5:a=null,s.label=6;case 6:return(u=a)?[4,Ly(u)]:[3,8];case 7:return l=s.sent(),[3,9];case 8:l=[-1,0],s.label=9;case 9:return f=(c=l)[0],c[1],navigator.onLine?[3,11]:[4,Dy()];case 10:return n=s.sent(),[3,18];case 11:return u?[3,13]:[4,Dy()];case 12:return(n=s.sent())?zy(" No DNSLink, using local CID:",n):zy(" Creating a new file system"),[3,18];case 13:return 0!==f?[3,14]:(zy(" DNSLink is up to date:",n=u),[3,18]);case 14:return f>0?[4,Dy()]:[3,16];case 15:return n=s.sent(),zy(" DNSLink is outdated ("+(1===f?"1 newer local entry":f+" newer local entries")+"), using local CID:",n),[3,18];case 16:return[4,Py(n=u)];case 17:s.sent(),zy(" DNSLink is newer:",n),s.label=18;case 18:return h=e||void 0,n?[4,Yy.fromCID(n,{permissions:h})]:[3,20];case 19:return p=s.sent(),[3,21];case 20:p=null,s.label=21;case 21:if(i=p)return[2,i];if(!r)throw new Error("Can't make new filesystem without a root AES key");return[4,Yy.empty({permissions:h,rootKey:r})];case 22:return[4,Zy(i=s.sent())];case 23:return s.sent(),[2,i]}}))}))}function Zy(e){return o(this,void 0,void 0,(function(){return s(this,(function(t){switch(t.label){case 0:return[4,e.mkdir("private/Apps")];case 1:return t.sent(),[4,e.mkdir("private/Audio")];case 2:return t.sent(),[4,e.mkdir("private/Documents")];case 3:return t.sent(),[4,e.mkdir("private/Photos")];case 4:return t.sent(),[4,e.mkdir("private/Video")];case 5:return t.sent(),[4,e.publish()];case 6:return t.sent(),[2]}}))}))}var Xy=Object.freeze({__proto__:null,index:function(){return o(this,void 0,void 0,(function(){var e,t,r,n,i,o,u,a,c;return s(this,(function(s){switch(s.label){case 0:return e=S.endpoints.api,[4,Nf("*")];case 1:if(null===(t=s.sent()))throw"Could not find your local UCAN";return i=(n=Tf).encode,u=(o=Tf).build,c={},[4,I()];case 2:return c.audience=s.sent(),[4,hf()];case 3:return[4,u.apply(o,[(c.issuer=s.sent(),c.proof=t,c.potency=null,c)])];case 4:return r=i.apply(n,[s.sent()]),[4,fetch(e+"/app",{method:"GET",headers:{authorization:"Bearer "+r}})];case 5:return[4,s.sent().json()];case 6:return a=s.sent(),[2,Object.values(a).filter((function(e){return e.length>0})).map((function(e){return{domain:e[0]}}))]}}))}))},create:function(e){return o(this,void 0,void 0,(function(){var t,r,n,i,o,u,a,c,f;return s(this,(function(s){switch(s.label){case 0:return t=S.endpoints.api,[4,Nf("*")];case 1:if(null===(r=s.sent()))throw"Could not find your local UCAN";return o=(i=Tf).encode,a=(u=Tf).build,f={},[4,I()];case 2:return f.audience=s.sent(),[4,hf()];case 3:return[4,a.apply(u,[(f.issuer=s.sent(),f.proof=r,f.potency=null,f)])];case 4:return n=o.apply(i,[s.sent()]),c=X(e)?t+"/app?subdomain="+encodeURIComponent(e):t+"/app",[4,fetch(c,{method:"POST",headers:{authorization:"Bearer "+n}})];case 5:return[4,s.sent().json()];case 6:return[2,{domain:s.sent()}]}}))}))},deleteByDomain:function(e){return o(this,void 0,void 0,(function(){var t,r,n,i,o,u,a,c,f,l;return s(this,(function(s){switch(s.label){case 0:return t=S.endpoints.api,[4,Nf(e)];case 1:if(null===(r=s.sent()))throw new Error("Could not find your local UCAN");return o=(i=Tf).encode,a=(u=Tf).build,l={},[4,I()];case 2:return l.audience=s.sent(),[4,hf()];case 3:return[4,a.apply(u,[(l.issuer=s.sent(),l.proof=r,l.potency=null,l)])];case 4:return n=o.apply(i,[s.sent()]),[4,fetch(t+"/app",{method:"GET",headers:{authorization:"Bearer "+n}})];case 5:return[4,s.sent().json()];case 6:if(c=s.sent(),null==(f=Object.entries(c).find((function(t){return t[0],t[1].includes(e)}))))throw new Error("Couldn't find an app with domain "+e);return[4,fetch(t+"/app/"+encodeURIComponent(f[0]),{method:"DELETE",headers:{authorization:"Bearer "+n}})];case 7:return s.sent(),[2]}}))}))},publish:function(e,t){return o(this,void 0,void 0,(function(){var r,n,i,o,u,a,c,f;return s(this,(function(s){switch(s.label){case 0:return r=S.endpoints.api,[4,Nf(e)];case 1:if(null===(n=s.sent()))throw"Could not find your local UCAN";return u=(o=Tf).encode,c=(a=Tf).build,f={},[4,I()];case 2:return f.audience=s.sent(),[4,hf()];case 3:return[4,c.apply(a,[(f.issuer=s.sent(),f.proof=n,f.potency=null,f)])];case 4:return i=u.apply(o,[s.sent()]),[4,fetch(r+"/app/"+e+"/"+t,{method:"PATCH",headers:{authorization:"Bearer "+i}})];case 5:return s.sent(),[2]}}))}))}}),Qy=["fission","ipfs","ipns","did","id","identity",".htaccess","htaccess",".htpasswd","htpasswd",".well-known","well-known","400","401","403","404","405","406","407","408","409","410","411","412","413","414","415","416","417","421","422","423","424","426","428","429","431","500","501","502","503","504","505","506","507","508","509","510","511","_domainkey","about","about-us","abuse","access","account","accounts","ad","add","admin","administration","administrator","ads","ads.txt","advertise","advertising","aes128-ctr","aes128-gcm","aes192-ctr","aes256-ctr","aes256-gcm","affiliate","affiliates","ajax","alert","alerts","alpha","amp","analytics","api","app","app-ads.txt","apps","asc","assets","atom","auth","authentication","authorize","autoconfig","autodiscover","avatar","backup","banner","banners","bbs","beta","billing","billings","blog","blogs","board","bookmark","bookmarks","broadcasthost","business","buy","cache","calendar","campaign","captcha","careers","cart","cas","categories","category","cdn","cgi","cgi-bin","chacha20-poly1305","change","channel","channels","chart","chat","checkout","clear","client","close","cloud","cms","com","comment","comments","community","compare","compose","config","connect","contact","contest","cookies","copy","copyright","count","cp","cpanel","create","crossdomain.xml","css","curve25519-sha256","customer","customers","customize","dashboard","db","deals","debug","delete","desc","destroy","dev","developer","developers","diffie-hellman-group-exchange-sha256","diffie-hellman-group14-sha1","disconnect","discuss","dns","dns0","dns1","dns2","dns3","dns4","docs","documentation","domain","download","downloads","downvote","draft","drop","ecdh-sha2-nistp256","ecdh-sha2-nistp384","ecdh-sha2-nistp521","edit","editor","email","enterprise","error","errors","event","events","example","exception","exit","explore","export","extensions","false","family","faq","faqs","favicon.ico","features","feed","feedback","feeds","file","files","filter","follow","follower","followers","following","fonts","forgot","forgot-password","forgotpassword","form","forms","forum","forums","friend","friends","ftp","get","git","go","graphql","group","groups","guest","guidelines","guides","head","header","help","hide","hmac-sha","hmac-sha1","hmac-sha1-etm","hmac-sha2-256","hmac-sha2-256-etm","hmac-sha2-512","hmac-sha2-512-etm","home","host","hosting","hostmaster","htpasswd","http","httpd","https","humans.txt","icons","images","imap","img","import","index","info","insert","investors","invitations","invite","invites","invoice","is","isatap","issues","it","jobs","join","js","json","keybase.txt","learn","legal","license","licensing","like","limit","live","load","local","localdomain","localhost","lock","login","logout","lost-password","m","mail","mail0","mail1","mail2","mail3","mail4","mail5","mail6","mail7","mail8","mail9","mailer-daemon","mailerdaemon","map","marketing","marketplace","master","me","media","member","members","message","messages","metrics","mis","mobile","moderator","modify","more","mx","mx1","my","net","network","new","news","newsletter","newsletters","next","nil","no-reply","nobody","noc","none","noreply","notification","notifications","ns","ns0","ns1","ns2","ns3","ns4","ns5","ns6","ns7","ns8","ns9","null","oauth","oauth2","offer","offers","online","openid","order","orders","overview","owa","owner","page","pages","partners","passwd","password","pay","payment","payments","photo","photos","pixel","plans","plugins","policies","policy","pop","pop3","popular","portal","portfolio","post","postfix","postmaster","poweruser","preferences","premium","press","previous","pricing","print","privacy","privacy-policy","private","prod","product","production","profile","profiles","project","projects","public","purchase","put","quota","recover","recovery","redirect","reduce","refund","refunds","register","registration","remove","replies","reply","report","request","request-password","reset","reset-password","response","return","returns","review","reviews","robots.txt","root","rootuser","rsa-sha2-2","rsa-sha2-512","rss","rules","sales","save","script","sdk","search","secure","security","select","services","session","sessions","settings","setup","share","shift","shop","signin","signup","site","sitemap","sites","smtp","sort","source","sql","ssh","ssh-rsa","ssl","ssladmin","ssladministrator","sslwebmaster","stage","staging","stat","static","statistics","stats","status","store","style","styles","stylesheet","stylesheets","subdomain","subscribe","sudo","super","superuser","support","survey","sync","sysadmin","system","tablet","tag","tags","team","telnet","terms","terms-of-use","test","testimonials","theme","themes","today","tools","topic","topics","tour","training","translate","translations","trending","trial","true","umac-128","umac-128-etm","umac-64","umac-64-etm","undefined","unfollow","unlike","unsubscribe","update","upgrade","usenet","user","username","users","uucp","var","verify","video","view","void","vote","vpn","webmail","webmaster","website","widget","widgets","wiki","wpad","write","www","www-data","www1","www2","www3","www4","you","yourname","yourusername","zlib"];var ev=Object.freeze({__proto__:null,createAccount:function(e){return o(this,void 0,void 0,(function(){var t,r,n,i,o,u,a;return s(this,(function(s){switch(s.label){case 0:return t=S.endpoints.api,i=(n=Tf).encode,u=(o=Tf).build,a={},[4,I()];case 1:return a.audience=s.sent(),[4,hf()];case 2:return[4,u.apply(o,[(a.issuer=s.sent(),a)])];case 3:return r=i.apply(n,[s.sent()]),[4,fetch(t+"/user",{method:"PUT",headers:{authorization:"Bearer "+r,"content-type":"application/json"},body:JSON.stringify(e)})];case 4:return[2,{success:s.sent().status<300}]}}))}))},resendVerificationEmail:function(){return o(this,void 0,void 0,(function(){var e,t,r,n,i,o;return s(this,(function(s){switch(s.label){case 0:return e=S.endpoints.api,[4,Cf("*")];case 1:if(null===(t=s.sent()))throw"Could not find your local UCAN";return i=(n=Tf).build,o={},[4,I()];case 2:return o.audience=s.sent(),[4,hf()];case 3:return[4,i.apply(n,[(o.issuer=s.sent(),o.proof=t,o.potency=null,o)])];case 4:return r=s.sent(),[4,fetch(e+"/user/email/resend",{method:"POST",headers:{authorization:"Bearer "+r}})];case 5:return[2,{success:s.sent().status<300}]}}))}))},storeFileSystemRootKey:function(e){return Oy.storeRootKey(e)},isUsernameAvailable:function(e){return o(this,void 0,void 0,(function(){return s(this,(function(t){switch(t.label){case 0:return[4,fetch(S.endpoints.api+"/user/data/"+e)];case 1:return[2,!t.sent().ok]}}))}))},isUsernameValid:function(e){return!e.startsWith("-")&&!e.endsWith("-")&&!e.startsWith("_")&&/^[a-zA-Z0-9_-]+$/.test(e)&&!Qy.includes(e.toLowerCase())}});var tv,rv,nv=Object.freeze({__proto__:null,debug:function(e){var t=e.enabled;return S.debug=t,S.debug},endpoints:function(e){return S.endpoints=n(n({},S.endpoints),e),n({},S.endpoints)}});function iv(t){return o(this,void 0,void 0,(function(){var r,n,i,u,a,c,f,l,h,p,d,y,g,m,b,_,w,k,E,A,S,x,I=this;return s(this,(function(T){switch(T.label){case 0:if(r=(t=t||{}).permissions||null,n=t.autoRemoveUrlParams,i=void 0===n||n,u=t.rootKey,(a=r||{}).app,a.fs,c=function(e){return o(I,void 0,void 0,(function(){var n;return s(this,(function(i){switch(i.label){case 0:return!1!==t.loadFileSystem?[3,1]:(n=void 0,[3,3]);case 1:return[4,Jy(r,e,u)];case 2:n=i.sent(),i.label=3;case 3:return[2,n]}}))}))},!1===globalThis.isSecureContext)throw e.InitialisationError.InsecureContext;return[4,ov()];case 1:if(!1===T.sent())throw e.InitialisationError.UnsupportedBrowser;return f=new URL(window.location.href),l=f.searchParams.get("authorised"),h=f.searchParams.get("cancelled"),l?(p="t"===f.searchParams.get("newUser"),d=f.searchParams.get("username")||"",[4,lv(l)]):[3,7];case 2:return T.sent(),[4,v.setItem(ne,d)];case 3:return T.sent(),i&&(f.searchParams.delete("authorised"),f.searchParams.delete("newUser"),f.searchParams.delete("username"),history.replaceState(null,document.title,f.toString())),(y=r)?[4,hv(r)]:[3,5];case 4:y=!1===T.sent(),T.label=5;case 5:return y?(console.warn("Unable to validate filesystem secrets"),[2,fv(r)]):r&&!1===Uf(r)?(console.warn("Unable to validate UCAN permissions"),[2,fv(r)]):(g=uv,m=[r,p,d],[4,c(d)]);case 6:return[2,g.apply(void 0,m.concat([T.sent()]))];case 7:if(h)return b=function(e){switch(h){case"DENIED":return"User denied authorisation";default:return"Unknown reason"}}(),[2,av(r,b)];Rf([]),T.label=8;case 8:return[4,ie()];case 9:return(_=T.sent())&&r?[4,hv(r)]:[3,14];case 10:return w=T.sent(),k=Uf(r),w&&k?(E=cv,A=[r,_],[4,c(_)]):[3,12];case 11:return[2,E.apply(void 0,A.concat([T.sent()]))];case 12:return[2,fv(r)];case 13:return[3,17];case 14:return _?(S=cv,x=[r,_],[4,c(_)]):[3,16];case 15:return[2,S.apply(void 0,x.concat([T.sent()]))];case 16:return[2,fv(r)];case 17:return[2]}}))}))}function ov(){return o(this,void 0,void 0,(function(){var e;return s(this,(function(t){switch(t.label){case 0:return(e=v.supports(v.INDEXEDDB))?[4,new Promise((function(e){var t=indexedDB.open("testDatabase");t.onsuccess=function(){return e(!0)},t.onerror=function(){return e(!1)}}))]:[3,2];case 1:e=t.sent(),t.label=2;case 2:return[2,e]}}))}))}(tv=e.Scenario||(e.Scenario={})).NotAuthorised="NOT_AUTHORISED",tv.AuthSucceeded="AUTH_SUCCEEDED",tv.AuthCancelled="AUTH_CANCELLED",tv.Continuation="CONTINUATION",(rv=e.InitialisationError||(e.InitialisationError={})).InsecureContext="INSECURE_CONTEXT",rv.UnsupportedBrowser="UNSUPPORTED_BROWSER";var sv=Yy;function uv(t,r,n,i){return{scenario:e.Scenario.AuthSucceeded,permissions:t,authenticated:!0,throughLobby:!0,fs:i,newUser:r,username:n}}function av(t,r){return{scenario:e.Scenario.AuthCancelled,permissions:t,authenticated:!1,throughLobby:!0,cancellationReason:r}}function cv(t,r,n){return{scenario:e.Scenario.Continuation,permissions:t,authenticated:!0,newUser:!1,throughLobby:!1,fs:n,username:r}}function fv(t){return{scenario:e.Scenario.NotAuthorised,permissions:t,authenticated:!1}}function lv(e){return o(this,void 0,void 0,(function(){var t,r,n,i,u,a,c,f,l,h,p,d,g,b,_=this;return s(this,(function(w){switch(w.label){case 0:return[4,Ue()];case 1:return t=w.sent(),i=(n=JSON).parse,[4,ua(e)];case 2:return r=i.apply(n,[w.sent()]),u=m.base64ToArrBuf(r.iv),[4,t.decrypt(r.sessionKey)];case 3:return a=w.sent(),[4,crypto.subtle.importKey("raw",m.base64ToArrBuf(a),"AES-GCM",!1,["encrypt","decrypt"])];case 4:return c=w.sent(),h=(l=JSON).parse,d=(p=m).arrBufToStr,[4,crypto.subtle.decrypt({name:"AES-GCM",iv:u},c,m.base64ToArrBuf(r.secrets))];case 5:return f=h.apply(l,[d.apply(p,[w.sent(),y.CharSize.B8])]),g=f.fs,b=f.ucans,[4,Promise.all(Object.entries(g).map((function(e){var r=e[0],n=e[1],i=n.bareNameFilter,u=n.key;return o(_,void 0,void 0,(function(){var e,n;return s(this,(function(o){switch(o.label){case 0:return[4,He({path:r})];case 1:return e=o.sent(),[4,Ke({path:r})];case 2:return n=o.sent(),[4,t.importSymmKey(u,e)];case 3:return o.sent(),[4,v.setItem(n,i)];case 4:return o.sent(),[2]}}))}))})))];case 6:return w.sent(),[4,Rf(b)];case 7:return w.sent(),[2]}}))}))}function hv(e){return o(this,void 0,void 0,(function(){var t,r=this;return s(this,(function(n){switch(n.label){case 0:return[4,Ue()];case 1:return t=n.sent(),[2,kc(e).reduce((function(e,n){return e.then((function(e){return o(r,void 0,void 0,(function(){var r;return s(this,(function(i){switch(i.label){case 0:return!1===e||n.startsWith("/public")?[2,e]:[4,He({path:n})];case 1:return r=i.sent(),[4,t.keyExists(r)];case 2:return[2,i.sent()]}}))}))}))}),Promise.resolve(!0))]}}))}))}e.VERSION=te,e.apps=Xy,e.authenticatedUsername=function(){return o(this,void 0,void 0,(function(){return s(this,(function(e){return[2,ie()]}))}))},e.dataRoot=qy,e.did=mf,e.dns=A,e.errors=Vy,e.fs=sv,e.initialise=iv,e.initialize=iv,e.ipfs=gc,e.isSupported=ov,e.keystore=pc,e.leave=function(e){var t=(void 0===e?{}:e).withoutRedirect;return o(this,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return[4,v.removeItem(ne)];case 1:return e.sent(),[4,Bf()];case 2:return e.sent(),[4,My()];case 3:return e.sent(),[4,Re()];case 4:return e.sent(),(globalThis.filesystems||[]).forEach((function(e){return e.deactivate()})),!t&&globalThis.location&&(globalThis.location.href=S.endpoints.lobby),[2]}}))}))},e.loadFileSystem=Jy,e.lobby=ev,e.redirectToLobby=function(e,t){return o(this,void 0,void 0,(function(){var r,n,i,o,u,a;return s(this,(function(s){switch(s.label){case 0:return r=null==e?void 0:e.app,n=null==e?void 0:e.fs,i=null==e?void 0:e.platform,[4,lf()];case 1:return o=s.sent(),[4,hf()];case 2:return u=s.sent(),t=t||window.location.href,a=[["didExchange",o],["didWrite",u],["redirectTo",t],["sdk",te.toString()]].concat(r?[["appFolder",r.creator+"/"+r.name]]:[],n&&n.privatePaths?n.privatePaths.map((function(e){return["privatePath",e]})):[],n&&n.publicPaths?n.publicPaths.map((function(e){return["publicPath",e]})):[]).concat(function(){var e=null==i?void 0:i.apps;switch(typeof e){case"string":return[["app",e]];case"object":return e.map((function(e){return["app",e]}));default:return[]}}()),window.location.href=S.endpoints.lobby+"?"+a.map((function(e){var t=e[0],r=e[1];return encodeURIComponent(t)+"="+encodeURIComponent(r)})).join("&"),[2]}}))}))},e.setup=nv,e.ucan=Tf,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=index.umd.min.js.map
